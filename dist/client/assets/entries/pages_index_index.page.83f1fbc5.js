import{_ as l_}from"../chunks/chunk-c27b6911.js";import{p as u_,q as c_}from"../chunks/chunk-e313877f.js";var f_={410:(O,J,ut)=>{var st,Lt,et;/*!
* Backbone.Undo.js v0.2
* 
* Copyright (c)2013 Oliver Sartun
* Released under the MIT License
*
* Documentation and full license available at
* https://github.com/osartun/Backbone.Undo.js
*/(function(q){Lt=[ut(50),ut(316)],st=q,et=typeof st=="function"?st.apply(J,Lt):st,et!==void 0&&(O.exports=et)})(function(q,k){var N=Array.prototype.slice;function S(H,nt,B){return B.length<=4?H.call(nt,B[0],B[1],B[2],B[3]):H.apply(nt,B)}function L(H,nt){return N.call(H,nt)}function A(H,nt){return H==null?!1:(q.isArray(nt)||(nt=L(arguments,1)),q.all(nt,function(B){return B in H}))}var R=function(){var H=!1,nt=-1;function B(){nt++,H=!0,q.defer(function(){H=!1})}return function(){return H||B(),nt}}();function z(){this.registeredObjects=[],this.cidIndexes=[]}z.prototype={isRegistered:function(H){return H&&H.cid?this.registeredObjects[H.cid]:q.contains(this.registeredObjects,H)},register:function(H){return this.isRegistered(H)?!1:(H&&H.cid?(this.registeredObjects[H.cid]=H,this.cidIndexes.push(H.cid)):this.registeredObjects.push(H),!0)},unregister:function(H){if(this.isRegistered(H)){if(H&&H.cid)delete this.registeredObjects[H.cid],this.cidIndexes.splice(q.indexOf(this.cidIndexes,H.cid),1);else{var nt=q.indexOf(this.registeredObjects,H);this.registeredObjects.splice(nt,1)}return!0}return!1},get:function(){return q.map(this.cidIndexes,function(H){return this.registeredObjects[H]},this).concat(this.registeredObjects)}};function it(H,nt,B,tt){for(var mt=0,V=nt.length,Et;mt<V;mt++)if(Et=nt[mt],!!Et){if(H==="on"){if(!tt.objectRegistry.register(Et))continue}else if(!tt.objectRegistry.unregister(Et))continue;q.isFunction(Et[H])&&Et[H]("all",B,tt)}}function Ct(H,nt){var B=nt.type,tt=nt.undoTypes,mt=!tt[B]||tt[B][H];q.isFunction(mt)&&mt(nt.object,nt.before,nt.after,nt.options)}function Mt(H,nt,B,tt,mt){if(!(B.isCurrentlyUndoRedoing||H==="undo"&&B.pointer===-1||H==="redo"&&B.pointer===B.length-1)){B.isCurrentlyUndoRedoing=!0;var V,Et,j=H==="undo";for(mt?Et=j&&B.pointer===B.length-1||!j&&B.pointer===-1?q.clone(B.models):N.apply(B.models,j?[0,B.pointer]:[B.pointer,B.length-1]):(V=B.at(j?B.pointer:B.pointer+1),Et=tt?B.where({magicFusionIndex:V.get("magicFusionIndex")}):[V]),B.pointer+=(j?-1:1)*Et.length;V=j?Et.pop():Et.shift();)V[H]();B.isCurrentlyUndoRedoing=!1,nt.trigger(H,nt)}}function Ht(H,nt){var B=H.condition,tt=typeof B;return tt==="function"?!!S(B,H,nt):tt==="boolean"?B:!0}function Ft(H,nt,B,tt){if(H.track&&!H.isCurrentlyUndoRedoing&&nt in tt&&Ht(tt[nt],B)){var mt=S(tt[nt].on,tt[nt],B),V;if(A(mt,"object","before","after")){if(mt.type=nt,mt.magicFusionIndex=R(),mt.undoTypes=tt,H.pointer<H.length-1)for(var V=H.length-H.pointer-1;V--;)H.pop();H.pointer=H.length,H.add(mt),H.length>H.maximumStackLength&&(H.shift(),H.pointer--)}}}var xt={add:{undo:function(H,nt,B,tt){H.remove(B,tt)},redo:function(H,nt,B,tt){tt.index&&(tt.at=tt.index),H.add(B,tt)},on:function(H,nt,B){return{object:nt,before:void 0,after:H,options:q.clone(B)}}},remove:{undo:function(H,nt,B,tt){"index"in tt&&(tt.at=tt.index),H.add(nt,tt)},redo:function(H,nt,B,tt){H.remove(nt,tt)},on:function(H,nt,B){return{object:nt,before:H,after:void 0,options:q.clone(B)}}},change:{undo:function(H,nt,B,tt){q.isEmpty(nt)?q.each(q.keys(B),H.unset,H):(H.set(nt),tt&&tt.unsetData&&tt.unsetData.before&&tt.unsetData.before.length&&q.each(tt.unsetData.before,H.unset,H))},redo:function(H,nt,B,tt){q.isEmpty(B)?q.each(q.keys(nt),H.unset,H):(H.set(B),tt&&tt.unsetData&&tt.unsetData.after&&tt.unsetData.after.length&&q.each(tt.unsetData.after,H.unset,H))},on:function(H,nt){var B=H.changedAttributes(),tt=q.keys(B),mt=q.pick(H.previousAttributes(),tt),V=q.keys(mt),Et=(nt||(nt={})).unsetData={after:[],before:[]};return tt.length!=V.length&&(tt.length>V.length?q.each(tt,function(j){j in mt||Et.before.push(j)},this):q.each(V,function(j){j in B||Et.after.push(j)})),{object:H,before:mt,after:B,options:q.clone(nt)}}},reset:{undo:function(H,nt,B){H.reset(nt)},redo:function(H,nt,B){H.reset(B)},on:function(H,nt){return{object:H,before:nt.previousModels,after:q.clone(H.models)}}}};function _t(){}_t.prototype=xt;function qt(H,nt,B,tt){if(typeof nt=="object")return q.each(nt,function(mt,V){H===2?qt(H,mt,B,tt):qt(H,V,mt,B)});switch(H){case 0:A(B,"undo","redo","on")&&q.all(q.pick(B,"undo","redo","on"),q.isFunction)&&(tt[nt]=B);break;case 1:tt[nt]&&q.isObject(B)&&(tt[nt]=q.extend({},tt[nt],B));break;case 2:delete tt[nt];break}return this}var le=k.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(H){Ct("undo",this.attributes)},redo:function(H){Ct("redo",this.attributes)}}),ce=k.Collection.extend({model:le,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(H){this.maximumStackLength=H}}),te=k.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(H){this.stack=new ce,this.objectRegistry=new z,this.undoTypes=new _t,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(nt,B){this.stack.setMaxLength(B)},this),H&&H.track&&this.startTracking(),H&&H.register&&(q.isArray(H.register)||q.isArguments(H.register)?S(this.register,this,H.register):this.register(H.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(H){Ft(this.stack,H,L(arguments,1),this.undoTypes)},register:function(){it("on",arguments,this._addToStack,this)},unregister:function(){it("off",arguments,this._addToStack,this)},unregisterAll:function(){S(this.unregister,this,this.objectRegistry.get())},undo:function(H){Mt("undo",this,this.stack,H)},undoAll:function(){Mt("undo",this,this.stack,!1,!0)},redo:function(H){Mt("redo",this,this.stack,H)},redoAll:function(){Mt("redo",this,this.stack,!1,!0)},isAvailable:function(H){var nt=this.stack,B=nt.length;switch(H){case"undo":return B>0&&nt.pointer>-1;case"redo":return B>0&&nt.pointer<B-1;default:return!1}},merge:function(H){for(var nt=q.isArray(H)?H:L(arguments),B;B=nt.pop();)B instanceof te&&B.stack instanceof ce&&(B.stack=this.stack)},addUndoType:function(H,nt){qt(0,H,nt,this.undoTypes)},changeUndoType:function(H,nt){qt(1,H,nt,this.undoTypes)},removeUndoType:function(H){qt(2,H,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return q.extend(te,{defaults:function(H){q.extend(te.prototype.defaults,H)},addUndoType:function(H,nt){qt(0,H,nt,xt)},changeUndoType:function(H,nt){qt(1,H,nt,xt)},removeUndoType:function(H){qt(2,H,void 0,xt)}}),k.UndoManager=te})},316:(O,J,ut)=>{var st,Lt;(function(et){var q=typeof self=="object"&&self.self===self&&self||typeof ut.g=="object"&&ut.g.global===ut.g&&ut.g;st=[ut(50),ut(895),J],Lt=(function(k,N,S){q.Backbone=et(q,S,k,N)}).apply(J,st),Lt!==void 0&&(O.exports=Lt)})(function(et,q,k,N){var S=et.Backbone,L=Array.prototype.slice;q.VERSION="1.4.1",q.$=N,q.noConflict=function(){return et.Backbone=S,this},q.emulateHTTP=!1,q.emulateJSON=!1;var A=q.Events={},R=/\s+/,z,it=function(T,F,Q,gt,Pt){var Y=0,St;if(Q&&typeof Q=="object")for(gt!==void 0&&("context"in Pt)&&Pt.context===void 0&&(Pt.context=gt),St=k.keys(Q);Y<St.length;Y++)F=it(T,F,St[Y],Q[St[Y]],Pt);else if(Q&&R.test(Q))for(St=Q.split(R);Y<St.length;Y++)F=T(F,St[Y],gt,Pt);else F=T(F,Q,gt,Pt);return F};A.on=function(T,F,Q){if(this._events=it(Ct,this._events||{},T,F,{context:Q,ctx:this,listening:z}),z){var gt=this._listeners||(this._listeners={});gt[z.id]=z,z.interop=!1}return this},A.listenTo=function(T,F,Q){if(!T)return this;var gt=T._listenId||(T._listenId=k.uniqueId("l")),Pt=this._listeningTo||(this._listeningTo={}),Y=z=Pt[gt];Y||(this._listenId||(this._listenId=k.uniqueId("l")),Y=z=Pt[gt]=new qt(this,T));var St=Mt(T,F,Q,this);if(z=void 0,St)throw St;return Y.interop&&Y.on(F,Q),this};var Ct=function(T,F,Q,gt){if(Q){var Pt=T[F]||(T[F]=[]),Y=gt.context,St=gt.ctx,dt=gt.listening;dt&&dt.count++,Pt.push({callback:Q,context:Y,ctx:Y||St,listening:dt})}return T},Mt=function(T,F,Q,gt){try{T.on(F,Q,gt)}catch(Pt){return Pt}};A.off=function(T,F,Q){return this._events?(this._events=it(Ht,this._events,T,F,{context:Q,listeners:this._listeners}),this):this},A.stopListening=function(T,F,Q){var gt=this._listeningTo;if(!gt)return this;for(var Pt=T?[T._listenId]:k.keys(gt),Y=0;Y<Pt.length;Y++){var St=gt[Pt[Y]];if(!St)break;St.obj.off(F,Q,this),St.interop&&St.off(F,Q)}return k.isEmpty(gt)&&(this._listeningTo=void 0),this};var Ht=function(T,F,Q,gt){if(T){var Pt=gt.context,Y=gt.listeners,St=0,dt;if(!F&&!Pt&&!Q){for(dt=k.keys(Y);St<dt.length;St++)Y[dt[St]].cleanup();return}for(dt=F?[F]:k.keys(T);St<dt.length;St++){F=dt[St];var Ce=T[F];if(!Ce)break;for(var Ye=[],Ne=0;Ne<Ce.length;Ne++){var Ge=Ce[Ne];if(Q&&Q!==Ge.callback&&Q!==Ge.callback._callback||Pt&&Pt!==Ge.context)Ye.push(Ge);else{var pr=Ge.listening;pr&&pr.off(F,Q)}}Ye.length?T[F]=Ye:delete T[F]}return T}};A.once=function(T,F,Q){var gt=it(Ft,{},T,F,this.off.bind(this));return typeof T=="string"&&Q==null&&(F=void 0),this.on(gt,F,Q)},A.listenToOnce=function(T,F,Q){var gt=it(Ft,{},F,Q,this.stopListening.bind(this,T));return this.listenTo(T,gt)};var Ft=function(T,F,Q,gt){if(Q){var Pt=T[F]=k.once(function(){gt(F,Pt),Q.apply(this,arguments)});Pt._callback=Q}return T};A.trigger=function(T){if(!this._events)return this;for(var F=Math.max(0,arguments.length-1),Q=Array(F),gt=0;gt<F;gt++)Q[gt]=arguments[gt+1];return it(xt,this._events,T,void 0,Q),this};var xt=function(T,F,Q,gt){if(T){var Pt=T[F],Y=T.all;Pt&&Y&&(Y=Y.slice()),Pt&&_t(Pt,gt),Y&&_t(Y,[F].concat(gt))}return T},_t=function(T,F){var Q,gt=-1,Pt=T.length,Y=F[0],St=F[1],dt=F[2];switch(F.length){case 0:for(;++gt<Pt;)(Q=T[gt]).callback.call(Q.ctx);return;case 1:for(;++gt<Pt;)(Q=T[gt]).callback.call(Q.ctx,Y);return;case 2:for(;++gt<Pt;)(Q=T[gt]).callback.call(Q.ctx,Y,St);return;case 3:for(;++gt<Pt;)(Q=T[gt]).callback.call(Q.ctx,Y,St,dt);return;default:for(;++gt<Pt;)(Q=T[gt]).callback.apply(Q.ctx,F);return}},qt=function(T,F){this.id=T._listenId,this.listener=T,this.obj=F,this.interop=!0,this.count=0,this._events=void 0};qt.prototype.on=A.on,qt.prototype.off=function(T,F){var Q;this.interop?(this._events=it(Ht,this._events,T,F,{context:void 0,listeners:void 0}),Q=!this._events):(this.count--,Q=this.count===0),Q&&this.cleanup()},qt.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},A.bind=A.on,A.unbind=A.off,k.extend(q,A);var le=q.Model=function(T,F){var Q=T||{};F||(F={}),this.preinitialize.apply(this,arguments),this.cid=k.uniqueId(this.cidPrefix),this.attributes={},F.collection&&(this.collection=F.collection),F.parse&&(Q=this.parse(Q,F)||{});var gt=k.result(this,"defaults");Q=k.defaults(k.extend({},gt,Q),gt),this.set(Q,F),this.changed={},this.initialize.apply(this,arguments)};k.extend(le.prototype,A,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(T){return k.clone(this.attributes)},sync:function(){return q.sync.apply(this,arguments)},get:function(T){return this.attributes[T]},escape:function(T){return k.escape(this.get(T))},has:function(T){return this.get(T)!=null},matches:function(T){return!!k.iteratee(T,this)(this.attributes)},set:function(T,F,Q){if(T==null)return this;var gt;if(typeof T=="object"?(gt=T,Q=F):(gt={})[T]=F,Q||(Q={}),!this._validate(gt,Q))return!1;var Pt=Q.unset,Y=Q.silent,St=[],dt=this._changing;this._changing=!0,dt||(this._previousAttributes=k.clone(this.attributes),this.changed={});var Ce=this.attributes,Ye=this.changed,Ne=this._previousAttributes;for(var Ge in gt)F=gt[Ge],k.isEqual(Ce[Ge],F)||St.push(Ge),k.isEqual(Ne[Ge],F)?delete Ye[Ge]:Ye[Ge]=F,Pt?delete Ce[Ge]:Ce[Ge]=F;if(this.idAttribute in gt){var pr=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,pr,Q)}if(!Y){St.length&&(this._pending=Q);for(var ye=0;ye<St.length;ye++)this.trigger("change:"+St[ye],this,Ce[St[ye]],Q)}if(dt)return this;if(!Y)for(;this._pending;)Q=this._pending,this._pending=!1,this.trigger("change",this,Q);return this._pending=!1,this._changing=!1,this},unset:function(T,F){return this.set(T,void 0,k.extend({},F,{unset:!0}))},clear:function(T){var F={};for(var Q in this.attributes)F[Q]=void 0;return this.set(F,k.extend({},T,{unset:!0}))},hasChanged:function(T){return T==null?!k.isEmpty(this.changed):k.has(this.changed,T)},changedAttributes:function(T){if(!T)return this.hasChanged()?k.clone(this.changed):!1;var F=this._changing?this._previousAttributes:this.attributes,Q={},gt;for(var Pt in T){var Y=T[Pt];k.isEqual(F[Pt],Y)||(Q[Pt]=Y,gt=!0)}return gt?Q:!1},previous:function(T){return T==null||!this._previousAttributes?null:this._previousAttributes[T]},previousAttributes:function(){return k.clone(this._previousAttributes)},fetch:function(T){T=k.extend({parse:!0},T);var F=this,Q=T.success;return T.success=function(gt){var Pt=T.parse?F.parse(gt,T):gt;if(!F.set(Pt,T))return!1;Q&&Q.call(T.context,F,gt,T),F.trigger("sync",F,gt,T)},ae(this,T),this.sync("read",this,T)},save:function(T,F,Q){var gt;T==null||typeof T=="object"?(gt=T,Q=F):(gt={})[T]=F,Q=k.extend({validate:!0,parse:!0},Q);var Pt=Q.wait;if(gt&&!Pt){if(!this.set(gt,Q))return!1}else if(!this._validate(gt,Q))return!1;var Y=this,St=Q.success,dt=this.attributes;Q.success=function(Ne){Y.attributes=dt;var Ge=Q.parse?Y.parse(Ne,Q):Ne;if(Pt&&(Ge=k.extend({},gt,Ge)),Ge&&!Y.set(Ge,Q))return!1;St&&St.call(Q.context,Y,Ne,Q),Y.trigger("sync",Y,Ne,Q)},ae(this,Q),gt&&Pt&&(this.attributes=k.extend({},dt,gt));var Ce=this.isNew()?"create":Q.patch?"patch":"update";Ce==="patch"&&!Q.attrs&&(Q.attrs=gt);var Ye=this.sync(Ce,this,Q);return this.attributes=dt,Ye},destroy:function(T){T=T?k.clone(T):{};var F=this,Q=T.success,gt=T.wait,Pt=function(){F.stopListening(),F.trigger("destroy",F,F.collection,T)};T.success=function(St){gt&&Pt(),Q&&Q.call(T.context,F,St,T),F.isNew()||F.trigger("sync",F,St,T)};var Y=!1;return this.isNew()?k.defer(T.success):(ae(this,T),Y=this.sync("delete",this,T)),gt||Pt(),Y},url:function(){var T=k.result(this,"urlRoot")||k.result(this.collection,"url")||er();if(this.isNew())return T;var F=this.get(this.idAttribute);return T.replace(/[^\/]$/,"$&/")+encodeURIComponent(F)},parse:function(T,F){return T},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(T){return this._validate({},k.extend({},T,{validate:!0}))},_validate:function(T,F){if(!F.validate||!this.validate)return!0;T=k.extend({},this.attributes,T);var Q=this.validationError=this.validate(T,F)||null;return Q?(this.trigger("invalid",this,Q,k.extend(F,{validationError:Q})),!1):!0}});var ce=q.Collection=function(T,F){F||(F={}),this.preinitialize.apply(this,arguments),F.model&&(this.model=F.model),F.comparator!==void 0&&(this.comparator=F.comparator),this._reset(),this.initialize.apply(this,arguments),T&&this.reset(T,k.extend({silent:!0},F))},te={add:!0,remove:!0,merge:!0},H={add:!0,remove:!1},nt=function(T,F,Q){Q=Math.min(Math.max(Q,0),T.length);var gt=Array(T.length-Q),Pt=F.length,Y;for(Y=0;Y<gt.length;Y++)gt[Y]=T[Y+Q];for(Y=0;Y<Pt;Y++)T[Y+Q]=F[Y];for(Y=0;Y<gt.length;Y++)T[Y+Pt+Q]=gt[Y]};k.extend(ce.prototype,A,{model:le,preinitialize:function(){},initialize:function(){},toJSON:function(T){return this.map(function(F){return F.toJSON(T)})},sync:function(){return q.sync.apply(this,arguments)},add:function(T,F){return this.set(T,k.extend({merge:!1},F,H))},remove:function(T,F){F=k.extend({},F);var Q=!k.isArray(T);T=Q?[T]:T.slice();var gt=this._removeModels(T,F);return!F.silent&&gt.length&&(F.changes={added:[],merged:[],removed:gt},this.trigger("update",this,F)),Q?gt[0]:gt},set:function(T,F){if(T!=null){F=k.extend({},te,F),F.parse&&!this._isModel(T)&&(T=this.parse(T,F)||[]);var Q=!k.isArray(T);T=Q?[T]:T.slice();var gt=F.at;gt!=null&&(gt=+gt),gt>this.length&&(gt=this.length),gt<0&&(gt+=this.length+1);var Pt=[],Y=[],St=[],dt=[],Ce={},Ye=F.add,Ne=F.merge,Ge=F.remove,pr=!1,ye=this.comparator&&gt==null&&F.sort!==!1,qr=k.isString(this.comparator)?this.comparator:null,ir,$e;for($e=0;$e<T.length;$e++){ir=T[$e];var Nr=this.get(ir);if(Nr){if(Ne&&ir!==Nr){var _e=this._isModel(ir)?ir.attributes:ir;F.parse&&(_e=Nr.parse(_e,F)),Nr.set(_e,F),St.push(Nr),ye&&!pr&&(pr=Nr.hasChanged(qr))}Ce[Nr.cid]||(Ce[Nr.cid]=!0,Pt.push(Nr)),T[$e]=Nr}else Ye&&(ir=T[$e]=this._prepareModel(ir,F),ir&&(Y.push(ir),this._addReference(ir,F),Ce[ir.cid]=!0,Pt.push(ir)))}if(Ge){for($e=0;$e<this.length;$e++)ir=this.models[$e],Ce[ir.cid]||dt.push(ir);dt.length&&this._removeModels(dt,F)}var _r=!1,Pe=!ye&&Ye&&Ge;if(Pt.length&&Pe?(_r=this.length!==Pt.length||k.some(this.models,function(Qe,sr){return Qe!==Pt[sr]}),this.models.length=0,nt(this.models,Pt,0),this.length=this.models.length):Y.length&&(ye&&(pr=!0),nt(this.models,Y,gt??this.length),this.length=this.models.length),pr&&this.sort({silent:!0}),!F.silent){for($e=0;$e<Y.length;$e++)gt!=null&&(F.index=gt+$e),ir=Y[$e],ir.trigger("add",ir,this,F);(pr||_r)&&this.trigger("sort",this,F),(Y.length||dt.length||St.length)&&(F.changes={added:Y,removed:dt,merged:St},this.trigger("update",this,F))}return Q?T[0]:T}},reset:function(T,F){F=F?k.clone(F):{};for(var Q=0;Q<this.models.length;Q++)this._removeReference(this.models[Q],F);return F.previousModels=this.models,this._reset(),T=this.add(T,k.extend({silent:!0},F)),F.silent||this.trigger("reset",this,F),T},push:function(T,F){return this.add(T,k.extend({at:this.length},F))},pop:function(T){var F=this.at(this.length-1);return this.remove(F,T)},unshift:function(T,F){return this.add(T,k.extend({at:0},F))},shift:function(T){var F=this.at(0);return this.remove(F,T)},slice:function(){return L.apply(this.models,arguments)},get:function(T){if(T!=null)return this._byId[T]||this._byId[this.modelId(this._isModel(T)?T.attributes:T,T.idAttribute)]||T.cid&&this._byId[T.cid]},has:function(T){return this.get(T)!=null},at:function(T){return T<0&&(T+=this.length),this.models[T]},where:function(T,F){return this[F?"find":"filter"](T)},findWhere:function(T){return this.where(T,!0)},sort:function(T){var F=this.comparator;if(!F)throw new Error("Cannot sort a set without a comparator");T||(T={});var Q=F.length;return k.isFunction(F)&&(F=F.bind(this)),Q===1||k.isString(F)?this.models=this.sortBy(F):this.models.sort(F),T.silent||this.trigger("sort",this,T),this},pluck:function(T){return this.map(T+"")},fetch:function(T){T=k.extend({parse:!0},T);var F=T.success,Q=this;return T.success=function(gt){var Pt=T.reset?"reset":"set";Q[Pt](gt,T),F&&F.call(T.context,Q,gt,T),Q.trigger("sync",Q,gt,T)},ae(this,T),this.sync("read",this,T)},create:function(T,F){F=F?k.clone(F):{};var Q=F.wait;if(T=this._prepareModel(T,F),!T)return!1;Q||this.add(T,F);var gt=this,Pt=F.success;return F.success=function(Y,St,dt){Q&&gt.add(Y,dt),Pt&&Pt.call(dt.context,Y,St,dt)},T.save(null,F),T},parse:function(T,F){return T},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(T,F){return T[F||this.model.prototype.idAttribute||"id"]},values:function(){return new tt(this,mt)},keys:function(){return new tt(this,V)},entries:function(){return new tt(this,Et)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(T,F){if(this._isModel(T))return T.collection||(T.collection=this),T;F=F?k.clone(F):{},F.collection=this;var Q;return this.model.prototype?Q=new this.model(T,F):Q=this.model(T,F),Q.validationError?(this.trigger("invalid",this,Q.validationError,F),!1):Q},_removeModels:function(T,F){for(var Q=[],gt=0;gt<T.length;gt++){var Pt=this.get(T[gt]);if(Pt){var Y=this.indexOf(Pt);this.models.splice(Y,1),this.length--,delete this._byId[Pt.cid];var St=this.modelId(Pt.attributes,Pt.idAttribute);St!=null&&delete this._byId[St],F.silent||(F.index=Y,Pt.trigger("remove",Pt,this,F)),Q.push(Pt),this._removeReference(Pt,F)}}return Q},_isModel:function(T){return T instanceof le},_addReference:function(T,F){this._byId[T.cid]=T;var Q=this.modelId(T.attributes,T.idAttribute);Q!=null&&(this._byId[Q]=T),T.on("all",this._onModelEvent,this)},_removeReference:function(T,F){delete this._byId[T.cid];var Q=this.modelId(T.attributes,T.idAttribute);Q!=null&&delete this._byId[Q],this===T.collection&&delete T.collection,T.off("all",this._onModelEvent,this)},_onModelEvent:function(T,F,Q,gt){if(F){if((T==="add"||T==="remove")&&Q!==this)return;if(T==="destroy"&&this.remove(F,gt),T==="changeId"){var Pt=this.modelId(F.previousAttributes(),F.idAttribute),Y=this.modelId(F.attributes,F.idAttribute);Pt!=null&&delete this._byId[Pt],Y!=null&&(this._byId[Y]=F)}}this.trigger.apply(this,arguments)}});var B=typeof Symbol=="function"&&Symbol.iterator;B&&(ce.prototype[B]=ce.prototype.values);var tt=function(T,F){this._collection=T,this._kind=F,this._index=0},mt=1,V=2,Et=3;B&&(tt.prototype[B]=function(){return this}),tt.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var T=this._collection.at(this._index);this._index++;var F;if(this._kind===mt)F=T;else{var Q=this._collection.modelId(T.attributes,T.idAttribute);this._kind===V?F=Q:F=[Q,T]}return{value:F,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var j=q.View=function(T){this.cid=k.uniqueId("view"),this.preinitialize.apply(this,arguments),k.extend(this,k.pick(T,At)),this._ensureElement(),this.initialize.apply(this,arguments)},Rt=/^(\S+)\s*(.*)$/,At=["model","collection","el","id","attributes","className","tagName","events"];k.extend(j.prototype,A,{tagName:"div",$:function(T){return this.$el.find(T)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(T){return this.undelegateEvents(),this._setElement(T),this.delegateEvents(),this},_setElement:function(T){this.$el=T instanceof q.$?T:q.$(T),this.el=this.$el[0]},delegateEvents:function(T){if(T||(T=k.result(this,"events")),!T)return this;this.undelegateEvents();for(var F in T){var Q=T[F];if(k.isFunction(Q)||(Q=this[Q]),!!Q){var gt=F.match(Rt);this.delegate(gt[1],gt[2],Q.bind(this))}}return this},delegate:function(T,F,Q){return this.$el.on(T+".delegateEvents"+this.cid,F,Q),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(T,F,Q){return this.$el.off(T+".delegateEvents"+this.cid,F,Q),this},_createElement:function(T){return document.createElement(T)},_ensureElement:function(){if(this.el)this.setElement(k.result(this,"el"));else{var T=k.extend({},k.result(this,"attributes"));this.id&&(T.id=k.result(this,"id")),this.className&&(T.class=k.result(this,"className")),this.setElement(this._createElement(k.result(this,"tagName"))),this._setAttributes(T)}},_setAttributes:function(T){this.$el.attr(T)}});var ft=function(T,F,Q,gt){switch(F){case 1:return function(){return T[Q](this[gt])};case 2:return function(Pt){return T[Q](this[gt],Pt)};case 3:return function(Pt,Y){return T[Q](this[gt],Jt(Pt,this),Y)};case 4:return function(Pt,Y,St){return T[Q](this[gt],Jt(Pt,this),Y,St)};default:return function(){var Pt=L.call(arguments);return Pt.unshift(this[gt]),T[Q].apply(T,Pt)}}},Wt=function(T,F,Q,gt){k.each(Q,function(Pt,Y){F[Y]&&(T.prototype[Y]=ft(F,Pt,Y,gt))})},Jt=function(T,F){return k.isFunction(T)?T:k.isObject(T)&&!F._isModel(T)?pe(T):k.isString(T)?function(Q){return Q.get(T)}:T},pe=function(T){var F=k.matches(T);return function(Q){return F(Q.attributes)}},Ot={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},jt={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};k.each([[ce,Ot,"models"],[le,jt,"attributes"]],function(T){var F=T[0],Q=T[1],gt=T[2];F.mixin=function(Pt){var Y=k.reduce(k.functions(Pt),function(St,dt){return St[dt]=0,St},{});Wt(F,Pt,Y,gt)},Wt(F,k,Q,gt)}),q.sync=function(T,F,Q){var gt=Bt[T];k.defaults(Q||(Q={}),{emulateHTTP:q.emulateHTTP,emulateJSON:q.emulateJSON});var Pt={type:gt,dataType:"json"};if(Q.url||(Pt.url=k.result(F,"url")||er()),Q.data==null&&F&&(T==="create"||T==="update"||T==="patch")&&(Pt.contentType="application/json",Pt.data=JSON.stringify(Q.attrs||F.toJSON(Q))),Q.emulateJSON&&(Pt.contentType="application/x-www-form-urlencoded",Pt.data=Pt.data?{model:Pt.data}:{}),Q.emulateHTTP&&(gt==="PUT"||gt==="DELETE"||gt==="PATCH")){Pt.type="POST",Q.emulateJSON&&(Pt.data._method=gt);var Y=Q.beforeSend;Q.beforeSend=function(Ce){if(Ce.setRequestHeader("X-HTTP-Method-Override",gt),Y)return Y.apply(this,arguments)}}Pt.type!=="GET"&&!Q.emulateJSON&&(Pt.processData=!1);var St=Q.error;Q.error=function(Ce,Ye,Ne){Q.textStatus=Ye,Q.errorThrown=Ne,St&&St.call(Q.context,Ce,Ye,Ne)};var dt=Q.xhr=q.ajax(k.extend(Pt,Q));return F.trigger("request",F,dt,Q),dt};var Bt={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};q.ajax=function(){return q.$.ajax.apply(q.$,arguments)};var Kt=q.Router=function(T){T||(T={}),this.preinitialize.apply(this,arguments),T.routes&&(this.routes=T.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},zt=/\((.*?)\)/g,Ut=/(\(\?)?:\w+/g,be=/\*\w+/g,xe=/[\-{}\[\]+?.,\\\^$|#\s]/g;k.extend(Kt.prototype,A,{preinitialize:function(){},initialize:function(){},route:function(T,F,Q){k.isRegExp(T)||(T=this._routeToRegExp(T)),k.isFunction(F)&&(Q=F,F=""),Q||(Q=this[F]);var gt=this;return q.history.route(T,function(Pt){var Y=gt._extractParameters(T,Pt);gt.execute(Q,Y,F)!==!1&&(gt.trigger.apply(gt,["route:"+F].concat(Y)),gt.trigger("route",F,Y),q.history.trigger("route",gt,F,Y))}),this},execute:function(T,F,Q){T&&T.apply(this,F)},navigate:function(T,F){return q.history.navigate(T,F),this},_bindRoutes:function(){if(this.routes){this.routes=k.result(this,"routes");for(var T,F=k.keys(this.routes);(T=F.pop())!=null;)this.route(T,this.routes[T])}},_routeToRegExp:function(T){return T=T.replace(xe,"\\$&").replace(zt,"(?:$1)?").replace(Ut,function(F,Q){return Q?F:"([^/?]+)"}).replace(be,"([^?]*?)"),new RegExp("^"+T+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(T,F){var Q=T.exec(F).slice(1);return k.map(Q,function(gt,Pt){return Pt===Q.length-1?gt||null:gt?decodeURIComponent(gt):null})}});var oe=q.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},ge=/^[#\/]|\s+$/g,Ke=/^\/+|\/+$/g,gr=/#.*$/;oe.started=!1,k.extend(oe.prototype,A,{interval:50,atRoot:function(){var T=this.location.pathname.replace(/[^\/]$/,"$&/");return T===this.root&&!this.getSearch()},matchRoot:function(){var T=this.decodeFragment(this.location.pathname),F=T.slice(0,this.root.length-1)+"/";return F===this.root},decodeFragment:function(T){return decodeURI(T.replace(/%25/g,"%2525"))},getSearch:function(){var T=this.location.href.replace(/#.*/,"").match(/\?.+/);return T?T[0]:""},getHash:function(T){var F=(T||this).location.href.match(/#(.*)$/);return F?F[1]:""},getPath:function(){var T=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return T.charAt(0)==="/"?T.slice(1):T},getFragment:function(T){return T==null&&(this._usePushState||!this._wantsHashChange?T=this.getPath():T=this.getHash()),T.replace(ge,"")},start:function(T){if(oe.started)throw new Error("Backbone.history has already been started");if(oe.started=!0,this.options=k.extend({root:"/"},this.options,T),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Ke,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var F=this.root.slice(0,-1)||"/";return this.location.replace(F+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var Q=document.body,gt=Q.insertBefore(this.iframe,Q.firstChild).contentWindow;gt.document.open(),gt.document.close(),gt.location.hash="#"+this.fragment}var Pt=window.addEventListener||function(Y,St){return attachEvent("on"+Y,St)};if(this._usePushState?Pt("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Pt("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var T=window.removeEventListener||function(F,Q){return detachEvent("on"+F,Q)};this._usePushState?T("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&T("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),oe.started=!1},route:function(T,F){this.handlers.unshift({route:T,callback:F})},checkUrl:function(T){var F=this.getFragment();if(F===this.fragment&&this.iframe&&(F=this.getHash(this.iframe.contentWindow)),F===this.fragment)return!1;this.iframe&&this.navigate(F),this.loadUrl()},loadUrl:function(T){return this.matchRoot()?(T=this.fragment=this.getFragment(T),k.some(this.handlers,function(F){if(F.route.test(T))return F.callback(T),!0})):!1},navigate:function(T,F){if(!oe.started)return!1;(!F||F===!0)&&(F={trigger:!!F}),T=this.getFragment(T||"");var Q=this.root;(T===""||T.charAt(0)==="?")&&(Q=Q.slice(0,-1)||"/");var gt=Q+T;T=T.replace(gr,"");var Pt=this.decodeFragment(T);if(this.fragment!==Pt){if(this.fragment=Pt,this._usePushState)this.history[F.replace?"replaceState":"pushState"]({},document.title,gt);else if(this._wantsHashChange){if(this._updateHash(this.location,T,F.replace),this.iframe&&T!==this.getHash(this.iframe.contentWindow)){var Y=this.iframe.contentWindow;F.replace||(Y.document.open(),Y.document.close()),this._updateHash(Y.location,T,F.replace)}}else return this.location.assign(gt);if(F.trigger)return this.loadUrl(T)}},_updateHash:function(T,F,Q){if(Q){var gt=T.href.replace(/(javascript:|#).*$/,"");T.replace(gt+"#"+F)}else T.hash="#"+F}}),q.history=new oe;var fr=function(T,F){var Q=this,gt;return T&&k.has(T,"constructor")?gt=T.constructor:gt=function(){return Q.apply(this,arguments)},k.extend(gt,Q,F),gt.prototype=k.create(Q.prototype,T),gt.prototype.constructor=gt,gt.__super__=Q.prototype,gt};le.extend=ce.extend=Kt.extend=j.extend=oe.extend=fr;var er=function(){throw new Error('A "url" property or function must be specified')},ae=function(T,F){var Q=F.error;F.error=function(gt){Q&&Q.call(F.context,T,gt,F),T.trigger("error",T,gt,F)}};return q})},210:(O,J,ut)=>{(function(st){st(ut(631))})(function(st){st.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(et,q){return/^[;{}]$/.test(q)}}),st.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(et,q,k,N){return this.jsonMode?/^[\[,{]$/.test(q)||/^}/.test(k):q==";"&&N.lexical&&N.lexical.type==")"?!1:/^[;{}]$/.test(q)&&!/^;/.test(k)}});var Lt=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;st.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(et,q,k,N){var S=!1;return this.configuration=="html"&&(S=N.context?Lt.test(N.context.tagName):!1),!S&&(et=="tag"&&/>$/.test(q)&&N.context||/^</.test(k))}}),st.defineExtension("commentRange",function(et,q,k){var N=this,S=st.innerMode(N.getMode(),N.getTokenAt(q).state).mode;N.operation(function(){if(et)N.replaceRange(S.commentEnd,k),N.replaceRange(S.commentStart,q),q.line==k.line&&q.ch==k.ch&&N.setCursor(q.line,q.ch+S.commentStart.length);else{var L=N.getRange(q,k),A=L.indexOf(S.commentStart),R=L.lastIndexOf(S.commentEnd);A>-1&&R>-1&&R>A&&(L=L.substr(0,A)+L.substring(A+S.commentStart.length,R)+L.substr(R+S.commentEnd.length)),N.replaceRange(L,q,k)}})}),st.defineExtension("autoIndentRange",function(et,q){var k=this;this.operation(function(){for(var N=et.line;N<=q.line;N++)k.indentLine(N,"smart")})}),st.defineExtension("autoFormatRange",function(et,q){var k=this,N=k.getMode(),S=k.getRange(et,q).split(`
`),L=st.copyState(N,k.getTokenAt(et).state),A=k.getOption("tabSize"),R="",z=0,it=et.ch===0;function Ct(){R+=`
`,it=!0,++z}for(var Mt=0;Mt<S.length;++Mt){for(var Ht=new st.StringStream(S[Mt],A);!Ht.eol();){var Ft=st.innerMode(N,L),xt=N.token(Ht,L),_t=Ht.current();Ht.start=Ht.pos,(!it||/\S/.test(_t))&&(R+=_t,it=!1),!it&&Ft.mode.newlineAfterToken&&Ft.mode.newlineAfterToken(xt,_t,Ht.string.slice(Ht.pos)||S[Mt+1]||"",Ft.state)&&Ct()}!Ht.pos&&N.blankLine&&N.blankLine(L),!it&&Mt<S.length-1&&Ct()}k.operation(function(){k.replaceRange(R,et,q);for(var qt=et.line+1,le=et.line+z;qt<=le;++qt)k.indentLine(qt,"smart");k.setSelection(et,k.getCursor(!1))})})})},631:function(O){(function(J,ut){O.exports=ut()})(this,function(){var J=navigator.userAgent,ut=navigator.platform,st=/gecko\/\d/i.test(J),Lt=/MSIE \d/.test(J),et=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(J),q=/Edge\/(\d+)/.exec(J),k=Lt||et||q,N=k&&(Lt?document.documentMode||6:+(q||et)[1]),S=!q&&/WebKit\//.test(J),L=S&&/Qt\/\d+\.\d+/.test(J),A=!q&&/Chrome\/(\d+)/.exec(J),R=A&&+A[1],z=/Opera\//.test(J),it=/Apple Computer/.test(navigator.vendor),Ct=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(J),Mt=/PhantomJS/.test(J),Ht=it&&(/Mobile\/\w+/.test(J)||navigator.maxTouchPoints>2),Ft=/Android/.test(J),xt=Ht||Ft||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(J),_t=Ht||/Mac/.test(ut),qt=/\bCrOS\b/.test(J),le=/win/i.test(ut),ce=z&&J.match(/Version\/(\d*\.\d*)/);ce&&(ce=Number(ce[1])),ce&&ce>=15&&(z=!1,S=!0);var te=_t&&(L||z&&(ce==null||ce<12.11)),H=st||k&&N>=9;function nt(o){return new RegExp("(^|\\s)"+o+"(?:$|\\s)\\s*")}var B=function(o,s){var c=o.className,u=nt(s).exec(c);if(u){var p=c.slice(u.index+u[0].length);o.className=c.slice(0,u.index)+(p?u[1]+p:"")}};function tt(o){for(var s=o.childNodes.length;s>0;--s)o.removeChild(o.firstChild);return o}function mt(o,s){return tt(o).appendChild(s)}function V(o,s,c,u){var p=document.createElement(o);if(c&&(p.className=c),u&&(p.style.cssText=u),typeof s=="string")p.appendChild(document.createTextNode(s));else if(s)for(var v=0;v<s.length;++v)p.appendChild(s[v]);return p}function Et(o,s,c,u){var p=V(o,s,c,u);return p.setAttribute("role","presentation"),p}var j;document.createRange?j=function(o,s,c,u){var p=document.createRange();return p.setEnd(u||o,c),p.setStart(o,s),p}:j=function(o,s,c){var u=document.body.createTextRange();try{u.moveToElementText(o.parentNode)}catch{return u}return u.collapse(!0),u.moveEnd("character",c),u.moveStart("character",s),u};function Rt(o,s){if(s.nodeType==3&&(s=s.parentNode),o.contains)return o.contains(s);do if(s.nodeType==11&&(s=s.host),s==o)return!0;while(s=s.parentNode)}function At(o){var s;try{s=o.activeElement}catch{s=o.body||null}for(;s&&s.shadowRoot&&s.shadowRoot.activeElement;)s=s.shadowRoot.activeElement;return s}function ft(o,s){var c=o.className;nt(s).test(c)||(o.className+=(c?" ":"")+s)}function Wt(o,s){for(var c=o.split(" "),u=0;u<c.length;u++)c[u]&&!nt(c[u]).test(s)&&(s+=" "+c[u]);return s}var Jt=function(o){o.select()};Ht?Jt=function(o){o.selectionStart=0,o.selectionEnd=o.value.length}:k&&(Jt=function(o){try{o.select()}catch{}});function pe(o){return o.display.wrapper.ownerDocument}function Ot(o){return pe(o).defaultView}function jt(o){var s=Array.prototype.slice.call(arguments,1);return function(){return o.apply(null,s)}}function Bt(o,s,c){s||(s={});for(var u in o)o.hasOwnProperty(u)&&(c!==!1||!s.hasOwnProperty(u))&&(s[u]=o[u]);return s}function Kt(o,s,c,u,p){s==null&&(s=o.search(/[^\s\u00a0]/),s==-1&&(s=o.length));for(var v=u||0,m=p||0;;){var _=o.indexOf("	",v);if(_<0||_>=s)return m+(s-v);m+=_-v,m+=c-m%c,v=_+1}}var zt=function(){this.id=null,this.f=null,this.time=0,this.handler=jt(this.onTimeout,this)};zt.prototype.onTimeout=function(o){o.id=0,o.time<=+new Date?o.f():setTimeout(o.handler,o.time-+new Date)},zt.prototype.set=function(o,s){this.f=s;var c=+new Date+o;(!this.id||c<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,o),this.time=c)};function Ut(o,s){for(var c=0;c<o.length;++c)if(o[c]==s)return c;return-1}var be=50,xe={toString:function(){return"CodeMirror.Pass"}},oe={scroll:!1},ge={origin:"*mouse"},Ke={origin:"+move"};function gr(o,s,c){for(var u=0,p=0;;){var v=o.indexOf("	",u);v==-1&&(v=o.length);var m=v-u;if(v==o.length||p+m>=s)return u+Math.min(m,s-p);if(p+=v-u,p+=c-p%c,u=v+1,p>=s)return u}}var fr=[""];function er(o){for(;fr.length<=o;)fr.push(ae(fr)+" ");return fr[o]}function ae(o){return o[o.length-1]}function T(o,s){for(var c=[],u=0;u<o.length;u++)c[u]=s(o[u],u);return c}function F(o,s,c){for(var u=0,p=c(s);u<o.length&&c(o[u])<=p;)u++;o.splice(u,0,s)}function Q(){}function gt(o,s){var c;return Object.create?c=Object.create(o):(Q.prototype=o,c=new Q),s&&Bt(s,c),c}var Pt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Y(o){return/\w/.test(o)||o>""&&(o.toUpperCase()!=o.toLowerCase()||Pt.test(o))}function St(o,s){return s?s.source.indexOf("\\w")>-1&&Y(o)?!0:s.test(o):Y(o)}function dt(o){for(var s in o)if(o.hasOwnProperty(s)&&o[s])return!1;return!0}var Ce=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ye(o){return o.charCodeAt(0)>=768&&Ce.test(o)}function Ne(o,s,c){for(;(c<0?s>0:s<o.length)&&Ye(o.charAt(s));)s+=c;return s}function Ge(o,s,c){for(var u=s>c?-1:1;;){if(s==c)return s;var p=(s+c)/2,v=u<0?Math.ceil(p):Math.floor(p);if(v==s)return o(v)?s:c;o(v)?c=v:s=v+u}}function pr(o,s,c,u){if(!o)return u(s,c,"ltr",0);for(var p=!1,v=0;v<o.length;++v){var m=o[v];(m.from<c&&m.to>s||s==c&&m.to==s)&&(u(Math.max(m.from,s),Math.min(m.to,c),m.level==1?"rtl":"ltr",v),p=!0)}p||u(s,c,"ltr")}var ye=null;function qr(o,s,c){var u;ye=null;for(var p=0;p<o.length;++p){var v=o[p];if(v.from<s&&v.to>s)return p;v.to==s&&(v.from!=v.to&&c=="before"?u=p:ye=p),v.from==s&&(v.from!=v.to&&c!="before"?u=p:ye=p)}return u??ye}var ir=function(){var o="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function c(E){return E<=247?o.charAt(E):1424<=E&&E<=1524?"R":1536<=E&&E<=1785?s.charAt(E-1536):1774<=E&&E<=2220?"r":8192<=E&&E<=8203?"w":E==8204?"b":"L"}var u=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,p=/[stwN]/,v=/[LRr]/,m=/[Lb1n]/,_=/[1n]/;function w(E,K,rt){this.level=E,this.from=K,this.to=rt}return function(E,K){var rt=K=="ltr"?"L":"R";if(E.length==0||K=="ltr"&&!u.test(E))return!1;for(var vt=E.length,ct=[],kt=0;kt<vt;++kt)ct.push(c(E.charCodeAt(kt)));for(var Vt=0,Yt=rt;Vt<vt;++Vt){var re=ct[Vt];re=="m"?ct[Vt]=Yt:Yt=re}for(var de=0,ie=rt;de<vt;++de){var he=ct[de];he=="1"&&ie=="r"?ct[de]="n":v.test(he)&&(ie=he,he=="r"&&(ct[de]="R"))}for(var Te=1,Se=ct[0];Te<vt-1;++Te){var Be=ct[Te];Be=="+"&&Se=="1"&&ct[Te+1]=="1"?ct[Te]="1":Be==","&&Se==ct[Te+1]&&(Se=="1"||Se=="n")&&(ct[Te]=Se),Se=Be}for(var cr=0;cr<vt;++cr){var Hr=ct[cr];if(Hr==",")ct[cr]="N";else if(Hr=="%"){var hr=void 0;for(hr=cr+1;hr<vt&&ct[hr]=="%";++hr);for(var An=cr&&ct[cr-1]=="!"||hr<vt&&ct[hr]=="1"?"1":"N",pn=cr;pn<hr;++pn)ct[pn]=An;cr=hr-1}}for(var Dr=0,bn=rt;Dr<vt;++Dr){var Xr=ct[Dr];bn=="L"&&Xr=="1"?ct[Dr]="L":v.test(Xr)&&(bn=Xr)}for(var Br=0;Br<vt;++Br)if(p.test(ct[Br])){var Ir=void 0;for(Ir=Br+1;Ir<vt&&p.test(ct[Ir]);++Ir);for(var Sr=(Br?ct[Br-1]:rt)=="L",Gr=(Ir<vt?ct[Ir]:rt)=="L",Ii=Sr==Gr?Sr?"L":"R":rt,go=Br;go<Ir;++go)ct[go]=Ii;Br=Ir-1}for(var Zr=[],wi,$r=0;$r<vt;)if(m.test(ct[$r])){var uu=$r;for(++$r;$r<vt&&m.test(ct[$r]);++$r);Zr.push(new w(0,uu,$r))}else{var Ri=$r,mo=Zr.length,Jo=K=="rtl"?1:0;for(++$r;$r<vt&&ct[$r]!="L";++$r);for(var dn=Ri;dn<$r;)if(_.test(ct[dn])){Ri<dn&&(Zr.splice(mo,0,new w(1,Ri,dn)),mo+=Jo);var Qo=dn;for(++dn;dn<$r&&_.test(ct[dn]);++dn);Zr.splice(mo,0,new w(2,Qo,dn)),mo+=Jo,Ri=dn}else++dn;Ri<$r&&Zr.splice(mo,0,new w(1,Ri,$r))}return K=="ltr"&&(Zr[0].level==1&&(wi=E.match(/^\s+/))&&(Zr[0].from=wi[0].length,Zr.unshift(new w(0,0,wi[0].length))),ae(Zr).level==1&&(wi=E.match(/\s+$/))&&(ae(Zr).to-=wi[0].length,Zr.push(new w(0,vt-wi[0].length,vt)))),K=="rtl"?Zr.reverse():Zr}}();function $e(o,s){var c=o.order;return c==null&&(c=o.order=ir(o.text,s)),c}var Nr=[],_e=function(o,s,c){if(o.addEventListener)o.addEventListener(s,c,!1);else if(o.attachEvent)o.attachEvent("on"+s,c);else{var u=o._handlers||(o._handlers={});u[s]=(u[s]||Nr).concat(c)}};function _r(o,s){return o._handlers&&o._handlers[s]||Nr}function Pe(o,s,c){if(o.removeEventListener)o.removeEventListener(s,c,!1);else if(o.detachEvent)o.detachEvent("on"+s,c);else{var u=o._handlers,p=u&&u[s];if(p){var v=Ut(p,c);v>-1&&(u[s]=p.slice(0,v).concat(p.slice(v+1)))}}}function Qe(o,s){var c=_r(o,s);if(c.length)for(var u=Array.prototype.slice.call(arguments,2),p=0;p<c.length;++p)c[p].apply(null,u)}function sr(o,s,c){return typeof s=="string"&&(s={type:s,preventDefault:function(){this.defaultPrevented=!0}}),Qe(o,c||s.type,o,s),ht(s)||s.codemirrorIgnore}function Wr(o){var s=o._handlers&&o._handlers.cursorActivity;if(s)for(var c=o.curOp.cursorActivityHandlers||(o.curOp.cursorActivityHandlers=[]),u=0;u<s.length;++u)Ut(c,s[u])==-1&&c.push(s[u])}function wr(o,s){return _r(o,s).length>0}function Mn(o){o.prototype.on=function(s,c){_e(this,s,c)},o.prototype.off=function(s,c){Pe(this,s,c)}}function I(o){o.preventDefault?o.preventDefault():o.returnValue=!1}function at(o){o.stopPropagation?o.stopPropagation():o.cancelBubble=!0}function ht(o){return o.defaultPrevented!=null?o.defaultPrevented:o.returnValue==!1}function It(o){I(o),at(o)}function fe(o){return o.target||o.srcElement}function Ae(o){var s=o.which;return s==null&&(o.button&1?s=1:o.button&2?s=3:o.button&4&&(s=2)),_t&&o.ctrlKey&&s==1&&(s=3),s}var ze=function(){if(k&&N<9)return!1;var o=V("div");return"draggable"in o||"dragDrop"in o}(),tn;function vn(o){if(tn==null){var s=V("span","​");mt(o,V("span",[s,document.createTextNode("x")])),o.firstChild.offsetHeight!=0&&(tn=s.offsetWidth<=1&&s.offsetHeight>2&&!(k&&N<8))}var c=tn?V("span","​"):V("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return c.setAttribute("cm-text",""),c}var tr;function Vi(o){if(tr!=null)return tr;var s=mt(o,document.createTextNode("AخA")),c=j(s,0,1).getBoundingClientRect(),u=j(s,1,2).getBoundingClientRect();return tt(o),!c||c.left==c.right?!1:tr=u.right-c.right<3}var gn=`

b`.split(/\n/).length!=3?function(o){for(var s=0,c=[],u=o.length;s<=u;){var p=o.indexOf(`
`,s);p==-1&&(p=o.length);var v=o.slice(s,o.charAt(p-1)=="\r"?p-1:p),m=v.indexOf("\r");m!=-1?(c.push(v.slice(0,m)),s+=m+1):(c.push(v),s=p+1)}return c}:function(o){return o.split(/\r\n?|\n/)},Cn=window.getSelection?function(o){try{return o.selectionStart!=o.selectionEnd}catch{return!1}}:function(o){var s;try{s=o.ownerDocument.selection.createRange()}catch{}return!s||s.parentElement()!=o?!1:s.compareEndPoints("StartToEnd",s)!=0},ii=function(){var o=V("div");return"oncopy"in o?!0:(o.setAttribute("oncopy","return;"),typeof o.oncopy=="function")}(),Pr=null;function un(o){if(Pr!=null)return Pr;var s=mt(o,V("span","x")),c=s.getBoundingClientRect(),u=j(s,0,1).getBoundingClientRect();return Pr=Math.abs(c.left-u.left)>1}var or={},Xt={};function $n(o,s){arguments.length>2&&(s.dependencies=Array.prototype.slice.call(arguments,2)),or[o]=s}function Po(o,s){Xt[o]=s}function Ln(o){if(typeof o=="string"&&Xt.hasOwnProperty(o))o=Xt[o];else if(o&&typeof o.name=="string"&&Xt.hasOwnProperty(o.name)){var s=Xt[o.name];typeof s=="string"&&(s={name:s}),o=gt(s,o),o.name=s.name}else{if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(o))return Ln("application/xml");if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(o))return Ln("application/json")}return typeof o=="string"?{name:o}:o||{name:"null"}}function qn(o,s){s=Ln(s);var c=or[s.name];if(!c)return qn(o,"text/plain");var u=c(o,s);if(Fr.hasOwnProperty(s.name)){var p=Fr[s.name];for(var v in p)p.hasOwnProperty(v)&&(u.hasOwnProperty(v)&&(u["_"+v]=u[v]),u[v]=p[v])}if(u.name=s.name,s.helperType&&(u.helperType=s.helperType),s.modeProps)for(var m in s.modeProps)u[m]=s.modeProps[m];return u}var Fr={};function oi(o,s){var c=Fr.hasOwnProperty(o)?Fr[o]:Fr[o]={};Bt(s,c)}function xn(o,s){if(s===!0)return s;if(o.copyState)return o.copyState(s);var c={};for(var u in s){var p=s[u];p instanceof Array&&(p=p.concat([])),c[u]=p}return c}function Sn(o,s){for(var c;o.innerMode&&(c=o.innerMode(s),!(!c||c.mode==o));)s=c.state,o=c.mode;return c||{mode:o,state:s}}function bi(o,s,c){return o.startState?o.startState(s,c):!0}var rr=function(o,s,c){this.pos=this.start=0,this.string=o,this.tabSize=s||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=c};rr.prototype.eol=function(){return this.pos>=this.string.length},rr.prototype.sol=function(){return this.pos==this.lineStart},rr.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},rr.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},rr.prototype.eat=function(o){var s=this.string.charAt(this.pos),c;if(typeof o=="string"?c=s==o:c=s&&(o.test?o.test(s):o(s)),c)return++this.pos,s},rr.prototype.eatWhile=function(o){for(var s=this.pos;this.eat(o););return this.pos>s},rr.prototype.eatSpace=function(){for(var o=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>o},rr.prototype.skipToEnd=function(){this.pos=this.string.length},rr.prototype.skipTo=function(o){var s=this.string.indexOf(o,this.pos);if(s>-1)return this.pos=s,!0},rr.prototype.backUp=function(o){this.pos-=o},rr.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Kt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Kt(this.string,this.lineStart,this.tabSize):0)},rr.prototype.indentation=function(){return Kt(this.string,null,this.tabSize)-(this.lineStart?Kt(this.string,this.lineStart,this.tabSize):0)},rr.prototype.match=function(o,s,c){if(typeof o=="string"){var u=function(m){return c?m.toLowerCase():m},p=this.string.substr(this.pos,o.length);if(u(p)==u(o))return s!==!1&&(this.pos+=o.length),!0}else{var v=this.string.slice(this.pos).match(o);return v&&v.index>0?null:(v&&s!==!1&&(this.pos+=v[0].length),v)}},rr.prototype.current=function(){return this.string.slice(this.start,this.pos)},rr.prototype.hideFirstChars=function(o,s){this.lineStart+=o;try{return s()}finally{this.lineStart-=o}},rr.prototype.lookAhead=function(o){var s=this.lineOracle;return s&&s.lookAhead(o)},rr.prototype.baseToken=function(){var o=this.lineOracle;return o&&o.baseToken(this.pos)};function me(o,s){if(s-=o.first,s<0||s>=o.size)throw new Error("There is no line "+(s+o.first)+" in the document.");for(var c=o;!c.lines;)for(var u=0;;++u){var p=c.children[u],v=p.chunkSize();if(s<v){c=p;break}s-=v}return c.lines[s]}function On(o,s,c){var u=[],p=s.line;return o.iter(s.line,c.line+1,function(v){var m=v.text;p==c.line&&(m=m.slice(0,c.ch)),p==s.line&&(m=m.slice(s.ch)),u.push(m),++p}),u}function br(o,s,c){var u=[];return o.iter(s,c,function(p){u.push(p.text)}),u}function en(o,s){var c=s-o.height;if(c)for(var u=o;u;u=u.parent)u.height+=c}function Xe(o){if(o.parent==null)return null;for(var s=o.parent,c=Ut(s.lines,o),u=s.parent;u;s=u,u=u.parent)for(var p=0;u.children[p]!=s;++p)c+=u.children[p].chunkSize();return c+s.first}function Yn(o,s){var c=o.first;t:do{for(var u=0;u<o.children.length;++u){var p=o.children[u],v=p.height;if(s<v){o=p;continue t}s-=v,c+=p.chunkSize()}return c}while(!o.lines);for(var m=0;m<o.lines.length;++m){var _=o.lines[m],w=_.height;if(s<w)break;s-=w}return c+m}function hi(o,s){return s>=o.first&&s<o.first+o.size}function Vr(o,s){return String(o.lineNumberFormatter(s+o.firstLineNumber))}function x(o,s,c){if(c===void 0&&(c=null),!(this instanceof x))return new x(o,s,c);this.line=o,this.ch=s,this.sticky=c}function U(o,s){return o.line-s.line||o.ch-s.ch}function Dt(o,s){return o.sticky==s.sticky&&U(o,s)==0}function $t(o){return x(o.line,o.ch)}function Me(o,s){return U(o,s)<0?s:o}function Re(o,s){return U(o,s)<0?o:s}function Je(o,s){return Math.max(o.first,Math.min(s,o.first+o.size-1))}function we(o,s){if(s.line<o.first)return x(o.first,0);var c=o.first+o.size-1;return s.line>c?x(c,me(o,c).text.length):Tn(s,me(o,s.line).text.length)}function Tn(o,s){var c=o.ch;return c==null||c>s?x(o.line,s):c<0?x(o.line,0):o}function ia(o,s){for(var c=[],u=0;u<s.length;u++)c[u]=we(o,s[u]);return c}var oa=function(o,s){this.state=o,this.lookAhead=s},Xn=function(o,s,c,u){this.state=s,this.doc=o,this.line=c,this.maxLookAhead=u||0,this.baseTokens=null,this.baseTokenPos=1};Xn.prototype.lookAhead=function(o){var s=this.doc.getLine(this.line+o);return s!=null&&o>this.maxLookAhead&&(this.maxLookAhead=o),s},Xn.prototype.baseToken=function(o){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=o;)this.baseTokenPos+=2;var s=this.baseTokens[this.baseTokenPos+1];return{type:s&&s.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-o}},Xn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Xn.fromSaved=function(o,s,c){return s instanceof oa?new Xn(o,xn(o.mode,s.state),c,s.lookAhead):new Xn(o,xn(o.mode,s),c)},Xn.prototype.save=function(o){var s=o!==!1?xn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new oa(s,this.maxLookAhead):s};function Hi(o,s,c,u){var p=[o.state.modeGen],v={};rn(o,s.text,o.doc.mode,c,function(E,K){return p.push(E,K)},v,u);for(var m=c.state,_=function(E){c.baseTokens=p;var K=o.state.overlays[E],rt=1,vt=0;c.state=!0,rn(o,s.text,K.mode,c,function(ct,kt){for(var Vt=rt;vt<ct;){var Yt=p[rt];Yt>ct&&p.splice(rt,1,ct,p[rt+1],Yt),rt+=2,vt=Math.min(ct,Yt)}if(kt)if(K.opaque)p.splice(Vt,rt-Vt,ct,"overlay "+kt),rt=Vt+2;else for(;Vt<rt;Vt+=2){var re=p[Vt+1];p[Vt+1]=(re?re+" ":"")+"overlay "+kt}},v),c.state=m,c.baseTokens=null,c.baseTokenPos=1},w=0;w<o.state.overlays.length;++w)_(w);return{styles:p,classes:v.bgClass||v.textClass?v:null}}function ja(o,s,c){if(!s.styles||s.styles[0]!=o.state.modeGen){var u=Ao(o,Xe(s)),p=s.text.length>o.options.maxHighlightLength&&xn(o.doc.mode,u.state),v=Hi(o,s,u);p&&(u.state=p),s.stateAfter=u.save(!p),s.styles=v.styles,v.classes?s.styleClasses=v.classes:s.styleClasses&&(s.styleClasses=null),c===o.doc.highlightFrontier&&(o.doc.modeFrontier=Math.max(o.doc.modeFrontier,++o.doc.highlightFrontier))}return s.styles}function Ao(o,s,c){var u=o.doc,p=o.display;if(!u.mode.startState)return new Xn(u,!0,s);var v=Ci(o,s,c),m=v>u.first&&me(u,v-1).stateAfter,_=m?Xn.fromSaved(u,m,v):new Xn(u,bi(u.mode),v);return u.iter(v,s,function(w){aa(o,w.text,_);var E=_.line;w.stateAfter=E==s-1||E%5==0||E>=p.viewFrom&&E<p.viewTo?_.save():null,_.nextLine()}),c&&(u.modeFrontier=_.line),_}function aa(o,s,c,u){var p=o.doc.mode,v=new rr(s,o.options.tabSize,c);for(v.start=v.pos=u||0,s==""&&ai(p,c.state);!v.eol();)sa(p,v,c.state),v.start=v.pos}function ai(o,s){if(o.blankLine)return o.blankLine(s);if(o.innerMode){var c=Sn(o,s);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function sa(o,s,c,u){for(var p=0;p<10;p++){u&&(u[0]=Sn(o,c).mode);var v=o.token(s,c);if(s.pos>s.start)return v}throw new Error("Mode "+o.name+" failed to advance stream.")}var la=function(o,s,c){this.start=o.start,this.end=o.pos,this.string=o.current(),this.type=s||null,this.state=c};function Bi(o,s,c,u){var p=o.doc,v=p.mode,m;s=we(p,s);var _=me(p,s.line),w=Ao(o,s.line,c),E=new rr(_.text,o.options.tabSize,w),K;for(u&&(K=[]);(u||E.pos<s.ch)&&!E.eol();)E.start=E.pos,m=sa(v,E,w.state),u&&K.push(new la(E,m,xn(p.mode,w.state)));return u?K:new la(E,m,w.state)}function ko(o,s){if(o)for(;;){var c=o.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;o=o.slice(0,c.index)+o.slice(c.index+c[0].length);var u=c[1]?"bgClass":"textClass";s[u]==null?s[u]=c[2]:new RegExp("(?:^|\\s)"+c[2]+"(?:$|\\s)").test(s[u])||(s[u]+=" "+c[2])}return o}function rn(o,s,c,u,p,v,m){var _=c.flattenSpans;_==null&&(_=o.options.flattenSpans);var w=0,E=null,K=new rr(s,o.options.tabSize,u),rt,vt=o.options.addModeClass&&[null];for(s==""&&ko(ai(c,u.state),v);!K.eol();){if(K.pos>o.options.maxHighlightLength?(_=!1,m&&aa(o,s,u,K.pos),K.pos=s.length,rt=null):rt=ko(sa(c,K,u.state,vt),v),vt){var ct=vt[0].name;ct&&(rt="m-"+(rt?ct+" "+rt:ct))}if(!_||E!=rt){for(;w<K.start;)w=Math.min(K.start,w+5e3),p(w,E);E=rt}K.start=K.pos}for(;w<K.pos;){var kt=Math.min(K.pos,w+5e3);p(kt,E),w=kt}}function Ci(o,s,c){for(var u,p,v=o.doc,m=c?-1:s-(o.doc.mode.innerMode?1e3:100),_=s;_>m;--_){if(_<=v.first)return v.first;var w=me(v,_-1),E=w.stateAfter;if(E&&(!c||_+(E instanceof oa?E.lookAhead:0)<=v.modeFrontier))return _;var K=Kt(w.text,null,o.options.tabSize);(p==null||u>K)&&(p=_-1,u=K)}return p}function Ts(o,s){if(o.modeFrontier=Math.min(o.modeFrontier,s),!(o.highlightFrontier<s-10)){for(var c=o.first,u=s-1;u>c;u--){var p=me(o,u).stateAfter;if(p&&(!(p instanceof oa)||u+p.lookAhead<s)){c=u+1;break}}o.highlightFrontier=Math.min(o.highlightFrontier,c)}}var Dn=!1,jn=!1;function Ia(){Dn=!0}function Es(){jn=!0}function Ui(o,s,c){this.marker=o,this.from=s,this.to=c}function Wi(o,s){if(o)for(var c=0;c<o.length;++c){var u=o[c];if(u.marker==s)return u}}function Zn(o,s){for(var c,u=0;u<o.length;++u)o[u]!=s&&(c||(c=[])).push(o[u]);return c}function Ps(o,s,c){var u=c&&window.WeakSet&&(c.markedSpans||(c.markedSpans=new WeakSet));u&&o.markedSpans&&u.has(o.markedSpans)?o.markedSpans.push(s):(o.markedSpans=o.markedSpans?o.markedSpans.concat([s]):[s],u&&u.add(o.markedSpans)),s.marker.attachLine(o)}function ua(o,s,c){var u;if(o)for(var p=0;p<o.length;++p){var v=o[p],m=v.marker,_=v.from==null||(m.inclusiveLeft?v.from<=s:v.from<s);if(_||v.from==s&&m.type=="bookmark"&&(!c||!v.marker.insertLeft)){var w=v.to==null||(m.inclusiveRight?v.to>=s:v.to>s);(u||(u=[])).push(new Ui(m,v.from,w?null:v.to))}}return u}function Ra(o,s,c){var u;if(o)for(var p=0;p<o.length;++p){var v=o[p],m=v.marker,_=v.to==null||(m.inclusiveRight?v.to>=s:v.to>s);if(_||v.from==s&&m.type=="bookmark"&&(!c||v.marker.insertLeft)){var w=v.from==null||(m.inclusiveLeft?v.from<=s:v.from<s);(u||(u=[])).push(new Ui(m,w?null:v.from-s,v.to==null?null:v.to-s))}}return u}function Mo(o,s){if(s.full)return null;var c=hi(o,s.from.line)&&me(o,s.from.line).markedSpans,u=hi(o,s.to.line)&&me(o,s.to.line).markedSpans;if(!c&&!u)return null;var p=s.from.ch,v=s.to.ch,m=U(s.from,s.to)==0,_=ua(c,p,m),w=Ra(u,v,m),E=s.text.length==1,K=ae(s.text).length+(E?p:0);if(_)for(var rt=0;rt<_.length;++rt){var vt=_[rt];if(vt.to==null){var ct=Wi(w,vt.marker);ct?E&&(vt.to=ct.to==null?null:ct.to+K):vt.to=p}}if(w)for(var kt=0;kt<w.length;++kt){var Vt=w[kt];if(Vt.to!=null&&(Vt.to+=K),Vt.from==null){var Yt=Wi(_,Vt.marker);Yt||(Vt.from=K,E&&(_||(_=[])).push(Vt))}else Vt.from+=K,E&&(_||(_=[])).push(Vt)}_&&(_=ca(_)),w&&w!=_&&(w=ca(w));var re=[_];if(!E){var de=s.text.length-2,ie;if(de>0&&_)for(var he=0;he<_.length;++he)_[he].to==null&&(ie||(ie=[])).push(new Ui(_[he].marker,null,null));for(var Te=0;Te<de;++Te)re.push(ie);re.push(w)}return re}function ca(o){for(var s=0;s<o.length;++s){var c=o[s];c.from!=null&&c.from==c.to&&c.marker.clearWhenEmpty!==!1&&o.splice(s--,1)}return o.length?o:null}function In(o,s,c){var u=null;if(o.iter(s.line,c.line+1,function(ct){if(ct.markedSpans)for(var kt=0;kt<ct.markedSpans.length;++kt){var Vt=ct.markedSpans[kt].marker;Vt.readOnly&&(!u||Ut(u,Vt)==-1)&&(u||(u=[])).push(Vt)}}),!u)return null;for(var p=[{from:s,to:c}],v=0;v<u.length;++v)for(var m=u[v],_=m.find(0),w=0;w<p.length;++w){var E=p[w];if(!(U(E.to,_.from)<0||U(E.from,_.to)>0)){var K=[w,1],rt=U(E.from,_.from),vt=U(E.to,_.to);(rt<0||!m.inclusiveLeft&&!rt)&&K.push({from:E.from,to:_.from}),(vt>0||!m.inclusiveRight&&!vt)&&K.push({from:_.to,to:E.to}),p.splice.apply(p,K),w+=K.length-3}}return p}function zi(o){var s=o.markedSpans;if(s){for(var c=0;c<s.length;++c)s[c].marker.detachLine(o);o.markedSpans=null}}function Ki(o,s){if(s){for(var c=0;c<s.length;++c)s[c].marker.attachLine(o);o.markedSpans=s}}function Rn(o){return o.inclusiveLeft?-1:0}function Gi(o){return o.inclusiveRight?1:0}function Lo(o,s){var c=o.lines.length-s.lines.length;if(c!=0)return c;var u=o.find(),p=s.find(),v=U(u.from,p.from)||Rn(o)-Rn(s);if(v)return-v;var m=U(u.to,p.to)||Gi(o)-Gi(s);return m||s.id-o.id}function $i(o,s){var c=jn&&o.markedSpans,u;if(c)for(var p=void 0,v=0;v<c.length;++v)p=c[v],p.marker.collapsed&&(s?p.from:p.to)==null&&(!u||Lo(u,p.marker)<0)&&(u=p.marker);return u}function qi(o){return $i(o,!0)}function vi(o){return $i(o,!1)}function mn(o,s){var c=jn&&o.markedSpans,u;if(c)for(var p=0;p<c.length;++p){var v=c[p];v.marker.collapsed&&(v.from==null||v.from<s)&&(v.to==null||v.to>s)&&(!u||Lo(u,v.marker)<0)&&(u=v.marker)}return u}function Nn(o,s,c,u,p){var v=me(o,s),m=jn&&v.markedSpans;if(m)for(var _=0;_<m.length;++_){var w=m[_];if(w.marker.collapsed){var E=w.marker.find(0),K=U(E.from,c)||Rn(w.marker)-Rn(p),rt=U(E.to,u)||Gi(w.marker)-Gi(p);if(!(K>=0&&rt<=0||K<=0&&rt>=0)&&(K<=0&&(w.marker.inclusiveRight&&p.inclusiveLeft?U(E.to,c)>=0:U(E.to,c)>0)||K>=0&&(w.marker.inclusiveRight&&p.inclusiveLeft?U(E.from,u)<=0:U(E.from,u)<0)))return!0}}}function dr(o){for(var s;s=qi(o);)o=s.find(-1,!0).line;return o}function Yi(o){for(var s;s=vi(o);)o=s.find(1,!0).line;return o}function Do(o){for(var s,c;s=vi(o);)o=s.find(1,!0).line,(c||(c=[])).push(o);return c}function Fn(o,s){var c=me(o,s),u=dr(c);return c==u?s:Xe(u)}function Jn(o,s){if(s>o.lastLine())return s;var c=me(o,s),u;if(!Vn(o,c))return s;for(;u=vi(c);)c=u.find(1,!0).line;return Xe(c)+1}function Vn(o,s){var c=jn&&s.markedSpans;if(c){for(var u=void 0,p=0;p<c.length;++p)if(u=c[p],!!u.marker.collapsed){if(u.from==null)return!0;if(!u.marker.widgetNode&&u.from==0&&u.marker.inclusiveLeft&&si(o,s,u))return!0}}}function si(o,s,c){if(c.to==null){var u=c.marker.find(1,!0);return si(o,u.line,Wi(u.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==s.text.length)return!0;for(var p=void 0,v=0;v<s.markedSpans.length;++v)if(p=s.markedSpans[v],p.marker.collapsed&&!p.marker.widgetNode&&p.from==c.to&&(p.to==null||p.to!=c.from)&&(p.marker.inclusiveLeft||c.marker.inclusiveRight)&&si(o,s,p))return!0}function Ar(o){o=dr(o);for(var s=0,c=o.parent,u=0;u<c.lines.length;++u){var p=c.lines[u];if(p==o)break;s+=p.height}for(var v=c.parent;v;c=v,v=c.parent)for(var m=0;m<v.children.length;++m){var _=v.children[m];if(_==c)break;s+=_.height}return s}function gi(o){if(o.height==0)return 0;for(var s=o.text.length,c,u=o;c=qi(u);){var p=c.find(0,!0);u=p.from.line,s+=p.from.ch-p.to.ch}for(u=o;c=vi(u);){var v=c.find(0,!0);s-=u.text.length-v.from.ch,u=v.to.line,s+=u.text.length-v.to.ch}return s}function Xi(o){var s=o.display,c=o.doc;s.maxLine=me(c,c.first),s.maxLineLength=gi(s.maxLine),s.maxLineChanged=!0,c.iter(function(u){var p=gi(u);p>s.maxLineLength&&(s.maxLineLength=p,s.maxLine=u)})}var xi=function(o,s,c){this.text=o,Ki(this,s),this.height=c?c(this):1};xi.prototype.lineNo=function(){return Xe(this)},Mn(xi);function Na(o,s,c,u){o.text=s,o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null),o.order!=null&&(o.order=null),zi(o),Ki(o,c);var p=u?u(o):1;p!=o.height&&en(o,p)}function As(o){o.parent=null,zi(o)}var ks={},Fa={};function He(o,s){if(!o||/^\s*$/.test(o))return null;var c=s.addModeClass?Fa:ks;return c[o]||(c[o]=o.replace(/\S+/g,"cm-$&"))}function Va(o,s){var c=Et("span",null,null,S?"padding-right: .1px":null),u={pre:Et("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:o,trailingSpace:!1,splitSpaces:o.getOption("lineWrapping")};s.measure={};for(var p=0;p<=(s.rest?s.rest.length:0);p++){var v=p?s.rest[p-1]:s.line,m=void 0;u.pos=0,u.addToken=jo,Vi(o.display.measure)&&(m=$e(v,o.doc.direction))&&(u.addToken=Si(u.addToken,m)),u.map=[];var _=s!=o.display.externalMeasured&&Xe(v);En(v,u,ja(o,v,_)),v.styleClasses&&(v.styleClasses.bgClass&&(u.bgClass=Wt(v.styleClasses.bgClass,u.bgClass||"")),v.styleClasses.textClass&&(u.textClass=Wt(v.styleClasses.textClass,u.textClass||""))),u.map.length==0&&u.map.push(0,0,u.content.appendChild(vn(o.display.measure))),p==0?(s.measure.map=u.map,s.measure.cache={}):((s.measure.maps||(s.measure.maps=[])).push(u.map),(s.measure.caches||(s.measure.caches=[])).push({}))}if(S){var w=u.content.lastChild;(/\bcm-tab\b/.test(w.className)||w.querySelector&&w.querySelector(".cm-tab"))&&(u.content.className="cm-tab-wrap-hack")}return Qe(o,"renderLine",o,s.line,u.pre),u.pre.className&&(u.textClass=Wt(u.pre.className,u.textClass||"")),u}function cn(o){var s=V("span","•","cm-invalidchar");return s.title="\\u"+o.charCodeAt(0).toString(16),s.setAttribute("aria-label",s.title),s}function jo(o,s,c,u,p,v,m){if(s){var _=o.splitSpaces?Zi(s,o.trailingSpace):s,w=o.cm.state.specialChars,E=!1,K;if(!w.test(s))o.col+=s.length,K=document.createTextNode(_),o.map.push(o.pos,o.pos+s.length,K),k&&N<9&&(E=!0),o.pos+=s.length;else{K=document.createDocumentFragment();for(var rt=0;;){w.lastIndex=rt;var vt=w.exec(s),ct=vt?vt.index-rt:s.length-rt;if(ct){var kt=document.createTextNode(_.slice(rt,rt+ct));k&&N<9?K.appendChild(V("span",[kt])):K.appendChild(kt),o.map.push(o.pos,o.pos+ct,kt),o.col+=ct,o.pos+=ct}if(!vt)break;rt+=ct+1;var Vt=void 0;if(vt[0]=="	"){var Yt=o.cm.options.tabSize,re=Yt-o.col%Yt;Vt=K.appendChild(V("span",er(re),"cm-tab")),Vt.setAttribute("role","presentation"),Vt.setAttribute("cm-text","	"),o.col+=re}else vt[0]=="\r"||vt[0]==`
`?(Vt=K.appendChild(V("span",vt[0]=="\r"?"␍":"␤","cm-invalidchar")),Vt.setAttribute("cm-text",vt[0]),o.col+=1):(Vt=o.cm.options.specialCharPlaceholder(vt[0]),Vt.setAttribute("cm-text",vt[0]),k&&N<9?K.appendChild(V("span",[Vt])):K.appendChild(Vt),o.col+=1);o.map.push(o.pos,o.pos+1,Vt),o.pos++}}if(o.trailingSpace=_.charCodeAt(s.length-1)==32,c||u||p||E||v||m){var de=c||"";u&&(de+=u),p&&(de+=p);var ie=V("span",[K],de,v);if(m)for(var he in m)m.hasOwnProperty(he)&&he!="style"&&he!="class"&&ie.setAttribute(he,m[he]);return o.content.appendChild(ie)}o.content.appendChild(K)}}function Zi(o,s){if(o.length>1&&!/  /.test(o))return o;for(var c=s,u="",p=0;p<o.length;p++){var v=o.charAt(p);v==" "&&c&&(p==o.length-1||o.charCodeAt(p+1)==32)&&(v=" "),u+=v,c=v==" "}return u}function Si(o,s){return function(c,u,p,v,m,_,w){p=p?p+" cm-force-border":"cm-force-border";for(var E=c.pos,K=E+u.length;;){for(var rt=void 0,vt=0;vt<s.length&&(rt=s[vt],!(rt.to>E&&rt.from<=E));vt++);if(rt.to>=K)return o(c,u,p,v,m,_,w);o(c,u.slice(0,rt.to-E),p,v,null,_,w),v=null,u=u.slice(rt.to-E),E=rt.to}}}function nn(o,s,c,u){var p=!u&&c.widgetNode;p&&o.map.push(o.pos,o.pos+s,p),!u&&o.cm.display.input.needsContentAttribute&&(p||(p=o.content.appendChild(document.createElement("span"))),p.setAttribute("cm-marker",c.id)),p&&(o.cm.display.input.setUneditable(p),o.content.appendChild(p)),o.pos+=s,o.trailingSpace=!1}function En(o,s,c){var u=o.markedSpans,p=o.text,v=0;if(!u){for(var m=1;m<c.length;m+=2)s.addToken(s,p.slice(v,v=c[m]),He(c[m+1],s.cm.options));return}for(var _=p.length,w=0,E=1,K="",rt,vt,ct=0,kt,Vt,Yt,re,de;;){if(ct==w){kt=Vt=Yt=vt="",de=null,re=null,ct=1/0;for(var ie=[],he=void 0,Te=0;Te<u.length;++Te){var Se=u[Te],Be=Se.marker;if(Be.type=="bookmark"&&Se.from==w&&Be.widgetNode)ie.push(Be);else if(Se.from<=w&&(Se.to==null||Se.to>w||Be.collapsed&&Se.to==w&&Se.from==w)){if(Se.to!=null&&Se.to!=w&&ct>Se.to&&(ct=Se.to,Vt=""),Be.className&&(kt+=" "+Be.className),Be.css&&(vt=(vt?vt+";":"")+Be.css),Be.startStyle&&Se.from==w&&(Yt+=" "+Be.startStyle),Be.endStyle&&Se.to==ct&&(he||(he=[])).push(Be.endStyle,Se.to),Be.title&&((de||(de={})).title=Be.title),Be.attributes)for(var cr in Be.attributes)(de||(de={}))[cr]=Be.attributes[cr];Be.collapsed&&(!re||Lo(re.marker,Be)<0)&&(re=Se)}else Se.from>w&&ct>Se.from&&(ct=Se.from)}if(he)for(var Hr=0;Hr<he.length;Hr+=2)he[Hr+1]==ct&&(Vt+=" "+he[Hr]);if(!re||re.from==w)for(var hr=0;hr<ie.length;++hr)nn(s,0,ie[hr]);if(re&&(re.from||0)==w){if(nn(s,(re.to==null?_+1:re.to)-w,re.marker,re.from==null),re.to==null)return;re.to==w&&(re=!1)}}if(w>=_)break;for(var An=Math.min(_,ct);;){if(K){var pn=w+K.length;if(!re){var Dr=pn>An?K.slice(0,An-w):K;s.addToken(s,Dr,rt?rt+kt:kt,Yt,w+Dr.length==ct?Vt:"",vt,de)}if(pn>=An){K=K.slice(An-w),w=An;break}w=pn,Yt=""}K=p.slice(v,v=c[E++]),rt=He(c[E++],s.cm.options)}}}function Io(o,s,c){this.line=s,this.rest=Do(s),this.size=this.rest?Xe(ae(this.rest))-c+1:1,this.node=this.text=null,this.hidden=Vn(o,s)}function Oi(o,s,c){for(var u=[],p,v=s;v<c;v=p){var m=new Io(o.doc,me(o.doc,v),v);p=v+m.size,u.push(m)}return u}var Qn=null;function Ms(o){Qn?Qn.ops.push(o):o.ownsGroup=Qn={ops:[o],delayedCallbacks:[]}}function zr(o){var s=o.delayedCallbacks,c=0;do{for(;c<s.length;c++)s[c].call(null);for(var u=0;u<o.ops.length;u++){var p=o.ops[u];if(p.cursorActivityHandlers)for(;p.cursorActivityCalled<p.cursorActivityHandlers.length;)p.cursorActivityHandlers[p.cursorActivityCalled++].call(null,p.cm)}}while(c<s.length)}function Ji(o,s){var c=o.ownsGroup;if(c)try{zr(c)}finally{Qn=null,s(c)}}var fn=null;function kr(o,s){var c=_r(o,s);if(c.length){var u=Array.prototype.slice.call(arguments,2),p;Qn?p=Qn.delayedCallbacks:fn?p=fn:(p=fn=[],setTimeout(Ha,0));for(var v=function(_){p.push(function(){return c[_].apply(null,u)})},m=0;m<c.length;++m)v(m)}}function Ha(){var o=fn;fn=null;for(var s=0;s<o.length;++s)o[s]()}function Ba(o,s,c,u){for(var p=0;p<s.changes.length;p++){var v=s.changes[p];v=="text"?Ds(o,s):v=="gutter"?mi(o,s,c,u):v=="class"?Ti(o,s):v=="widget"&&js(o,s,u)}s.changes=null}function li(o){return o.node==o.text&&(o.node=V("div",null,null,"position: relative"),o.text.parentNode&&o.text.parentNode.replaceChild(o.node,o.text),o.node.appendChild(o.text),k&&N<8&&(o.node.style.zIndex=2)),o.node}function Ls(o,s){var c=s.bgClass?s.bgClass+" "+(s.line.bgClass||""):s.line.bgClass;if(c&&(c+=" CodeMirror-linebackground"),s.background)c?s.background.className=c:(s.background.parentNode.removeChild(s.background),s.background=null);else if(c){var u=li(s);s.background=u.insertBefore(V("div",null,c),u.firstChild),o.display.input.setUneditable(s.background)}}function Qi(o,s){var c=o.display.externalMeasured;return c&&c.line==s.line?(o.display.externalMeasured=null,s.measure=c.measure,c.built):Va(o,s)}function Ds(o,s){var c=s.text.className,u=Qi(o,s);s.text==s.node&&(s.node=u.pre),s.text.parentNode.replaceChild(u.pre,s.text),s.text=u.pre,u.bgClass!=s.bgClass||u.textClass!=s.textClass?(s.bgClass=u.bgClass,s.textClass=u.textClass,Ti(o,s)):c&&(s.text.className=c)}function Ti(o,s){Ls(o,s),s.line.wrapClass?li(s).className=s.line.wrapClass:s.node!=s.text&&(s.node.className="");var c=s.textClass?s.textClass+" "+(s.line.textClass||""):s.line.textClass;s.text.className=c||""}function mi(o,s,c,u){if(s.gutter&&(s.node.removeChild(s.gutter),s.gutter=null),s.gutterBackground&&(s.node.removeChild(s.gutterBackground),s.gutterBackground=null),s.line.gutterClass){var p=li(s);s.gutterBackground=V("div",null,"CodeMirror-gutter-background "+s.line.gutterClass,"left: "+(o.options.fixedGutter?u.fixedPos:-u.gutterTotalWidth)+"px; width: "+u.gutterTotalWidth+"px"),o.display.input.setUneditable(s.gutterBackground),p.insertBefore(s.gutterBackground,s.text)}var v=s.line.gutterMarkers;if(o.options.lineNumbers||v){var m=li(s),_=s.gutter=V("div",null,"CodeMirror-gutter-wrapper","left: "+(o.options.fixedGutter?u.fixedPos:-u.gutterTotalWidth)+"px");if(_.setAttribute("aria-hidden","true"),o.display.input.setUneditable(_),m.insertBefore(_,s.text),s.line.gutterClass&&(_.className+=" "+s.line.gutterClass),o.options.lineNumbers&&(!v||!v["CodeMirror-linenumbers"])&&(s.lineNumber=_.appendChild(V("div",Vr(o.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+u.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+o.display.lineNumInnerWidth+"px"))),v)for(var w=0;w<o.display.gutterSpecs.length;++w){var E=o.display.gutterSpecs[w].className,K=v.hasOwnProperty(E)&&v[E];K&&_.appendChild(V("div",[K],"CodeMirror-gutter-elt","left: "+u.gutterLeft[E]+"px; width: "+u.gutterWidth[E]+"px"))}}}function js(o,s,c){s.alignable&&(s.alignable=null);for(var u=nt("CodeMirror-linewidget"),p=s.node.firstChild,v=void 0;p;p=v)v=p.nextSibling,u.test(p.className)&&s.node.removeChild(p);Ua(o,s,c)}function Is(o,s,c,u){var p=Qi(o,s);return s.text=s.node=p.pre,p.bgClass&&(s.bgClass=p.bgClass),p.textClass&&(s.textClass=p.textClass),Ti(o,s),mi(o,s,c,u),Ua(o,s,u),s.node}function Ua(o,s,c){if(to(o,s.line,s,c,!0),s.rest)for(var u=0;u<s.rest.length;u++)to(o,s.rest[u],s,c,!1)}function to(o,s,c,u,p){if(s.widgets)for(var v=li(c),m=0,_=s.widgets;m<_.length;++m){var w=_[m],E=V("div",[w.node],"CodeMirror-linewidget"+(w.className?" "+w.className:""));w.handleMouseEvents||E.setAttribute("cm-ignore-events","true"),fa(w,E,c,u),o.display.input.setUneditable(E),p&&w.above?v.insertBefore(E,c.gutter||c.text):v.appendChild(E),kr(w,"redraw")}}function fa(o,s,c,u){if(o.noHScroll){(c.alignable||(c.alignable=[])).push(s);var p=u.wrapperWidth;s.style.left=u.fixedPos+"px",o.coverGutter||(p-=u.gutterTotalWidth,s.style.paddingLeft=u.gutterTotalWidth+"px"),s.style.width=p+"px"}o.coverGutter&&(s.style.zIndex=5,s.style.position="relative",o.noHScroll||(s.style.marginLeft=-u.gutterTotalWidth+"px"))}function Ei(o){if(o.height!=null)return o.height;var s=o.doc.cm;if(!s)return 0;if(!Rt(document.body,o.node)){var c="position: relative;";o.coverGutter&&(c+="margin-left: -"+s.display.gutters.offsetWidth+"px;"),o.noHScroll&&(c+="width: "+s.display.wrapper.clientWidth+"px;"),mt(s.display.measure,V("div",[o.node],null,c))}return o.height=o.node.parentNode.offsetHeight}function Hn(o,s){for(var c=fe(s);c!=o.wrapper;c=c.parentNode)if(!c||c.nodeType==1&&c.getAttribute("cm-ignore-events")=="true"||c.parentNode==o.sizer&&c!=o.mover)return!0}function eo(o){return o.lineSpace.offsetTop}function ro(o){return o.mover.offsetHeight-o.lineSpace.offsetHeight}function C(o){if(o.cachedPaddingH)return o.cachedPaddingH;var s=mt(o.measure,V("pre","x","CodeMirror-line-like")),c=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,u={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};return!isNaN(u.left)&&!isNaN(u.right)&&(o.cachedPaddingH=u),u}function M(o){return be-o.display.nativeBarWidth}function Z(o){return o.display.scroller.clientWidth-M(o)-o.display.barWidth}function ot(o){return o.display.scroller.clientHeight-M(o)-o.display.barHeight}function wt(o,s,c){var u=o.options.lineWrapping,p=u&&Z(o);if(!s.measure.heights||u&&s.measure.width!=p){var v=s.measure.heights=[];if(u){s.measure.width=p;for(var m=s.text.firstChild.getClientRects(),_=0;_<m.length-1;_++){var w=m[_],E=m[_+1];Math.abs(w.bottom-E.bottom)>2&&v.push((w.bottom+E.top)/2-c.top)}}v.push(c.bottom-c.top)}}function pt(o,s,c){if(o.line==s)return{map:o.measure.map,cache:o.measure.cache};if(o.rest){for(var u=0;u<o.rest.length;u++)if(o.rest[u]==s)return{map:o.measure.maps[u],cache:o.measure.caches[u]};for(var p=0;p<o.rest.length;p++)if(Xe(o.rest[p])>c)return{map:o.measure.maps[p],cache:o.measure.caches[p],before:!0}}}function Nt(o,s){s=dr(s);var c=Xe(s),u=o.display.externalMeasured=new Io(o.doc,s,c);u.lineN=c;var p=u.built=Va(o,u);return u.text=p.pre,mt(o.display.lineMeasure,p.pre),u}function se(o,s,c,u){return ur(o,Ee(o,s),c,u)}function De(o,s){if(s>=o.display.viewFrom&&s<o.display.viewTo)return o.display.view[Ho(o,s)];var c=o.display.externalMeasured;if(c&&s>=c.lineN&&s<c.lineN+c.size)return c}function Ee(o,s){var c=Xe(s),u=De(o,c);u&&!u.text?u=null:u&&u.changes&&(Ba(o,u,c,Pl(o)),o.curOp.forceUpdate=!0),u||(u=Nt(o,s));var p=pt(u,s,c);return{line:s,view:u,rect:null,map:p.map,cache:p.cache,before:p.before,hasHeights:!1}}function ur(o,s,c,u,p){s.before&&(c=-1);var v=c+(u||""),m;return s.cache.hasOwnProperty(v)?m=s.cache[v]:(s.rect||(s.rect=s.view.text.getBoundingClientRect()),s.hasHeights||(wt(o,s.view,s.rect),s.hasHeights=!0),m=yf(o,s,c,u),m.bogus||(s.cache[v]=m)),{left:m.left,right:m.right,top:p?m.rtop:m.top,bottom:p?m.rbottom:m.bottom}}var Yr={left:0,right:0,top:0,bottom:0};function Wa(o,s,c){for(var u,p,v,m,_,w,E=0;E<o.length;E+=3)if(_=o[E],w=o[E+1],s<_?(p=0,v=1,m="left"):s<w?(p=s-_,v=p+1):(E==o.length-3||s==w&&o[E+3]>s)&&(v=w-_,p=v-1,s>=w&&(m="right")),p!=null){if(u=o[E+2],_==w&&c==(u.insertLeft?"left":"right")&&(m=c),c=="left"&&p==0)for(;E&&o[E-2]==o[E-3]&&o[E-1].insertLeft;)u=o[(E-=3)+2],m="left";if(c=="right"&&p==w-_)for(;E<o.length-3&&o[E+3]==o[E+4]&&!o[E+5].insertLeft;)u=o[(E+=3)+2],m="right";break}return{node:u,start:p,end:v,collapse:m,coverStart:_,coverEnd:w}}function Ro(o,s){var c=Yr;if(s=="left")for(var u=0;u<o.length&&(c=o[u]).left==c.right;u++);else for(var p=o.length-1;p>=0&&(c=o[p]).left==c.right;p--);return c}function yf(o,s,c,u){var p=Wa(s.map,c,u),v=p.node,m=p.start,_=p.end,w=p.collapse,E;if(v.nodeType==3){for(var K=0;K<4;K++){for(;m&&Ye(s.line.text.charAt(p.coverStart+m));)--m;for(;p.coverStart+_<p.coverEnd&&Ye(s.line.text.charAt(p.coverStart+_));)++_;if(k&&N<9&&m==0&&_==p.coverEnd-p.coverStart?E=v.parentNode.getBoundingClientRect():E=Ro(j(v,m,_).getClientRects(),u),E.left||E.right||m==0)break;_=m,m=m-1,w="right"}k&&N<11&&(E=_f(o.display.measure,E))}else{m>0&&(w=u="right");var rt;o.options.lineWrapping&&(rt=v.getClientRects()).length>1?E=rt[u=="right"?rt.length-1:0]:E=v.getBoundingClientRect()}if(k&&N<9&&!m&&(!E||!E.left&&!E.right)){var vt=v.parentNode.getClientRects()[0];vt?E={left:vt.left,right:vt.left+io(o.display),top:vt.top,bottom:vt.bottom}:E=Yr}for(var ct=E.top-s.rect.top,kt=E.bottom-s.rect.top,Vt=(ct+kt)/2,Yt=s.view.measure.heights,re=0;re<Yt.length-1&&!(Vt<Yt[re]);re++);var de=re?Yt[re-1]:0,ie=Yt[re],he={left:(w=="right"?E.right:E.left)-s.rect.left,right:(w=="left"?E.left:E.right)-s.rect.left,top:de,bottom:ie};return!E.left&&!E.right&&(he.bogus=!0),o.options.singleCursorHeightPerLine||(he.rtop=ct,he.rbottom=kt),he}function _f(o,s){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!un(o))return s;var c=screen.logicalXDPI/screen.deviceXDPI,u=screen.logicalYDPI/screen.deviceYDPI;return{left:s.left*c,right:s.right*c,top:s.top*u,bottom:s.bottom*u}}function Pu(o){if(o.measure&&(o.measure.cache={},o.measure.heights=null,o.rest))for(var s=0;s<o.rest.length;s++)o.measure.caches[s]={}}function za(o){o.display.externalMeasure=null,tt(o.display.lineMeasure);for(var s=0;s<o.display.view.length;s++)Pu(o.display.view[s])}function no(o){za(o),o.display.cachedCharWidth=o.display.cachedTextHeight=o.display.cachedPaddingH=null,o.options.lineWrapping||(o.display.maxLineChanged=!0),o.display.lineNumChars=null}function Au(o){return A&&Ft?-(o.body.getBoundingClientRect().left-parseInt(getComputedStyle(o.body).marginLeft)):o.defaultView.pageXOffset||(o.documentElement||o.body).scrollLeft}function ku(o){return A&&Ft?-(o.body.getBoundingClientRect().top-parseInt(getComputedStyle(o.body).marginTop)):o.defaultView.pageYOffset||(o.documentElement||o.body).scrollTop}function Ol(o){var s=dr(o),c=s.widgets,u=0;if(c)for(var p=0;p<c.length;++p)c[p].above&&(u+=Ei(c[p]));return u}function No(o,s,c,u,p){if(!p){var v=Ol(s);c.top+=v,c.bottom+=v}if(u=="line")return c;u||(u="local");var m=Ar(s);if(u=="local"?m+=eo(o.display):m-=o.display.viewOffset,u=="page"||u=="window"){var _=o.display.lineSpace.getBoundingClientRect();m+=_.top+(u=="window"?0:ku(pe(o)));var w=_.left+(u=="window"?0:Au(pe(o)));c.left+=w,c.right+=w}return c.top+=m,c.bottom+=m,c}function Rs(o,s,c){if(c=="div")return s;var u=s.left,p=s.top;if(c=="page")u-=Au(pe(o)),p-=ku(pe(o));else if(c=="local"||!c){var v=o.display.sizer.getBoundingClientRect();u+=v.left,p+=v.top}var m=o.display.lineSpace.getBoundingClientRect();return{left:u-m.left,top:p-m.top}}function Ns(o,s,c,u,p){return u||(u=me(o.doc,s.line)),No(o,u,se(o,u,s.ch,p),c)}function ti(o,s,c,u,p,v){u=u||me(o.doc,s.line),p||(p=Ee(o,u));function m(kt,Vt){var Yt=ur(o,p,kt,Vt?"right":"left",v);return Vt?Yt.left=Yt.right:Yt.right=Yt.left,No(o,u,Yt,c)}var _=$e(u,o.doc.direction),w=s.ch,E=s.sticky;if(w>=u.text.length?(w=u.text.length,E="before"):w<=0&&(w=0,E="after"),!_)return m(E=="before"?w-1:w,E=="before");function K(kt,Vt,Yt){var re=_[Vt],de=re.level==1;return m(Yt?kt-1:kt,de!=Yt)}var rt=qr(_,w,E),vt=ye,ct=K(w,rt,E=="before");return vt!=null&&(ct.other=K(w,vt,E!="before")),ct}function Mu(o,s){var c=0;s=we(o.doc,s),o.options.lineWrapping||(c=io(o.display)*s.ch);var u=me(o.doc,s.line),p=Ar(u)+eo(o.display);return{left:c,right:c,top:p,bottom:p+u.height}}function pa(o,s,c,u,p){var v=x(o,s,c);return v.xRel=p,u&&(v.outside=u),v}function Tl(o,s,c){var u=o.doc;if(c+=o.display.viewOffset,c<0)return pa(u.first,0,null,-1,-1);var p=Yn(u,c),v=u.first+u.size-1;if(p>v)return pa(u.first+u.size-1,me(u,v).text.length,null,1,1);s<0&&(s=0);for(var m=me(u,p);;){var _=El(o,m,p,s,c),w=mn(m,_.ch+(_.xRel>0||_.outside>0?1:0));if(!w)return _;var E=w.find(1);if(E.line==p)return E;m=me(u,p=E.line)}}function Lu(o,s,c,u){u-=Ol(s);var p=s.text.length,v=Ge(function(m){return ur(o,c,m-1).bottom<=u},p,0);return p=Ge(function(m){return ur(o,c,m).top>u},v,p),{begin:v,end:p}}function Du(o,s,c,u){c||(c=Ee(o,s));var p=No(o,s,ur(o,c,u),"line").top;return Lu(o,s,c,p)}function da(o,s,c,u){return o.bottom<=c?!1:o.top>c?!0:(u?o.left:o.right)>s}function El(o,s,c,u,p){p-=Ar(s);var v=Ee(o,s),m=Ol(s),_=0,w=s.text.length,E=!0,K=$e(s,o.doc.direction);if(K){var rt=(o.options.lineWrapping?bf:wf)(o,s,c,v,K,u,p);E=rt.level!=1,_=E?rt.from:rt.to-1,w=E?rt.to:rt.from-1}var vt=null,ct=null,kt=Ge(function(Te){var Se=ur(o,v,Te);return Se.top+=m,Se.bottom+=m,da(Se,u,p,!1)?(Se.top<=p&&Se.left<=u&&(vt=Te,ct=Se),!0):!1},_,w),Vt,Yt,re=!1;if(ct){var de=u-ct.left<ct.right-u,ie=de==E;kt=vt+(ie?0:1),Yt=ie?"after":"before",Vt=de?ct.left:ct.right}else{!E&&(kt==w||kt==_)&&kt++,Yt=kt==0?"after":kt==s.text.length?"before":ur(o,v,kt-(E?1:0)).bottom+m<=p==E?"after":"before";var he=ti(o,x(c,kt,Yt),"line",s,v);Vt=he.left,re=p<he.top?-1:p>=he.bottom?1:0}return kt=Ne(s.text,kt,1),pa(c,kt,Yt,re,u-Vt)}function wf(o,s,c,u,p,v,m){var _=Ge(function(rt){var vt=p[rt],ct=vt.level!=1;return da(ti(o,x(c,ct?vt.to:vt.from,ct?"before":"after"),"line",s,u),v,m,!0)},0,p.length-1),w=p[_];if(_>0){var E=w.level!=1,K=ti(o,x(c,E?w.from:w.to,E?"after":"before"),"line",s,u);da(K,v,m,!0)&&K.top>m&&(w=p[_-1])}return w}function bf(o,s,c,u,p,v,m){var _=Lu(o,s,u,m),w=_.begin,E=_.end;/\s/.test(s.text.charAt(E-1))&&E--;for(var K=null,rt=null,vt=0;vt<p.length;vt++){var ct=p[vt];if(!(ct.from>=E||ct.to<=w)){var kt=ct.level!=1,Vt=ur(o,u,kt?Math.min(E,ct.to)-1:Math.max(w,ct.from)).right,Yt=Vt<v?v-Vt+1e9:Vt-v;(!K||rt>Yt)&&(K=ct,rt=Yt)}}return K||(K=p[p.length-1]),K.from<w&&(K={from:w,to:K.to,level:K.level}),K.to>E&&(K={from:K.from,to:E,level:K.level}),K}var Fo;function Pi(o){if(o.cachedTextHeight!=null)return o.cachedTextHeight;if(Fo==null){Fo=V("pre",null,"CodeMirror-line-like");for(var s=0;s<49;++s)Fo.appendChild(document.createTextNode("x")),Fo.appendChild(V("br"));Fo.appendChild(document.createTextNode("x"))}mt(o.measure,Fo);var c=Fo.offsetHeight/50;return c>3&&(o.cachedTextHeight=c),tt(o.measure),c||1}function io(o){if(o.cachedCharWidth!=null)return o.cachedCharWidth;var s=V("span","xxxxxxxxxx"),c=V("pre",[s],"CodeMirror-line-like");mt(o.measure,c);var u=s.getBoundingClientRect(),p=(u.right-u.left)/10;return p>2&&(o.cachedCharWidth=p),p||10}function Pl(o){for(var s=o.display,c={},u={},p=s.gutters.clientLeft,v=s.gutters.firstChild,m=0;v;v=v.nextSibling,++m){var _=o.display.gutterSpecs[m].className;c[_]=v.offsetLeft+v.clientLeft+p,u[_]=v.clientWidth}return{fixedPos:Ka(s),gutterTotalWidth:s.gutters.offsetWidth,gutterLeft:c,gutterWidth:u,wrapperWidth:s.wrapper.clientWidth}}function Ka(o){return o.scroller.getBoundingClientRect().left-o.sizer.getBoundingClientRect().left}function ju(o){var s=Pi(o.display),c=o.options.lineWrapping,u=c&&Math.max(5,o.display.scroller.clientWidth/io(o.display)-3);return function(p){if(Vn(o.doc,p))return 0;var v=0;if(p.widgets)for(var m=0;m<p.widgets.length;m++)p.widgets[m].height&&(v+=p.widgets[m].height);return c?v+(Math.ceil(p.text.length/u)||1)*s:v+s}}function ha(o){var s=o.doc,c=ju(o);s.iter(function(u){var p=c(u);p!=u.height&&en(u,p)})}function Vo(o,s,c,u){var p=o.display;if(!c&&fe(s).getAttribute("cm-not-content")=="true")return null;var v,m,_=p.lineSpace.getBoundingClientRect();try{v=s.clientX-_.left,m=s.clientY-_.top}catch{return null}var w=Tl(o,v,m),E;if(u&&w.xRel>0&&(E=me(o.doc,w.line).text).length==w.ch){var K=Kt(E,E.length,o.options.tabSize)-E.length;w=x(w.line,Math.max(0,Math.round((v-C(o.display).left)/io(o.display))-K))}return w}function Ho(o,s){if(s>=o.display.viewTo||(s-=o.display.viewFrom,s<0))return null;for(var c=o.display.view,u=0;u<c.length;u++)if(s-=c[u].size,s<0)return u}function yn(o,s,c,u){s==null&&(s=o.doc.first),c==null&&(c=o.doc.first+o.doc.size),u||(u=0);var p=o.display;if(u&&c<p.viewTo&&(p.updateLineNumbers==null||p.updateLineNumbers>s)&&(p.updateLineNumbers=s),o.curOp.viewChanged=!0,s>=p.viewTo)jn&&Fn(o.doc,s)<p.viewTo&&yi(o);else if(c<=p.viewFrom)jn&&Jn(o.doc,c+u)>p.viewFrom?yi(o):(p.viewFrom+=u,p.viewTo+=u);else if(s<=p.viewFrom&&c>=p.viewTo)yi(o);else if(s<=p.viewFrom){var v=Fs(o,c,c+u,1);v?(p.view=p.view.slice(v.index),p.viewFrom=v.lineN,p.viewTo+=u):yi(o)}else if(c>=p.viewTo){var m=Fs(o,s,s,-1);m?(p.view=p.view.slice(0,m.index),p.viewTo=m.lineN):yi(o)}else{var _=Fs(o,s,s,-1),w=Fs(o,c,c+u,1);_&&w?(p.view=p.view.slice(0,_.index).concat(Oi(o,_.lineN,w.lineN)).concat(p.view.slice(w.index)),p.viewTo+=u):yi(o)}var E=p.externalMeasured;E&&(c<E.lineN?E.lineN+=u:s<E.lineN+E.size&&(p.externalMeasured=null))}function ui(o,s,c){o.curOp.viewChanged=!0;var u=o.display,p=o.display.externalMeasured;if(p&&s>=p.lineN&&s<p.lineN+p.size&&(u.externalMeasured=null),!(s<u.viewFrom||s>=u.viewTo)){var v=u.view[Ho(o,s)];if(v.node!=null){var m=v.changes||(v.changes=[]);Ut(m,c)==-1&&m.push(c)}}}function yi(o){o.display.viewFrom=o.display.viewTo=o.doc.first,o.display.view=[],o.display.viewOffset=0}function Fs(o,s,c,u){var p=Ho(o,s),v,m=o.display.view;if(!jn||c==o.doc.first+o.doc.size)return{index:p,lineN:c};for(var _=o.display.viewFrom,w=0;w<p;w++)_+=m[w].size;if(_!=s){if(u>0){if(p==m.length-1)return null;v=_+m[p].size-s,p++}else v=_-s;s+=v,c+=v}for(;Fn(o.doc,c)!=c;){if(p==(u<0?0:m.length-1))return null;c+=u*m[p-(u<0?1:0)].size,p+=u}return{index:p,lineN:c}}function Cf(o,s,c){var u=o.display,p=u.view;p.length==0||s>=u.viewTo||c<=u.viewFrom?(u.view=Oi(o,s,c),u.viewFrom=s):(u.viewFrom>s?u.view=Oi(o,s,u.viewFrom).concat(u.view):u.viewFrom<s&&(u.view=u.view.slice(Ho(o,s))),u.viewFrom=s,u.viewTo<c?u.view=u.view.concat(Oi(o,u.viewTo,c)):u.viewTo>c&&(u.view=u.view.slice(0,Ho(o,c)))),u.viewTo=c}function Iu(o){for(var s=o.display.view,c=0,u=0;u<s.length;u++){var p=s[u];!p.hidden&&(!p.node||p.changes)&&++c}return c}function oo(o){o.display.input.showSelection(o.display.input.prepareSelection())}function Vs(o,s){s===void 0&&(s=!0);var c=o.doc,u={},p=u.cursors=document.createDocumentFragment(),v=u.selection=document.createDocumentFragment(),m=o.options.$customCursor;m&&(s=!0);for(var _=0;_<c.sel.ranges.length;_++)if(!(!s&&_==c.sel.primIndex)){var w=c.sel.ranges[_];if(!(w.from().line>=o.display.viewTo||w.to().line<o.display.viewFrom)){var E=w.empty();if(m){var K=m(o,w);K&&Al(o,K,p)}else(E||o.options.showCursorWhenSelecting)&&Al(o,w.head,p);E||xf(o,w,v)}}return u}function Al(o,s,c){var u=ti(o,s,"div",null,null,!o.options.singleCursorHeightPerLine),p=c.appendChild(V("div"," ","CodeMirror-cursor"));if(p.style.left=u.left+"px",p.style.top=u.top+"px",p.style.height=Math.max(0,u.bottom-u.top)*o.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(o.getWrapperElement().className)){var v=Ns(o,s,"div",null,null),m=v.right-v.left;p.style.width=(m>0?m:o.defaultCharWidth())+"px"}if(u.other){var _=c.appendChild(V("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));_.style.display="",_.style.left=u.other.left+"px",_.style.top=u.other.top+"px",_.style.height=(u.other.bottom-u.other.top)*.85+"px"}}function Hs(o,s){return o.top-s.top||o.left-s.left}function xf(o,s,c){var u=o.display,p=o.doc,v=document.createDocumentFragment(),m=C(o.display),_=m.left,w=Math.max(u.sizerWidth,Z(o)-u.sizer.offsetLeft)-m.right,E=p.direction=="ltr";function K(ie,he,Te,Se){he<0&&(he=0),he=Math.round(he),Se=Math.round(Se),v.appendChild(V("div",null,"CodeMirror-selected","position: absolute; left: "+ie+`px;
                             top: `+he+"px; width: "+(Te??w-ie)+`px;
                             height: `+(Se-he)+"px"))}function rt(ie,he,Te){var Se=me(p,ie),Be=Se.text.length,cr,Hr;function hr(Dr,bn){return Ns(o,x(ie,Dr),"div",Se,bn)}function An(Dr,bn,Xr){var Br=Du(o,Se,null,Dr),Ir=bn=="ltr"==(Xr=="after")?"left":"right",Sr=Xr=="after"?Br.begin:Br.end-(/\s/.test(Se.text.charAt(Br.end-1))?2:1);return hr(Sr,Ir)[Ir]}var pn=$e(Se,p.direction);return pr(pn,he||0,Te??Be,function(Dr,bn,Xr,Br){var Ir=Xr=="ltr",Sr=hr(Dr,Ir?"left":"right"),Gr=hr(bn-1,Ir?"right":"left"),Ii=he==null&&Dr==0,go=Te==null&&bn==Be,Zr=Br==0,wi=!pn||Br==pn.length-1;if(Gr.top-Sr.top<=3){var $r=(E?Ii:go)&&Zr,uu=(E?go:Ii)&&wi,Ri=$r?_:(Ir?Sr:Gr).left,mo=uu?w:(Ir?Gr:Sr).right;K(Ri,Sr.top,mo-Ri,Sr.bottom)}else{var Jo,dn,Qo,cu;Ir?(Jo=E&&Ii&&Zr?_:Sr.left,dn=E?w:An(Dr,Xr,"before"),Qo=E?_:An(bn,Xr,"after"),cu=E&&go&&wi?w:Gr.right):(Jo=E?An(Dr,Xr,"before"):_,dn=!E&&Ii&&Zr?w:Sr.right,Qo=!E&&go&&wi?_:Gr.left,cu=E?An(bn,Xr,"after"):w),K(Jo,Sr.top,dn-Jo,Sr.bottom),Sr.bottom<Gr.top&&K(_,Sr.bottom,null,Gr.top),K(Qo,Gr.top,cu-Qo,Gr.bottom)}(!cr||Hs(Sr,cr)<0)&&(cr=Sr),Hs(Gr,cr)<0&&(cr=Gr),(!Hr||Hs(Sr,Hr)<0)&&(Hr=Sr),Hs(Gr,Hr)<0&&(Hr=Gr)}),{start:cr,end:Hr}}var vt=s.from(),ct=s.to();if(vt.line==ct.line)rt(vt.line,vt.ch,ct.ch);else{var kt=me(p,vt.line),Vt=me(p,ct.line),Yt=dr(kt)==dr(Vt),re=rt(vt.line,vt.ch,Yt?kt.text.length+1:null).end,de=rt(ct.line,Yt?0:null,ct.ch).start;Yt&&(re.top<de.top-2?(K(re.right,re.top,null,re.bottom),K(_,de.top,de.left,de.bottom)):K(re.right,re.top,de.left-re.right,re.bottom)),re.bottom<de.top&&K(_,re.bottom,null,de.top)}c.appendChild(v)}function va(o){if(o.state.focused){var s=o.display;clearInterval(s.blinker);var c=!0;s.cursorDiv.style.visibility="",o.options.cursorBlinkRate>0?s.blinker=setInterval(function(){o.hasFocus()||ga(o),s.cursorDiv.style.visibility=(c=!c)?"":"hidden"},o.options.cursorBlinkRate):o.options.cursorBlinkRate<0&&(s.cursorDiv.style.visibility="hidden")}}function kl(o){o.hasFocus()||(o.display.input.focus(),o.state.focused||Ll(o))}function Ml(o){o.state.delayingBlurEvent=!0,setTimeout(function(){o.state.delayingBlurEvent&&(o.state.delayingBlurEvent=!1,o.state.focused&&ga(o))},100)}function Ll(o,s){o.state.delayingBlurEvent&&!o.state.draggingText&&(o.state.delayingBlurEvent=!1),o.options.readOnly!="nocursor"&&(o.state.focused||(Qe(o,"focus",o,s),o.state.focused=!0,ft(o.display.wrapper,"CodeMirror-focused"),!o.curOp&&o.display.selForContextMenu!=o.doc.sel&&(o.display.input.reset(),S&&setTimeout(function(){return o.display.input.reset(!0)},20)),o.display.input.receivedFocus()),va(o))}function ga(o,s){o.state.delayingBlurEvent||(o.state.focused&&(Qe(o,"blur",o,s),o.state.focused=!1,B(o.display.wrapper,"CodeMirror-focused")),clearInterval(o.display.blinker),setTimeout(function(){o.state.focused||(o.display.shift=!1)},150))}function Bo(o){for(var s=o.display,c=s.lineDiv.offsetTop,u=Math.max(0,s.scroller.getBoundingClientRect().top),p=s.lineDiv.getBoundingClientRect().top,v=0,m=0;m<s.view.length;m++){var _=s.view[m],w=o.options.lineWrapping,E=void 0,K=0;if(!_.hidden){if(p+=_.line.height,k&&N<8){var rt=_.node.offsetTop+_.node.offsetHeight;E=rt-c,c=rt}else{var vt=_.node.getBoundingClientRect();E=vt.bottom-vt.top,!w&&_.text.firstChild&&(K=_.text.firstChild.getBoundingClientRect().right-vt.left-1)}var ct=_.line.height-E;if((ct>.005||ct<-.005)&&(p<u&&(v-=ct),en(_.line,E),Bs(_.line),_.rest))for(var kt=0;kt<_.rest.length;kt++)Bs(_.rest[kt]);if(K>o.display.sizerWidth){var Vt=Math.ceil(K/io(o.display));Vt>o.display.maxLineLength&&(o.display.maxLineLength=Vt,o.display.maxLine=_.line,o.display.maxLineChanged=!0)}}}Math.abs(v)>2&&(s.scroller.scrollTop+=v)}function Bs(o){if(o.widgets)for(var s=0;s<o.widgets.length;++s){var c=o.widgets[s],u=c.node.parentNode;u&&(c.height=u.offsetHeight)}}function Ai(o,s,c){var u=c&&c.top!=null?Math.max(0,c.top):o.scroller.scrollTop;u=Math.floor(u-eo(o));var p=c&&c.bottom!=null?c.bottom:u+o.wrapper.clientHeight,v=Yn(s,u),m=Yn(s,p);if(c&&c.ensure){var _=c.ensure.from.line,w=c.ensure.to.line;_<v?(v=_,m=Yn(s,Ar(me(s,_))+o.wrapper.clientHeight)):Math.min(w,s.lastLine())>=m&&(v=Yn(s,Ar(me(s,w))-o.wrapper.clientHeight),m=w)}return{from:v,to:Math.max(m,v+1)}}function ma(o,s){if(!sr(o,"scrollCursorIntoView")){var c=o.display,u=c.sizer.getBoundingClientRect(),p=null,v=c.wrapper.ownerDocument;if(s.top+u.top<0?p=!0:s.bottom+u.top>(v.defaultView.innerHeight||v.documentElement.clientHeight)&&(p=!1),p!=null&&!Mt){var m=V("div","​",null,`position: absolute;
                         top: `+(s.top-c.viewOffset-eo(o.display))+`px;
                         height: `+(s.bottom-s.top+M(o)+c.barHeight)+`px;
                         left: `+s.left+"px; width: "+Math.max(2,s.right-s.left)+"px;");o.display.lineSpace.appendChild(m),m.scrollIntoView(p),o.display.lineSpace.removeChild(m)}}}function ya(o,s,c,u){u==null&&(u=0);var p;!o.options.lineWrapping&&s==c&&(c=s.sticky=="before"?x(s.line,s.ch+1,"before"):s,s=s.ch?x(s.line,s.sticky=="before"?s.ch-1:s.ch,"after"):s);for(var v=0;v<5;v++){var m=!1,_=ti(o,s),w=!c||c==s?_:ti(o,c);p={left:Math.min(_.left,w.left),top:Math.min(_.top,w.top)-u,right:Math.max(_.left,w.left),bottom:Math.max(_.bottom,w.bottom)+u};var E=Ga(o,p),K=o.doc.scrollTop,rt=o.doc.scrollLeft;if(E.scrollTop!=null&&(qa(o,E.scrollTop),Math.abs(o.doc.scrollTop-K)>1&&(m=!0)),E.scrollLeft!=null&&(ao(o,E.scrollLeft),Math.abs(o.doc.scrollLeft-rt)>1&&(m=!0)),!m)break}return p}function Ru(o,s){var c=Ga(o,s);c.scrollTop!=null&&qa(o,c.scrollTop),c.scrollLeft!=null&&ao(o,c.scrollLeft)}function Ga(o,s){var c=o.display,u=Pi(o.display);s.top<0&&(s.top=0);var p=o.curOp&&o.curOp.scrollTop!=null?o.curOp.scrollTop:c.scroller.scrollTop,v=ot(o),m={};s.bottom-s.top>v&&(s.bottom=s.top+v);var _=o.doc.height+ro(c),w=s.top<u,E=s.bottom>_-u;if(s.top<p)m.scrollTop=w?0:s.top;else if(s.bottom>p+v){var K=Math.min(s.top,(E?_:s.bottom)-v);K!=p&&(m.scrollTop=K)}var rt=o.options.fixedGutter?0:c.gutters.offsetWidth,vt=o.curOp&&o.curOp.scrollLeft!=null?o.curOp.scrollLeft:c.scroller.scrollLeft-rt,ct=Z(o)-c.gutters.offsetWidth,kt=s.right-s.left>ct;return kt&&(s.right=s.left+ct),s.left<10?m.scrollLeft=0:s.left<vt?m.scrollLeft=Math.max(0,s.left+rt-(kt?0:10)):s.right>ct+vt-3&&(m.scrollLeft=s.right+(kt?0:10)-ct),m}function Dl(o,s){s!=null&&(Ws(o),o.curOp.scrollTop=(o.curOp.scrollTop==null?o.doc.scrollTop:o.curOp.scrollTop)+s)}function _a(o){Ws(o);var s=o.getCursor();o.curOp.scrollToPos={from:s,to:s,margin:o.options.cursorScrollMargin}}function $a(o,s,c){(s!=null||c!=null)&&Ws(o),s!=null&&(o.curOp.scrollLeft=s),c!=null&&(o.curOp.scrollTop=c)}function Us(o,s){Ws(o),o.curOp.scrollToPos=s}function Ws(o){var s=o.curOp.scrollToPos;if(s){o.curOp.scrollToPos=null;var c=Mu(o,s.from),u=Mu(o,s.to);Nu(o,c,u,s.margin)}}function Nu(o,s,c,u){var p=Ga(o,{left:Math.min(s.left,c.left),top:Math.min(s.top,c.top)-u,right:Math.max(s.right,c.right),bottom:Math.max(s.bottom,c.bottom)+u});$a(o,p.scrollLeft,p.scrollTop)}function qa(o,s){Math.abs(o.doc.scrollTop-s)<2||(st||Rl(o,{top:s}),Fu(o,s,!0),st&&Rl(o),Za(o,100))}function Fu(o,s,c){s=Math.max(0,Math.min(o.display.scroller.scrollHeight-o.display.scroller.clientHeight,s)),!(o.display.scroller.scrollTop==s&&!c)&&(o.doc.scrollTop=s,o.display.scrollbars.setScrollTop(s),o.display.scroller.scrollTop!=s&&(o.display.scroller.scrollTop=s))}function ao(o,s,c,u){s=Math.max(0,Math.min(s,o.display.scroller.scrollWidth-o.display.scroller.clientWidth)),!((c?s==o.doc.scrollLeft:Math.abs(o.doc.scrollLeft-s)<2)&&!u)&&(o.doc.scrollLeft=s,zu(o),o.display.scroller.scrollLeft!=s&&(o.display.scroller.scrollLeft=s),o.display.scrollbars.setScrollLeft(s))}function Ya(o){var s=o.display,c=s.gutters.offsetWidth,u=Math.round(o.doc.height+ro(o.display));return{clientHeight:s.scroller.clientHeight,viewHeight:s.wrapper.clientHeight,scrollWidth:s.scroller.scrollWidth,clientWidth:s.scroller.clientWidth,viewWidth:s.wrapper.clientWidth,barLeft:o.options.fixedGutter?c:0,docHeight:u,scrollHeight:u+M(o)+s.barHeight,nativeBarWidth:s.nativeBarWidth,gutterWidth:c}}var _n=function(o,s,c){this.cm=c;var u=this.vert=V("div",[V("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),p=this.horiz=V("div",[V("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");u.tabIndex=p.tabIndex=-1,o(u),o(p),_e(u,"scroll",function(){u.clientHeight&&s(u.scrollTop,"vertical")}),_e(p,"scroll",function(){p.clientWidth&&s(p.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,k&&N<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};_n.prototype.update=function(o){var s=o.scrollWidth>o.clientWidth+1,c=o.scrollHeight>o.clientHeight+1,u=o.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=s?u+"px":"0";var p=o.viewHeight-(s?u:0);this.vert.firstChild.style.height=Math.max(0,o.scrollHeight-o.clientHeight+p)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(s){this.horiz.style.display="block",this.horiz.style.right=c?u+"px":"0",this.horiz.style.left=o.barLeft+"px";var v=o.viewWidth-o.barLeft-(c?u:0);this.horiz.firstChild.style.width=Math.max(0,o.scrollWidth-o.clientWidth+v)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&o.clientHeight>0&&(u==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?u:0,bottom:s?u:0}},_n.prototype.setScrollLeft=function(o){this.horiz.scrollLeft!=o&&(this.horiz.scrollLeft=o),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},_n.prototype.setScrollTop=function(o){this.vert.scrollTop!=o&&(this.vert.scrollTop=o),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},_n.prototype.zeroWidthHack=function(){var o=_t&&!Ct?"12px":"18px";this.horiz.style.height=this.vert.style.width=o,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new zt,this.disableVert=new zt},_n.prototype.enableZeroWidthBar=function(o,s,c){o.style.visibility="";function u(){var p=o.getBoundingClientRect(),v=c=="vert"?document.elementFromPoint(p.right-1,(p.top+p.bottom)/2):document.elementFromPoint((p.right+p.left)/2,p.bottom-1);v!=o?o.style.visibility="hidden":s.set(1e3,u)}s.set(1e3,u)},_n.prototype.clear=function(){var o=this.horiz.parentNode;o.removeChild(this.horiz),o.removeChild(this.vert)};var Xa=function(){};Xa.prototype.update=function(){return{bottom:0,right:0}},Xa.prototype.setScrollLeft=function(){},Xa.prototype.setScrollTop=function(){},Xa.prototype.clear=function(){};function Cr(o,s){s||(s=Ya(o));var c=o.display.barWidth,u=o.display.barHeight;Vu(o,s);for(var p=0;p<4&&c!=o.display.barWidth||u!=o.display.barHeight;p++)c!=o.display.barWidth&&o.options.lineWrapping&&Bo(o),Vu(o,Ya(o)),c=o.display.barWidth,u=o.display.barHeight}function Vu(o,s){var c=o.display,u=c.scrollbars.update(s);c.sizer.style.paddingRight=(c.barWidth=u.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=u.bottom)+"px",c.heightForcer.style.borderBottom=u.bottom+"px solid transparent",u.right&&u.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=u.bottom+"px",c.scrollbarFiller.style.width=u.right+"px"):c.scrollbarFiller.style.display="",u.bottom&&o.options.coverGutterNextToScrollbar&&o.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=u.bottom+"px",c.gutterFiller.style.width=s.gutterWidth+"px"):c.gutterFiller.style.display=""}var Hu={native:_n,null:Xa};function jl(o){o.display.scrollbars&&(o.display.scrollbars.clear(),o.display.scrollbars.addClass&&B(o.display.wrapper,o.display.scrollbars.addClass)),o.display.scrollbars=new Hu[o.options.scrollbarStyle](function(s){o.display.wrapper.insertBefore(s,o.display.scrollbarFiller),_e(s,"mousedown",function(){o.state.focused&&setTimeout(function(){return o.display.input.focus()},0)}),s.setAttribute("cm-not-content","true")},function(s,c){c=="horizontal"?ao(o,s):qa(o,s)},o),o.display.scrollbars.addClass&&ft(o.display.wrapper,o.display.scrollbars.addClass)}var Sf=0;function Uo(o){o.curOp={cm:o,viewChanged:!1,startHeight:o.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Sf,markArrays:null},Ms(o.curOp)}function Wo(o){var s=o.curOp;s&&Ji(s,function(c){for(var u=0;u<c.ops.length;u++)c.ops[u].cm.curOp=null;Of(c)})}function Of(o){for(var s=o.ops,c=0;c<s.length;c++)Tf(s[c]);for(var u=0;u<s.length;u++)Ef(s[u]);for(var p=0;p<s.length;p++)Pf(s[p]);for(var v=0;v<s.length;v++)Af(s[v]);for(var m=0;m<s.length;m++)zs(s[m])}function Tf(o){var s=o.cm,c=s.display;kf(s),o.updateMaxLine&&Xi(s),o.mustUpdate=o.viewChanged||o.forceUpdate||o.scrollTop!=null||o.scrollToPos&&(o.scrollToPos.from.line<c.viewFrom||o.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&s.options.lineWrapping,o.update=o.mustUpdate&&new Ks(s,o.mustUpdate&&{top:o.scrollTop,ensure:o.scrollToPos},o.forceUpdate)}function Ef(o){o.updatedDisplay=o.mustUpdate&&Il(o.cm,o.update)}function Pf(o){var s=o.cm,c=s.display;o.updatedDisplay&&Bo(s),o.barMeasure=Ya(s),c.maxLineChanged&&!s.options.lineWrapping&&(o.adjustWidthTo=se(s,c.maxLine,c.maxLine.text.length).left+3,s.display.sizerWidth=o.adjustWidthTo,o.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+o.adjustWidthTo+M(s)+s.display.barWidth),o.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+o.adjustWidthTo-Z(s))),(o.updatedDisplay||o.selectionChanged)&&(o.preparedSelection=c.input.prepareSelection())}function Af(o){var s=o.cm;o.adjustWidthTo!=null&&(s.display.sizer.style.minWidth=o.adjustWidthTo+"px",o.maxScrollLeft<s.doc.scrollLeft&&ao(s,Math.min(s.display.scroller.scrollLeft,o.maxScrollLeft),!0),s.display.maxLineChanged=!1);var c=o.focus&&o.focus==At(pe(s));o.preparedSelection&&s.display.input.showSelection(o.preparedSelection,c),(o.updatedDisplay||o.startHeight!=s.doc.height)&&Cr(s,o.barMeasure),o.updatedDisplay&&Fl(s,o.barMeasure),o.selectionChanged&&va(s),s.state.focused&&o.updateInput&&s.display.input.reset(o.typing),c&&kl(o.cm)}function zs(o){var s=o.cm,c=s.display,u=s.doc;if(o.updatedDisplay&&Wu(s,o.update),c.wheelStartX!=null&&(o.scrollTop!=null||o.scrollLeft!=null||o.scrollToPos)&&(c.wheelStartX=c.wheelStartY=null),o.scrollTop!=null&&Fu(s,o.scrollTop,o.forceScroll),o.scrollLeft!=null&&ao(s,o.scrollLeft,!0,!0),o.scrollToPos){var p=ya(s,we(u,o.scrollToPos.from),we(u,o.scrollToPos.to),o.scrollToPos.margin);ma(s,p)}var v=o.maybeHiddenMarkers,m=o.maybeUnhiddenMarkers;if(v)for(var _=0;_<v.length;++_)v[_].lines.length||Qe(v[_],"hide");if(m)for(var w=0;w<m.length;++w)m[w].lines.length&&Qe(m[w],"unhide");c.wrapper.offsetHeight&&(u.scrollTop=s.display.scroller.scrollTop),o.changeObjs&&Qe(s,"changes",s,o.changeObjs),o.update&&o.update.finish()}function Pn(o,s){if(o.curOp)return s();Uo(o);try{return s()}finally{Wo(o)}}function xr(o,s){return function(){if(o.curOp)return s.apply(o,arguments);Uo(o);try{return s.apply(o,arguments)}finally{Wo(o)}}}function Kr(o){return function(){if(this.curOp)return o.apply(this,arguments);Uo(this);try{return o.apply(this,arguments)}finally{Wo(this)}}}function Mr(o){return function(){var s=this.cm;if(!s||s.curOp)return o.apply(this,arguments);Uo(s);try{return o.apply(this,arguments)}finally{Wo(s)}}}function Za(o,s){o.doc.highlightFrontier<o.display.viewTo&&o.state.highlight.set(s,jt(Bu,o))}function Bu(o){var s=o.doc;if(!(s.highlightFrontier>=o.display.viewTo)){var c=+new Date+o.options.workTime,u=Ao(o,s.highlightFrontier),p=[];s.iter(u.line,Math.min(s.first+s.size,o.display.viewTo+500),function(v){if(u.line>=o.display.viewFrom){var m=v.styles,_=v.text.length>o.options.maxHighlightLength?xn(s.mode,u.state):null,w=Hi(o,v,u,!0);_&&(u.state=_),v.styles=w.styles;var E=v.styleClasses,K=w.classes;K?v.styleClasses=K:E&&(v.styleClasses=null);for(var rt=!m||m.length!=v.styles.length||E!=K&&(!E||!K||E.bgClass!=K.bgClass||E.textClass!=K.textClass),vt=0;!rt&&vt<m.length;++vt)rt=m[vt]!=v.styles[vt];rt&&p.push(u.line),v.stateAfter=u.save(),u.nextLine()}else v.text.length<=o.options.maxHighlightLength&&aa(o,v.text,u),v.stateAfter=u.line%5==0?u.save():null,u.nextLine();if(+new Date>c)return Za(o,o.options.workDelay),!0}),s.highlightFrontier=u.line,s.modeFrontier=Math.max(s.modeFrontier,u.line),p.length&&Pn(o,function(){for(var v=0;v<p.length;v++)ui(o,p[v],"text")})}}var Ks=function(o,s,c){var u=o.display;this.viewport=s,this.visible=Ai(u,o.doc,s),this.editorIsHidden=!u.wrapper.offsetWidth,this.wrapperHeight=u.wrapper.clientHeight,this.wrapperWidth=u.wrapper.clientWidth,this.oldDisplayWidth=Z(o),this.force=c,this.dims=Pl(o),this.events=[]};Ks.prototype.signal=function(o,s){wr(o,s)&&this.events.push(arguments)},Ks.prototype.finish=function(){for(var o=0;o<this.events.length;o++)Qe.apply(null,this.events[o])};function kf(o){var s=o.display;!s.scrollbarsClipped&&s.scroller.offsetWidth&&(s.nativeBarWidth=s.scroller.offsetWidth-s.scroller.clientWidth,s.heightForcer.style.height=M(o)+"px",s.sizer.style.marginBottom=-s.nativeBarWidth+"px",s.sizer.style.borderRightWidth=M(o)+"px",s.scrollbarsClipped=!0)}function Uu(o){if(o.hasFocus())return null;var s=At(pe(o));if(!s||!Rt(o.display.lineDiv,s))return null;var c={activeElt:s};if(window.getSelection){var u=Ot(o).getSelection();u.anchorNode&&u.extend&&Rt(o.display.lineDiv,u.anchorNode)&&(c.anchorNode=u.anchorNode,c.anchorOffset=u.anchorOffset,c.focusNode=u.focusNode,c.focusOffset=u.focusOffset)}return c}function Mf(o){if(!(!o||!o.activeElt||o.activeElt==At(o.activeElt.ownerDocument))&&(o.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(o.activeElt.nodeName)&&o.anchorNode&&Rt(document.body,o.anchorNode)&&Rt(document.body,o.focusNode))){var s=o.activeElt.ownerDocument,c=s.defaultView.getSelection(),u=s.createRange();u.setEnd(o.anchorNode,o.anchorOffset),u.collapse(!1),c.removeAllRanges(),c.addRange(u),c.extend(o.focusNode,o.focusOffset)}}function Il(o,s){var c=o.display,u=o.doc;if(s.editorIsHidden)return yi(o),!1;if(!s.force&&s.visible.from>=c.viewFrom&&s.visible.to<=c.viewTo&&(c.updateLineNumbers==null||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&Iu(o)==0)return!1;Ku(o)&&(yi(o),s.dims=Pl(o));var p=u.first+u.size,v=Math.max(s.visible.from-o.options.viewportMargin,u.first),m=Math.min(p,s.visible.to+o.options.viewportMargin);c.viewFrom<v&&v-c.viewFrom<20&&(v=Math.max(u.first,c.viewFrom)),c.viewTo>m&&c.viewTo-m<20&&(m=Math.min(p,c.viewTo)),jn&&(v=Fn(o.doc,v),m=Jn(o.doc,m));var _=v!=c.viewFrom||m!=c.viewTo||c.lastWrapHeight!=s.wrapperHeight||c.lastWrapWidth!=s.wrapperWidth;Cf(o,v,m),c.viewOffset=Ar(me(o.doc,c.viewFrom)),o.display.mover.style.top=c.viewOffset+"px";var w=Iu(o);if(!_&&w==0&&!s.force&&c.renderedView==c.view&&(c.updateLineNumbers==null||c.updateLineNumbers>=c.viewTo))return!1;var E=Uu(o);return w>4&&(c.lineDiv.style.display="none"),Lf(o,c.updateLineNumbers,s.dims),w>4&&(c.lineDiv.style.display=""),c.renderedView=c.view,Mf(E),tt(c.cursorDiv),tt(c.selectionDiv),c.gutters.style.height=c.sizer.style.minHeight=0,_&&(c.lastWrapHeight=s.wrapperHeight,c.lastWrapWidth=s.wrapperWidth,Za(o,400)),c.updateLineNumbers=null,!0}function Wu(o,s){for(var c=s.viewport,u=!0;;u=!1){if(!u||!o.options.lineWrapping||s.oldDisplayWidth==Z(o)){if(c&&c.top!=null&&(c={top:Math.min(o.doc.height+ro(o.display)-ot(o),c.top)}),s.visible=Ai(o.display,o.doc,c),s.visible.from>=o.display.viewFrom&&s.visible.to<=o.display.viewTo)break}else u&&(s.visible=Ai(o.display,o.doc,c));if(!Il(o,s))break;Bo(o);var p=Ya(o);oo(o),Cr(o,p),Fl(o,p),s.force=!1}s.signal(o,"update",o),(o.display.viewFrom!=o.display.reportedViewFrom||o.display.viewTo!=o.display.reportedViewTo)&&(s.signal(o,"viewportChange",o,o.display.viewFrom,o.display.viewTo),o.display.reportedViewFrom=o.display.viewFrom,o.display.reportedViewTo=o.display.viewTo)}function Rl(o,s){var c=new Ks(o,s);if(Il(o,c)){Bo(o),Wu(o,c);var u=Ya(o);oo(o),Cr(o,u),Fl(o,u),c.finish()}}function Lf(o,s,c){var u=o.display,p=o.options.lineNumbers,v=u.lineDiv,m=v.firstChild;function _(kt){var Vt=kt.nextSibling;return S&&_t&&o.display.currentWheelTarget==kt?kt.style.display="none":kt.parentNode.removeChild(kt),Vt}for(var w=u.view,E=u.viewFrom,K=0;K<w.length;K++){var rt=w[K];if(!rt.hidden)if(!rt.node||rt.node.parentNode!=v){var vt=Is(o,rt,E,c);v.insertBefore(vt,m)}else{for(;m!=rt.node;)m=_(m);var ct=p&&s!=null&&s<=E&&rt.lineNumber;rt.changes&&(Ut(rt.changes,"gutter")>-1&&(ct=!1),Ba(o,rt,E,c)),ct&&(tt(rt.lineNumber),rt.lineNumber.appendChild(document.createTextNode(Vr(o.options,E)))),m=rt.node.nextSibling}E+=rt.size}for(;m;)m=_(m)}function Nl(o){var s=o.gutters.offsetWidth;o.sizer.style.marginLeft=s+"px",kr(o,"gutterChanged",o)}function Fl(o,s){o.display.sizer.style.minHeight=s.docHeight+"px",o.display.heightForcer.style.top=s.docHeight+"px",o.display.gutters.style.height=s.docHeight+o.display.barHeight+M(o)+"px"}function zu(o){var s=o.display,c=s.view;if(!(!s.alignWidgets&&(!s.gutters.firstChild||!o.options.fixedGutter))){for(var u=Ka(s)-s.scroller.scrollLeft+o.doc.scrollLeft,p=s.gutters.offsetWidth,v=u+"px",m=0;m<c.length;m++)if(!c[m].hidden){o.options.fixedGutter&&(c[m].gutter&&(c[m].gutter.style.left=v),c[m].gutterBackground&&(c[m].gutterBackground.style.left=v));var _=c[m].alignable;if(_)for(var w=0;w<_.length;w++)_[w].style.left=v}o.options.fixedGutter&&(s.gutters.style.left=u+p+"px")}}function Ku(o){if(!o.options.lineNumbers)return!1;var s=o.doc,c=Vr(o.options,s.first+s.size-1),u=o.display;if(c.length!=u.lineNumChars){var p=u.measure.appendChild(V("div",[V("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),v=p.firstChild.offsetWidth,m=p.offsetWidth-v;return u.lineGutter.style.width="",u.lineNumInnerWidth=Math.max(v,u.lineGutter.offsetWidth-m)+1,u.lineNumWidth=u.lineNumInnerWidth+m,u.lineNumChars=u.lineNumInnerWidth?c.length:-1,u.lineGutter.style.width=u.lineNumWidth+"px",Nl(o.display),!0}return!1}function Vl(o,s){for(var c=[],u=!1,p=0;p<o.length;p++){var v=o[p],m=null;if(typeof v!="string"&&(m=v.style,v=v.className),v=="CodeMirror-linenumbers")if(s)u=!0;else continue;c.push({className:v,style:m})}return s&&!u&&c.push({className:"CodeMirror-linenumbers",style:null}),c}function Gu(o){var s=o.gutters,c=o.gutterSpecs;tt(s),o.lineGutter=null;for(var u=0;u<c.length;++u){var p=c[u],v=p.className,m=p.style,_=s.appendChild(V("div",null,"CodeMirror-gutter "+v));m&&(_.style.cssText=m),v=="CodeMirror-linenumbers"&&(o.lineGutter=_,_.style.width=(o.lineNumWidth||1)+"px")}s.style.display=c.length?"":"none",Nl(o)}function wa(o){Gu(o.display),yn(o),zu(o)}function Df(o,s,c,u){var p=this;this.input=c,p.scrollbarFiller=V("div",null,"CodeMirror-scrollbar-filler"),p.scrollbarFiller.setAttribute("cm-not-content","true"),p.gutterFiller=V("div",null,"CodeMirror-gutter-filler"),p.gutterFiller.setAttribute("cm-not-content","true"),p.lineDiv=Et("div",null,"CodeMirror-code"),p.selectionDiv=V("div",null,null,"position: relative; z-index: 1"),p.cursorDiv=V("div",null,"CodeMirror-cursors"),p.measure=V("div",null,"CodeMirror-measure"),p.lineMeasure=V("div",null,"CodeMirror-measure"),p.lineSpace=Et("div",[p.measure,p.lineMeasure,p.selectionDiv,p.cursorDiv,p.lineDiv],null,"position: relative; outline: none");var v=Et("div",[p.lineSpace],"CodeMirror-lines");p.mover=V("div",[v],null,"position: relative"),p.sizer=V("div",[p.mover],"CodeMirror-sizer"),p.sizerWidth=null,p.heightForcer=V("div",null,null,"position: absolute; height: "+be+"px; width: 1px;"),p.gutters=V("div",null,"CodeMirror-gutters"),p.lineGutter=null,p.scroller=V("div",[p.sizer,p.heightForcer,p.gutters],"CodeMirror-scroll"),p.scroller.setAttribute("tabIndex","-1"),p.wrapper=V("div",[p.scrollbarFiller,p.gutterFiller,p.scroller],"CodeMirror"),A&&R>=105&&(p.wrapper.style.clipPath="inset(0px)"),p.wrapper.setAttribute("translate","no"),k&&N<8&&(p.gutters.style.zIndex=-1,p.scroller.style.paddingRight=0),!S&&!(st&&xt)&&(p.scroller.draggable=!0),o&&(o.appendChild?o.appendChild(p.wrapper):o(p.wrapper)),p.viewFrom=p.viewTo=s.first,p.reportedViewFrom=p.reportedViewTo=s.first,p.view=[],p.renderedView=null,p.externalMeasured=null,p.viewOffset=0,p.lastWrapHeight=p.lastWrapWidth=0,p.updateLineNumbers=null,p.nativeBarWidth=p.barHeight=p.barWidth=0,p.scrollbarsClipped=!1,p.lineNumWidth=p.lineNumInnerWidth=p.lineNumChars=null,p.alignWidgets=!1,p.cachedCharWidth=p.cachedTextHeight=p.cachedPaddingH=null,p.maxLine=null,p.maxLineLength=0,p.maxLineChanged=!1,p.wheelDX=p.wheelDY=p.wheelStartX=p.wheelStartY=null,p.shift=!1,p.selForContextMenu=null,p.activeTouch=null,p.gutterSpecs=Vl(u.gutters,u.lineNumbers),Gu(p),c.init(p)}var Gs=0,ki=null;k?ki=-.53:st?ki=15:A?ki=-.7:it&&(ki=-1/3);function $u(o){var s=o.wheelDeltaX,c=o.wheelDeltaY;return s==null&&o.detail&&o.axis==o.HORIZONTAL_AXIS&&(s=o.detail),c==null&&o.detail&&o.axis==o.VERTICAL_AXIS?c=o.detail:c==null&&(c=o.wheelDelta),{x:s,y:c}}function jf(o){var s=$u(o);return s.x*=ki,s.y*=ki,s}function qu(o,s){A&&R==102&&(o.display.chromeScrollHack==null?o.display.sizer.style.pointerEvents="none":clearTimeout(o.display.chromeScrollHack),o.display.chromeScrollHack=setTimeout(function(){o.display.chromeScrollHack=null,o.display.sizer.style.pointerEvents=""},100));var c=$u(s),u=c.x,p=c.y,v=ki;s.deltaMode===0&&(u=s.deltaX,p=s.deltaY,v=1);var m=o.display,_=m.scroller,w=_.scrollWidth>_.clientWidth,E=_.scrollHeight>_.clientHeight;if(u&&w||p&&E){if(p&&_t&&S){t:for(var K=s.target,rt=m.view;K!=_;K=K.parentNode)for(var vt=0;vt<rt.length;vt++)if(rt[vt].node==K){o.display.currentWheelTarget=K;break t}}if(u&&!st&&!z&&v!=null){p&&E&&qa(o,Math.max(0,_.scrollTop+p*v)),ao(o,Math.max(0,_.scrollLeft+u*v)),(!p||p&&E)&&I(s),m.wheelStartX=null;return}if(p&&v!=null){var ct=p*v,kt=o.doc.scrollTop,Vt=kt+m.wrapper.clientHeight;ct<0?kt=Math.max(0,kt+ct-50):Vt=Math.min(o.doc.height,Vt+ct+50),Rl(o,{top:kt,bottom:Vt})}Gs<20&&s.deltaMode!==0&&(m.wheelStartX==null?(m.wheelStartX=_.scrollLeft,m.wheelStartY=_.scrollTop,m.wheelDX=u,m.wheelDY=p,setTimeout(function(){if(m.wheelStartX!=null){var Yt=_.scrollLeft-m.wheelStartX,re=_.scrollTop-m.wheelStartY,de=re&&m.wheelDY&&re/m.wheelDY||Yt&&m.wheelDX&&Yt/m.wheelDX;m.wheelStartX=m.wheelStartY=null,de&&(ki=(ki*Gs+de)/(Gs+1),++Gs)}},200)):(m.wheelDX+=u,m.wheelDY+=p))}}var Bn=function(o,s){this.ranges=o,this.primIndex=s};Bn.prototype.primary=function(){return this.ranges[this.primIndex]},Bn.prototype.equals=function(o){if(o==this)return!0;if(o.primIndex!=this.primIndex||o.ranges.length!=this.ranges.length)return!1;for(var s=0;s<this.ranges.length;s++){var c=this.ranges[s],u=o.ranges[s];if(!Dt(c.anchor,u.anchor)||!Dt(c.head,u.head))return!1}return!0},Bn.prototype.deepCopy=function(){for(var o=[],s=0;s<this.ranges.length;s++)o[s]=new nr($t(this.ranges[s].anchor),$t(this.ranges[s].head));return new Bn(o,this.primIndex)},Bn.prototype.somethingSelected=function(){for(var o=0;o<this.ranges.length;o++)if(!this.ranges[o].empty())return!0;return!1},Bn.prototype.contains=function(o,s){s||(s=o);for(var c=0;c<this.ranges.length;c++){var u=this.ranges[c];if(U(s,u.from())>=0&&U(o,u.to())<=0)return c}return-1};var nr=function(o,s){this.anchor=o,this.head=s};nr.prototype.from=function(){return Re(this.anchor,this.head)},nr.prototype.to=function(){return Me(this.anchor,this.head)},nr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function ci(o,s,c){var u=o&&o.options.selectionsMayTouch,p=s[c];s.sort(function(vt,ct){return U(vt.from(),ct.from())}),c=Ut(s,p);for(var v=1;v<s.length;v++){var m=s[v],_=s[v-1],w=U(_.to(),m.from());if(u&&!m.empty()?w>0:w>=0){var E=Re(_.from(),m.from()),K=Me(_.to(),m.to()),rt=_.empty()?m.from()==m.head:_.from()==_.head;v<=c&&--c,s.splice(--v,2,new nr(rt?K:E,rt?E:K))}}return new Bn(s,c)}function so(o,s){return new Bn([new nr(o,s||o)],0)}function lo(o){return o.text?x(o.from.line+o.text.length-1,ae(o.text).length+(o.text.length==1?o.from.ch:0)):o.to}function Yu(o,s){if(U(o,s.from)<0)return o;if(U(o,s.to)<=0)return lo(s);var c=o.line+s.text.length-(s.to.line-s.from.line)-1,u=o.ch;return o.line==s.to.line&&(u+=lo(s).ch-s.to.ch),x(c,u)}function Hl(o,s){for(var c=[],u=0;u<o.sel.ranges.length;u++){var p=o.sel.ranges[u];c.push(new nr(Yu(p.anchor,s),Yu(p.head,s)))}return ci(o.cm,c,o.sel.primIndex)}function Xu(o,s,c){return o.line==s.line?x(c.line,o.ch-s.ch+c.ch):x(c.line+(o.line-s.line),o.ch)}function If(o,s,c){for(var u=[],p=x(o.first,0),v=p,m=0;m<s.length;m++){var _=s[m],w=Xu(_.from,p,v),E=Xu(lo(_),p,v);if(p=_.to,v=E,c=="around"){var K=o.sel.ranges[m],rt=U(K.head,K.anchor)<0;u[m]=new nr(rt?E:w,rt?w:E)}else u[m]=new nr(w,w)}return new Bn(u,o.sel.primIndex)}function Bl(o){o.doc.mode=qn(o.options,o.doc.modeOption),Ja(o)}function Ja(o){o.doc.iter(function(s){s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null)}),o.doc.modeFrontier=o.doc.highlightFrontier=o.doc.first,Za(o,100),o.state.modeGen++,o.curOp&&yn(o)}function Zu(o,s){return s.from.ch==0&&s.to.ch==0&&ae(s.text)==""&&(!o.cm||o.cm.options.wholeLineUpdateBefore)}function Ul(o,s,c,u){function p(de){return c?c[de]:null}function v(de,ie,he){Na(de,ie,he,u),kr(de,"change",de,s)}function m(de,ie){for(var he=[],Te=de;Te<ie;++Te)he.push(new xi(E[Te],p(Te),u));return he}var _=s.from,w=s.to,E=s.text,K=me(o,_.line),rt=me(o,w.line),vt=ae(E),ct=p(E.length-1),kt=w.line-_.line;if(s.full)o.insert(0,m(0,E.length)),o.remove(E.length,o.size-E.length);else if(Zu(o,s)){var Vt=m(0,E.length-1);v(rt,rt.text,ct),kt&&o.remove(_.line,kt),Vt.length&&o.insert(_.line,Vt)}else if(K==rt)if(E.length==1)v(K,K.text.slice(0,_.ch)+vt+K.text.slice(w.ch),ct);else{var Yt=m(1,E.length-1);Yt.push(new xi(vt+K.text.slice(w.ch),ct,u)),v(K,K.text.slice(0,_.ch)+E[0],p(0)),o.insert(_.line+1,Yt)}else if(E.length==1)v(K,K.text.slice(0,_.ch)+E[0]+rt.text.slice(w.ch),p(0)),o.remove(_.line+1,kt);else{v(K,K.text.slice(0,_.ch)+E[0],p(0)),v(rt,vt+rt.text.slice(w.ch),ct);var re=m(1,E.length-1);kt>1&&o.remove(_.line+1,kt-1),o.insert(_.line+1,re)}kr(o,"change",o,s)}function uo(o,s,c){function u(p,v,m){if(p.linked)for(var _=0;_<p.linked.length;++_){var w=p.linked[_];if(w.doc!=v){var E=m&&w.sharedHist;c&&!E||(s(w.doc,E),u(w.doc,p,E))}}}u(o,null,!0)}function Ju(o,s){if(s.cm)throw new Error("This document is already in use.");o.doc=s,s.cm=o,ha(o),Bl(o),Qu(o),o.options.direction=s.direction,o.options.lineWrapping||Xi(o),o.options.mode=s.modeOption,yn(o)}function Qu(o){(o.doc.direction=="rtl"?ft:B)(o.display.lineDiv,"CodeMirror-rtl")}function Rf(o){Pn(o,function(){Qu(o),yn(o)})}function on(o){this.done=[],this.undone=[],this.undoDepth=o?o.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=o?o.maxGeneration:1}function Wl(o,s){var c={from:$t(s.from),to:lo(s),text:On(o,s.from,s.to)};return ec(o,c,s.from.line,s.to.line+1),uo(o,function(u){return ec(u,c,s.from.line,s.to.line+1)},!0),c}function ba(o){for(;o.length;){var s=ae(o);if(s.ranges)o.pop();else break}}function Nf(o,s){if(s)return ba(o.done),ae(o.done);if(o.done.length&&!ae(o.done).ranges)return ae(o.done);if(o.done.length>1&&!o.done[o.done.length-2].ranges)return o.done.pop(),ae(o.done)}function tc(o,s,c,u){var p=o.history;p.undone.length=0;var v=+new Date,m,_;if((p.lastOp==u||p.lastOrigin==s.origin&&s.origin&&(s.origin.charAt(0)=="+"&&p.lastModTime>v-(o.cm?o.cm.options.historyEventDelay:500)||s.origin.charAt(0)=="*"))&&(m=Nf(p,p.lastOp==u)))_=ae(m.changes),U(s.from,s.to)==0&&U(s.from,_.to)==0?_.to=lo(s):m.changes.push(Wl(o,s));else{var w=ae(p.done);for((!w||!w.ranges)&&$s(o.sel,p.done),m={changes:[Wl(o,s)],generation:p.generation},p.done.push(m);p.done.length>p.undoDepth;)p.done.shift(),p.done[0].ranges||p.done.shift()}p.done.push(c),p.generation=++p.maxGeneration,p.lastModTime=p.lastSelTime=v,p.lastOp=p.lastSelOp=u,p.lastOrigin=p.lastSelOrigin=s.origin,_||Qe(o,"historyAdded")}function Ff(o,s,c,u){var p=s.charAt(0);return p=="*"||p=="+"&&c.ranges.length==u.ranges.length&&c.somethingSelected()==u.somethingSelected()&&new Date-o.history.lastSelTime<=(o.cm?o.cm.options.historyEventDelay:500)}function Vf(o,s,c,u){var p=o.history,v=u&&u.origin;c==p.lastSelOp||v&&p.lastSelOrigin==v&&(p.lastModTime==p.lastSelTime&&p.lastOrigin==v||Ff(o,v,ae(p.done),s))?p.done[p.done.length-1]=s:$s(s,p.done),p.lastSelTime=+new Date,p.lastSelOrigin=v,p.lastSelOp=c,u&&u.clearRedo!==!1&&ba(p.undone)}function $s(o,s){var c=ae(s);c&&c.ranges&&c.equals(o)||s.push(o)}function ec(o,s,c,u){var p=s["spans_"+o.id],v=0;o.iter(Math.max(o.first,c),Math.min(o.first+o.size,u),function(m){m.markedSpans&&((p||(p=s["spans_"+o.id]={}))[v]=m.markedSpans),++v})}function Hf(o){if(!o)return null;for(var s,c=0;c<o.length;++c)o[c].marker.explicitlyCleared?s||(s=o.slice(0,c)):s&&s.push(o[c]);return s?s.length?s:null:o}function Bf(o,s){var c=s["spans_"+o.id];if(!c)return null;for(var u=[],p=0;p<s.text.length;++p)u.push(Hf(c[p]));return u}function rc(o,s){var c=Bf(o,s),u=Mo(o,s);if(!c)return u;if(!u)return c;for(var p=0;p<c.length;++p){var v=c[p],m=u[p];if(v&&m)t:for(var _=0;_<m.length;++_){for(var w=m[_],E=0;E<v.length;++E)if(v[E].marker==w.marker)continue t;v.push(w)}else m&&(c[p]=m)}return c}function Ca(o,s,c){for(var u=[],p=0;p<o.length;++p){var v=o[p];if(v.ranges){u.push(c?Bn.prototype.deepCopy.call(v):v);continue}var m=v.changes,_=[];u.push({changes:_});for(var w=0;w<m.length;++w){var E=m[w],K=void 0;if(_.push({from:E.from,to:E.to,text:E.text}),s)for(var rt in E)(K=rt.match(/^spans_(\d+)$/))&&Ut(s,Number(K[1]))>-1&&(ae(_)[rt]=E[rt],delete E[rt])}}return u}function zo(o,s,c,u){if(u){var p=o.anchor;if(c){var v=U(s,p)<0;v!=U(c,p)<0?(p=s,s=c):v!=U(s,c)<0&&(s=c)}return new nr(p,s)}else return new nr(c||s,s)}function qs(o,s,c,u,p){p==null&&(p=o.cm&&(o.cm.display.shift||o.extend)),an(o,new Bn([zo(o.sel.primary(),s,c,p)],0),u)}function Ys(o,s,c){for(var u=[],p=o.cm&&(o.cm.display.shift||o.extend),v=0;v<o.sel.ranges.length;v++)u[v]=zo(o.sel.ranges[v],s[v],null,p);var m=ci(o.cm,u,o.sel.primIndex);an(o,m,c)}function zl(o,s,c,u){var p=o.sel.ranges.slice(0);p[s]=c,an(o,ci(o.cm,p,o.sel.primIndex),u)}function Kl(o,s,c,u){an(o,so(s,c),u)}function Uf(o,s,c){var u={ranges:s.ranges,update:function(p){this.ranges=[];for(var v=0;v<p.length;v++)this.ranges[v]=new nr(we(o,p[v].anchor),we(o,p[v].head))},origin:c&&c.origin};return Qe(o,"beforeSelectionChange",o,u),o.cm&&Qe(o.cm,"beforeSelectionChange",o.cm,u),u.ranges!=s.ranges?ci(o.cm,u.ranges,u.ranges.length-1):s}function Gl(o,s,c){var u=o.history.done,p=ae(u);p&&p.ranges?(u[u.length-1]=s,Xs(o,s,c)):an(o,s,c)}function an(o,s,c){Xs(o,s,c),Vf(o,o.sel,o.cm?o.cm.curOp.id:NaN,c)}function Xs(o,s,c){(wr(o,"beforeSelectionChange")||o.cm&&wr(o.cm,"beforeSelectionChange"))&&(s=Uf(o,s,c));var u=c&&c.bias||(U(s.primary().head,o.sel.primary().head)<0?-1:1);co(o,ic(o,s,u,!0)),!(c&&c.scroll===!1)&&o.cm&&o.cm.getOption("readOnly")!="nocursor"&&_a(o.cm)}function co(o,s){s.equals(o.sel)||(o.sel=s,o.cm&&(o.cm.curOp.updateInput=1,o.cm.curOp.selectionChanged=!0,Wr(o.cm)),kr(o,"cursorActivity",o))}function nc(o){co(o,ic(o,o.sel,null,!1))}function ic(o,s,c,u){for(var p,v=0;v<s.ranges.length;v++){var m=s.ranges[v],_=s.ranges.length==o.sel.ranges.length&&o.sel.ranges[v],w=Zs(o,m.anchor,_&&_.anchor,c,u),E=m.head==m.anchor?w:Zs(o,m.head,_&&_.head,c,u);(p||w!=m.anchor||E!=m.head)&&(p||(p=s.ranges.slice(0,v)),p[v]=new nr(w,E))}return p?ci(o.cm,p,s.primIndex):s}function xa(o,s,c,u,p){var v=me(o,s.line);if(v.markedSpans)for(var m=0;m<v.markedSpans.length;++m){var _=v.markedSpans[m],w=_.marker,E="selectLeft"in w?!w.selectLeft:w.inclusiveLeft,K="selectRight"in w?!w.selectRight:w.inclusiveRight;if((_.from==null||(E?_.from<=s.ch:_.from<s.ch))&&(_.to==null||(K?_.to>=s.ch:_.to>s.ch))){if(p&&(Qe(w,"beforeCursorEnter"),w.explicitlyCleared))if(v.markedSpans){--m;continue}else break;if(!w.atomic)continue;if(c){var rt=w.find(u<0?1:-1),vt=void 0;if((u<0?K:E)&&(rt=oc(o,rt,-u,rt&&rt.line==s.line?v:null)),rt&&rt.line==s.line&&(vt=U(rt,c))&&(u<0?vt<0:vt>0))return xa(o,rt,s,u,p)}var ct=w.find(u<0?-1:1);return(u<0?E:K)&&(ct=oc(o,ct,u,ct.line==s.line?v:null)),ct?xa(o,ct,s,u,p):null}}return s}function Zs(o,s,c,u,p){var v=u||1,m=xa(o,s,c,v,p)||!p&&xa(o,s,c,v,!0)||xa(o,s,c,-v,p)||!p&&xa(o,s,c,-v,!0);return m||(o.cantEdit=!0,x(o.first,0))}function oc(o,s,c,u){return c<0&&s.ch==0?s.line>o.first?we(o,x(s.line-1)):null:c>0&&s.ch==(u||me(o,s.line)).text.length?s.line<o.first+o.size-1?x(s.line+1,0):null:new x(s.line,s.ch+c)}function ac(o){o.setSelection(x(o.firstLine(),0),x(o.lastLine()),oe)}function sc(o,s,c){var u={canceled:!1,from:s.from,to:s.to,text:s.text,origin:s.origin,cancel:function(){return u.canceled=!0}};return c&&(u.update=function(p,v,m,_){p&&(u.from=we(o,p)),v&&(u.to=we(o,v)),m&&(u.text=m),_!==void 0&&(u.origin=_)}),Qe(o,"beforeChange",o,u),o.cm&&Qe(o.cm,"beforeChange",o.cm,u),u.canceled?(o.cm&&(o.cm.curOp.updateInput=2),null):{from:u.from,to:u.to,text:u.text,origin:u.origin}}function Ko(o,s,c){if(o.cm){if(!o.cm.curOp)return xr(o.cm,Ko)(o,s,c);if(o.cm.state.suppressEdits)return}if(!((wr(o,"beforeChange")||o.cm&&wr(o.cm,"beforeChange"))&&(s=sc(o,s,!0),!s))){var u=Dn&&!c&&In(o,s.from,s.to);if(u)for(var p=u.length-1;p>=0;--p)lc(o,{from:u[p].from,to:u[p].to,text:p?[""]:s.text,origin:s.origin});else lc(o,s)}}function lc(o,s){if(!(s.text.length==1&&s.text[0]==""&&U(s.from,s.to)==0)){var c=Hl(o,s);tc(o,s,c,o.cm?o.cm.curOp.id:NaN),es(o,s,c,Mo(o,s));var u=[];uo(o,function(p,v){!v&&Ut(u,p.history)==-1&&(ql(p.history,s),u.push(p.history)),es(p,s,null,Mo(p,s))})}}function Qa(o,s,c){var u=o.cm&&o.cm.state.suppressEdits;if(!(u&&!c)){for(var p=o.history,v,m=o.sel,_=s=="undo"?p.done:p.undone,w=s=="undo"?p.undone:p.done,E=0;E<_.length&&(v=_[E],!(c?v.ranges&&!v.equals(o.sel):!v.ranges));E++);if(E!=_.length){for(p.lastOrigin=p.lastSelOrigin=null;;)if(v=_.pop(),v.ranges){if($s(v,w),c&&!v.equals(o.sel)){an(o,v,{clearRedo:!1});return}m=v}else if(u){_.push(v);return}else break;var K=[];$s(m,w),w.push({changes:K,generation:p.generation}),p.generation=v.generation||++p.maxGeneration;for(var rt=wr(o,"beforeChange")||o.cm&&wr(o.cm,"beforeChange"),vt=function(Vt){var Yt=v.changes[Vt];if(Yt.origin=s,rt&&!sc(o,Yt,!1))return _.length=0,{};K.push(Wl(o,Yt));var re=Vt?Hl(o,Yt):ae(_);es(o,Yt,re,rc(o,Yt)),!Vt&&o.cm&&o.cm.scrollIntoView({from:Yt.from,to:lo(Yt)});var de=[];uo(o,function(ie,he){!he&&Ut(de,ie.history)==-1&&(ql(ie.history,Yt),de.push(ie.history)),es(ie,Yt,null,rc(ie,Yt))})},ct=v.changes.length-1;ct>=0;--ct){var kt=vt(ct);if(kt)return kt.v}}}}function ts(o,s){if(s!=0&&(o.first+=s,o.sel=new Bn(T(o.sel.ranges,function(p){return new nr(x(p.anchor.line+s,p.anchor.ch),x(p.head.line+s,p.head.ch))}),o.sel.primIndex),o.cm)){yn(o.cm,o.first,o.first-s,s);for(var c=o.cm.display,u=c.viewFrom;u<c.viewTo;u++)ui(o.cm,u,"gutter")}}function es(o,s,c,u){if(o.cm&&!o.cm.curOp)return xr(o.cm,es)(o,s,c,u);if(s.to.line<o.first){ts(o,s.text.length-1-(s.to.line-s.from.line));return}if(!(s.from.line>o.lastLine())){if(s.from.line<o.first){var p=s.text.length-1-(o.first-s.from.line);ts(o,p),s={from:x(o.first,0),to:x(s.to.line+p,s.to.ch),text:[ae(s.text)],origin:s.origin}}var v=o.lastLine();s.to.line>v&&(s={from:s.from,to:x(v,me(o,v).text.length),text:[s.text[0]],origin:s.origin}),s.removed=On(o,s.from,s.to),c||(c=Hl(o,s)),o.cm?Wf(o.cm,s,u):Ul(o,s,u),Xs(o,c,oe),o.cantEdit&&Zs(o,x(o.firstLine(),0))&&(o.cantEdit=!1)}}function Wf(o,s,c){var u=o.doc,p=o.display,v=s.from,m=s.to,_=!1,w=v.line;o.options.lineWrapping||(w=Xe(dr(me(u,v.line))),u.iter(w,m.line+1,function(ct){if(ct==p.maxLine)return _=!0,!0})),u.sel.contains(s.from,s.to)>-1&&Wr(o),Ul(u,s,c,ju(o)),o.options.lineWrapping||(u.iter(w,v.line+s.text.length,function(ct){var kt=gi(ct);kt>p.maxLineLength&&(p.maxLine=ct,p.maxLineLength=kt,p.maxLineChanged=!0,_=!1)}),_&&(o.curOp.updateMaxLine=!0)),Ts(u,v.line),Za(o,400);var E=s.text.length-(m.line-v.line)-1;s.full?yn(o):v.line==m.line&&s.text.length==1&&!Zu(o.doc,s)?ui(o,v.line,"text"):yn(o,v.line,m.line+1,E);var K=wr(o,"changes"),rt=wr(o,"change");if(rt||K){var vt={from:v,to:m,text:s.text,removed:s.removed,origin:s.origin};rt&&kr(o,"change",o,vt),K&&(o.curOp.changeObjs||(o.curOp.changeObjs=[])).push(vt)}o.display.selForContextMenu=null}function Go(o,s,c,u,p){var v;u||(u=c),U(u,c)<0&&(v=[u,c],c=v[0],u=v[1]),typeof s=="string"&&(s=o.splitLines(s)),Ko(o,{from:c,to:u,text:s,origin:p})}function uc(o,s,c,u){c<o.line?o.line+=u:s<o.line&&(o.line=s,o.ch=0)}function $l(o,s,c,u){for(var p=0;p<o.length;++p){var v=o[p],m=!0;if(v.ranges){v.copied||(v=o[p]=v.deepCopy(),v.copied=!0);for(var _=0;_<v.ranges.length;_++)uc(v.ranges[_].anchor,s,c,u),uc(v.ranges[_].head,s,c,u);continue}for(var w=0;w<v.changes.length;++w){var E=v.changes[w];if(c<E.from.line)E.from=x(E.from.line+u,E.from.ch),E.to=x(E.to.line+u,E.to.ch);else if(s<=E.to.line){m=!1;break}}m||(o.splice(0,p+1),p=0)}}function ql(o,s){var c=s.from.line,u=s.to.line,p=s.text.length-(u-c)-1;$l(o.done,c,u,p),$l(o.undone,c,u,p)}function fo(o,s,c,u){var p=s,v=s;return typeof s=="number"?v=me(o,Je(o,s)):p=Xe(s),p==null?null:(u(v,p)&&o.cm&&ui(o.cm,p,c),v)}function rs(o){this.lines=o,this.parent=null;for(var s=0,c=0;c<o.length;++c)o[c].parent=this,s+=o[c].height;this.height=s}rs.prototype={chunkSize:function(){return this.lines.length},removeInner:function(o,s){for(var c=o,u=o+s;c<u;++c){var p=this.lines[c];this.height-=p.height,As(p),kr(p,"delete")}this.lines.splice(o,s)},collapse:function(o){o.push.apply(o,this.lines)},insertInner:function(o,s,c){this.height+=c,this.lines=this.lines.slice(0,o).concat(s).concat(this.lines.slice(o));for(var u=0;u<s.length;++u)s[u].parent=this},iterN:function(o,s,c){for(var u=o+s;o<u;++o)if(c(this.lines[o]))return!0}};function ns(o){this.children=o;for(var s=0,c=0,u=0;u<o.length;++u){var p=o[u];s+=p.chunkSize(),c+=p.height,p.parent=this}this.size=s,this.height=c,this.parent=null}ns.prototype={chunkSize:function(){return this.size},removeInner:function(o,s){this.size-=s;for(var c=0;c<this.children.length;++c){var u=this.children[c],p=u.chunkSize();if(o<p){var v=Math.min(s,p-o),m=u.height;if(u.removeInner(o,v),this.height-=m-u.height,p==v&&(this.children.splice(c--,1),u.parent=null),(s-=v)==0)break;o=0}else o-=p}if(this.size-s<25&&(this.children.length>1||!(this.children[0]instanceof rs))){var _=[];this.collapse(_),this.children=[new rs(_)],this.children[0].parent=this}},collapse:function(o){for(var s=0;s<this.children.length;++s)this.children[s].collapse(o)},insertInner:function(o,s,c){this.size+=s.length,this.height+=c;for(var u=0;u<this.children.length;++u){var p=this.children[u],v=p.chunkSize();if(o<=v){if(p.insertInner(o,s,c),p.lines&&p.lines.length>50){for(var m=p.lines.length%25+25,_=m;_<p.lines.length;){var w=new rs(p.lines.slice(_,_+=25));p.height-=w.height,this.children.splice(++u,0,w),w.parent=this}p.lines=p.lines.slice(0,m),this.maybeSpill()}break}o-=v}},maybeSpill:function(){if(!(this.children.length<=10)){var o=this;do{var s=o.children.splice(o.children.length-5,5),c=new ns(s);if(o.parent){o.size-=c.size,o.height-=c.height;var p=Ut(o.parent.children,o);o.parent.children.splice(p+1,0,c)}else{var u=new ns(o.children);u.parent=o,o.children=[u,c],o=u}c.parent=o.parent}while(o.children.length>10);o.parent.maybeSpill()}},iterN:function(o,s,c){for(var u=0;u<this.children.length;++u){var p=this.children[u],v=p.chunkSize();if(o<v){var m=Math.min(s,v-o);if(p.iterN(o,m,c))return!0;if((s-=m)==0)break;o=0}else o-=v}}};var is=function(o,s,c){if(c)for(var u in c)c.hasOwnProperty(u)&&(this[u]=c[u]);this.doc=o,this.node=s};is.prototype.clear=function(){var o=this.doc.cm,s=this.line.widgets,c=this.line,u=Xe(c);if(!(u==null||!s)){for(var p=0;p<s.length;++p)s[p]==this&&s.splice(p--,1);s.length||(c.widgets=null);var v=Ei(this);en(c,Math.max(0,c.height-v)),o&&(Pn(o,function(){cc(o,c,-v),ui(o,u,"widget")}),kr(o,"lineWidgetCleared",o,this,u))}},is.prototype.changed=function(){var o=this,s=this.height,c=this.doc.cm,u=this.line;this.height=null;var p=Ei(this)-s;p&&(Vn(this.doc,u)||en(u,u.height+p),c&&Pn(c,function(){c.curOp.forceUpdate=!0,cc(c,u,p),kr(c,"lineWidgetChanged",c,o,Xe(u))}))},Mn(is);function cc(o,s,c){Ar(s)<(o.curOp&&o.curOp.scrollTop||o.doc.scrollTop)&&Dl(o,c)}function zf(o,s,c,u){var p=new is(o,c,u),v=o.cm;return v&&p.noHScroll&&(v.display.alignWidgets=!0),fo(o,s,"widget",function(m){var _=m.widgets||(m.widgets=[]);if(p.insertAt==null?_.push(p):_.splice(Math.min(_.length,Math.max(0,p.insertAt)),0,p),p.line=m,v&&!Vn(o,m)){var w=Ar(m)<o.scrollTop;en(m,m.height+Ei(p)),w&&Dl(v,p.height),v.curOp.forceUpdate=!0}return!0}),v&&kr(v,"lineWidgetAdded",v,p,typeof s=="number"?s:Xe(s)),p}var fc=0,po=function(o,s){this.lines=[],this.type=s,this.doc=o,this.id=++fc};po.prototype.clear=function(){if(!this.explicitlyCleared){var o=this.doc.cm,s=o&&!o.curOp;if(s&&Uo(o),wr(this,"clear")){var c=this.find();c&&kr(this,"clear",c.from,c.to)}for(var u=null,p=null,v=0;v<this.lines.length;++v){var m=this.lines[v],_=Wi(m.markedSpans,this);o&&!this.collapsed?ui(o,Xe(m),"text"):o&&(_.to!=null&&(p=Xe(m)),_.from!=null&&(u=Xe(m))),m.markedSpans=Zn(m.markedSpans,_),_.from==null&&this.collapsed&&!Vn(this.doc,m)&&o&&en(m,Pi(o.display))}if(o&&this.collapsed&&!o.options.lineWrapping)for(var w=0;w<this.lines.length;++w){var E=dr(this.lines[w]),K=gi(E);K>o.display.maxLineLength&&(o.display.maxLine=E,o.display.maxLineLength=K,o.display.maxLineChanged=!0)}u!=null&&o&&this.collapsed&&yn(o,u,p+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,o&&nc(o.doc)),o&&kr(o,"markerCleared",o,this,u,p),s&&Wo(o),this.parent&&this.parent.clear()}},po.prototype.find=function(o,s){o==null&&this.type=="bookmark"&&(o=1);for(var c,u,p=0;p<this.lines.length;++p){var v=this.lines[p],m=Wi(v.markedSpans,this);if(m.from!=null&&(c=x(s?v:Xe(v),m.from),o==-1))return c;if(m.to!=null&&(u=x(s?v:Xe(v),m.to),o==1))return u}return c&&{from:c,to:u}},po.prototype.changed=function(){var o=this,s=this.find(-1,!0),c=this,u=this.doc.cm;!s||!u||Pn(u,function(){var p=s.line,v=Xe(s.line),m=De(u,v);if(m&&(Pu(m),u.curOp.selectionChanged=u.curOp.forceUpdate=!0),u.curOp.updateMaxLine=!0,!Vn(c.doc,p)&&c.height!=null){var _=c.height;c.height=null;var w=Ei(c)-_;w&&en(p,p.height+w)}kr(u,"markerChanged",u,o)})},po.prototype.attachLine=function(o){if(!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(!s.maybeHiddenMarkers||Ut(s.maybeHiddenMarkers,this)==-1)&&(s.maybeUnhiddenMarkers||(s.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(o)},po.prototype.detachLine=function(o){if(this.lines.splice(Ut(this.lines,o),1),!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(s.maybeHiddenMarkers||(s.maybeHiddenMarkers=[])).push(this)}},Mn(po);function $o(o,s,c,u,p){if(u&&u.shared)return Js(o,s,c,u,p);if(o.cm&&!o.cm.curOp)return xr(o.cm,$o)(o,s,c,u,p);var v=new po(o,p),m=U(s,c);if(u&&Bt(u,v,!1),m>0||m==0&&v.clearWhenEmpty!==!1)return v;if(v.replacedWith&&(v.collapsed=!0,v.widgetNode=Et("span",[v.replacedWith],"CodeMirror-widget"),u.handleMouseEvents||v.widgetNode.setAttribute("cm-ignore-events","true"),u.insertLeft&&(v.widgetNode.insertLeft=!0)),v.collapsed){if(Nn(o,s.line,s,c,v)||s.line!=c.line&&Nn(o,c.line,s,c,v))throw new Error("Inserting collapsed marker partially overlapping an existing one");Es()}v.addToHistory&&tc(o,{from:s,to:c,origin:"markText"},o.sel,NaN);var _=s.line,w=o.cm,E;if(o.iter(_,c.line+1,function(rt){w&&v.collapsed&&!w.options.lineWrapping&&dr(rt)==w.display.maxLine&&(E=!0),v.collapsed&&_!=s.line&&en(rt,0),Ps(rt,new Ui(v,_==s.line?s.ch:null,_==c.line?c.ch:null),o.cm&&o.cm.curOp),++_}),v.collapsed&&o.iter(s.line,c.line+1,function(rt){Vn(o,rt)&&en(rt,0)}),v.clearOnEnter&&_e(v,"beforeCursorEnter",function(){return v.clear()}),v.readOnly&&(Ia(),(o.history.done.length||o.history.undone.length)&&o.clearHistory()),v.collapsed&&(v.id=++fc,v.atomic=!0),w){if(E&&(w.curOp.updateMaxLine=!0),v.collapsed)yn(w,s.line,c.line+1);else if(v.className||v.startStyle||v.endStyle||v.css||v.attributes||v.title)for(var K=s.line;K<=c.line;K++)ui(w,K,"text");v.atomic&&nc(w.doc),kr(w,"markerAdded",w,v)}return v}var os=function(o,s){this.markers=o,this.primary=s;for(var c=0;c<o.length;++c)o[c].parent=this};os.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var o=0;o<this.markers.length;++o)this.markers[o].clear();kr(this,"clear")}},os.prototype.find=function(o,s){return this.primary.find(o,s)},Mn(os);function Js(o,s,c,u,p){u=Bt(u),u.shared=!1;var v=[$o(o,s,c,u,p)],m=v[0],_=u.widgetNode;return uo(o,function(w){_&&(u.widgetNode=_.cloneNode(!0)),v.push($o(w,we(w,s),we(w,c),u,p));for(var E=0;E<w.linked.length;++E)if(w.linked[E].isParent)return;m=ae(v)}),new os(v,m)}function pc(o){return o.findMarks(x(o.first,0),o.clipPos(x(o.lastLine())),function(s){return s.parent})}function dc(o,s){for(var c=0;c<s.length;c++){var u=s[c],p=u.find(),v=o.clipPos(p.from),m=o.clipPos(p.to);if(U(v,m)){var _=$o(o,v,m,u.primary,u.primary.type);u.markers.push(_),_.parent=u}}}function Kf(o){for(var s=function(u){var p=o[u],v=[p.primary.doc];uo(p.primary.doc,function(w){return v.push(w)});for(var m=0;m<p.markers.length;m++){var _=p.markers[m];Ut(v,_.doc)==-1&&(_.parent=null,p.markers.splice(m--,1))}},c=0;c<o.length;c++)s(c)}var ho=0,wn=function(o,s,c,u,p){if(!(this instanceof wn))return new wn(o,s,c,u,p);c==null&&(c=0),ns.call(this,[new rs([new xi("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=c;var v=x(c,0);this.sel=so(v),this.history=new on(null),this.id=++ho,this.modeOption=s,this.lineSep=u,this.direction=p=="rtl"?"rtl":"ltr",this.extend=!1,typeof o=="string"&&(o=this.splitLines(o)),Ul(this,{from:v,to:v,text:o}),an(this,so(v),oe)};wn.prototype=gt(ns.prototype,{constructor:wn,iter:function(o,s,c){c?this.iterN(o-this.first,s-o,c):this.iterN(this.first,this.first+this.size,o)},insert:function(o,s){for(var c=0,u=0;u<s.length;++u)c+=s[u].height;this.insertInner(o-this.first,s,c)},remove:function(o,s){this.removeInner(o-this.first,s)},getValue:function(o){var s=br(this,this.first,this.first+this.size);return o===!1?s:s.join(o||this.lineSeparator())},setValue:Mr(function(o){var s=x(this.first,0),c=this.first+this.size-1;Ko(this,{from:s,to:x(c,me(this,c).text.length),text:this.splitLines(o),origin:"setValue",full:!0},!0),this.cm&&$a(this.cm,0,0),an(this,so(s),oe)}),replaceRange:function(o,s,c,u){s=we(this,s),c=c?we(this,c):s,Go(this,o,s,c,u)},getRange:function(o,s,c){var u=On(this,we(this,o),we(this,s));return c===!1?u:c===""?u.join(""):u.join(c||this.lineSeparator())},getLine:function(o){var s=this.getLineHandle(o);return s&&s.text},getLineHandle:function(o){if(hi(this,o))return me(this,o)},getLineNumber:function(o){return Xe(o)},getLineHandleVisualStart:function(o){return typeof o=="number"&&(o=me(this,o)),dr(o)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(o){return we(this,o)},getCursor:function(o){var s=this.sel.primary(),c;return o==null||o=="head"?c=s.head:o=="anchor"?c=s.anchor:o=="end"||o=="to"||o===!1?c=s.to():c=s.from(),c},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Mr(function(o,s,c){Kl(this,we(this,typeof o=="number"?x(o,s||0):o),null,c)}),setSelection:Mr(function(o,s,c){Kl(this,we(this,o),we(this,s||o),c)}),extendSelection:Mr(function(o,s,c){qs(this,we(this,o),s&&we(this,s),c)}),extendSelections:Mr(function(o,s){Ys(this,ia(this,o),s)}),extendSelectionsBy:Mr(function(o,s){var c=T(this.sel.ranges,o);Ys(this,ia(this,c),s)}),setSelections:Mr(function(o,s,c){if(o.length){for(var u=[],p=0;p<o.length;p++)u[p]=new nr(we(this,o[p].anchor),we(this,o[p].head||o[p].anchor));s==null&&(s=Math.min(o.length-1,this.sel.primIndex)),an(this,ci(this.cm,u,s),c)}}),addSelection:Mr(function(o,s,c){var u=this.sel.ranges.slice(0);u.push(new nr(we(this,o),we(this,s||o))),an(this,ci(this.cm,u,u.length-1),c)}),getSelection:function(o){for(var s=this.sel.ranges,c,u=0;u<s.length;u++){var p=On(this,s[u].from(),s[u].to());c=c?c.concat(p):p}return o===!1?c:c.join(o||this.lineSeparator())},getSelections:function(o){for(var s=[],c=this.sel.ranges,u=0;u<c.length;u++){var p=On(this,c[u].from(),c[u].to());o!==!1&&(p=p.join(o||this.lineSeparator())),s[u]=p}return s},replaceSelection:function(o,s,c){for(var u=[],p=0;p<this.sel.ranges.length;p++)u[p]=o;this.replaceSelections(u,s,c||"+input")},replaceSelections:Mr(function(o,s,c){for(var u=[],p=this.sel,v=0;v<p.ranges.length;v++){var m=p.ranges[v];u[v]={from:m.from(),to:m.to(),text:this.splitLines(o[v]),origin:c}}for(var _=s&&s!="end"&&If(this,u,s),w=u.length-1;w>=0;w--)Ko(this,u[w]);_?Gl(this,_):this.cm&&_a(this.cm)}),undo:Mr(function(){Qa(this,"undo")}),redo:Mr(function(){Qa(this,"redo")}),undoSelection:Mr(function(){Qa(this,"undo",!0)}),redoSelection:Mr(function(){Qa(this,"redo",!0)}),setExtending:function(o){this.extend=o},getExtending:function(){return this.extend},historySize:function(){for(var o=this.history,s=0,c=0,u=0;u<o.done.length;u++)o.done[u].ranges||++s;for(var p=0;p<o.undone.length;p++)o.undone[p].ranges||++c;return{undo:s,redo:c}},clearHistory:function(){var o=this;this.history=new on(this.history),uo(this,function(s){return s.history=o.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(o){return o&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(o){return this.history.generation==(o||this.cleanGeneration)},getHistory:function(){return{done:Ca(this.history.done),undone:Ca(this.history.undone)}},setHistory:function(o){var s=this.history=new on(this.history);s.done=Ca(o.done.slice(0),null,!0),s.undone=Ca(o.undone.slice(0),null,!0)},setGutterMarker:Mr(function(o,s,c){return fo(this,o,"gutter",function(u){var p=u.gutterMarkers||(u.gutterMarkers={});return p[s]=c,!c&&dt(p)&&(u.gutterMarkers=null),!0})}),clearGutter:Mr(function(o){var s=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[o]&&fo(s,c,"gutter",function(){return c.gutterMarkers[o]=null,dt(c.gutterMarkers)&&(c.gutterMarkers=null),!0})})}),lineInfo:function(o){var s;if(typeof o=="number"){if(!hi(this,o)||(s=o,o=me(this,o),!o))return null}else if(s=Xe(o),s==null)return null;return{line:s,handle:o,text:o.text,gutterMarkers:o.gutterMarkers,textClass:o.textClass,bgClass:o.bgClass,wrapClass:o.wrapClass,widgets:o.widgets}},addLineClass:Mr(function(o,s,c){return fo(this,o,s=="gutter"?"gutter":"class",function(u){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass";if(!u[p])u[p]=c;else{if(nt(c).test(u[p]))return!1;u[p]+=" "+c}return!0})}),removeLineClass:Mr(function(o,s,c){return fo(this,o,s=="gutter"?"gutter":"class",function(u){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass",v=u[p];if(v)if(c==null)u[p]=null;else{var m=v.match(nt(c));if(!m)return!1;var _=m.index+m[0].length;u[p]=v.slice(0,m.index)+(!m.index||_==v.length?"":" ")+v.slice(_)||null}else return!1;return!0})}),addLineWidget:Mr(function(o,s,c){return zf(this,o,s,c)}),removeLineWidget:function(o){o.clear()},markText:function(o,s,c){return $o(this,we(this,o),we(this,s),c,c&&c.type||"range")},setBookmark:function(o,s){var c={replacedWith:s&&(s.nodeType==null?s.widget:s),insertLeft:s&&s.insertLeft,clearWhenEmpty:!1,shared:s&&s.shared,handleMouseEvents:s&&s.handleMouseEvents};return o=we(this,o),$o(this,o,o,c,"bookmark")},findMarksAt:function(o){o=we(this,o);var s=[],c=me(this,o.line).markedSpans;if(c)for(var u=0;u<c.length;++u){var p=c[u];(p.from==null||p.from<=o.ch)&&(p.to==null||p.to>=o.ch)&&s.push(p.marker.parent||p.marker)}return s},findMarks:function(o,s,c){o=we(this,o),s=we(this,s);var u=[],p=o.line;return this.iter(o.line,s.line+1,function(v){var m=v.markedSpans;if(m)for(var _=0;_<m.length;_++){var w=m[_];!(w.to!=null&&p==o.line&&o.ch>=w.to||w.from==null&&p!=o.line||w.from!=null&&p==s.line&&w.from>=s.ch)&&(!c||c(w.marker))&&u.push(w.marker.parent||w.marker)}++p}),u},getAllMarks:function(){var o=[];return this.iter(function(s){var c=s.markedSpans;if(c)for(var u=0;u<c.length;++u)c[u].from!=null&&o.push(c[u].marker)}),o},posFromIndex:function(o){var s,c=this.first,u=this.lineSeparator().length;return this.iter(function(p){var v=p.text.length+u;if(v>o)return s=o,!0;o-=v,++c}),we(this,x(c,s))},indexFromPos:function(o){o=we(this,o);var s=o.ch;if(o.line<this.first||o.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,o.line,function(u){s+=u.text.length+c}),s},copy:function(o){var s=new wn(br(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return s.scrollTop=this.scrollTop,s.scrollLeft=this.scrollLeft,s.sel=this.sel,s.extend=!1,o&&(s.history.undoDepth=this.history.undoDepth,s.setHistory(this.getHistory())),s},linkedDoc:function(o){o||(o={});var s=this.first,c=this.first+this.size;o.from!=null&&o.from>s&&(s=o.from),o.to!=null&&o.to<c&&(c=o.to);var u=new wn(br(this,s,c),o.mode||this.modeOption,s,this.lineSep,this.direction);return o.sharedHist&&(u.history=this.history),(this.linked||(this.linked=[])).push({doc:u,sharedHist:o.sharedHist}),u.linked=[{doc:this,isParent:!0,sharedHist:o.sharedHist}],dc(u,pc(this)),u},unlinkDoc:function(o){if(o instanceof mr&&(o=o.doc),this.linked)for(var s=0;s<this.linked.length;++s){var c=this.linked[s];if(c.doc==o){this.linked.splice(s,1),o.unlinkDoc(this),Kf(pc(this));break}}if(o.history==this.history){var u=[o.id];uo(o,function(p){return u.push(p.id)},!0),o.history=new on(null),o.history.done=Ca(this.history.done,u),o.history.undone=Ca(this.history.undone,u)}},iterLinkedDocs:function(o){uo(this,o)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(o){return this.lineSep?o.split(this.lineSep):gn(o)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Mr(function(o){o!="rtl"&&(o="ltr"),o!=this.direction&&(this.direction=o,this.iter(function(s){return s.order=null}),this.cm&&Rf(this.cm))})}),wn.prototype.eachLine=wn.prototype.iter;var hc=0;function Gf(o){var s=this;if(Yl(s),!(sr(s,o)||Hn(s.display,o))){I(o),k&&(hc=+new Date);var c=Vo(s,o,!0),u=o.dataTransfer.files;if(!(!c||s.isReadOnly()))if(u&&u.length&&window.FileReader&&window.File)for(var p=u.length,v=Array(p),m=0,_=function(){++m==p&&xr(s,function(){c=we(s.doc,c);var ct={from:c,to:c,text:s.doc.splitLines(v.filter(function(kt){return kt!=null}).join(s.doc.lineSeparator())),origin:"paste"};Ko(s.doc,ct),Gl(s.doc,so(we(s.doc,c),we(s.doc,lo(ct))))})()},w=function(ct,kt){if(s.options.allowDropFileTypes&&Ut(s.options.allowDropFileTypes,ct.type)==-1){_();return}var Vt=new FileReader;Vt.onerror=function(){return _()},Vt.onload=function(){var Yt=Vt.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Yt)){_();return}v[kt]=Yt,_()},Vt.readAsText(ct)},E=0;E<u.length;E++)w(u[E],E);else{if(s.state.draggingText&&s.doc.sel.contains(c)>-1){s.state.draggingText(o),setTimeout(function(){return s.display.input.focus()},20);return}try{var K=o.dataTransfer.getData("Text");if(K){var rt;if(s.state.draggingText&&!s.state.draggingText.copy&&(rt=s.listSelections()),Xs(s.doc,so(c,c)),rt)for(var vt=0;vt<rt.length;++vt)Go(s.doc,"",rt[vt].anchor,rt[vt].head,"drag");s.replaceSelection(K,"around","paste"),s.display.input.focus()}}catch{}}}}function $f(o,s){if(k&&(!o.state.draggingText||+new Date-hc<100)){It(s);return}if(!(sr(o,s)||Hn(o.display,s))&&(s.dataTransfer.setData("Text",o.getSelection()),s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setDragImage&&!it)){var c=V("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",z&&(c.width=c.height=1,o.display.wrapper.appendChild(c),c._top=c.offsetTop),s.dataTransfer.setDragImage(c,0,0),z&&c.parentNode.removeChild(c)}}function qf(o,s){var c=Vo(o,s);if(c){var u=document.createDocumentFragment();Al(o,c,u),o.display.dragCursor||(o.display.dragCursor=V("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),o.display.lineSpace.insertBefore(o.display.dragCursor,o.display.cursorDiv)),mt(o.display.dragCursor,u)}}function Yl(o){o.display.dragCursor&&(o.display.lineSpace.removeChild(o.display.dragCursor),o.display.dragCursor=null)}function Qs(o){if(document.getElementsByClassName){for(var s=document.getElementsByClassName("CodeMirror"),c=[],u=0;u<s.length;u++){var p=s[u].CodeMirror;p&&c.push(p)}c.length&&c[0].operation(function(){for(var v=0;v<c.length;v++)o(c[v])})}}var vc=!1;function Yf(){vc||(gc(),vc=!0)}function gc(){var o;_e(window,"resize",function(){o==null&&(o=setTimeout(function(){o=null,Qs(Xf)},100))}),_e(window,"blur",function(){return Qs(ga)})}function Xf(o){var s=o.display;s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.scrollbarsClipped=!1,o.setSize()}for(var vo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Sa=0;Sa<10;Sa++)vo[Sa+48]=vo[Sa+96]=String(Sa);for(var tl=65;tl<=90;tl++)vo[tl]=String.fromCharCode(tl);for(var Mi=1;Mi<=12;Mi++)vo[Mi+111]=vo[Mi+63235]="F"+Mi;var Li={};Li.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Li.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Li.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Li.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Li.default=_t?Li.macDefault:Li.pcDefault;function Zf(o){var s=o.split(/-(?!$)/);o=s[s.length-1];for(var c,u,p,v,m=0;m<s.length-1;m++){var _=s[m];if(/^(cmd|meta|m)$/i.test(_))v=!0;else if(/^a(lt)?$/i.test(_))c=!0;else if(/^(c|ctrl|control)$/i.test(_))u=!0;else if(/^s(hift)?$/i.test(_))p=!0;else throw new Error("Unrecognized modifier name: "+_)}return c&&(o="Alt-"+o),u&&(o="Ctrl-"+o),v&&(o="Cmd-"+o),p&&(o="Shift-"+o),o}function mc(o){var s={};for(var c in o)if(o.hasOwnProperty(c)){var u=o[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if(u=="..."){delete o[c];continue}for(var p=T(c.split(" "),Zf),v=0;v<p.length;v++){var m=void 0,_=void 0;v==p.length-1?(_=p.join(" "),m=u):(_=p.slice(0,v+1).join(" "),m="...");var w=s[_];if(!w)s[_]=m;else if(w!=m)throw new Error("Inconsistent bindings for "+_)}delete o[c]}for(var E in s)o[E]=s[E];return o}function qo(o,s,c,u){s=el(s);var p=s.call?s.call(o,u):s[o];if(p===!1)return"nothing";if(p==="...")return"multi";if(p!=null&&c(p))return"handled";if(s.fallthrough){if(Object.prototype.toString.call(s.fallthrough)!="[object Array]")return qo(o,s.fallthrough,c,u);for(var v=0;v<s.fallthrough.length;v++){var m=qo(o,s.fallthrough[v],c,u);if(m)return m}}}function Xl(o){var s=typeof o=="string"?o:vo[o.keyCode];return s=="Ctrl"||s=="Alt"||s=="Shift"||s=="Mod"}function Zl(o,s,c){var u=o;return s.altKey&&u!="Alt"&&(o="Alt-"+o),(te?s.metaKey:s.ctrlKey)&&u!="Ctrl"&&(o="Ctrl-"+o),(te?s.ctrlKey:s.metaKey)&&u!="Mod"&&(o="Cmd-"+o),!c&&s.shiftKey&&u!="Shift"&&(o="Shift-"+o),o}function Jl(o,s){if(z&&o.keyCode==34&&o.char)return!1;var c=vo[o.keyCode];return c==null||o.altGraphKey?!1:(o.keyCode==3&&o.code&&(c=o.code),Zl(c,o,s))}function el(o){return typeof o=="string"?Li[o]:o}function _i(o,s){for(var c=o.doc.sel.ranges,u=[],p=0;p<c.length;p++){for(var v=s(c[p]);u.length&&U(v.from,ae(u).to)<=0;){var m=u.pop();if(U(m.from,v.from)<0){v.from=m.from;break}}u.push(v)}Pn(o,function(){for(var _=u.length-1;_>=0;_--)Go(o.doc,"",u[_].from,u[_].to,"+delete");_a(o)})}function as(o,s,c){var u=Ne(o.text,s+c,c);return u<0||u>o.text.length?null:u}function rl(o,s,c){var u=as(o,s.ch,c);return u==null?null:new x(s.line,u,c<0?"after":"before")}function nl(o,s,c,u,p){if(o){s.doc.direction=="rtl"&&(p=-p);var v=$e(c,s.doc.direction);if(v){var m=p<0?ae(v):v[0],_=p<0==(m.level==1),w=_?"after":"before",E;if(m.level>0||s.doc.direction=="rtl"){var K=Ee(s,c);E=p<0?c.text.length-1:0;var rt=ur(s,K,E).top;E=Ge(function(vt){return ur(s,K,vt).top==rt},p<0==(m.level==1)?m.from:m.to-1,E),w=="before"&&(E=as(c,E,1))}else E=p<0?m.to:m.from;return new x(u,E,w)}}return new x(u,p<0?c.text.length:0,p<0?"before":"after")}function yc(o,s,c,u){var p=$e(s,o.doc.direction);if(!p)return rl(s,c,u);c.ch>=s.text.length?(c.ch=s.text.length,c.sticky="before"):c.ch<=0&&(c.ch=0,c.sticky="after");var v=qr(p,c.ch,c.sticky),m=p[v];if(o.doc.direction=="ltr"&&m.level%2==0&&(u>0?m.to>c.ch:m.from<c.ch))return rl(s,c,u);var _=function(re,de){return as(s,re instanceof x?re.ch:re,de)},w,E=function(re){return o.options.lineWrapping?(w=w||Ee(o,s),Du(o,s,w,re)):{begin:0,end:s.text.length}},K=E(c.sticky=="before"?_(c,-1):c.ch);if(o.doc.direction=="rtl"||m.level==1){var rt=m.level==1==u<0,vt=_(c,rt?1:-1);if(vt!=null&&(rt?vt<=m.to&&vt<=K.end:vt>=m.from&&vt>=K.begin)){var ct=rt?"before":"after";return new x(c.line,vt,ct)}}var kt=function(re,de,ie){for(var he=function(cr,Hr){return Hr?new x(c.line,_(cr,1),"before"):new x(c.line,cr,"after")};re>=0&&re<p.length;re+=de){var Te=p[re],Se=de>0==(Te.level!=1),Be=Se?ie.begin:_(ie.end,-1);if(Te.from<=Be&&Be<Te.to||(Be=Se?Te.from:_(Te.to,-1),ie.begin<=Be&&Be<ie.end))return he(Be,Se)}},Vt=kt(v+u,u,K);if(Vt)return Vt;var Yt=u>0?K.end:_(K.begin,-1);return Yt!=null&&!(u>0&&Yt==s.text.length)&&(Vt=kt(u>0?0:p.length-1,u,E(Yt)),Vt)?Vt:null}var Di={selectAll:ac,singleSelection:function(o){return o.setSelection(o.getCursor("anchor"),o.getCursor("head"),oe)},killLine:function(o){return _i(o,function(s){if(s.empty()){var c=me(o.doc,s.head.line).text.length;return s.head.ch==c&&s.head.line<o.lastLine()?{from:s.head,to:x(s.head.line+1,0)}:{from:s.head,to:x(s.head.line,c)}}else return{from:s.from(),to:s.to()}})},deleteLine:function(o){return _i(o,function(s){return{from:x(s.from().line,0),to:we(o.doc,x(s.to().line+1,0))}})},delLineLeft:function(o){return _i(o,function(s){return{from:x(s.from().line,0),to:s.from()}})},delWrappedLineLeft:function(o){return _i(o,function(s){var c=o.charCoords(s.head,"div").top+5,u=o.coordsChar({left:0,top:c},"div");return{from:u,to:s.from()}})},delWrappedLineRight:function(o){return _i(o,function(s){var c=o.charCoords(s.head,"div").top+5,u=o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:c},"div");return{from:s.from(),to:u}})},undo:function(o){return o.undo()},redo:function(o){return o.redo()},undoSelection:function(o){return o.undoSelection()},redoSelection:function(o){return o.redoSelection()},goDocStart:function(o){return o.extendSelection(x(o.firstLine(),0))},goDocEnd:function(o){return o.extendSelection(x(o.lastLine()))},goLineStart:function(o){return o.extendSelectionsBy(function(s){return _c(o,s.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(o){return o.extendSelectionsBy(function(s){return Ql(o,s.head)},{origin:"+move",bias:1})},goLineEnd:function(o){return o.extendSelectionsBy(function(s){return Jf(o,s.head.line)},{origin:"+move",bias:-1})},goLineRight:function(o){return o.extendSelectionsBy(function(s){var c=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:c},"div")},Ke)},goLineLeft:function(o){return o.extendSelectionsBy(function(s){var c=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:0,top:c},"div")},Ke)},goLineLeftSmart:function(o){return o.extendSelectionsBy(function(s){var c=o.cursorCoords(s.head,"div").top+5,u=o.coordsChar({left:0,top:c},"div");return u.ch<o.getLine(u.line).search(/\S/)?Ql(o,s.head):u},Ke)},goLineUp:function(o){return o.moveV(-1,"line")},goLineDown:function(o){return o.moveV(1,"line")},goPageUp:function(o){return o.moveV(-1,"page")},goPageDown:function(o){return o.moveV(1,"page")},goCharLeft:function(o){return o.moveH(-1,"char")},goCharRight:function(o){return o.moveH(1,"char")},goColumnLeft:function(o){return o.moveH(-1,"column")},goColumnRight:function(o){return o.moveH(1,"column")},goWordLeft:function(o){return o.moveH(-1,"word")},goGroupRight:function(o){return o.moveH(1,"group")},goGroupLeft:function(o){return o.moveH(-1,"group")},goWordRight:function(o){return o.moveH(1,"word")},delCharBefore:function(o){return o.deleteH(-1,"codepoint")},delCharAfter:function(o){return o.deleteH(1,"char")},delWordBefore:function(o){return o.deleteH(-1,"word")},delWordAfter:function(o){return o.deleteH(1,"word")},delGroupBefore:function(o){return o.deleteH(-1,"group")},delGroupAfter:function(o){return o.deleteH(1,"group")},indentAuto:function(o){return o.indentSelection("smart")},indentMore:function(o){return o.indentSelection("add")},indentLess:function(o){return o.indentSelection("subtract")},insertTab:function(o){return o.replaceSelection("	")},insertSoftTab:function(o){for(var s=[],c=o.listSelections(),u=o.options.tabSize,p=0;p<c.length;p++){var v=c[p].from(),m=Kt(o.getLine(v.line),v.ch,u);s.push(er(u-m%u))}o.replaceSelections(s)},defaultTab:function(o){o.somethingSelected()?o.indentSelection("add"):o.execCommand("insertTab")},transposeChars:function(o){return Pn(o,function(){for(var s=o.listSelections(),c=[],u=0;u<s.length;u++)if(s[u].empty()){var p=s[u].head,v=me(o.doc,p.line).text;if(v){if(p.ch==v.length&&(p=new x(p.line,p.ch-1)),p.ch>0)p=new x(p.line,p.ch+1),o.replaceRange(v.charAt(p.ch-1)+v.charAt(p.ch-2),x(p.line,p.ch-2),p,"+transpose");else if(p.line>o.doc.first){var m=me(o.doc,p.line-1).text;m&&(p=new x(p.line,1),o.replaceRange(v.charAt(0)+o.doc.lineSeparator()+m.charAt(m.length-1),x(p.line-1,m.length-1),p,"+transpose"))}}c.push(new nr(p,p))}o.setSelections(c)})},newlineAndIndent:function(o){return Pn(o,function(){for(var s=o.listSelections(),c=s.length-1;c>=0;c--)o.replaceRange(o.doc.lineSeparator(),s[c].anchor,s[c].head,"+input");s=o.listSelections();for(var u=0;u<s.length;u++)o.indentLine(s[u].from().line,null,!0);_a(o)})},openLine:function(o){return o.replaceSelection(`
`,"start")},toggleOverwrite:function(o){return o.toggleOverwrite()}};function _c(o,s){var c=me(o.doc,s),u=dr(c);return u!=c&&(s=Xe(u)),nl(!0,o,u,s,1)}function Jf(o,s){var c=me(o.doc,s),u=Yi(c);return u!=c&&(s=Xe(u)),nl(!0,o,c,s,-1)}function Ql(o,s){var c=_c(o,s.line),u=me(o.doc,c.line),p=$e(u,o.doc.direction);if(!p||p[0].level==0){var v=Math.max(c.ch,u.text.search(/\S/)),m=s.line==c.line&&s.ch<=v&&s.ch;return x(c.line,m?0:v,c.sticky)}return c}function il(o,s,c){if(typeof s=="string"&&(s=Di[s],!s))return!1;o.display.input.ensurePolled();var u=o.display.shift,p=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),c&&(o.display.shift=!1),p=s(o)!=xe}finally{o.display.shift=u,o.state.suppressEdits=!1}return p}function Qf(o,s,c){for(var u=0;u<o.state.keyMaps.length;u++){var p=qo(s,o.state.keyMaps[u],c,o);if(p)return p}return o.options.extraKeys&&qo(s,o.options.extraKeys,c,o)||qo(s,o.options.keyMap,c,o)}var wc=new zt;function ss(o,s,c,u){var p=o.state.keySeq;if(p){if(Xl(s))return"handled";if(/\'$/.test(s)?o.state.keySeq=null:wc.set(50,function(){o.state.keySeq==p&&(o.state.keySeq=null,o.display.input.reset())}),bc(o,p+" "+s,c,u))return!0}return bc(o,s,c,u)}function bc(o,s,c,u){var p=Qf(o,s,u);return p=="multi"&&(o.state.keySeq=s),p=="handled"&&kr(o,"keyHandled",o,s,c),(p=="handled"||p=="multi")&&(I(c),va(o)),!!p}function Cc(o,s){var c=Jl(s,!0);return c?s.shiftKey&&!o.state.keySeq?ss(o,"Shift-"+c,s,function(u){return il(o,u,!0)})||ss(o,c,s,function(u){if(typeof u=="string"?/^go[A-Z]/.test(u):u.motion)return il(o,u)}):ss(o,c,s,function(u){return il(o,u)}):!1}function tp(o,s,c){return ss(o,"'"+c+"'",s,function(u){return il(o,u,!0)})}var tu=null;function ei(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField())&&(s.curOp.focus=At(pe(s)),!sr(s,o))){k&&N<11&&o.keyCode==27&&(o.returnValue=!1);var c=o.keyCode;s.display.shift=c==16||o.shiftKey;var u=Cc(s,o);z&&(tu=u?c:null,!u&&c==88&&!ii&&(_t?o.metaKey:o.ctrlKey)&&s.replaceSelection("",null,"cut")),st&&!_t&&!u&&c==46&&o.shiftKey&&!o.ctrlKey&&document.execCommand&&document.execCommand("cut"),c==18&&!/\bCodeMirror-crosshair\b/.test(s.display.lineDiv.className)&&Un(s)}}function Un(o){var s=o.display.lineDiv;ft(s,"CodeMirror-crosshair");function c(u){(u.keyCode==18||!u.altKey)&&(B(s,"CodeMirror-crosshair"),Pe(document,"keyup",c),Pe(document,"mouseover",c))}_e(document,"keyup",c),_e(document,"mouseover",c)}function Yo(o){o.keyCode==16&&(this.doc.sel.shift=!1),sr(this,o)}function eu(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField())&&!(Hn(s.display,o)||sr(s,o)||o.ctrlKey&&!o.altKey||_t&&o.metaKey)){var c=o.keyCode,u=o.charCode;if(z&&c==tu){tu=null,I(o);return}if(!(z&&(!o.which||o.which<10)&&Cc(s,o))){var p=String.fromCharCode(u??c);p!="\b"&&(tp(s,o,p)||s.display.input.onKeyPress(o))}}}var ru=400,nu=function(o,s,c){this.time=o,this.pos=s,this.button=c};nu.prototype.compare=function(o,s,c){return this.time+ru>o&&U(s,this.pos)==0&&c==this.button};var ls,Oa;function ep(o,s){var c=+new Date;return Oa&&Oa.compare(c,o,s)?(ls=Oa=null,"triple"):ls&&ls.compare(c,o,s)?(Oa=new nu(c,o,s),ls=null,"double"):(ls=new nu(c,o,s),Oa=null,"single")}function iu(o){var s=this,c=s.display;if(!(sr(s,o)||c.activeTouch&&c.input.supportsTouch())){if(c.input.ensurePolled(),c.shift=o.shiftKey,Hn(c,o)){S||(c.scroller.draggable=!1,setTimeout(function(){return c.scroller.draggable=!0},100));return}if(!au(s,o)){var u=Vo(s,o),p=Ae(o),v=u?ep(u,p):"single";Ot(s).focus(),p==1&&s.state.selectingText&&s.state.selectingText(o),!(u&&ou(s,p,u,v,o))&&(p==1?u?Sc(s,u,v,o):fe(o)==c.scroller&&I(o):p==2?(u&&qs(s.doc,u),setTimeout(function(){return c.input.focus()},20)):p==3&&(H?s.display.input.onContextMenu(o):Ml(s)))}}}function ou(o,s,c,u,p){var v="Click";return u=="double"?v="Double"+v:u=="triple"&&(v="Triple"+v),v=(s==1?"Left":s==2?"Middle":"Right")+v,ss(o,Zl(v,p),p,function(m){if(typeof m=="string"&&(m=Di[m]),!m)return!1;var _=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),_=m(o,c)!=xe}finally{o.state.suppressEdits=!1}return _})}function xc(o,s,c){var u=o.getOption("configureMouse"),p=u?u(o,s,c):{};if(p.unit==null){var v=qt?c.shiftKey&&c.metaKey:c.altKey;p.unit=v?"rectangle":s=="single"?"char":s=="double"?"word":"line"}return(p.extend==null||o.doc.extend)&&(p.extend=o.doc.extend||c.shiftKey),p.addNew==null&&(p.addNew=_t?c.metaKey:c.ctrlKey),p.moveOnDrag==null&&(p.moveOnDrag=!(_t?c.altKey:c.ctrlKey)),p}function Sc(o,s,c,u){k?setTimeout(jt(kl,o),0):o.curOp.focus=At(pe(o));var p=xc(o,c,u),v=o.doc.sel,m;o.options.dragDrop&&ze&&!o.isReadOnly()&&c=="single"&&(m=v.contains(s))>-1&&(U((m=v.ranges[m]).from(),s)<0||s.xRel>0)&&(U(m.to(),s)>0||s.xRel<0)?rp(o,u,s,p):np(o,u,s,p)}function rp(o,s,c,u){var p=o.display,v=!1,m=xr(o,function(E){S&&(p.scroller.draggable=!1),o.state.draggingText=!1,o.state.delayingBlurEvent&&(o.hasFocus()?o.state.delayingBlurEvent=!1:Ml(o)),Pe(p.wrapper.ownerDocument,"mouseup",m),Pe(p.wrapper.ownerDocument,"mousemove",_),Pe(p.scroller,"dragstart",w),Pe(p.scroller,"drop",m),v||(I(E),u.addNew||qs(o.doc,c,null,null,u.extend),S&&!it||k&&N==9?setTimeout(function(){p.wrapper.ownerDocument.body.focus({preventScroll:!0}),p.input.focus()},20):p.input.focus())}),_=function(E){v=v||Math.abs(s.clientX-E.clientX)+Math.abs(s.clientY-E.clientY)>=10},w=function(){return v=!0};S&&(p.scroller.draggable=!0),o.state.draggingText=m,m.copy=!u.moveOnDrag,_e(p.wrapper.ownerDocument,"mouseup",m),_e(p.wrapper.ownerDocument,"mousemove",_),_e(p.scroller,"dragstart",w),_e(p.scroller,"drop",m),o.state.delayingBlurEvent=!0,setTimeout(function(){return p.input.focus()},20),p.scroller.dragDrop&&p.scroller.dragDrop()}function Oc(o,s,c){if(c=="char")return new nr(s,s);if(c=="word")return o.findWordAt(s);if(c=="line")return new nr(x(s.line,0),we(o.doc,x(s.line+1,0)));var u=c(o,s);return new nr(u.from,u.to)}function np(o,s,c,u){k&&Ml(o);var p=o.display,v=o.doc;I(s);var m,_,w=v.sel,E=w.ranges;if(u.addNew&&!u.extend?(_=v.sel.contains(c),_>-1?m=E[_]:m=new nr(c,c)):(m=v.sel.primary(),_=v.sel.primIndex),u.unit=="rectangle")u.addNew||(m=new nr(c,c)),c=Vo(o,s,!0,!0),_=-1;else{var K=Oc(o,c,u.unit);u.extend?m=zo(m,K.anchor,K.head,u.extend):m=K}u.addNew?_==-1?(_=E.length,an(v,ci(o,E.concat([m]),_),{scroll:!1,origin:"*mouse"})):E.length>1&&E[_].empty()&&u.unit=="char"&&!u.extend?(an(v,ci(o,E.slice(0,_).concat(E.slice(_+1)),0),{scroll:!1,origin:"*mouse"}),w=v.sel):zl(v,_,m,ge):(_=0,an(v,new Bn([m],0),ge),w=v.sel);var rt=c;function vt(ie){if(U(rt,ie)!=0)if(rt=ie,u.unit=="rectangle"){for(var he=[],Te=o.options.tabSize,Se=Kt(me(v,c.line).text,c.ch,Te),Be=Kt(me(v,ie.line).text,ie.ch,Te),cr=Math.min(Se,Be),Hr=Math.max(Se,Be),hr=Math.min(c.line,ie.line),An=Math.min(o.lastLine(),Math.max(c.line,ie.line));hr<=An;hr++){var pn=me(v,hr).text,Dr=gr(pn,cr,Te);cr==Hr?he.push(new nr(x(hr,Dr),x(hr,Dr))):pn.length>Dr&&he.push(new nr(x(hr,Dr),x(hr,gr(pn,Hr,Te))))}he.length||he.push(new nr(c,c)),an(v,ci(o,w.ranges.slice(0,_).concat(he),_),{origin:"*mouse",scroll:!1}),o.scrollIntoView(ie)}else{var bn=m,Xr=Oc(o,ie,u.unit),Br=bn.anchor,Ir;U(Xr.anchor,Br)>0?(Ir=Xr.head,Br=Re(bn.from(),Xr.anchor)):(Ir=Xr.anchor,Br=Me(bn.to(),Xr.head));var Sr=w.ranges.slice(0);Sr[_]=ip(o,new nr(we(v,Br),Ir)),an(v,ci(o,Sr,_),ge)}}var ct=p.wrapper.getBoundingClientRect(),kt=0;function Vt(ie){var he=++kt,Te=Vo(o,ie,!0,u.unit=="rectangle");if(Te)if(U(Te,rt)!=0){o.curOp.focus=At(pe(o)),vt(Te);var Se=Ai(p,v);(Te.line>=Se.to||Te.line<Se.from)&&setTimeout(xr(o,function(){kt==he&&Vt(ie)}),150)}else{var Be=ie.clientY<ct.top?-20:ie.clientY>ct.bottom?20:0;Be&&setTimeout(xr(o,function(){kt==he&&(p.scroller.scrollTop+=Be,Vt(ie))}),50)}}function Yt(ie){o.state.selectingText=!1,kt=1/0,ie&&(I(ie),p.input.focus()),Pe(p.wrapper.ownerDocument,"mousemove",re),Pe(p.wrapper.ownerDocument,"mouseup",de),v.history.lastSelOrigin=null}var re=xr(o,function(ie){ie.buttons===0||!Ae(ie)?Yt(ie):Vt(ie)}),de=xr(o,Yt);o.state.selectingText=de,_e(p.wrapper.ownerDocument,"mousemove",re),_e(p.wrapper.ownerDocument,"mouseup",de)}function ip(o,s){var c=s.anchor,u=s.head,p=me(o.doc,c.line);if(U(c,u)==0&&c.sticky==u.sticky)return s;var v=$e(p);if(!v)return s;var m=qr(v,c.ch,c.sticky),_=v[m];if(_.from!=c.ch&&_.to!=c.ch)return s;var w=m+(_.from==c.ch==(_.level!=1)?0:1);if(w==0||w==v.length)return s;var E;if(u.line!=c.line)E=(u.line-c.line)*(o.doc.direction=="ltr"?1:-1)>0;else{var K=qr(v,u.ch,u.sticky),rt=K-m||(u.ch-c.ch)*(_.level==1?-1:1);K==w-1||K==w?E=rt<0:E=rt>0}var vt=v[w+(E?-1:0)],ct=E==(vt.level==1),kt=ct?vt.from:vt.to,Vt=ct?"after":"before";return c.ch==kt&&c.sticky==Vt?s:new nr(new x(c.line,kt,Vt),u)}function Tc(o,s,c,u){var p,v;if(s.touches)p=s.touches[0].clientX,v=s.touches[0].clientY;else try{p=s.clientX,v=s.clientY}catch{return!1}if(p>=Math.floor(o.display.gutters.getBoundingClientRect().right))return!1;u&&I(s);var m=o.display,_=m.lineDiv.getBoundingClientRect();if(v>_.bottom||!wr(o,c))return ht(s);v-=_.top-m.viewOffset;for(var w=0;w<o.display.gutterSpecs.length;++w){var E=m.gutters.childNodes[w];if(E&&E.getBoundingClientRect().right>=p){var K=Yn(o.doc,v),rt=o.display.gutterSpecs[w];return Qe(o,c,o,K,rt.className,s),ht(s)}}}function au(o,s){return Tc(o,s,"gutterClick",!0)}function Ec(o,s){Hn(o.display,s)||op(o,s)||sr(o,s,"contextmenu")||H||o.display.input.onContextMenu(s)}function op(o,s){return wr(o,"gutterContextMenu")?Tc(o,s,"gutterContextMenu",!1):!1}function su(o){o.display.wrapper.className=o.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+o.options.theme.replace(/(^|\s)\s*/g," cm-s-"),no(o)}var Xo={toString:function(){return"CodeMirror.Init"}},Pc={},ol={};function Zo(o){var s=o.optionHandlers;function c(u,p,v,m){o.defaults[u]=p,v&&(s[u]=m?function(_,w,E){E!=Xo&&v(_,w,E)}:v)}o.defineOption=c,o.Init=Xo,c("value","",function(u,p){return u.setValue(p)},!0),c("mode",null,function(u,p){u.doc.modeOption=p,Bl(u)},!0),c("indentUnit",2,Bl,!0),c("indentWithTabs",!1),c("smartIndent",!0),c("tabSize",4,function(u){Ja(u),no(u),yn(u)},!0),c("lineSeparator",null,function(u,p){if(u.doc.lineSep=p,!!p){var v=[],m=u.doc.first;u.doc.iter(function(w){for(var E=0;;){var K=w.text.indexOf(p,E);if(K==-1)break;E=K+p.length,v.push(x(m,K))}m++});for(var _=v.length-1;_>=0;_--)Go(u.doc,p,v[_],x(v[_].line,v[_].ch+p.length))}}),c("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(u,p,v){u.state.specialChars=new RegExp(p.source+(p.test("	")?"":"|	"),"g"),v!=Xo&&u.refresh()}),c("specialCharPlaceholder",cn,function(u){return u.refresh()},!0),c("electricChars",!0),c("inputStyle",xt?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),c("spellcheck",!1,function(u,p){return u.getInputField().spellcheck=p},!0),c("autocorrect",!1,function(u,p){return u.getInputField().autocorrect=p},!0),c("autocapitalize",!1,function(u,p){return u.getInputField().autocapitalize=p},!0),c("rtlMoveVisually",!le),c("wholeLineUpdateBefore",!0),c("theme","default",function(u){su(u),wa(u)},!0),c("keyMap","default",function(u,p,v){var m=el(p),_=v!=Xo&&el(v);_&&_.detach&&_.detach(u,m),m.attach&&m.attach(u,_||null)}),c("extraKeys",null),c("configureMouse",null),c("lineWrapping",!1,sp,!0),c("gutters",[],function(u,p){u.display.gutterSpecs=Vl(p,u.options.lineNumbers),wa(u)},!0),c("fixedGutter",!0,function(u,p){u.display.gutters.style.left=p?Ka(u.display)+"px":"0",u.refresh()},!0),c("coverGutterNextToScrollbar",!1,function(u){return Cr(u)},!0),c("scrollbarStyle","native",function(u){jl(u),Cr(u),u.display.scrollbars.setScrollTop(u.doc.scrollTop),u.display.scrollbars.setScrollLeft(u.doc.scrollLeft)},!0),c("lineNumbers",!1,function(u,p){u.display.gutterSpecs=Vl(u.options.gutters,p),wa(u)},!0),c("firstLineNumber",1,wa,!0),c("lineNumberFormatter",function(u){return u},wa,!0),c("showCursorWhenSelecting",!1,oo,!0),c("resetSelectionOnContextMenu",!0),c("lineWiseCopyCut",!0),c("pasteLinesPerSelection",!0),c("selectionsMayTouch",!1),c("readOnly",!1,function(u,p){p=="nocursor"&&(ga(u),u.display.input.blur()),u.display.input.readOnlyChanged(p)}),c("screenReaderLabel",null,function(u,p){p=p===""?null:p,u.display.input.screenReaderLabelChanged(p)}),c("disableInput",!1,function(u,p){p||u.display.input.reset()},!0),c("dragDrop",!0,ap),c("allowDropFileTypes",null),c("cursorBlinkRate",530),c("cursorScrollMargin",0),c("cursorHeight",1,oo,!0),c("singleCursorHeightPerLine",!0,oo,!0),c("workTime",100),c("workDelay",100),c("flattenSpans",!0,Ja,!0),c("addModeClass",!1,Ja,!0),c("pollInterval",100),c("undoDepth",200,function(u,p){return u.doc.history.undoDepth=p}),c("historyEventDelay",1250),c("viewportMargin",10,function(u){return u.refresh()},!0),c("maxHighlightLength",1e4,Ja,!0),c("moveInputWithCursor",!0,function(u,p){p||u.display.input.resetPosition()}),c("tabindex",null,function(u,p){return u.display.input.getField().tabIndex=p||""}),c("autofocus",null),c("direction","ltr",function(u,p){return u.doc.setDirection(p)},!0),c("phrases",null)}function ap(o,s,c){var u=c&&c!=Xo;if(!s!=!u){var p=o.display.dragFunctions,v=s?_e:Pe;v(o.display.scroller,"dragstart",p.start),v(o.display.scroller,"dragenter",p.enter),v(o.display.scroller,"dragover",p.over),v(o.display.scroller,"dragleave",p.leave),v(o.display.scroller,"drop",p.drop)}}function sp(o){o.options.lineWrapping?(ft(o.display.wrapper,"CodeMirror-wrap"),o.display.sizer.style.minWidth="",o.display.sizerWidth=null):(B(o.display.wrapper,"CodeMirror-wrap"),Xi(o)),ha(o),yn(o),no(o),setTimeout(function(){return Cr(o)},100)}function mr(o,s){var c=this;if(!(this instanceof mr))return new mr(o,s);this.options=s=s?Bt(s):{},Bt(Pc,s,!1);var u=s.value;typeof u=="string"?u=new wn(u,s.mode,null,s.lineSeparator,s.direction):s.mode&&(u.modeOption=s.mode),this.doc=u;var p=new mr.inputStyles[s.inputStyle](this),v=this.display=new Df(o,u,p,s);v.wrapper.CodeMirror=this,su(this),s.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),jl(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new zt,keySeq:null,specialChars:null},s.autofocus&&!xt&&v.input.focus(),k&&N<11&&setTimeout(function(){return c.display.input.reset(!0)},20),lp(this),Yf(),Uo(this),this.curOp.forceUpdate=!0,Ju(this,u),s.autofocus&&!xt||this.hasFocus()?setTimeout(function(){c.hasFocus()&&!c.state.focused&&Ll(c)},20):ga(this);for(var m in ol)ol.hasOwnProperty(m)&&ol[m](this,s[m],Xo);Ku(this),s.finishInit&&s.finishInit(this);for(var _=0;_<al.length;++_)al[_](this);Wo(this),S&&s.lineWrapping&&getComputedStyle(v.lineDiv).textRendering=="optimizelegibility"&&(v.lineDiv.style.textRendering="auto")}mr.defaults=Pc,mr.optionHandlers=ol;function lp(o){var s=o.display;_e(s.scroller,"mousedown",xr(o,iu)),k&&N<11?_e(s.scroller,"dblclick",xr(o,function(w){if(!sr(o,w)){var E=Vo(o,w);if(!(!E||au(o,w)||Hn(o.display,w))){I(w);var K=o.findWordAt(E);qs(o.doc,K.anchor,K.head)}}})):_e(s.scroller,"dblclick",function(w){return sr(o,w)||I(w)}),_e(s.scroller,"contextmenu",function(w){return Ec(o,w)}),_e(s.input.getField(),"contextmenu",function(w){s.scroller.contains(w.target)||Ec(o,w)});var c,u={end:0};function p(){s.activeTouch&&(c=setTimeout(function(){return s.activeTouch=null},1e3),u=s.activeTouch,u.end=+new Date)}function v(w){if(w.touches.length!=1)return!1;var E=w.touches[0];return E.radiusX<=1&&E.radiusY<=1}function m(w,E){if(E.left==null)return!0;var K=E.left-w.left,rt=E.top-w.top;return K*K+rt*rt>20*20}_e(s.scroller,"touchstart",function(w){if(!sr(o,w)&&!v(w)&&!au(o,w)){s.input.ensurePolled(),clearTimeout(c);var E=+new Date;s.activeTouch={start:E,moved:!1,prev:E-u.end<=300?u:null},w.touches.length==1&&(s.activeTouch.left=w.touches[0].pageX,s.activeTouch.top=w.touches[0].pageY)}}),_e(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),_e(s.scroller,"touchend",function(w){var E=s.activeTouch;if(E&&!Hn(s,w)&&E.left!=null&&!E.moved&&new Date-E.start<300){var K=o.coordsChar(s.activeTouch,"page"),rt;!E.prev||m(E,E.prev)?rt=new nr(K,K):!E.prev.prev||m(E,E.prev.prev)?rt=o.findWordAt(K):rt=new nr(x(K.line,0),we(o.doc,x(K.line+1,0))),o.setSelection(rt.anchor,rt.head),o.focus(),I(w)}p()}),_e(s.scroller,"touchcancel",p),_e(s.scroller,"scroll",function(){s.scroller.clientHeight&&(qa(o,s.scroller.scrollTop),ao(o,s.scroller.scrollLeft,!0),Qe(o,"scroll",o))}),_e(s.scroller,"mousewheel",function(w){return qu(o,w)}),_e(s.scroller,"DOMMouseScroll",function(w){return qu(o,w)}),_e(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(w){sr(o,w)||It(w)},over:function(w){sr(o,w)||(qf(o,w),It(w))},start:function(w){return $f(o,w)},drop:xr(o,Gf),leave:function(w){sr(o,w)||Yl(o)}};var _=s.input.getField();_e(_,"keyup",function(w){return Yo.call(o,w)}),_e(_,"keydown",xr(o,ei)),_e(_,"keypress",xr(o,eu)),_e(_,"focus",function(w){return Ll(o,w)}),_e(_,"blur",function(w){return ga(o,w)})}var al=[];mr.defineInitHook=function(o){return al.push(o)};function us(o,s,c,u){var p=o.doc,v;c==null&&(c="add"),c=="smart"&&(p.mode.indent?v=Ao(o,s).state:c="prev");var m=o.options.tabSize,_=me(p,s),w=Kt(_.text,null,m);_.stateAfter&&(_.stateAfter=null);var E=_.text.match(/^\s*/)[0],K;if(!u&&!/\S/.test(_.text))K=0,c="not";else if(c=="smart"&&(K=p.mode.indent(v,_.text.slice(E.length),_.text),K==xe||K>150)){if(!u)return;c="prev"}c=="prev"?s>p.first?K=Kt(me(p,s-1).text,null,m):K=0:c=="add"?K=w+o.options.indentUnit:c=="subtract"?K=w-o.options.indentUnit:typeof c=="number"&&(K=w+c),K=Math.max(0,K);var rt="",vt=0;if(o.options.indentWithTabs)for(var ct=Math.floor(K/m);ct;--ct)vt+=m,rt+="	";if(vt<K&&(rt+=er(K-vt)),rt!=E)return Go(p,rt,x(s,0),x(s,E.length),"+input"),_.stateAfter=null,!0;for(var kt=0;kt<p.sel.ranges.length;kt++){var Vt=p.sel.ranges[kt];if(Vt.head.line==s&&Vt.head.ch<E.length){var Yt=x(s,E.length);zl(p,kt,new nr(Yt,Yt));break}}}var fi=null;function sl(o){fi=o}function ll(o,s,c,u,p){var v=o.doc;o.display.shift=!1,u||(u=v.sel);var m=+new Date-200,_=p=="paste"||o.state.pasteIncoming>m,w=gn(s),E=null;if(_&&u.ranges.length>1)if(fi&&fi.text.join(`
`)==s){if(u.ranges.length%fi.text.length==0){E=[];for(var K=0;K<fi.text.length;K++)E.push(v.splitLines(fi.text[K]))}}else w.length==u.ranges.length&&o.options.pasteLinesPerSelection&&(E=T(w,function(re){return[re]}));for(var rt=o.curOp.updateInput,vt=u.ranges.length-1;vt>=0;vt--){var ct=u.ranges[vt],kt=ct.from(),Vt=ct.to();ct.empty()&&(c&&c>0?kt=x(kt.line,kt.ch-c):o.state.overwrite&&!_?Vt=x(Vt.line,Math.min(me(v,Vt.line).text.length,Vt.ch+ae(w).length)):_&&fi&&fi.lineWise&&fi.text.join(`
`)==w.join(`
`)&&(kt=Vt=x(kt.line,0)));var Yt={from:kt,to:Vt,text:E?E[vt%E.length]:w,origin:p||(_?"paste":o.state.cutIncoming>m?"cut":"+input")};Ko(o.doc,Yt),kr(o,"inputRead",o,Yt)}s&&!_&&kc(o,s),_a(o),o.curOp.updateInput<2&&(o.curOp.updateInput=rt),o.curOp.typing=!0,o.state.pasteIncoming=o.state.cutIncoming=-1}function Ac(o,s){var c=o.clipboardData&&o.clipboardData.getData("Text");if(c)return o.preventDefault(),!s.isReadOnly()&&!s.options.disableInput&&s.hasFocus()&&Pn(s,function(){return ll(s,c,0,null,"paste")}),!0}function kc(o,s){if(!(!o.options.electricChars||!o.options.smartIndent))for(var c=o.doc.sel,u=c.ranges.length-1;u>=0;u--){var p=c.ranges[u];if(!(p.head.ch>100||u&&c.ranges[u-1].head.line==p.head.line)){var v=o.getModeAt(p.head),m=!1;if(v.electricChars){for(var _=0;_<v.electricChars.length;_++)if(s.indexOf(v.electricChars.charAt(_))>-1){m=us(o,p.head.line,"smart");break}}else v.electricInput&&v.electricInput.test(me(o.doc,p.head.line).text.slice(0,p.head.ch))&&(m=us(o,p.head.line,"smart"));m&&kr(o,"electricInput",o,p.head.line)}}}function yr(o){for(var s=[],c=[],u=0;u<o.doc.sel.ranges.length;u++){var p=o.doc.sel.ranges[u].head.line,v={anchor:x(p,0),head:x(p+1,0)};c.push(v),s.push(o.getRange(v.anchor,v.head))}return{text:s,ranges:c}}function ul(o,s,c,u){o.setAttribute("autocorrect",c?"on":"off"),o.setAttribute("autocapitalize",u?"on":"off"),o.setAttribute("spellcheck",!!s)}function cl(){var o=V("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),s=V("div",[o],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return S?o.style.width="1000px":o.setAttribute("wrap","off"),Ht&&(o.style.border="1px solid black"),s}function cs(o){var s=o.optionHandlers,c=o.helpers={};o.prototype={constructor:o,focus:function(){Ot(this).focus(),this.display.input.focus()},setOption:function(u,p){var v=this.options,m=v[u];v[u]==p&&u!="mode"||(v[u]=p,s.hasOwnProperty(u)&&xr(this,s[u])(this,p,m),Qe(this,"optionChange",this,u))},getOption:function(u){return this.options[u]},getDoc:function(){return this.doc},addKeyMap:function(u,p){this.state.keyMaps[p?"push":"unshift"](el(u))},removeKeyMap:function(u){for(var p=this.state.keyMaps,v=0;v<p.length;++v)if(p[v]==u||p[v].name==u)return p.splice(v,1),!0},addOverlay:Kr(function(u,p){var v=u.token?u:o.getMode(this.options,u);if(v.startState)throw new Error("Overlays may not be stateful.");F(this.state.overlays,{mode:v,modeSpec:u,opaque:p&&p.opaque,priority:p&&p.priority||0},function(m){return m.priority}),this.state.modeGen++,yn(this)}),removeOverlay:Kr(function(u){for(var p=this.state.overlays,v=0;v<p.length;++v){var m=p[v].modeSpec;if(m==u||typeof u=="string"&&m.name==u){p.splice(v,1),this.state.modeGen++,yn(this);return}}}),indentLine:Kr(function(u,p,v){typeof p!="string"&&typeof p!="number"&&(p==null?p=this.options.smartIndent?"smart":"prev":p=p?"add":"subtract"),hi(this.doc,u)&&us(this,u,p,v)}),indentSelection:Kr(function(u){for(var p=this.doc.sel.ranges,v=-1,m=0;m<p.length;m++){var _=p[m];if(_.empty())_.head.line>v&&(us(this,_.head.line,u,!0),v=_.head.line,m==this.doc.sel.primIndex&&_a(this));else{var w=_.from(),E=_.to(),K=Math.max(v,w.line);v=Math.min(this.lastLine(),E.line-(E.ch?0:1))+1;for(var rt=K;rt<v;++rt)us(this,rt,u);var vt=this.doc.sel.ranges;w.ch==0&&p.length==vt.length&&vt[m].from().ch>0&&zl(this.doc,m,new nr(w,vt[m].to()),oe)}}}),getTokenAt:function(u,p){return Bi(this,u,p)},getLineTokens:function(u,p){return Bi(this,x(u),p,!0)},getTokenTypeAt:function(u){u=we(this.doc,u);var p=ja(this,me(this.doc,u.line)),v=0,m=(p.length-1)/2,_=u.ch,w;if(_==0)w=p[2];else for(;;){var E=v+m>>1;if((E?p[E*2-1]:0)>=_)m=E;else if(p[E*2+1]<_)v=E+1;else{w=p[E*2+2];break}}var K=w?w.indexOf("overlay "):-1;return K<0?w:K==0?null:w.slice(0,K-1)},getModeAt:function(u){var p=this.doc.mode;return p.innerMode?o.innerMode(p,this.getTokenAt(u).state).mode:p},getHelper:function(u,p){return this.getHelpers(u,p)[0]},getHelpers:function(u,p){var v=[];if(!c.hasOwnProperty(p))return v;var m=c[p],_=this.getModeAt(u);if(typeof _[p]=="string")m[_[p]]&&v.push(m[_[p]]);else if(_[p])for(var w=0;w<_[p].length;w++){var E=m[_[p][w]];E&&v.push(E)}else _.helperType&&m[_.helperType]?v.push(m[_.helperType]):m[_.name]&&v.push(m[_.name]);for(var K=0;K<m._global.length;K++){var rt=m._global[K];rt.pred(_,this)&&Ut(v,rt.val)==-1&&v.push(rt.val)}return v},getStateAfter:function(u,p){var v=this.doc;return u=Je(v,u??v.first+v.size-1),Ao(this,u+1,p).state},cursorCoords:function(u,p){var v,m=this.doc.sel.primary();return u==null?v=m.head:typeof u=="object"?v=we(this.doc,u):v=u?m.from():m.to(),ti(this,v,p||"page")},charCoords:function(u,p){return Ns(this,we(this.doc,u),p||"page")},coordsChar:function(u,p){return u=Rs(this,u,p||"page"),Tl(this,u.left,u.top)},lineAtHeight:function(u,p){return u=Rs(this,{top:u,left:0},p||"page").top,Yn(this.doc,u+this.display.viewOffset)},heightAtLine:function(u,p,v){var m=!1,_;if(typeof u=="number"){var w=this.doc.first+this.doc.size-1;u<this.doc.first?u=this.doc.first:u>w&&(u=w,m=!0),_=me(this.doc,u)}else _=u;return No(this,_,{top:0,left:0},p||"page",v||m).top+(m?this.doc.height-Ar(_):0)},defaultTextHeight:function(){return Pi(this.display)},defaultCharWidth:function(){return io(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(u,p,v,m,_){var w=this.display;u=ti(this,we(this.doc,u));var E=u.bottom,K=u.left;if(p.style.position="absolute",p.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(p),w.sizer.appendChild(p),m=="over")E=u.top;else if(m=="above"||m=="near"){var rt=Math.max(w.wrapper.clientHeight,this.doc.height),vt=Math.max(w.sizer.clientWidth,w.lineSpace.clientWidth);(m=="above"||u.bottom+p.offsetHeight>rt)&&u.top>p.offsetHeight?E=u.top-p.offsetHeight:u.bottom+p.offsetHeight<=rt&&(E=u.bottom),K+p.offsetWidth>vt&&(K=vt-p.offsetWidth)}p.style.top=E+"px",p.style.left=p.style.right="",_=="right"?(K=w.sizer.clientWidth-p.offsetWidth,p.style.right="0px"):(_=="left"?K=0:_=="middle"&&(K=(w.sizer.clientWidth-p.offsetWidth)/2),p.style.left=K+"px"),v&&Ru(this,{left:K,top:E,right:K+p.offsetWidth,bottom:E+p.offsetHeight})},triggerOnKeyDown:Kr(ei),triggerOnKeyPress:Kr(eu),triggerOnKeyUp:Yo,triggerOnMouseDown:Kr(iu),execCommand:function(u){if(Di.hasOwnProperty(u))return Di[u].call(null,this)},triggerElectric:Kr(function(u){kc(this,u)}),findPosH:function(u,p,v,m){var _=1;p<0&&(_=-1,p=-p);for(var w=we(this.doc,u),E=0;E<p&&(w=fs(this.doc,w,_,v,m),!w.hitSide);++E);return w},moveH:Kr(function(u,p){var v=this;this.extendSelectionsBy(function(m){return v.display.shift||v.doc.extend||m.empty()?fs(v.doc,m.head,u,p,v.options.rtlMoveVisually):u<0?m.from():m.to()},Ke)}),deleteH:Kr(function(u,p){var v=this.doc.sel,m=this.doc;v.somethingSelected()?m.replaceSelection("",null,"+delete"):_i(this,function(_){var w=fs(m,_.head,u,p,!1);return u<0?{from:w,to:_.head}:{from:_.head,to:w}})}),findPosV:function(u,p,v,m){var _=1,w=m;p<0&&(_=-1,p=-p);for(var E=we(this.doc,u),K=0;K<p;++K){var rt=ti(this,E,"div");if(w==null?w=rt.left:rt.left=w,E=Mc(this,rt,_,v),E.hitSide)break}return E},moveV:Kr(function(u,p){var v=this,m=this.doc,_=[],w=!this.display.shift&&!m.extend&&m.sel.somethingSelected();if(m.extendSelectionsBy(function(K){if(w)return u<0?K.from():K.to();var rt=ti(v,K.head,"div");K.goalColumn!=null&&(rt.left=K.goalColumn),_.push(rt.left);var vt=Mc(v,rt,u,p);return p=="page"&&K==m.sel.primary()&&Dl(v,Ns(v,vt,"div").top-rt.top),vt},Ke),_.length)for(var E=0;E<m.sel.ranges.length;E++)m.sel.ranges[E].goalColumn=_[E]}),findWordAt:function(u){var p=this.doc,v=me(p,u.line).text,m=u.ch,_=u.ch;if(v){var w=this.getHelper(u,"wordChars");(u.sticky=="before"||_==v.length)&&m?--m:++_;for(var E=v.charAt(m),K=St(E,w)?function(rt){return St(rt,w)}:/\s/.test(E)?function(rt){return/\s/.test(rt)}:function(rt){return!/\s/.test(rt)&&!St(rt)};m>0&&K(v.charAt(m-1));)--m;for(;_<v.length&&K(v.charAt(_));)++_}return new nr(x(u.line,m),x(u.line,_))},toggleOverwrite:function(u){u!=null&&u==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ft(this.display.cursorDiv,"CodeMirror-overwrite"):B(this.display.cursorDiv,"CodeMirror-overwrite"),Qe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==At(pe(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Kr(function(u,p){$a(this,u,p)}),getScrollInfo:function(){var u=this.display.scroller;return{left:u.scrollLeft,top:u.scrollTop,height:u.scrollHeight-M(this)-this.display.barHeight,width:u.scrollWidth-M(this)-this.display.barWidth,clientHeight:ot(this),clientWidth:Z(this)}},scrollIntoView:Kr(function(u,p){u==null?(u={from:this.doc.sel.primary().head,to:null},p==null&&(p=this.options.cursorScrollMargin)):typeof u=="number"?u={from:x(u,0),to:null}:u.from==null&&(u={from:u,to:null}),u.to||(u.to=u.from),u.margin=p||0,u.from.line!=null?Us(this,u):Nu(this,u.from,u.to,u.margin)}),setSize:Kr(function(u,p){var v=this,m=function(w){return typeof w=="number"||/^\d+$/.test(String(w))?w+"px":w};u!=null&&(this.display.wrapper.style.width=m(u)),p!=null&&(this.display.wrapper.style.height=m(p)),this.options.lineWrapping&&za(this);var _=this.display.viewFrom;this.doc.iter(_,this.display.viewTo,function(w){if(w.widgets){for(var E=0;E<w.widgets.length;E++)if(w.widgets[E].noHScroll){ui(v,_,"widget");break}}++_}),this.curOp.forceUpdate=!0,Qe(this,"refresh",this)}),operation:function(u){return Pn(this,u)},startOperation:function(){return Uo(this)},endOperation:function(){return Wo(this)},refresh:Kr(function(){var u=this.display.cachedTextHeight;yn(this),this.curOp.forceUpdate=!0,no(this),$a(this,this.doc.scrollLeft,this.doc.scrollTop),Nl(this.display),(u==null||Math.abs(u-Pi(this.display))>.5||this.options.lineWrapping)&&ha(this),Qe(this,"refresh",this)}),swapDoc:Kr(function(u){var p=this.doc;return p.cm=null,this.state.selectingText&&this.state.selectingText(),Ju(this,u),no(this),this.display.input.reset(),$a(this,u.scrollLeft,u.scrollTop),this.curOp.forceScroll=!0,kr(this,"swapDoc",this,p),p}),phrase:function(u){var p=this.options.phrases;return p&&Object.prototype.hasOwnProperty.call(p,u)?p[u]:u},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Mn(o),o.registerHelper=function(u,p,v){c.hasOwnProperty(u)||(c[u]=o[u]={_global:[]}),c[u][p]=v},o.registerGlobalHelper=function(u,p,v,m){o.registerHelper(u,p,m),c[u]._global.push({pred:v,val:m})}}function fs(o,s,c,u,p){var v=s,m=c,_=me(o,s.line),w=p&&o.direction=="rtl"?-c:c;function E(){var de=s.line+w;return de<o.first||de>=o.first+o.size?!1:(s=new x(de,s.ch,s.sticky),_=me(o,de))}function K(de){var ie;if(u=="codepoint"){var he=_.text.charCodeAt(s.ch+(c>0?0:-1));if(isNaN(he))ie=null;else{var Te=c>0?he>=55296&&he<56320:he>=56320&&he<57343;ie=new x(s.line,Math.max(0,Math.min(_.text.length,s.ch+c*(Te?2:1))),-c)}}else p?ie=yc(o.cm,_,s,c):ie=rl(_,s,c);if(ie==null)if(!de&&E())s=nl(p,o.cm,_,s.line,w);else return!1;else s=ie;return!0}if(u=="char"||u=="codepoint")K();else if(u=="column")K(!0);else if(u=="word"||u=="group")for(var rt=null,vt=u=="group",ct=o.cm&&o.cm.getHelper(s,"wordChars"),kt=!0;!(c<0&&!K(!kt));kt=!1){var Vt=_.text.charAt(s.ch)||`
`,Yt=St(Vt,ct)?"w":vt&&Vt==`
`?"n":!vt||/\s/.test(Vt)?null:"p";if(vt&&!kt&&!Yt&&(Yt="s"),rt&&rt!=Yt){c<0&&(c=1,K(),s.sticky="after");break}if(Yt&&(rt=Yt),c>0&&!K(!kt))break}var re=Zs(o,s,v,m,!0);return Dt(v,re)&&(re.hitSide=!0),re}function Mc(o,s,c,u){var p=o.doc,v=s.left,m;if(u=="page"){var _=Math.min(o.display.wrapper.clientHeight,Ot(o).innerHeight||p(o).documentElement.clientHeight),w=Math.max(_-.5*Pi(o.display),3);m=(c>0?s.bottom:s.top)+c*w}else u=="line"&&(m=c>0?s.bottom+3:s.top-3);for(var E;E=Tl(o,v,m),!!E.outside;){if(c<0?m<=0:m>=p.height){E.hitSide=!0;break}m+=c*5}return E}var ar=function(o){this.cm=o,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new zt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};ar.prototype.init=function(o){var s=this,c=this,u=c.cm,p=c.div=o.lineDiv;p.contentEditable=!0,ul(p,u.options.spellcheck,u.options.autocorrect,u.options.autocapitalize);function v(_){for(var w=_.target;w;w=w.parentNode){if(w==p)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(w.className))break}return!1}_e(p,"paste",function(_){!v(_)||sr(u,_)||Ac(_,u)||N<=11&&setTimeout(xr(u,function(){return s.updateFromDOM()}),20)}),_e(p,"compositionstart",function(_){s.composing={data:_.data,done:!1}}),_e(p,"compositionupdate",function(_){s.composing||(s.composing={data:_.data,done:!1})}),_e(p,"compositionend",function(_){s.composing&&(_.data!=s.composing.data&&s.readFromDOMSoon(),s.composing.done=!0)}),_e(p,"touchstart",function(){return c.forceCompositionEnd()}),_e(p,"input",function(){s.composing||s.readFromDOMSoon()});function m(_){if(!(!v(_)||sr(u,_))){if(u.somethingSelected())sl({lineWise:!1,text:u.getSelections()}),_.type=="cut"&&u.replaceSelection("",null,"cut");else if(u.options.lineWiseCopyCut){var w=yr(u);sl({lineWise:!0,text:w.text}),_.type=="cut"&&u.operation(function(){u.setSelections(w.ranges,0,oe),u.replaceSelection("",null,"cut")})}else return;if(_.clipboardData){_.clipboardData.clearData();var E=fi.text.join(`
`);if(_.clipboardData.setData("Text",E),_.clipboardData.getData("Text")==E){_.preventDefault();return}}var K=cl(),rt=K.firstChild;ul(rt),u.display.lineSpace.insertBefore(K,u.display.lineSpace.firstChild),rt.value=fi.text.join(`
`);var vt=At(p.ownerDocument);Jt(rt),setTimeout(function(){u.display.lineSpace.removeChild(K),vt.focus(),vt==p&&c.showPrimarySelection()},50)}}_e(p,"copy",m),_e(p,"cut",m)},ar.prototype.screenReaderLabelChanged=function(o){o?this.div.setAttribute("aria-label",o):this.div.removeAttribute("aria-label")},ar.prototype.prepareSelection=function(){var o=Vs(this.cm,!1);return o.focus=At(this.div.ownerDocument)==this.div,o},ar.prototype.showSelection=function(o,s){!o||!this.cm.display.view.length||((o.focus||s)&&this.showPrimarySelection(),this.showMultipleSelections(o))},ar.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ar.prototype.showPrimarySelection=function(){var o=this.getSelection(),s=this.cm,c=s.doc.sel.primary(),u=c.from(),p=c.to();if(s.display.viewTo==s.display.viewFrom||u.line>=s.display.viewTo||p.line<s.display.viewFrom){o.removeAllRanges();return}var v=ps(s,o.anchorNode,o.anchorOffset),m=ps(s,o.focusNode,o.focusOffset);if(!(v&&!v.bad&&m&&!m.bad&&U(Re(v,m),u)==0&&U(Me(v,m),p)==0)){var _=s.display.view,w=u.line>=s.display.viewFrom&&fl(s,u)||{node:_[0].measure.map[2],offset:0},E=p.line<s.display.viewTo&&fl(s,p);if(!E){var K=_[_.length-1].measure,rt=K.maps?K.maps[K.maps.length-1]:K.map;E={node:rt[rt.length-1],offset:rt[rt.length-2]-rt[rt.length-3]}}if(!w||!E){o.removeAllRanges();return}var vt=o.rangeCount&&o.getRangeAt(0),ct;try{ct=j(w.node,w.offset,E.offset,E.node)}catch{}ct&&(!st&&s.state.focused?(o.collapse(w.node,w.offset),ct.collapsed||(o.removeAllRanges(),o.addRange(ct))):(o.removeAllRanges(),o.addRange(ct)),vt&&o.anchorNode==null?o.addRange(vt):st&&this.startGracePeriod()),this.rememberSelection()}},ar.prototype.startGracePeriod=function(){var o=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){o.gracePeriod=!1,o.selectionChanged()&&o.cm.operation(function(){return o.cm.curOp.selectionChanged=!0})},20)},ar.prototype.showMultipleSelections=function(o){mt(this.cm.display.cursorDiv,o.cursors),mt(this.cm.display.selectionDiv,o.selection)},ar.prototype.rememberSelection=function(){var o=this.getSelection();this.lastAnchorNode=o.anchorNode,this.lastAnchorOffset=o.anchorOffset,this.lastFocusNode=o.focusNode,this.lastFocusOffset=o.focusOffset},ar.prototype.selectionInEditor=function(){var o=this.getSelection();if(!o.rangeCount)return!1;var s=o.getRangeAt(0).commonAncestorContainer;return Rt(this.div,s)},ar.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||At(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},ar.prototype.blur=function(){this.div.blur()},ar.prototype.getField=function(){return this.div},ar.prototype.supportsTouch=function(){return!0},ar.prototype.receivedFocus=function(){var o=this,s=this;this.selectionInEditor()?setTimeout(function(){return o.pollSelection()},20):Pn(this.cm,function(){return s.cm.curOp.selectionChanged=!0});function c(){s.cm.state.focused&&(s.pollSelection(),s.polling.set(s.cm.options.pollInterval,c))}this.polling.set(this.cm.options.pollInterval,c)},ar.prototype.selectionChanged=function(){var o=this.getSelection();return o.anchorNode!=this.lastAnchorNode||o.anchorOffset!=this.lastAnchorOffset||o.focusNode!=this.lastFocusNode||o.focusOffset!=this.lastFocusOffset},ar.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var o=this.getSelection(),s=this.cm;if(Ft&&A&&this.cm.display.gutterSpecs.length&&Lc(o.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var c=ps(s,o.anchorNode,o.anchorOffset),u=ps(s,o.focusNode,o.focusOffset);c&&u&&Pn(s,function(){an(s.doc,so(c,u),oe),(c.bad||u.bad)&&(s.curOp.selectionChanged=!0)})}}},ar.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var o=this.cm,s=o.display,c=o.doc.sel.primary(),u=c.from(),p=c.to();if(u.ch==0&&u.line>o.firstLine()&&(u=x(u.line-1,me(o.doc,u.line-1).length)),p.ch==me(o.doc,p.line).text.length&&p.line<o.lastLine()&&(p=x(p.line+1,0)),u.line<s.viewFrom||p.line>s.viewTo-1)return!1;var v,m,_;u.line==s.viewFrom||(v=Ho(o,u.line))==0?(m=Xe(s.view[0].line),_=s.view[0].node):(m=Xe(s.view[v].line),_=s.view[v-1].node.nextSibling);var w=Ho(o,p.line),E,K;if(w==s.view.length-1?(E=s.viewTo-1,K=s.lineDiv.lastChild):(E=Xe(s.view[w+1].line)-1,K=s.view[w+1].node.previousSibling),!_)return!1;for(var rt=o.doc.splitLines(Dc(o,_,K,m,E)),vt=On(o.doc,x(m,0),x(E,me(o.doc,E).text.length));rt.length>1&&vt.length>1;)if(ae(rt)==ae(vt))rt.pop(),vt.pop(),E--;else if(rt[0]==vt[0])rt.shift(),vt.shift(),m++;else break;for(var ct=0,kt=0,Vt=rt[0],Yt=vt[0],re=Math.min(Vt.length,Yt.length);ct<re&&Vt.charCodeAt(ct)==Yt.charCodeAt(ct);)++ct;for(var de=ae(rt),ie=ae(vt),he=Math.min(de.length-(rt.length==1?ct:0),ie.length-(vt.length==1?ct:0));kt<he&&de.charCodeAt(de.length-kt-1)==ie.charCodeAt(ie.length-kt-1);)++kt;if(rt.length==1&&vt.length==1&&m==u.line)for(;ct&&ct>u.ch&&de.charCodeAt(de.length-kt-1)==ie.charCodeAt(ie.length-kt-1);)ct--,kt++;rt[rt.length-1]=de.slice(0,de.length-kt).replace(/^\u200b+/,""),rt[0]=rt[0].slice(ct).replace(/\u200b+$/,"");var Te=x(m,ct),Se=x(E,vt.length?ae(vt).length-kt:0);if(rt.length>1||rt[0]||U(Te,Se))return Go(o.doc,rt,Te,Se,"+input"),!0},ar.prototype.ensurePolled=function(){this.forceCompositionEnd()},ar.prototype.reset=function(){this.forceCompositionEnd()},ar.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ar.prototype.readFromDOMSoon=function(){var o=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(o.readDOMTimeout=null,o.composing)if(o.composing.done)o.composing=null;else return;o.updateFromDOM()},80))},ar.prototype.updateFromDOM=function(){var o=this;(this.cm.isReadOnly()||!this.pollContent())&&Pn(this.cm,function(){return yn(o.cm)})},ar.prototype.setUneditable=function(o){o.contentEditable="false"},ar.prototype.onKeyPress=function(o){o.charCode==0||this.composing||(o.preventDefault(),this.cm.isReadOnly()||xr(this.cm,ll)(this.cm,String.fromCharCode(o.charCode==null?o.keyCode:o.charCode),0))},ar.prototype.readOnlyChanged=function(o){this.div.contentEditable=String(o!="nocursor")},ar.prototype.onContextMenu=function(){},ar.prototype.resetPosition=function(){},ar.prototype.needsContentAttribute=!0;function fl(o,s){var c=De(o,s.line);if(!c||c.hidden)return null;var u=me(o.doc,s.line),p=pt(c,u,s.line),v=$e(u,o.doc.direction),m="left";if(v){var _=qr(v,s.ch);m=_%2?"right":"left"}var w=Wa(p.map,s.ch,m);return w.offset=w.collapse=="right"?w.end:w.start,w}function Lc(o){for(var s=o;s;s=s.parentNode)if(/CodeMirror-gutter-wrapper/.test(s.className))return!0;return!1}function ji(o,s){return s&&(o.bad=!0),o}function Dc(o,s,c,u,p){var v="",m=!1,_=o.doc.lineSeparator(),w=!1;function E(ct){return function(kt){return kt.id==ct}}function K(){m&&(v+=_,w&&(v+=_),m=w=!1)}function rt(ct){ct&&(K(),v+=ct)}function vt(ct){if(ct.nodeType==1){var kt=ct.getAttribute("cm-text");if(kt){rt(kt);return}var Vt=ct.getAttribute("cm-marker"),Yt;if(Vt){var re=o.findMarks(x(u,0),x(p+1,0),E(+Vt));re.length&&(Yt=re[0].find(0))&&rt(On(o.doc,Yt.from,Yt.to).join(_));return}if(ct.getAttribute("contenteditable")=="false")return;var de=/^(pre|div|p|li|table|br)$/i.test(ct.nodeName);if(!/^br$/i.test(ct.nodeName)&&ct.textContent.length==0)return;de&&K();for(var ie=0;ie<ct.childNodes.length;ie++)vt(ct.childNodes[ie]);/^(pre|p)$/i.test(ct.nodeName)&&(w=!0),de&&(m=!0)}else ct.nodeType==3&&rt(ct.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;vt(s),s!=c;)s=s.nextSibling,w=!1;return v}function ps(o,s,c){var u;if(s==o.display.lineDiv){if(u=o.display.lineDiv.childNodes[c],!u)return ji(o.clipPos(x(o.display.viewTo-1)),!0);s=null,c=0}else for(u=s;;u=u.parentNode){if(!u||u==o.display.lineDiv)return null;if(u.parentNode&&u.parentNode==o.display.lineDiv)break}for(var p=0;p<o.display.view.length;p++){var v=o.display.view[p];if(v.node==u)return up(v,s,c)}}function up(o,s,c){var u=o.text.firstChild,p=!1;if(!s||!Rt(u,s))return ji(x(Xe(o.line),0),!0);if(s==u&&(p=!0,s=u.childNodes[c],c=0,!s)){var v=o.rest?ae(o.rest):o.line;return ji(x(Xe(v),v.text.length),p)}var m=s.nodeType==3?s:null,_=s;for(!m&&s.childNodes.length==1&&s.firstChild.nodeType==3&&(m=s.firstChild,c&&(c=m.nodeValue.length));_.parentNode!=u;)_=_.parentNode;var w=o.measure,E=w.maps;function K(Yt,re,de){for(var ie=-1;ie<(E?E.length:0);ie++)for(var he=ie<0?w.map:E[ie],Te=0;Te<he.length;Te+=3){var Se=he[Te+2];if(Se==Yt||Se==re){var Be=Xe(ie<0?o.line:o.rest[ie]),cr=he[Te]+de;return(de<0||Se!=Yt)&&(cr=he[Te+(de?1:0)]),x(Be,cr)}}}var rt=K(m,_,c);if(rt)return ji(rt,p);for(var vt=_.nextSibling,ct=m?m.nodeValue.length-c:0;vt;vt=vt.nextSibling){if(rt=K(vt,vt.firstChild,0),rt)return ji(x(rt.line,rt.ch-ct),p);ct+=vt.textContent.length}for(var kt=_.previousSibling,Vt=c;kt;kt=kt.previousSibling){if(rt=K(kt,kt.firstChild,-1),rt)return ji(x(rt.line,rt.ch+Vt),p);Vt+=kt.textContent.length}}var Lr=function(o){this.cm=o,this.prevInput="",this.pollingFast=!1,this.polling=new zt,this.hasSelection=!1,this.composing=null,this.resetting=!1};Lr.prototype.init=function(o){var s=this,c=this,u=this.cm;this.createField(o);var p=this.textarea;o.wrapper.insertBefore(this.wrapper,o.wrapper.firstChild),Ht&&(p.style.width="0px"),_e(p,"input",function(){k&&N>=9&&s.hasSelection&&(s.hasSelection=null),c.poll()}),_e(p,"paste",function(m){sr(u,m)||Ac(m,u)||(u.state.pasteIncoming=+new Date,c.fastPoll())});function v(m){if(!sr(u,m)){if(u.somethingSelected())sl({lineWise:!1,text:u.getSelections()});else if(u.options.lineWiseCopyCut){var _=yr(u);sl({lineWise:!0,text:_.text}),m.type=="cut"?u.setSelections(_.ranges,null,oe):(c.prevInput="",p.value=_.text.join(`
`),Jt(p))}else return;m.type=="cut"&&(u.state.cutIncoming=+new Date)}}_e(p,"cut",v),_e(p,"copy",v),_e(o.scroller,"paste",function(m){if(!(Hn(o,m)||sr(u,m))){if(!p.dispatchEvent){u.state.pasteIncoming=+new Date,c.focus();return}var _=new Event("paste");_.clipboardData=m.clipboardData,p.dispatchEvent(_)}}),_e(o.lineSpace,"selectstart",function(m){Hn(o,m)||I(m)}),_e(p,"compositionstart",function(){var m=u.getCursor("from");c.composing&&c.composing.range.clear(),c.composing={start:m,range:u.markText(m,u.getCursor("to"),{className:"CodeMirror-composing"})}}),_e(p,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},Lr.prototype.createField=function(o){this.wrapper=cl(),this.textarea=this.wrapper.firstChild;var s=this.cm.options;ul(this.textarea,s.spellcheck,s.autocorrect,s.autocapitalize)},Lr.prototype.screenReaderLabelChanged=function(o){o?this.textarea.setAttribute("aria-label",o):this.textarea.removeAttribute("aria-label")},Lr.prototype.prepareSelection=function(){var o=this.cm,s=o.display,c=o.doc,u=Vs(o);if(o.options.moveInputWithCursor){var p=ti(o,c.sel.primary().head,"div"),v=s.wrapper.getBoundingClientRect(),m=s.lineDiv.getBoundingClientRect();u.teTop=Math.max(0,Math.min(s.wrapper.clientHeight-10,p.top+m.top-v.top)),u.teLeft=Math.max(0,Math.min(s.wrapper.clientWidth-10,p.left+m.left-v.left))}return u},Lr.prototype.showSelection=function(o){var s=this.cm,c=s.display;mt(c.cursorDiv,o.cursors),mt(c.selectionDiv,o.selection),o.teTop!=null&&(this.wrapper.style.top=o.teTop+"px",this.wrapper.style.left=o.teLeft+"px")},Lr.prototype.reset=function(o){if(!(this.contextMenuPending||this.composing&&o)){var s=this.cm;if(this.resetting=!0,s.somethingSelected()){this.prevInput="";var c=s.getSelection();this.textarea.value=c,s.state.focused&&Jt(this.textarea),k&&N>=9&&(this.hasSelection=c)}else o||(this.prevInput=this.textarea.value="",k&&N>=9&&(this.hasSelection=null));this.resetting=!1}},Lr.prototype.getField=function(){return this.textarea},Lr.prototype.supportsTouch=function(){return!1},Lr.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!xt||At(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},Lr.prototype.blur=function(){this.textarea.blur()},Lr.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Lr.prototype.receivedFocus=function(){this.slowPoll()},Lr.prototype.slowPoll=function(){var o=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){o.poll(),o.cm.state.focused&&o.slowPoll()})},Lr.prototype.fastPoll=function(){var o=!1,s=this;s.pollingFast=!0;function c(){var u=s.poll();!u&&!o?(o=!0,s.polling.set(60,c)):(s.pollingFast=!1,s.slowPoll())}s.polling.set(20,c)},Lr.prototype.poll=function(){var o=this,s=this.cm,c=this.textarea,u=this.prevInput;if(this.contextMenuPending||this.resetting||!s.state.focused||Cn(c)&&!u&&!this.composing||s.isReadOnly()||s.options.disableInput||s.state.keySeq)return!1;var p=c.value;if(p==u&&!s.somethingSelected())return!1;if(k&&N>=9&&this.hasSelection===p||_t&&/[\uf700-\uf7ff]/.test(p))return s.display.input.reset(),!1;if(s.doc.sel==s.display.selForContextMenu){var v=p.charCodeAt(0);if(v==8203&&!u&&(u="​"),v==8666)return this.reset(),this.cm.execCommand("undo")}for(var m=0,_=Math.min(u.length,p.length);m<_&&u.charCodeAt(m)==p.charCodeAt(m);)++m;return Pn(s,function(){ll(s,p.slice(m),u.length-m,null,o.composing?"*compose":null),p.length>1e3||p.indexOf(`
`)>-1?c.value=o.prevInput="":o.prevInput=p,o.composing&&(o.composing.range.clear(),o.composing.range=s.markText(o.composing.start,s.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Lr.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Lr.prototype.onKeyPress=function(){k&&N>=9&&(this.hasSelection=null),this.fastPoll()},Lr.prototype.onContextMenu=function(o){var s=this,c=s.cm,u=c.display,p=s.textarea;s.contextMenuPending&&s.contextMenuPending();var v=Vo(c,o),m=u.scroller.scrollTop;if(!v||z)return;var _=c.options.resetSelectionOnContextMenu;_&&c.doc.sel.contains(v)==-1&&xr(c,an)(c.doc,so(v),oe);var w=p.style.cssText,E=s.wrapper.style.cssText,K=s.wrapper.offsetParent.getBoundingClientRect();s.wrapper.style.cssText="position: static",p.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(o.clientY-K.top-5)+"px; left: "+(o.clientX-K.left-5)+`px;
      z-index: 1000; background: `+(k?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var rt;S&&(rt=p.ownerDocument.defaultView.scrollY),u.input.focus(),S&&p.ownerDocument.defaultView.scrollTo(null,rt),u.input.reset(),c.somethingSelected()||(p.value=s.prevInput=" "),s.contextMenuPending=ct,u.selForContextMenu=c.doc.sel,clearTimeout(u.detectingSelectAll);function vt(){if(p.selectionStart!=null){var Vt=c.somethingSelected(),Yt="​"+(Vt?p.value:"");p.value="⇚",p.value=Yt,s.prevInput=Vt?"":"​",p.selectionStart=1,p.selectionEnd=Yt.length,u.selForContextMenu=c.doc.sel}}function ct(){if(s.contextMenuPending==ct&&(s.contextMenuPending=!1,s.wrapper.style.cssText=E,p.style.cssText=w,k&&N<9&&u.scrollbars.setScrollTop(u.scroller.scrollTop=m),p.selectionStart!=null)){(!k||k&&N<9)&&vt();var Vt=0,Yt=function(){u.selForContextMenu==c.doc.sel&&p.selectionStart==0&&p.selectionEnd>0&&s.prevInput=="​"?xr(c,ac)(c):Vt++<10?u.detectingSelectAll=setTimeout(Yt,500):(u.selForContextMenu=null,u.input.reset())};u.detectingSelectAll=setTimeout(Yt,200)}}if(k&&N>=9&&vt(),H){It(o);var kt=function(){Pe(window,"mouseup",kt),setTimeout(ct,20)};_e(window,"mouseup",kt)}else setTimeout(ct,50)},Lr.prototype.readOnlyChanged=function(o){o||this.reset(),this.textarea.disabled=o=="nocursor",this.textarea.readOnly=!!o},Lr.prototype.setUneditable=function(){},Lr.prototype.needsContentAttribute=!1;function cp(o,s){if(s=s?Bt(s):{},s.value=o.value,!s.tabindex&&o.tabIndex&&(s.tabindex=o.tabIndex),!s.placeholder&&o.placeholder&&(s.placeholder=o.placeholder),s.autofocus==null){var c=At(o.ownerDocument);s.autofocus=c==o||o.getAttribute("autofocus")!=null&&c==document.body}function u(){o.value=_.getValue()}var p;if(o.form&&(_e(o.form,"submit",u),!s.leaveSubmitMethodAlone)){var v=o.form;p=v.submit;try{var m=v.submit=function(){u(),v.submit=p,v.submit(),v.submit=m}}catch{}}s.finishInit=function(w){w.save=u,w.getTextArea=function(){return o},w.toTextArea=function(){w.toTextArea=isNaN,u(),o.parentNode.removeChild(w.getWrapperElement()),o.style.display="",o.form&&(Pe(o.form,"submit",u),!s.leaveSubmitMethodAlone&&typeof o.form.submit=="function"&&(o.form.submit=p))}},o.style.display="none";var _=mr(function(w){return o.parentNode.insertBefore(w,o.nextSibling)},s);return _}function Ta(o){o.off=Pe,o.on=_e,o.wheelEventPixels=jf,o.Doc=wn,o.splitLines=gn,o.countColumn=Kt,o.findColumn=gr,o.isWordChar=Y,o.Pass=xe,o.signal=Qe,o.Line=xi,o.changeEnd=lo,o.scrollbarModel=Hu,o.Pos=x,o.cmpPos=U,o.modes=or,o.mimeModes=Xt,o.resolveMode=Ln,o.getMode=qn,o.modeExtensions=Fr,o.extendMode=oi,o.copyState=xn,o.startState=bi,o.innerMode=Sn,o.commands=Di,o.keyMap=Li,o.keyName=Jl,o.isModifierKey=Xl,o.lookupKey=qo,o.normalizeKeyMap=mc,o.StringStream=rr,o.SharedTextMarker=os,o.TextMarker=po,o.LineWidget=is,o.e_preventDefault=I,o.e_stopPropagation=at,o.e_stop=It,o.addClass=ft,o.contains=Rt,o.rmClass=B,o.keyNames=vo}Zo(mr),cs(mr);var lu="iter insert remove copy getEditor constructor".split(" ");for(var Ea in wn.prototype)wn.prototype.hasOwnProperty(Ea)&&Ut(lu,Ea)<0&&(mr.prototype[Ea]=function(o){return function(){return o.apply(this.doc,arguments)}}(wn.prototype[Ea]));return Mn(wn),mr.inputStyles={textarea:Lr,contenteditable:ar},mr.defineMode=function(o){!mr.defaults.mode&&o!="null"&&(mr.defaults.mode=o),$n.apply(this,arguments)},mr.defineMIME=Po,mr.defineMode("null",function(){return{token:function(o){return o.skipToEnd()}}}),mr.defineMIME("text/plain","null"),mr.defineExtension=function(o,s){mr.prototype[o]=s},mr.defineDocExtension=function(o,s){wn.prototype[o]=s},mr.fromTextArea=cp,Ta(mr),mr.version="5.65.15",mr})},629:(O,J,ut)=>{(function(st){st(ut(631))})(function(st){st.defineMode("css",function(B,tt){var mt=tt.inline;tt.propertyKeywords||(tt=st.resolveMode("text/css"));var V=B.indentUnit,Et=tt.tokenHooks,j=tt.documentTypes||{},Rt=tt.mediaTypes||{},At=tt.mediaFeatures||{},ft=tt.mediaValueKeywords||{},Wt=tt.propertyKeywords||{},Jt=tt.nonStandardPropertyKeywords||{},pe=tt.fontProperties||{},Ot=tt.counterDescriptors||{},jt=tt.colorKeywords||{},Bt=tt.valueKeywords||{},Kt=tt.allowNested,zt=tt.lineComment,Ut=tt.supportsAtComponent===!0,be=B.highlightNonStandardPropertyKeywords!==!1,xe,oe;function ge(Y,St){return xe=St,Y}function Ke(Y,St){var dt=Y.next();if(Et[dt]){var Ce=Et[dt](Y,St);if(Ce!==!1)return Ce}if(dt=="@")return Y.eatWhile(/[\w\\\-]/),ge("def",Y.current());if(dt=="="||(dt=="~"||dt=="|")&&Y.eat("="))return ge(null,"compare");if(dt=='"'||dt=="'")return St.tokenize=gr(dt),St.tokenize(Y,St);if(dt=="#")return Y.eatWhile(/[\w\\\-]/),ge("atom","hash");if(dt=="!")return Y.match(/^\s*\w*/),ge("keyword","important");if(/\d/.test(dt)||dt=="."&&Y.eat(/\d/))return Y.eatWhile(/[\w.%]/),ge("number","unit");if(dt==="-"){if(/[\d.]/.test(Y.peek()))return Y.eatWhile(/[\w.%]/),ge("number","unit");if(Y.match(/^-[\w\\\-]*/))return Y.eatWhile(/[\w\\\-]/),Y.match(/^\s*:/,!1)?ge("variable-2","variable-definition"):ge("variable-2","variable");if(Y.match(/^\w+-/))return ge("meta","meta")}else return/[,+>*\/]/.test(dt)?ge(null,"select-op"):dt=="."&&Y.match(/^-?[_a-z][_a-z0-9-]*/i)?ge("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(dt)?ge(null,dt):Y.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(Y.current())&&(St.tokenize=fr),ge("variable callee","variable")):/[\w\\\-]/.test(dt)?(Y.eatWhile(/[\w\\\-]/),ge("property","word")):ge(null,null)}function gr(Y){return function(St,dt){for(var Ce=!1,Ye;(Ye=St.next())!=null;){if(Ye==Y&&!Ce){Y==")"&&St.backUp(1);break}Ce=!Ce&&Ye=="\\"}return(Ye==Y||!Ce&&Y!=")")&&(dt.tokenize=null),ge("string","string")}}function fr(Y,St){return Y.next(),Y.match(/^\s*[\"\')]/,!1)?St.tokenize=null:St.tokenize=gr(")"),ge(null,"(")}function er(Y,St,dt){this.type=Y,this.indent=St,this.prev=dt}function ae(Y,St,dt,Ce){return Y.context=new er(dt,St.indentation()+(Ce===!1?0:V),Y.context),dt}function T(Y){return Y.context.prev&&(Y.context=Y.context.prev),Y.context.type}function F(Y,St,dt){return Pt[dt.context.type](Y,St,dt)}function Q(Y,St,dt,Ce){for(var Ye=Ce||1;Ye>0;Ye--)dt.context=dt.context.prev;return F(Y,St,dt)}function gt(Y){var St=Y.current().toLowerCase();Bt.hasOwnProperty(St)?oe="atom":jt.hasOwnProperty(St)?oe="keyword":oe="variable"}var Pt={};return Pt.top=function(Y,St,dt){if(Y=="{")return ae(dt,St,"block");if(Y=="}"&&dt.context.prev)return T(dt);if(Ut&&/@component/i.test(Y))return ae(dt,St,"atComponentBlock");if(/^@(-moz-)?document$/i.test(Y))return ae(dt,St,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(Y))return ae(dt,St,"atBlock");if(/^@(font-face|counter-style)/i.test(Y))return dt.stateArg=Y,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(Y))return"keyframes";if(Y&&Y.charAt(0)=="@")return ae(dt,St,"at");if(Y=="hash")oe="builtin";else if(Y=="word")oe="tag";else{if(Y=="variable-definition")return"maybeprop";if(Y=="interpolation")return ae(dt,St,"interpolation");if(Y==":")return"pseudo";if(Kt&&Y=="(")return ae(dt,St,"parens")}return dt.context.type},Pt.block=function(Y,St,dt){if(Y=="word"){var Ce=St.current().toLowerCase();return Wt.hasOwnProperty(Ce)?(oe="property","maybeprop"):Jt.hasOwnProperty(Ce)?(oe=be?"string-2":"property","maybeprop"):Kt?(oe=St.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(oe+=" error","maybeprop")}else return Y=="meta"?"block":!Kt&&(Y=="hash"||Y=="qualifier")?(oe="error","block"):Pt.top(Y,St,dt)},Pt.maybeprop=function(Y,St,dt){return Y==":"?ae(dt,St,"prop"):F(Y,St,dt)},Pt.prop=function(Y,St,dt){if(Y==";")return T(dt);if(Y=="{"&&Kt)return ae(dt,St,"propBlock");if(Y=="}"||Y=="{")return Q(Y,St,dt);if(Y=="(")return ae(dt,St,"parens");if(Y=="hash"&&!/^#([0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/.test(St.current()))oe+=" error";else if(Y=="word")gt(St);else if(Y=="interpolation")return ae(dt,St,"interpolation");return"prop"},Pt.propBlock=function(Y,St,dt){return Y=="}"?T(dt):Y=="word"?(oe="property","maybeprop"):dt.context.type},Pt.parens=function(Y,St,dt){return Y=="{"||Y=="}"?Q(Y,St,dt):Y==")"?T(dt):Y=="("?ae(dt,St,"parens"):Y=="interpolation"?ae(dt,St,"interpolation"):(Y=="word"&&gt(St),"parens")},Pt.pseudo=function(Y,St,dt){return Y=="meta"?"pseudo":Y=="word"?(oe="variable-3",dt.context.type):F(Y,St,dt)},Pt.documentTypes=function(Y,St,dt){return Y=="word"&&j.hasOwnProperty(St.current())?(oe="tag",dt.context.type):Pt.atBlock(Y,St,dt)},Pt.atBlock=function(Y,St,dt){if(Y=="(")return ae(dt,St,"atBlock_parens");if(Y=="}"||Y==";")return Q(Y,St,dt);if(Y=="{")return T(dt)&&ae(dt,St,Kt?"block":"top");if(Y=="interpolation")return ae(dt,St,"interpolation");if(Y=="word"){var Ce=St.current().toLowerCase();Ce=="only"||Ce=="not"||Ce=="and"||Ce=="or"?oe="keyword":Rt.hasOwnProperty(Ce)?oe="attribute":At.hasOwnProperty(Ce)?oe="property":ft.hasOwnProperty(Ce)?oe="keyword":Wt.hasOwnProperty(Ce)?oe="property":Jt.hasOwnProperty(Ce)?oe=be?"string-2":"property":Bt.hasOwnProperty(Ce)?oe="atom":jt.hasOwnProperty(Ce)?oe="keyword":oe="error"}return dt.context.type},Pt.atComponentBlock=function(Y,St,dt){return Y=="}"?Q(Y,St,dt):Y=="{"?T(dt)&&ae(dt,St,Kt?"block":"top",!1):(Y=="word"&&(oe="error"),dt.context.type)},Pt.atBlock_parens=function(Y,St,dt){return Y==")"?T(dt):Y=="{"||Y=="}"?Q(Y,St,dt,2):Pt.atBlock(Y,St,dt)},Pt.restricted_atBlock_before=function(Y,St,dt){return Y=="{"?ae(dt,St,"restricted_atBlock"):Y=="word"&&dt.stateArg=="@counter-style"?(oe="variable","restricted_atBlock_before"):F(Y,St,dt)},Pt.restricted_atBlock=function(Y,St,dt){return Y=="}"?(dt.stateArg=null,T(dt)):Y=="word"?(dt.stateArg=="@font-face"&&!pe.hasOwnProperty(St.current().toLowerCase())||dt.stateArg=="@counter-style"&&!Ot.hasOwnProperty(St.current().toLowerCase())?oe="error":oe="property","maybeprop"):"restricted_atBlock"},Pt.keyframes=function(Y,St,dt){return Y=="word"?(oe="variable","keyframes"):Y=="{"?ae(dt,St,"top"):F(Y,St,dt)},Pt.at=function(Y,St,dt){return Y==";"?T(dt):Y=="{"||Y=="}"?Q(Y,St,dt):(Y=="word"?oe="tag":Y=="hash"&&(oe="builtin"),"at")},Pt.interpolation=function(Y,St,dt){return Y=="}"?T(dt):Y=="{"||Y==";"?Q(Y,St,dt):(Y=="word"?oe="variable":Y!="variable"&&Y!="("&&Y!=")"&&(oe="error"),"interpolation")},{startState:function(Y){return{tokenize:null,state:mt?"block":"top",stateArg:null,context:new er(mt?"block":"top",Y||0,null)}},token:function(Y,St){if(!St.tokenize&&Y.eatSpace())return null;var dt=(St.tokenize||Ke)(Y,St);return dt&&typeof dt=="object"&&(xe=dt[1],dt=dt[0]),oe=dt,xe!="comment"&&(St.state=Pt[St.state](xe,Y,St)),oe},indent:function(Y,St){var dt=Y.context,Ce=St&&St.charAt(0),Ye=dt.indent;return dt.type=="prop"&&(Ce=="}"||Ce==")")&&(dt=dt.prev),dt.prev&&(Ce=="}"&&(dt.type=="block"||dt.type=="top"||dt.type=="interpolation"||dt.type=="restricted_atBlock")?(dt=dt.prev,Ye=dt.indent):(Ce==")"&&(dt.type=="parens"||dt.type=="atBlock_parens")||Ce=="{"&&(dt.type=="at"||dt.type=="atBlock"))&&(Ye=Math.max(0,dt.indent-V))),Ye},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:zt,fold:"brace"}});function Lt(B){for(var tt={},mt=0;mt<B.length;++mt)tt[B[mt].toLowerCase()]=!0;return tt}var et=["domain","regexp","url","url-prefix"],q=Lt(et),k=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],N=Lt(k),S=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],L=Lt(S),A=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],R=Lt(A),z=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],it=Lt(z),Ct=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],Mt=Lt(Ct),Ht=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],Ft=Lt(Ht),xt=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],_t=Lt(xt),qt=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],le=Lt(qt),ce=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],te=Lt(ce),H=et.concat(k).concat(S).concat(A).concat(z).concat(Ct).concat(qt).concat(ce);st.registerHelper("hintWords","css",H);function nt(B,tt){for(var mt=!1,V;(V=B.next())!=null;){if(mt&&V=="/"){tt.tokenize=null;break}mt=V=="*"}return["comment","comment"]}st.defineMIME("text/css",{documentTypes:q,mediaTypes:N,mediaFeatures:L,mediaValueKeywords:R,propertyKeywords:it,nonStandardPropertyKeywords:Mt,fontProperties:Ft,counterDescriptors:_t,colorKeywords:le,valueKeywords:te,tokenHooks:{"/":function(B,tt){return B.eat("*")?(tt.tokenize=nt,nt(B,tt)):!1}},name:"css"}),st.defineMIME("text/x-scss",{mediaTypes:N,mediaFeatures:L,mediaValueKeywords:R,propertyKeywords:it,nonStandardPropertyKeywords:Mt,colorKeywords:le,valueKeywords:te,fontProperties:Ft,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(B,tt){return B.eat("/")?(B.skipToEnd(),["comment","comment"]):B.eat("*")?(tt.tokenize=nt,nt(B,tt)):["operator","operator"]},":":function(B){return B.match(/^\s*\{/,!1)?[null,null]:!1},$:function(B){return B.match(/^[\w-]+/),B.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(B){return B.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),st.defineMIME("text/x-less",{mediaTypes:N,mediaFeatures:L,mediaValueKeywords:R,propertyKeywords:it,nonStandardPropertyKeywords:Mt,colorKeywords:le,valueKeywords:te,fontProperties:Ft,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(B,tt){return B.eat("/")?(B.skipToEnd(),["comment","comment"]):B.eat("*")?(tt.tokenize=nt,nt(B,tt)):["operator","operator"]},"@":function(B){return B.eat("{")?[null,"interpolation"]:B.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(B.eatWhile(/[\w\\\-]/),B.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),st.defineMIME("text/x-gss",{documentTypes:q,mediaTypes:N,mediaFeatures:L,propertyKeywords:it,nonStandardPropertyKeywords:Mt,fontProperties:Ft,counterDescriptors:_t,colorKeywords:le,valueKeywords:te,supportsAtComponent:!0,tokenHooks:{"/":function(B,tt){return B.eat("*")?(tt.tokenize=nt,nt(B,tt)):!1}},name:"css",helperType:"gss"})})},531:(O,J,ut)=>{(function(st){st(ut(631),ut(589),ut(876),ut(629))})(function(st){var Lt={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function et(R,z,it){var Ct=R.current(),Mt=Ct.search(z);return Mt>-1?R.backUp(Ct.length-Mt):Ct.match(/<\/?$/)&&(R.backUp(Ct.length),R.match(z,!1)||R.match(Ct)),it}var q={};function k(R){var z=q[R];return z||(q[R]=new RegExp("\\s+"+R+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function N(R,z){var it=R.match(k(z));return it?/^\s*(.*?)\s*$/.exec(it[2])[1]:""}function S(R,z){return new RegExp((z?"^":"")+"</\\s*"+R+"\\s*>","i")}function L(R,z){for(var it in R)for(var Ct=z[it]||(z[it]=[]),Mt=R[it],Ht=Mt.length-1;Ht>=0;Ht--)Ct.unshift(Mt[Ht])}function A(R,z){for(var it=0;it<R.length;it++){var Ct=R[it];if(!Ct[0]||Ct[1].test(N(z,Ct[0])))return Ct[2]}}st.defineMode("htmlmixed",function(R,z){var it=st.getMode(R,{name:"xml",htmlMode:!0,multilineTagIndentFactor:z.multilineTagIndentFactor,multilineTagIndentPastTag:z.multilineTagIndentPastTag,allowMissingTagName:z.allowMissingTagName}),Ct={},Mt=z&&z.tags,Ht=z&&z.scriptTypes;if(L(Lt,Ct),Mt&&L(Mt,Ct),Ht)for(var Ft=Ht.length-1;Ft>=0;Ft--)Ct.script.unshift(["type",Ht[Ft].matches,Ht[Ft].mode]);function xt(_t,qt){var le=it.token(_t,qt.htmlState),ce=/\btag\b/.test(le),te;if(ce&&!/[<>\s\/]/.test(_t.current())&&(te=qt.htmlState.tagName&&qt.htmlState.tagName.toLowerCase())&&Ct.hasOwnProperty(te))qt.inTag=te+" ";else if(qt.inTag&&ce&&/>$/.test(_t.current())){var H=/^([\S]+) (.*)/.exec(qt.inTag);qt.inTag=null;var nt=_t.current()==">"&&A(Ct[H[1]],H[2]),B=st.getMode(R,nt),tt=S(H[1],!0),mt=S(H[1],!1);qt.token=function(V,Et){return V.match(tt,!1)?(Et.token=xt,Et.localState=Et.localMode=null,null):et(V,mt,Et.localMode.token(V,Et.localState))},qt.localMode=B,qt.localState=st.startState(B,it.indent(qt.htmlState,"",""))}else qt.inTag&&(qt.inTag+=_t.current(),_t.eol()&&(qt.inTag+=" "));return le}return{startState:function(){var _t=st.startState(it);return{token:xt,inTag:null,localMode:null,localState:null,htmlState:_t}},copyState:function(_t){var qt;return _t.localState&&(qt=st.copyState(_t.localMode,_t.localState)),{token:_t.token,inTag:_t.inTag,localMode:_t.localMode,localState:qt,htmlState:st.copyState(it,_t.htmlState)}},token:function(_t,qt){return qt.token(_t,qt)},indent:function(_t,qt,le){return!_t.localMode||/^\s*<\//.test(qt)?it.indent(_t.htmlState,qt,le):_t.localMode.indent?_t.localMode.indent(_t.localState,qt,le):st.Pass},innerMode:function(_t){return{state:_t.localState||_t.htmlState,mode:_t.localMode||it}}}},"xml","javascript","css"),st.defineMIME("text/html","htmlmixed")})},876:(O,J,ut)=>{(function(st){st(ut(631))})(function(st){st.defineMode("javascript",function(Lt,et){var q=Lt.indentUnit,k=et.statementIndent,N=et.jsonld,S=et.json||N,L=et.trackScope!==!1,A=et.typescript,R=et.wordCharacters||/[\w$\xa1-\uffff]/,z=function(){function x(we){return{type:we,style:"keyword"}}var U=x("keyword a"),Dt=x("keyword b"),$t=x("keyword c"),Me=x("keyword d"),Re=x("operator"),Je={type:"atom",style:"atom"};return{if:x("if"),while:U,with:U,else:Dt,do:Dt,try:Dt,finally:Dt,return:Me,break:Me,continue:Me,new:x("new"),delete:$t,void:$t,throw:$t,debugger:x("debugger"),var:x("var"),const:x("var"),let:x("var"),function:x("function"),catch:x("catch"),for:x("for"),switch:x("switch"),case:x("case"),default:x("default"),in:Re,typeof:Re,instanceof:Re,true:Je,false:Je,null:Je,undefined:Je,NaN:Je,Infinity:Je,this:x("this"),class:x("class"),super:x("atom"),yield:$t,export:x("export"),import:x("import"),extends:$t,await:$t}}(),it=/[+\-*&%=<>!?|~^@]/,Ct=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function Mt(x){for(var U=!1,Dt,$t=!1;(Dt=x.next())!=null;){if(!U){if(Dt=="/"&&!$t)return;Dt=="["?$t=!0:$t&&Dt=="]"&&($t=!1)}U=!U&&Dt=="\\"}}var Ht,Ft;function xt(x,U,Dt){return Ht=x,Ft=Dt,U}function _t(x,U){var Dt=x.next();if(Dt=='"'||Dt=="'")return U.tokenize=qt(Dt),U.tokenize(x,U);if(Dt=="."&&x.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return xt("number","number");if(Dt=="."&&x.match(".."))return xt("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Dt))return xt(Dt);if(Dt=="="&&x.eat(">"))return xt("=>","operator");if(Dt=="0"&&x.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return xt("number","number");if(/\d/.test(Dt))return x.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),xt("number","number");if(Dt=="/")return x.eat("*")?(U.tokenize=le,le(x,U)):x.eat("/")?(x.skipToEnd(),xt("comment","comment")):Vr(x,U,1)?(Mt(x),x.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),xt("regexp","string-2")):(x.eat("="),xt("operator","operator",x.current()));if(Dt=="`")return U.tokenize=ce,ce(x,U);if(Dt=="#"&&x.peek()=="!")return x.skipToEnd(),xt("meta","meta");if(Dt=="#"&&x.eatWhile(R))return xt("variable","property");if(Dt=="<"&&x.match("!--")||Dt=="-"&&x.match("->")&&!/\S/.test(x.string.slice(0,x.start)))return x.skipToEnd(),xt("comment","comment");if(it.test(Dt))return(Dt!=">"||!U.lexical||U.lexical.type!=">")&&(x.eat("=")?(Dt=="!"||Dt=="=")&&x.eat("="):/[<>*+\-|&?]/.test(Dt)&&(x.eat(Dt),Dt==">"&&x.eat(Dt))),Dt=="?"&&x.eat(".")?xt("."):xt("operator","operator",x.current());if(R.test(Dt)){x.eatWhile(R);var $t=x.current();if(U.lastType!="."){if(z.propertyIsEnumerable($t)){var Me=z[$t];return xt(Me.type,Me.style,$t)}if($t=="async"&&x.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return xt("async","keyword",$t)}return xt("variable","variable",$t)}}function qt(x){return function(U,Dt){var $t=!1,Me;if(N&&U.peek()=="@"&&U.match(Ct))return Dt.tokenize=_t,xt("jsonld-keyword","meta");for(;(Me=U.next())!=null&&!(Me==x&&!$t);)$t=!$t&&Me=="\\";return $t||(Dt.tokenize=_t),xt("string","string")}}function le(x,U){for(var Dt=!1,$t;$t=x.next();){if($t=="/"&&Dt){U.tokenize=_t;break}Dt=$t=="*"}return xt("comment","comment")}function ce(x,U){for(var Dt=!1,$t;($t=x.next())!=null;){if(!Dt&&($t=="`"||$t=="$"&&x.eat("{"))){U.tokenize=_t;break}Dt=!Dt&&$t=="\\"}return xt("quasi","string-2",x.current())}var te="([{}])";function H(x,U){U.fatArrowAt&&(U.fatArrowAt=null);var Dt=x.string.indexOf("=>",x.start);if(!(Dt<0)){if(A){var $t=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(x.string.slice(x.start,Dt));$t&&(Dt=$t.index)}for(var Me=0,Re=!1,Je=Dt-1;Je>=0;--Je){var we=x.string.charAt(Je),Tn=te.indexOf(we);if(Tn>=0&&Tn<3){if(!Me){++Je;break}if(--Me==0){we=="("&&(Re=!0);break}}else if(Tn>=3&&Tn<6)++Me;else if(R.test(we))Re=!0;else if(/["'\/`]/.test(we))for(;;--Je){if(Je==0)return;var ia=x.string.charAt(Je-1);if(ia==we&&x.string.charAt(Je-2)!="\\"){Je--;break}}else if(Re&&!Me){++Je;break}}Re&&!Me&&(U.fatArrowAt=Je)}}var nt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function B(x,U,Dt,$t,Me,Re){this.indented=x,this.column=U,this.type=Dt,this.prev=Me,this.info=Re,$t!=null&&(this.align=$t)}function tt(x,U){if(!L)return!1;for(var Dt=x.localVars;Dt;Dt=Dt.next)if(Dt.name==U)return!0;for(var $t=x.context;$t;$t=$t.prev)for(var Dt=$t.vars;Dt;Dt=Dt.next)if(Dt.name==U)return!0}function mt(x,U,Dt,$t,Me){var Re=x.cc;for(V.state=x,V.stream=Me,V.marked=null,V.cc=Re,V.style=U,x.lexical.hasOwnProperty("align")||(x.lexical.align=!0);;){var Je=Re.length?Re.pop():S?ge:xe;if(Je(Dt,$t)){for(;Re.length&&Re[Re.length-1].lex;)Re.pop()();return V.marked?V.marked:Dt=="variable"&&tt(x,$t)?"variable-2":U}}}var V={state:null,column:null,marked:null,cc:null};function Et(){for(var x=arguments.length-1;x>=0;x--)V.cc.push(arguments[x])}function j(){return Et.apply(null,arguments),!0}function Rt(x,U){for(var Dt=U;Dt;Dt=Dt.next)if(Dt.name==x)return!0;return!1}function At(x){var U=V.state;if(V.marked="def",!!L){if(U.context){if(U.lexical.info=="var"&&U.context&&U.context.block){var Dt=ft(x,U.context);if(Dt!=null){U.context=Dt;return}}else if(!Rt(x,U.localVars)){U.localVars=new pe(x,U.localVars);return}}et.globalVars&&!Rt(x,U.globalVars)&&(U.globalVars=new pe(x,U.globalVars))}}function ft(x,U){if(U)if(U.block){var Dt=ft(x,U.prev);return Dt?Dt==U.prev?U:new Jt(Dt,U.vars,!0):null}else return Rt(x,U.vars)?U:new Jt(U.prev,new pe(x,U.vars),!1);else return null}function Wt(x){return x=="public"||x=="private"||x=="protected"||x=="abstract"||x=="readonly"}function Jt(x,U,Dt){this.prev=x,this.vars=U,this.block=Dt}function pe(x,U){this.name=x,this.next=U}var Ot=new pe("this",new pe("arguments",null));function jt(){V.state.context=new Jt(V.state.context,V.state.localVars,!1),V.state.localVars=Ot}function Bt(){V.state.context=new Jt(V.state.context,V.state.localVars,!0),V.state.localVars=null}jt.lex=Bt.lex=!0;function Kt(){V.state.localVars=V.state.context.vars,V.state.context=V.state.context.prev}Kt.lex=!0;function zt(x,U){var Dt=function(){var $t=V.state,Me=$t.indented;if($t.lexical.type=="stat")Me=$t.lexical.indented;else for(var Re=$t.lexical;Re&&Re.type==")"&&Re.align;Re=Re.prev)Me=Re.indented;$t.lexical=new B(Me,V.stream.column(),x,null,$t.lexical,U)};return Dt.lex=!0,Dt}function Ut(){var x=V.state;x.lexical.prev&&(x.lexical.type==")"&&(x.indented=x.lexical.indented),x.lexical=x.lexical.prev)}Ut.lex=!0;function be(x){function U(Dt){return Dt==x?j():x==";"||Dt=="}"||Dt==")"||Dt=="]"?Et():j(U)}return U}function xe(x,U){return x=="var"?j(zt("vardef",U),Ae,be(";"),Ut):x=="keyword a"?j(zt("form"),gr,xe,Ut):x=="keyword b"?j(zt("form"),xe,Ut):x=="keyword d"?V.stream.match(/^\s*$/,!1)?j():j(zt("stat"),er,be(";"),Ut):x=="debugger"?j(be(";")):x=="{"?j(zt("}"),Bt,ir,Ut,Kt):x==";"?j():x=="if"?(V.state.lexical.info=="else"&&V.state.cc[V.state.cc.length-1]==Ut&&V.state.cc.pop()(),j(zt("form"),gr,xe,Ut,gn)):x=="function"?j(un):x=="for"?j(zt("form"),Bt,Cn,xe,Kt,Ut):x=="class"||A&&U=="interface"?(V.marked="keyword",j(zt("form",x=="class"?x:U),Ln,Ut)):x=="variable"?A&&U=="declare"?(V.marked="keyword",j(xe)):A&&(U=="module"||U=="enum"||U=="type")&&V.stream.match(/^\s*\w/,!1)?(V.marked="keyword",U=="enum"?j(Xe):U=="type"?j(Xt,be("operator"),Pe,be(";")):j(zt("form"),ze,be("{"),zt("}"),ir,Ut,Ut)):A&&U=="namespace"?(V.marked="keyword",j(zt("form"),ge,xe,Ut)):A&&U=="abstract"?(V.marked="keyword",j(xe)):j(zt("stat"),Ce):x=="switch"?j(zt("form"),gr,be("{"),zt("}","switch"),Bt,ir,Ut,Ut,Kt):x=="case"?j(ge,be(":")):x=="default"?j(be(":")):x=="catch"?j(zt("form"),jt,oe,xe,Ut,Kt):x=="export"?j(zt("stat"),xn,Ut):x=="import"?j(zt("stat"),bi,Ut):x=="async"?j(xe):U=="@"?j(ge,xe):Et(zt("stat"),ge,be(";"),Ut)}function oe(x){if(x=="(")return j($n,be(")"))}function ge(x,U){return fr(x,U,!1)}function Ke(x,U){return fr(x,U,!0)}function gr(x){return x!="("?Et():j(zt(")"),er,be(")"),Ut)}function fr(x,U,Dt){if(V.state.fatArrowAt==V.stream.start){var $t=Dt?Pt:gt;if(x=="(")return j(jt,zt(")"),ye($n,")"),Ut,be("=>"),$t,Kt);if(x=="variable")return Et(jt,ze,be("=>"),$t,Kt)}var Me=Dt?T:ae;return nt.hasOwnProperty(x)?j(Me):x=="function"?j(un,Me):x=="class"||A&&U=="interface"?(V.marked="keyword",j(zt("form"),Po,Ut)):x=="keyword c"||x=="async"?j(Dt?Ke:ge):x=="("?j(zt(")"),er,be(")"),Ut,Me):x=="operator"||x=="spread"?j(Dt?Ke:ge):x=="["?j(zt("]"),en,Ut,Me):x=="{"?qr(Ne,"}",null,Me):x=="quasi"?Et(F,Me):x=="new"?j(Y(Dt)):j()}function er(x){return x.match(/[;\}\)\],]/)?Et():Et(ge)}function ae(x,U){return x==","?j(er):T(x,U,!1)}function T(x,U,Dt){var $t=Dt==!1?ae:T,Me=Dt==!1?ge:Ke;if(x=="=>")return j(jt,Dt?Pt:gt,Kt);if(x=="operator")return/\+\+|--/.test(U)||A&&U=="!"?j($t):A&&U=="<"&&V.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?j(zt(">"),ye(Pe,">"),Ut,$t):U=="?"?j(ge,be(":"),Me):j(Me);if(x=="quasi")return Et(F,$t);if(x!=";"){if(x=="(")return qr(Ke,")","call",$t);if(x==".")return j(Ye,$t);if(x=="[")return j(zt("]"),er,be("]"),Ut,$t);if(A&&U=="as")return V.marked="keyword",j(Pe,$t);if(x=="regexp")return V.state.lastType=V.marked="operator",V.stream.backUp(V.stream.pos-V.stream.start-1),j(Me)}}function F(x,U){return x!="quasi"?Et():U.slice(U.length-2)!="${"?j(F):j(er,Q)}function Q(x){if(x=="}")return V.marked="string-2",V.state.tokenize=ce,j(F)}function gt(x){return H(V.stream,V.state),Et(x=="{"?xe:ge)}function Pt(x){return H(V.stream,V.state),Et(x=="{"?xe:Ke)}function Y(x){return function(U){return U=="."?j(x?dt:St):U=="variable"&&A?j(ht,x?T:ae):Et(x?Ke:ge)}}function St(x,U){if(U=="target")return V.marked="keyword",j(ae)}function dt(x,U){if(U=="target")return V.marked="keyword",j(T)}function Ce(x){return x==":"?j(Ut,xe):Et(ae,be(";"),Ut)}function Ye(x){if(x=="variable")return V.marked="property",j()}function Ne(x,U){if(x=="async")return V.marked="property",j(Ne);if(x=="variable"||V.style=="keyword"){if(V.marked="property",U=="get"||U=="set")return j(Ge);var Dt;return A&&V.state.fatArrowAt==V.stream.start&&(Dt=V.stream.match(/^\s*:\s*/,!1))&&(V.state.fatArrowAt=V.stream.pos+Dt[0].length),j(pr)}else{if(x=="number"||x=="string")return V.marked=N?"property":V.style+" property",j(pr);if(x=="jsonld-keyword")return j(pr);if(A&&Wt(U))return V.marked="keyword",j(Ne);if(x=="[")return j(ge,$e,be("]"),pr);if(x=="spread")return j(Ke,pr);if(U=="*")return V.marked="keyword",j(Ne);if(x==":")return Et(pr)}}function Ge(x){return x!="variable"?Et(pr):(V.marked="property",j(un))}function pr(x){if(x==":")return j(Ke);if(x=="(")return Et(un)}function ye(x,U,Dt){function $t(Me,Re){if(Dt?Dt.indexOf(Me)>-1:Me==","){var Je=V.state.lexical;return Je.info=="call"&&(Je.pos=(Je.pos||0)+1),j(function(we,Tn){return we==U||Tn==U?Et():Et(x)},$t)}return Me==U||Re==U?j():Dt&&Dt.indexOf(";")>-1?Et(x):j(be(U))}return function(Me,Re){return Me==U||Re==U?j():Et(x,$t)}}function qr(x,U,Dt){for(var $t=3;$t<arguments.length;$t++)V.cc.push(arguments[$t]);return j(zt(U,Dt),ye(x,U),Ut)}function ir(x){return x=="}"?j():Et(xe,ir)}function $e(x,U){if(A){if(x==":")return j(Pe);if(U=="?")return j($e)}}function Nr(x,U){if(A&&(x==":"||U=="in"))return j(Pe)}function _e(x){if(A&&x==":")return V.stream.match(/^\s*\w+\s+is\b/,!1)?j(ge,_r,Pe):j(Pe)}function _r(x,U){if(U=="is")return V.marked="keyword",j()}function Pe(x,U){if(U=="keyof"||U=="typeof"||U=="infer"||U=="readonly")return V.marked="keyword",j(U=="typeof"?Ke:Pe);if(x=="variable"||U=="void")return V.marked="type",j(at);if(U=="|"||U=="&")return j(Pe);if(x=="string"||x=="number"||x=="atom")return j(at);if(x=="[")return j(zt("]"),ye(Pe,"]",","),Ut,at);if(x=="{")return j(zt("}"),sr,Ut,at);if(x=="(")return j(ye(I,")"),Qe,at);if(x=="<")return j(ye(Pe,">"),Pe);if(x=="quasi")return Et(wr,at)}function Qe(x){if(x=="=>")return j(Pe)}function sr(x){return x.match(/[\}\)\]]/)?j():x==","||x==";"?j(sr):Et(Wr,sr)}function Wr(x,U){if(x=="variable"||V.style=="keyword")return V.marked="property",j(Wr);if(U=="?"||x=="number"||x=="string")return j(Wr);if(x==":")return j(Pe);if(x=="[")return j(be("variable"),Nr,be("]"),Wr);if(x=="(")return Et(or,Wr);if(!x.match(/[;\}\)\],]/))return j()}function wr(x,U){return x!="quasi"?Et():U.slice(U.length-2)!="${"?j(wr):j(Pe,Mn)}function Mn(x){if(x=="}")return V.marked="string-2",V.state.tokenize=ce,j(wr)}function I(x,U){return x=="variable"&&V.stream.match(/^\s*[?:]/,!1)||U=="?"?j(I):x==":"?j(Pe):x=="spread"?j(I):Et(Pe)}function at(x,U){if(U=="<")return j(zt(">"),ye(Pe,">"),Ut,at);if(U=="|"||x=="."||U=="&")return j(Pe);if(x=="[")return j(Pe,be("]"),at);if(U=="extends"||U=="implements")return V.marked="keyword",j(Pe);if(U=="?")return j(Pe,be(":"),Pe)}function ht(x,U){if(U=="<")return j(zt(">"),ye(Pe,">"),Ut,at)}function It(){return Et(Pe,fe)}function fe(x,U){if(U=="=")return j(Pe)}function Ae(x,U){return U=="enum"?(V.marked="keyword",j(Xe)):Et(ze,$e,tr,Vi)}function ze(x,U){if(A&&Wt(U))return V.marked="keyword",j(ze);if(x=="variable")return At(U),j();if(x=="spread")return j(ze);if(x=="[")return qr(vn,"]");if(x=="{")return qr(tn,"}")}function tn(x,U){return x=="variable"&&!V.stream.match(/^\s*:/,!1)?(At(U),j(tr)):(x=="variable"&&(V.marked="property"),x=="spread"?j(ze):x=="}"?Et():x=="["?j(ge,be("]"),be(":"),tn):j(be(":"),ze,tr))}function vn(){return Et(ze,tr)}function tr(x,U){if(U=="=")return j(Ke)}function Vi(x){if(x==",")return j(Ae)}function gn(x,U){if(x=="keyword b"&&U=="else")return j(zt("form","else"),xe,Ut)}function Cn(x,U){if(U=="await")return j(Cn);if(x=="(")return j(zt(")"),ii,Ut)}function ii(x){return x=="var"?j(Ae,Pr):x=="variable"?j(Pr):Et(Pr)}function Pr(x,U){return x==")"?j():x==";"?j(Pr):U=="in"||U=="of"?(V.marked="keyword",j(ge,Pr)):Et(ge,Pr)}function un(x,U){if(U=="*")return V.marked="keyword",j(un);if(x=="variable")return At(U),j(un);if(x=="(")return j(jt,zt(")"),ye($n,")"),Ut,_e,xe,Kt);if(A&&U=="<")return j(zt(">"),ye(It,">"),Ut,un)}function or(x,U){if(U=="*")return V.marked="keyword",j(or);if(x=="variable")return At(U),j(or);if(x=="(")return j(jt,zt(")"),ye($n,")"),Ut,_e,Kt);if(A&&U=="<")return j(zt(">"),ye(It,">"),Ut,or)}function Xt(x,U){if(x=="keyword"||x=="variable")return V.marked="type",j(Xt);if(U=="<")return j(zt(">"),ye(It,">"),Ut)}function $n(x,U){return U=="@"&&j(ge,$n),x=="spread"?j($n):A&&Wt(U)?(V.marked="keyword",j($n)):A&&x=="this"?j($e,tr):Et(ze,$e,tr)}function Po(x,U){return x=="variable"?Ln(x,U):qn(x,U)}function Ln(x,U){if(x=="variable")return At(U),j(qn)}function qn(x,U){if(U=="<")return j(zt(">"),ye(It,">"),Ut,qn);if(U=="extends"||U=="implements"||A&&x==",")return U=="implements"&&(V.marked="keyword"),j(A?Pe:ge,qn);if(x=="{")return j(zt("}"),Fr,Ut)}function Fr(x,U){if(x=="async"||x=="variable"&&(U=="static"||U=="get"||U=="set"||A&&Wt(U))&&V.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return V.marked="keyword",j(Fr);if(x=="variable"||V.style=="keyword")return V.marked="property",j(oi,Fr);if(x=="number"||x=="string")return j(oi,Fr);if(x=="[")return j(ge,$e,be("]"),oi,Fr);if(U=="*")return V.marked="keyword",j(Fr);if(A&&x=="(")return Et(or,Fr);if(x==";"||x==",")return j(Fr);if(x=="}")return j();if(U=="@")return j(ge,Fr)}function oi(x,U){if(U=="!"||U=="?")return j(oi);if(x==":")return j(Pe,tr);if(U=="=")return j(Ke);var Dt=V.state.lexical.prev,$t=Dt&&Dt.info=="interface";return Et($t?or:un)}function xn(x,U){return U=="*"?(V.marked="keyword",j(br,be(";"))):U=="default"?(V.marked="keyword",j(ge,be(";"))):x=="{"?j(ye(Sn,"}"),br,be(";")):Et(xe)}function Sn(x,U){if(U=="as")return V.marked="keyword",j(be("variable"));if(x=="variable")return Et(Ke,Sn)}function bi(x){return x=="string"?j():x=="("?Et(ge):x=="."?Et(ae):Et(rr,me,br)}function rr(x,U){return x=="{"?qr(rr,"}"):(x=="variable"&&At(U),U=="*"&&(V.marked="keyword"),j(On))}function me(x){if(x==",")return j(rr,me)}function On(x,U){if(U=="as")return V.marked="keyword",j(rr)}function br(x,U){if(U=="from")return V.marked="keyword",j(ge)}function en(x){return x=="]"?j():Et(ye(Ke,"]"))}function Xe(){return Et(zt("form"),ze,be("{"),zt("}"),ye(Yn,"}"),Ut,Ut)}function Yn(){return Et(ze,tr)}function hi(x,U){return x.lastType=="operator"||x.lastType==","||it.test(U.charAt(0))||/[,.]/.test(U.charAt(0))}function Vr(x,U,Dt){return U.tokenize==_t&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(U.lastType)||U.lastType=="quasi"&&/\{\s*$/.test(x.string.slice(0,x.pos-(Dt||0)))}return{startState:function(x){var U={tokenize:_t,lastType:"sof",cc:[],lexical:new B((x||0)-q,0,"block",!1),localVars:et.localVars,context:et.localVars&&new Jt(null,null,!1),indented:x||0};return et.globalVars&&typeof et.globalVars=="object"&&(U.globalVars=et.globalVars),U},token:function(x,U){if(x.sol()&&(U.lexical.hasOwnProperty("align")||(U.lexical.align=!1),U.indented=x.indentation(),H(x,U)),U.tokenize!=le&&x.eatSpace())return null;var Dt=U.tokenize(x,U);return Ht=="comment"?Dt:(U.lastType=Ht=="operator"&&(Ft=="++"||Ft=="--")?"incdec":Ht,mt(U,Dt,Ht,Ft,x))},indent:function(x,U){if(x.tokenize==le||x.tokenize==ce)return st.Pass;if(x.tokenize!=_t)return 0;var Dt=U&&U.charAt(0),$t=x.lexical,Me;if(!/^\s*else\b/.test(U))for(var Re=x.cc.length-1;Re>=0;--Re){var Je=x.cc[Re];if(Je==Ut)$t=$t.prev;else if(Je!=gn&&Je!=Kt)break}for(;($t.type=="stat"||$t.type=="form")&&(Dt=="}"||(Me=x.cc[x.cc.length-1])&&(Me==ae||Me==T)&&!/^[,\.=+\-*:?[\(]/.test(U));)$t=$t.prev;k&&$t.type==")"&&$t.prev.type=="stat"&&($t=$t.prev);var we=$t.type,Tn=Dt==we;return we=="vardef"?$t.indented+(x.lastType=="operator"||x.lastType==","?$t.info.length+1:0):we=="form"&&Dt=="{"?$t.indented:we=="form"?$t.indented+q:we=="stat"?$t.indented+(hi(x,U)?k||q:0):$t.info=="switch"&&!Tn&&et.doubleIndentSwitch!=!1?$t.indented+(/^(?:case|default)\b/.test(U)?q:2*q):$t.align?$t.column+(Tn?0:1):$t.indented+(Tn?0:q)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:S?null:"/*",blockCommentEnd:S?null:"*/",blockCommentContinue:S?null:" * ",lineComment:S?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:S?"json":"javascript",jsonldMode:N,jsonMode:S,expressionAllowed:Vr,skipExpression:function(x){mt(x,"atom","atom","true",new st.StringStream("",2,null))}}}),st.registerHelper("wordChars","javascript",/[\w$]/),st.defineMIME("text/javascript","javascript"),st.defineMIME("text/ecmascript","javascript"),st.defineMIME("application/javascript","javascript"),st.defineMIME("application/x-javascript","javascript"),st.defineMIME("application/ecmascript","javascript"),st.defineMIME("application/json",{name:"javascript",json:!0}),st.defineMIME("application/x-json",{name:"javascript",json:!0}),st.defineMIME("application/manifest+json",{name:"javascript",json:!0}),st.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),st.defineMIME("text/typescript",{name:"javascript",typescript:!0}),st.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},589:(O,J,ut)=>{(function(st){st(ut(631))})(function(st){var Lt={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},et={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};st.defineMode("xml",function(q,k){var N=q.indentUnit,S={},L=k.htmlMode?Lt:et;for(var A in L)S[A]=L[A];for(var A in k)S[A]=k[A];var R,z;function it(j,Rt){function At(Jt){return Rt.tokenize=Jt,Jt(j,Rt)}var ft=j.next();if(ft=="<")return j.eat("!")?j.eat("[")?j.match("CDATA[")?At(Ht("atom","]]>")):null:j.match("--")?At(Ht("comment","-->")):j.match("DOCTYPE",!0,!0)?(j.eatWhile(/[\w\._\-]/),At(Ft(1))):null:j.eat("?")?(j.eatWhile(/[\w\._\-]/),Rt.tokenize=Ht("meta","?>"),"meta"):(R=j.eat("/")?"closeTag":"openTag",Rt.tokenize=Ct,"tag bracket");if(ft=="&"){var Wt;return j.eat("#")?j.eat("x")?Wt=j.eatWhile(/[a-fA-F\d]/)&&j.eat(";"):Wt=j.eatWhile(/[\d]/)&&j.eat(";"):Wt=j.eatWhile(/[\w\.\-:]/)&&j.eat(";"),Wt?"atom":"error"}else return j.eatWhile(/[^&<]/),null}it.isInText=!0;function Ct(j,Rt){var At=j.next();if(At==">"||At=="/"&&j.eat(">"))return Rt.tokenize=it,R=At==">"?"endTag":"selfcloseTag","tag bracket";if(At=="=")return R="equals",null;if(At=="<"){Rt.tokenize=it,Rt.state=ce,Rt.tagName=Rt.tagStart=null;var ft=Rt.tokenize(j,Rt);return ft?ft+" tag error":"tag error"}else return/[\'\"]/.test(At)?(Rt.tokenize=Mt(At),Rt.stringStartCol=j.column(),Rt.tokenize(j,Rt)):(j.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function Mt(j){var Rt=function(At,ft){for(;!At.eol();)if(At.next()==j){ft.tokenize=Ct;break}return"string"};return Rt.isInAttribute=!0,Rt}function Ht(j,Rt){return function(At,ft){for(;!At.eol();){if(At.match(Rt)){ft.tokenize=it;break}At.next()}return j}}function Ft(j){return function(Rt,At){for(var ft;(ft=Rt.next())!=null;){if(ft=="<")return At.tokenize=Ft(j+1),At.tokenize(Rt,At);if(ft==">")if(j==1){At.tokenize=it;break}else return At.tokenize=Ft(j-1),At.tokenize(Rt,At)}return"meta"}}function xt(j){return j&&j.toLowerCase()}function _t(j,Rt,At){this.prev=j.context,this.tagName=Rt||"",this.indent=j.indented,this.startOfLine=At,(S.doNotIndent.hasOwnProperty(Rt)||j.context&&j.context.noIndent)&&(this.noIndent=!0)}function qt(j){j.context&&(j.context=j.context.prev)}function le(j,Rt){for(var At;;){if(!j.context||(At=j.context.tagName,!S.contextGrabbers.hasOwnProperty(xt(At))||!S.contextGrabbers[xt(At)].hasOwnProperty(xt(Rt))))return;qt(j)}}function ce(j,Rt,At){return j=="openTag"?(At.tagStart=Rt.column(),te):j=="closeTag"?H:ce}function te(j,Rt,At){return j=="word"?(At.tagName=Rt.current(),z="tag",tt):S.allowMissingTagName&&j=="endTag"?(z="tag bracket",tt(j,Rt,At)):(z="error",te)}function H(j,Rt,At){if(j=="word"){var ft=Rt.current();return At.context&&At.context.tagName!=ft&&S.implicitlyClosed.hasOwnProperty(xt(At.context.tagName))&&qt(At),At.context&&At.context.tagName==ft||S.matchClosing===!1?(z="tag",nt):(z="tag error",B)}else return S.allowMissingTagName&&j=="endTag"?(z="tag bracket",nt(j,Rt,At)):(z="error",B)}function nt(j,Rt,At){return j!="endTag"?(z="error",nt):(qt(At),ce)}function B(j,Rt,At){return z="error",nt(j,Rt,At)}function tt(j,Rt,At){if(j=="word")return z="attribute",mt;if(j=="endTag"||j=="selfcloseTag"){var ft=At.tagName,Wt=At.tagStart;return At.tagName=At.tagStart=null,j=="selfcloseTag"||S.autoSelfClosers.hasOwnProperty(xt(ft))?le(At,ft):(le(At,ft),At.context=new _t(At,ft,Wt==At.indented)),ce}return z="error",tt}function mt(j,Rt,At){return j=="equals"?V:(S.allowMissing||(z="error"),tt(j,Rt,At))}function V(j,Rt,At){return j=="string"?Et:j=="word"&&S.allowUnquoted?(z="string",tt):(z="error",tt(j,Rt,At))}function Et(j,Rt,At){return j=="string"?Et:tt(j,Rt,At)}return{startState:function(j){var Rt={tokenize:it,state:ce,indented:j||0,tagName:null,tagStart:null,context:null};return j!=null&&(Rt.baseIndent=j),Rt},token:function(j,Rt){if(!Rt.tagName&&j.sol()&&(Rt.indented=j.indentation()),j.eatSpace())return null;R=null;var At=Rt.tokenize(j,Rt);return(At||R)&&At!="comment"&&(z=null,Rt.state=Rt.state(R||At,j,Rt),z&&(At=z=="error"?At+" error":z)),At},indent:function(j,Rt,At){var ft=j.context;if(j.tokenize.isInAttribute)return j.tagStart==j.indented?j.stringStartCol+1:j.indented+N;if(ft&&ft.noIndent)return st.Pass;if(j.tokenize!=Ct&&j.tokenize!=it)return At?At.match(/^(\s*)/)[0].length:0;if(j.tagName)return S.multilineTagIndentPastTag!==!1?j.tagStart+j.tagName.length+2:j.tagStart+N*(S.multilineTagIndentFactor||1);if(S.alignCDATA&&/<!\[CDATA\[/.test(Rt))return 0;var Wt=Rt&&/^<(\/)?([\w_:\.-]*)/.exec(Rt);if(Wt&&Wt[1])for(;ft;)if(ft.tagName==Wt[2]){ft=ft.prev;break}else if(S.implicitlyClosed.hasOwnProperty(xt(ft.tagName)))ft=ft.prev;else break;else if(Wt)for(;ft;){var Jt=S.contextGrabbers[xt(ft.tagName)];if(Jt&&Jt.hasOwnProperty(xt(Wt[2])))ft=ft.prev;else break}for(;ft&&ft.prev&&!ft.startOfLine;)ft=ft.prev;return ft?ft.indent+N:j.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:S.htmlMode?"html":"xml",helperType:S.htmlMode?"html":"xml",skipAttribute:function(j){j.state==V&&(j.state=tt)},xmlCurrentTag:function(j){return j.tagName?{name:j.tagName,close:j.type=="closeTag"}:null},xmlCurrentContext:function(j){for(var Rt=[],At=j.context;At;At=At.prev)Rt.push(At.tagName);return Rt.reverse()}}}),st.defineMIME("text/xml","xml"),st.defineMIME("application/xml","xml"),st.mimeModes.hasOwnProperty("text/html")||st.defineMIME("text/html",{name:"xml",htmlMode:!0})})},642:(O,J,ut)=>{ut.d(J,{Z:()=>q});var st=ut(346),Lt=function(){var k=function(N,S){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,A){L.__proto__=A}||function(L,A){for(var R in A)Object.prototype.hasOwnProperty.call(A,R)&&(L[R]=A[R])},k(N,S)};return function(N,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");k(N,S);function L(){this.constructor=N}N.prototype=S===null?Object.create(S):(L.prototype=S.prototype,new L)}}(),et=function(k){Lt(N,k);function N(S,L,A){var R=k.call(this,L,A)||this;return R._module=S,R}return Object.defineProperty(N.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),N}(st.Hn);const q=et},675:(O,J,ut)=>{ut.d(J,{Z:()=>k,q:()=>et});var st=ut(642),Lt=function(){var N=function(S,L){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,R){A.__proto__=R}||function(A,R){for(var z in R)Object.prototype.hasOwnProperty.call(R,z)&&(A[z]=R[z])},N(S,L)};return function(S,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");N(S,L);function A(){this.constructor=S}S.prototype=L===null?Object.create(L):(A.prototype=L.prototype,new A)}}(),et;(function(N){N.Select="select",N.Hover="hover",N.Spacing="spacing",N.Target="target",N.Resize="resize"})(et||(et={}));var q=function(N){Lt(S,N);function S(){return N!==null&&N.apply(this,arguments)||this}return S.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(S.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"component",{get:function(){var L,A=this.get("component");return A||((L=this.get("componentView"))===null||L===void 0?void 0:L.model)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"componentView",{get:function(){var L,A=this.get("componentView");return A||((L=this.get("component"))===null||L===void 0?void 0:L.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"el",{get:function(){var L;return(L=this.componentView)===null||L===void 0?void 0:L.el},enumerable:!1,configurable:!0}),S.prototype.getBoxRect=function(L){var A=this,R=A.el,z=A.em,it=z.Canvas.getCanvasView(),Ct=this.get("boxRect");return Ct||(R&&it?it.getElBoxRect(R,L):{x:0,y:0,width:0,height:0})},S.prototype.getStyle=function(L){L===void 0&&(L={});var A=L.boxRect||this.getBoxRect(L),R=A.width,z=A.height,it=A.x,Ct=A.y;return{width:"".concat(R,"px"),height:"".concat(z,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(it,"px ").concat(Ct,"px")}},S.prototype.isType=function(L){return this.type===L},S}(st.Z);const k=q},858:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>st});const st={run:function(Lt){Lt.Components.clear(),Lt.Css.clear()}}},884:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>q});var st=ut(50),Lt=ut(668),et=ut(491);const q={run:function(k){(0,st.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=k,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(k){this.toggleMove(),this.disableDragger()},onKeyUp:function(k){(0,et.sN)(k)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(k){this.toggleDragger(1,k)},disableDragger:function(k){this.toggleDragger(0,k)},toggleDragger:function(k,N){var S=this,L=S.canvasModel,A=S.em,R=this.dragger,z=k?"add":"remove";this.getCanvas().classList[z]("".concat(this.ppfx,"is__grabbing")),R||(R=new Lt.Z({getPosition:function(){return{x:L.get("x"),y:L.get("y")}},setPosition:function(it){var Ct=it.x,Mt=it.y;L.set({x:Ct,y:Mt})},onStart:function(it,Ct){A.trigger("canvas:move:start",Ct)},onDrag:function(it,Ct){A.trigger("canvas:move",Ct)},onEnd:function(it,Ct){A.trigger("canvas:move:end",Ct)}}),this.dragger=R),k?R.start(N):R.stop()},toggleMove:function(k){var N=this.ppfx,S=k?"add":"remove",L=k?"on":"off",A={on:et.on,off:et.S1},R=this.getCanvas(),z=["".concat(N,"is__grab")];!k&&z.push("".concat(N,"is__grabbing")),z.forEach(function(it){return R.classList[S](it)}),A[L](document,"keyup",this.onKeyUp),A[L](R,"mousedown",this.enableDragger),A[L](document,"mouseup",this.disableDragger)}}},790:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>k,defineCommand:()=>et});var st=ut(346),Lt=function(){var N=function(S,L){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,R){A.__proto__=R}||function(A,R){for(var z in R)Object.prototype.hasOwnProperty.call(R,z)&&(A[z]=R[z])},N(S,L)};return function(S,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");N(S,L);function A(){this.constructor=S}S.prototype=L===null?Object.create(L):(A.prototype=L.prototype,new A)}}();function et(N){return N}var q=function(N){Lt(S,N);function S(L){var A=N.call(this,0)||this;A.config=L||{},A.em=A.config.em||{};var R=A.config.stylePrefix;return A.pfx=R,A.ppfx=A.config.pStylePrefix,A.hoverClass="".concat(R,"hover"),A.badgeClass="".concat(R,"badge"),A.plhClass="".concat(R,"placeholder"),A.freezClass="".concat(A.ppfx,"freezed"),A.canvas=A.em.Canvas,A.init(A.config),A}return S.prototype.onFrameScroll=function(L){},S.prototype.getCanvas=function(){return this.canvas.getElement()},S.prototype.getCanvasBody=function(){return this.canvas.getBody()},S.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},S.prototype.offset=function(L){var A=L.getBoundingClientRect();return{top:A.top+L.ownerDocument.body.scrollTop,left:A.left+L.ownerDocument.body.scrollLeft}},S.prototype.init=function(L){},S.prototype.callRun=function(L,A){A===void 0&&(A={});var R=this.id;if(L.trigger("run:".concat(R,":before"),A),A&&A.abort){L.trigger("abort:".concat(R),A);return}var z=A.sender||L,it=this.run(L,z,A);return L.trigger("run:".concat(R),it,A),L.trigger("run",R,it,A),it},S.prototype.callStop=function(L,A){A===void 0&&(A={});var R=this.id,z=A.sender||L;L.trigger("stop:".concat(R,":before"),A);var it=this.stop(L,z,A);return L.trigger("stop:".concat(R),it,A),L.trigger("stop",R,it,A),it},S.prototype.stopCommand=function(L){this.em.Commands.stop(this.id,L)},S.prototype.run=function(L,A,R){},S.prototype.stop=function(L,A,R){},S}(st.Hn);const k=q},180:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>q});var st=ut(50),Lt=function(k,N,S){if(S||arguments.length===2)for(var L=0,A=N.length,R;L<A;L++)(R||!(L in N))&&(R||(R=Array.prototype.slice.call(N,0,L)),R[L]=N[L]);return k.concat(R||Array.prototype.slice.call(N))},et={run:function(k,N,S){var L=this;S===void 0&&(S={});var A=[],R=S.component||k.getSelectedAll();return R=(0,st.isArray)(R)?Lt([],R,!0):[R],R.filter(Boolean).forEach(function(z){if(!z.get("removable"))return A.push(z),L.em.logWarning("The element is not removable",{component:z});z.remove()}),k.select(A),R}};const q=et},544:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>k});var st=ut(50),Lt=ut(668),et=function(){return et=Object.assign||function(N){for(var S,L=1,A=arguments.length;L<A;L++){S=arguments[L];for(var R in S)Object.prototype.hasOwnProperty.call(S,R)&&(N[R]=S[R])}return N},et.apply(this,arguments)},q="dmode";const k={run:function(N,S,L){var A=this;L===void 0&&(L={}),(0,st.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var R=L.target,z=L.event,it=L.mode,Ct=L.dragger,Mt=Ct===void 0?{}:Ct,Ht=R.getEl(),Ft=et({doc:Ht.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return A.guidesStatic},guidesTarget:function(){return A.guidesTarget}},Mt);this.setupGuides(),this.opts=L,this.editor=N,this.em=N.getModel(),this.target=R,this.isTran=it=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var xt=this.dragger;return xt?xt.setOptions(Ft):(xt=new Lt.Z(Ft),this.dragger=xt),z&&xt.start(z),this.toggleDrag(1),this.em.trigger("".concat(q,":start"),this.getEventOpts()),xt},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(N){var S=N.guide;S&&S.parentNode.removeChild(S)}),this.guides=[]},getGuidesContainer:function(){var N=this,S=this.guidesEl;if(!S){var L=this,A=L.editor,R=L.em,z=L.opts,it=A.getConfig().stylePrefix,Ct=document.createElement("div"),Mt=document.createElement("div"),Ht='<div class="'.concat(it,"guide-info__line ").concat(it,`danger-bg">
        <div class="`).concat(it,"guide-info__content ").concat(it,`danger-color"></div>
      </div>`);S=document.createElement("div"),S.className="".concat(it,"guides"),Ct.className="".concat(it,"guide-info ").concat(it,"guide-info__x"),Mt.className="".concat(it,"guide-info ").concat(it,"guide-info__y"),Ct.innerHTML=Ht,Mt.innerHTML=Ht,S.appendChild(Ct),S.appendChild(Mt),A.Canvas.getGlobalToolsEl().appendChild(S),this.guidesEl=S,this.elGuideInfoX=Ct,this.elGuideInfoY=Mt,this.elGuideInfoContentX=Ct.querySelector(".".concat(it,"guide-info__content")),this.elGuideInfoContentY=Mt.querySelector(".".concat(it,"guide-info__content")),R.on("canvas:update frame:scroll",(0,st.debounce)(function(){var Ft;N.updateGuides(),z.debug&&((Ft=N.guides)===null||Ft===void 0||Ft.forEach(function(xt){return N.renderGuide(xt)}))},200))}return S},getGuidesStatic:function(){var N=this,S=[],L=this.target.getEl(),A=L.parentNode,R=A===void 0?{}:A;return(0,st.each)(R.children,function(z){return S=S.concat(L!==z?N.getElementGuides(z):[])}),S.concat(this.getElementGuides(R))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(N){var S=this,L,A;(N||this.guides).forEach(function(R){var z=R.origin,it=L===z?A:S.getElementPos(z);L=z,A=it,(0,st.each)(S.getGuidePosUpdate(R,it),function(Ct,Mt){return R[Mt]=Ct}),R.originRect=it})},getGuidePosUpdate:function(N,S){var L={},A=S.top,R=S.height,z=S.left,it=S.width;switch(N.type){case"t":L.y=A;break;case"b":L.y=A+R;break;case"l":L.x=z;break;case"r":L.x=z+it;break;case"x":L.x=z+it/2;break;case"y":L.y=A+R/2;break}return L},renderGuide:function(N){N===void 0&&(N={});var S=N.guide||document.createElement("div"),L="px",A=N.active?2:1,R=S.children[0];return S.style="position: absolute; background-color: ".concat(N.active?"green":"red",";"),S.children.length||(R=document.createElement("div"),R.style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",S.appendChild(R)),N.y?(S.style.width="100%",S.style.height="".concat(A).concat(L),S.style.top="".concat(N.y).concat(L),S.style.left=0):(S.style.width="".concat(A).concat(L),S.style.height="100%",S.style.left="".concat(N.x).concat(L),S.style.top="0".concat(L)),!N.guide&&this.guidesContainer.appendChild(S),S},getElementPos:function(N){return this.editor.Canvas.getElementPos(N,{noScroll:1})},getElementGuides:function(N){var S=this,L=this.opts,A=this.getElementPos(N),R=A.top,z=A.height,it=A.left,Ct=A.width,Mt=[{type:"t",y:R},{type:"b",y:R+z},{type:"l",x:it},{type:"r",x:it+Ct},{type:"x",x:it+Ct/2},{type:"y",y:R+z/2}].map(function(Ht){return et(et({},Ht),{origin:N,originRect:A,guide:L.debug&&S.renderGuide(Ht)})});return Mt.forEach(function(Ht){var Ft;return(Ft=S.guides)===null||Ft===void 0?void 0:Ft.push(Ht)}),Mt},getTranslate:function(N,S){S===void 0&&(S="x");var L=0;return(N||"").split(" ").forEach(function(A){var R=A.trim(),z="translate".concat(S.toUpperCase(),"(");R.indexOf(z)===0&&(L=parseFloat(R.replace(z,"")))}),L},setTranslate:function(N,S,L){var A="translate".concat(S.toUpperCase(),"("),R="".concat(A).concat(L,")"),z=(N||"").split(" ").map(function(it){var Ct=it.trim();return Ct.indexOf(A)===0&&(it=R),it}).join(" ");return z.indexOf(A)<0&&(z+=" ".concat(R)),z},getPosition:function(){var N=this,S=N.target,L=N.isTran,A=S.getStyle(),R=A.left,z=A.top,it=A.transform,Ct=0,Mt=0;return L?(Ct=this.getTranslate(it),Mt=this.getTranslate(it,"y")):(Ct=parseFloat(R||0),Mt=parseFloat(z||0)),{x:Ct,y:Mt}},setPosition:function(N){var S=N.x,L=N.y,A=N.end,R=N.position,z=N.width,it=N.height,Ct=this,Mt=Ct.target,Ht=Ct.isTran,Ft=Ct.em,xt="px",_t=!A,qt="".concat(parseInt(S,10)).concat(xt),le="".concat(parseInt(L,10)).concat(xt),ce={};if(Ht){var te=Mt.getStyle().transform||"";te=this.setTranslate(te,"x",qt),te=this.setTranslate(te,"y",le),ce={transform:te,__p:_t},Mt.addStyle(ce,{avoidStore:!A})}else{var H={position:R,width:z,height:it},nt={left:qt,top:le,__p:_t};(0,st.keys)(H).forEach(function(B){var tt=H[B];tt&&(nt[B]=tt)}),ce=nt,Mt.addStyle(ce,{avoidStore:!A})}Ft==null||Ft.Styles.__emitCmpStyleUpdate(ce,{components:Ft.getSelected()})},_getDragData:function(){var N=this.target;return{target:N,parent:N.parent(),index:N.index()}},onStart:function(N){var S=this,L=S.target,A=S.editor,R=S.isTran,z=S.opts,it=z.center,Ct=z.onStart,Mt=A.Canvas,Ht=L.getStyle(),Ft="absolute",xt=[Ft,"relative"];if(Ct&&Ct(this._getDragData()),!R&&Ht.position!==Ft){var _t=Mt.offset(L.getEl()),qt=_t.left,le=_t.top,ce=_t.width,te=_t.height,H=L.parent(),nt=void 0;do{var B=H.getStyle();nt=xt.indexOf(B.position)>=0?H:null,H=H.parent()}while(H&&!nt);if(it){var tt=Mt.getMouseRelativeCanvas(N),mt=tt.x,V=tt.y;qt=mt,le=V}else if(nt){var Et=Mt.offset(nt.getEl());qt=qt-Et.left,le=le-Et.top}this.setPosition({x:qt,y:le,width:"".concat(ce,"px"),height:"".concat(te,"px"),position:Ft})}},onDrag:function(){var N=this,S=this,L=S.guidesTarget,A=S.opts,R=A.onDrag;this.updateGuides(L),A.debug&&L.forEach(function(z){return N.renderGuide(z)}),A.guidesInfo&&this.renderGuideInfo(L.filter(function(z){return z.active})),R&&R(this._getDragData())},onEnd:function(N,S,L){L===void 0&&(L={});var A=this,R=A.editor,z=A.opts,it=A.id,Ct=z.onEnd;Ct&&Ct(N,L,et(et({event:N},L),this._getDragData())),R.stopCommand(it),this.hideGuidesInfo(),this.em.trigger("".concat(q,":end"),this.getEventOpts())},hideGuidesInfo:function(){var N=this;["X","Y"].forEach(function(S){var L=N["elGuideInfo".concat(S)];L&&(L.style.display="none")})},renderGuideInfo:function(N){var S=this;N===void 0&&(N=[]);var L=this.guidesStatic;this.hideGuidesInfo(),N.forEach(function(A){var R=A.origin,z=A.x,it=S.getElementPos(R),Ct=(0,st.isUndefined)(z)?"y":"x",Mt=Ct==="y",Ht=it[Mt?"left":"top"],Ft=it.rect[Mt?"left":"top"],xt=Mt?Ht+it.width:Ht+it.height,_t=Mt?Ft+it.rect.width:Ft+it.rect.height,qt=S["elGuideInfo".concat(Ct.toUpperCase())],le=S["elGuideInfoContent".concat(Ct.toUpperCase())],ce=qt.style,te=L==null?void 0:L.filter(function(Bt){return Bt.type===A.type}).map(function(Bt){var Kt=Bt.originRect,zt=Kt.left,Ut=Kt.width,be=Kt.top,xe=Kt.height,oe=Mt?zt:be,ge=Mt?zt+Ut:be+xe;return{gap:ge<Ht?Ht-ge:oe-xt,guide:Bt}}).filter(function(Bt){return Bt.gap>0}).sort(function(Bt,Kt){return Bt.gap-Kt.gap}).map(function(Bt){return Bt.guide})[0];if(te){var H=te.originRect,nt=H.left,B=H.width,tt=H.top,mt=H.height,V=H.rect,Et=Mt?nt<it.left:tt<it.top,j=Mt?nt:tt,Rt=Mt?V.left:V.top,At=Mt?nt+B:tt+mt,ft=Mt?V.left+V.width:V.top+V.height,Wt=Mt?A.y:A.x,Jt=Et?At:xt,pe="".concat(Wt,"px"),Ot=Et?Ht-At:j-xt,jt=Et?Ft-ft:Rt-_t;ce.display="",ce[Mt?"top":"left"]=pe,ce[Mt?"left":"top"]="".concat(Jt,"px"),ce[Mt?"width":"height"]="".concat(Ot,"px"),le.innerHTML="".concat(Math.round(jt),"px"),S.em.trigger("".concat(q,":active"),et(et({},S.getEventOpts()),{guide:A,guidesStatic:L,matched:te,posFirst:Wt,posSecond:Jt,size:Ot,sizeRaw:jt,elGuideInfo:qt,elGuideInfoCnt:le}))}})},toggleDrag:function(N){var S=this,L=S.ppfx,A=S.editor,R=N?"add":"remove",z=["".concat(L,"is__grabbing")],it=A.Canvas,Ct=it.getBody();z.forEach(function(Mt){return Ct.classList[R](Mt)}),it[N?"startAutoscroll":"stopAutoscroll"]()}}},236:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>st});const st={run:function(Lt){if(Lt.Canvas.hasFocus()){var et=[];Lt.getSelectedAll().forEach(function(q){var k=q.components(),N=k&&k.filter(function(S){return S.get("selectable")})[0];N&&et.push(N)}),et.length&&Lt.select(et)}}}},368:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>st});const st={run:function(Lt,et,q){if(q===void 0&&(q={}),!(!Lt.Canvas.hasFocus()&&!q.force)){var k=[];Lt.getSelectedAll().forEach(function(N){for(var S=N.parent();S&&!S.get("selectable");)S=S.parent();S&&k.push(S)}),k.length&&Lt.select(k)}}}},243:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>st});const st={run:function(Lt){if(Lt.Canvas.hasFocus()){var et=[];Lt.getSelectedAll().forEach(function(q){var k=q.parent();if(k){var N=k.components().length,S=0,L=0,A;do S++,L=q.index()+S,A=L<=N?k.getChildAt(L):null;while(A&&!A.get("selectable"));et.push(A||q)}}),et.length&&Lt.select(et)}}}},400:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>st});const st={run:function(Lt){if(Lt.Canvas.hasFocus()){var et=[];Lt.getSelectedAll().forEach(function(q){var k=q.parent();if(k){var N=0,S=0,L;do N++,S=q.index()-N,L=S>=0?k.getChildAt(S):null;while(L&&!L.get("selectable"));et.push(L||q)}}),et.length&&Lt.select(et)}}}},910:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>Lt});var st=ut(50);const Lt={run:function(et,q,k){k===void 0&&(k={});var N=k.target,S=[];if(!N.get("styles"))return S;var L=N.get("type"),A=et.Pages.getAllWrappers(),R=(0,st.flatten)(A.map(function(it){return it.findType(L)})).length;if(!R){var z=et.CssComposer.getAll();S=z.filter(function(it){return it.get("group")==="cmp:".concat(L)}),z.remove(S)}return S}}},744:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>Lt});var st=function(et,q,k){if(k||arguments.length===2)for(var N=0,S=q.length,L;N<S;N++)(L||!(N in q))&&(L||(L=Array.prototype.slice.call(q,0,N)),L[N]=q[N]);return et.concat(L||Array.prototype.slice.call(q))};const Lt={run:function(et){var q=et.getModel(),k=st([],et.getSelectedAll(),!0);k.length&&q.set("clipboard",k)}}},517:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>q});var st=ut(50),Lt=ut(895),et=ut(407);const q=(0,st.extend)({},et.default,{init:function(){(0,st.bindAll)(this,"startDelete","stopDelete","onDelete"),this.hoverClass=this.pfx+"hover-delete",this.badgeClass=this.pfx+"badge-red"},enable:function(){this.$el.find("*").mouseover(this.startDelete).mouseout(this.stopDelete).click(this.onDelete)},startDelete:function(k){k.stopPropagation();var N=(0,Lt.default)(k.target);N.data("model").get("removable")&&(N.addClass(this.hoverClass),this.attachBadge(N.get(0)))},stopDelete:function(k){k.stopPropagation();var N=(0,Lt.default)(k.target);N.removeClass(this.hoverClass),this.badge&&this.badge.css({left:-1e3,top:-1e3})},onDelete:function(k){k.stopPropagation();var N=(0,Lt.default)(k.target);N.data("model").get("removable")&&(N.data("model").destroy(),this.removeBadge(),this.clean())},updateBadgeLabel:function(k){this.badge.html("Remove "+k.getName())}})},457:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>Lt});var st=ut(491);const Lt={run:function(et,q,k){var N=this;k===void 0&&(k={}),q&&q.set&&q.set("active",0);var S=et.getConfig(),L=et.Modal,A=S.stylePrefix;if(this.cm=et.CodeManager||null,!this.editors){var R=this.buildEditor("htmlmixed","hopscotch","HTML"),z=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=R.model,this.cssEditor=z.model;var it=(0,st.ut)("div",{class:"".concat(A,"export-dl")});it.appendChild(R.el),it.appendChild(z.el),this.editors=it}L.open({title:S.textViewCode,content:this.editors}).getModel().once("change:open",function(){return et.stopCommand("".concat(N.id))}),this.htmlEditor.setContent(et.getHtml(k.optsHtml)),this.cssEditor.setContent(et.getCss(k.optsCss))},stop:function(et){var q=et.Modal;q&&q.close()},buildEditor:function(et,q,k){var N=this.em.CodeManager,S=N.createViewer({label:k,codeName:et,theme:q}),L=new N.EditorView({model:S,config:N.getConfig()}).render().el;return{model:S,el:L}}}},975:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>Lt});var st=ut(50);const Lt={isEnabled:function(){var et=document;return!!(et.fullscreenElement||et.webkitFullscreenElement||et.mozFullScreenElement)},enable:function(et){var q="";return et.requestFullscreen?et.requestFullscreen():et.webkitRequestFullscreen?(q="webkit",et.webkitRequestFullscreen()):et.mozRequestFullScreen?(q="moz",et.mozRequestFullScreen()):et.msRequestFullscreen&&et.msRequestFullscreen(),q},disable:function(){var et=document;this.isEnabled()&&(et.exitFullscreen?et.exitFullscreen():et.webkitExitFullscreen?et.webkitExitFullscreen():et.mozCancelFullScreen?et.mozCancelFullScreen():et.msExitFullscreen&&et.msExitFullscreen())},fsChanged:function(et){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(et||"","fullscreenchange"),this.fsChanged))},run:function(et,q,k){k===void 0&&(k={}),this.sender=q;var N=k.target,S=(0,st.isElement)(N)?N:document.querySelector(N),L=this.enable(S||et.getContainer());this.fsChanged=this.fsChanged.bind(this,L),document.addEventListener(L+"fullscreenchange",this.fsChanged),et.trigger("change:canvasOffset")},stop:function(et,q){q&&q.set&&q.set("active",!1),this.disable(),et&&et.trigger("change:canvasOffset")}}},191:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>N});var st=ut(50),Lt=ut(895),et=ut(491),q=ut(407),k=ut(189);const N=(0,st.extend)({},k.default,q.default,{init:function(S){q.default.init.apply(this,arguments),(0,st.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=S,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var S=[],L=0;L<arguments.length;L++)S[L]=arguments[L];q.default.enable.apply(this,S),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var A=this.$wrapper;A.css("cursor","move"),A.on("mousedown",this.initSorter),A.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(S){var L=(0,Lt.default)(S.target).data("model"),A=L.get("draggable");A&&(this.cacheEl=null,this.startSelectPosition(S.target,this.frameEl.contentDocument),this.sorter.draggable=A,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,et.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(S){var L=S.get("draggable");if(L){this.cacheEl=null;var A=S.view.el;this.startSelectPosition(A,this.frameEl.contentDocument),this.sorter.draggable=L,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,et.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(S){this.cacheEl=null;var L=S[S.length-1],A=this.em.getCurrentFrame(),R=L.getEl(A==null?void 0:A.model),z=R.ownerDocument;this.startSelectPosition(R,z,{onStart:this.onStart}),this.sorter.draggable=L.get("draggable"),this.sorter.toMove=S,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,et.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,et.S1)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,et.S1)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(S,L){},rollback:function(S,L){var A=S.which||S.keyCode;(A==27||L)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,Lt.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,Lt.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var S=[],L=0;L<arguments.length;L++)S[L]=arguments[L];q.default.stop.apply(this,S),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var A=this.$wrapper;A.css("cursor","").unbind().removeClass(this.noSelClass)}})},912:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>et});var st=ut(50),Lt=ut(491);const et={open:function(q){var k=this,N=this,S=N.editor,L=N.title,A=N.config,R=N.am,z=A.custom;if((0,st.isFunction)(z.open))return z.open(R.__customData());var it=S.Modal;it.open({title:L,content:q}).onceClose(function(){return S.stopCommand(k.id)})},close:function(){var q=this.config.custom;if((0,st.isFunction)(q.close))return q.close(this.am.__customData());var k=this.editor.Modal;k&&k.close()},run:function(q,k,N){N===void 0&&(N={});var S=q.AssetManager,L=S.getConfig(),A=N.types,R=A===void 0?[]:A,z=N.accept,it=N.select;if(this.title=N.modalTitle||q.t("assetManager.modalTitle")||"",this.editor=q,this.config=L,this.am=S,S.setTarget(N.target),S.onClick(N.onClick),S.onDblClick(N.onDblClick),S.onSelect(N.onSelect),S.__behaviour({select:it,types:R,options:N}),L.custom)this.rendered=this.rendered||(0,Lt.ut)("div"),this.rendered.className="".concat(L.stylePrefix,"custom-wrp"),S.__behaviour({container:this.rendered}),S.__trgCustom();else{if(!this.rendered||R){var Ct=S.getAll().filter(function(Ht){return Ht});R&&R.length&&(Ct=Ct.filter(function(Ht){return R.indexOf(Ht.get("type"))!==-1})),S.render(Ct),this.rendered=S.getContainer()}if(z){var Mt=this.rendered.querySelector("input#".concat(L.stylePrefix,"uploadFile"));Mt&&Mt.setAttribute("accept",z)}}return this.open(this.rendered),this},stop:function(q){this.editor=q,this.close(this.rendered)}}},117:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>et});var st=ut(50),Lt=ut(491);const et={open:function(){var q=this,k=q.container,N=q.editor,S=q.bm,L=q.config,A=L.custom,R=L.appendTo;if((0,st.isFunction)(A.open))return A.open(S.__customData());if(this.firstRender&&!R){var z="views-container",it=N.Panels,Ct=it.getPanel(z)||it.addPanel({id:z});Ct.set("appendContent",k).trigger("change:appendContent"),A||k.appendChild(S.render())}k&&(k.style.display="block")},close:function(){var q=this,k=q.container,N=q.config,S=N.custom;if((0,st.isFunction)(S.close))return S.close(this.bm.__customData());k&&(k.style.display="none")},run:function(q){var k=q.Blocks;this.config=k.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,Lt.ut)("div"),this.editor=q,this.bm=k;var N=this.container;k.__behaviour({container:N}),this.config.custom&&k.__trgCustom(),this.open()},stop:function(){this.close()}}},614:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>st});const st={run:function(Lt){var et=Lt.LayerManager,q=Lt.Panels,k=et.getConfig();if(!k.appendTo){if(!this.layers){var N="views-container",S=document.createElement("div"),L=q.getPanel(N)||q.addPanel({id:N});k.custom?et.__trgCustom({container:S}):S.appendChild(et.render()),L.set("appendContent",S).trigger("change:appendContent"),this.layers=S}this.layers.style.display="block"}},stop:function(){var Lt=this.layers;Lt&&(Lt.style.display="none")}}},801:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>Lt});var st=ut(895);const Lt={run:function(et,q){if(this.sender=q,!this.$cnt){var k=et.getConfig(),N=et.Panels,S=et.DeviceManager,L=et.SelectorManager,A=et.StyleManager,R="change:appendContent",z=(0,st.default)("<div></div>"),it=(0,st.default)("<div></div>"),Ct=(0,st.default)("<div></div>"),Mt=(0,st.default)("<div></div>");if(this.$cnt=z,this.$cntInner=it,it.append(Ct),it.append(Mt),z.append(it),S&&k.showDevices){var Ht=N.addPanel({id:"devices-c"}),Ft=S.render();Ht.set("appendContent",Ft).trigger(R)}var xt=L.getConfig();xt.custom?L.__trgCustom({container:Ct.get(0)}):xt.appendTo||Ct.append(L.render([])),this.sm=A;var _t=A.getConfig(),qt=_t.stylePrefix;this.$header=(0,st.default)('<div class="'.concat(qt,'header">').concat(et.t("styleManager.empty"),"</div>")),z.append(this.$header),_t.custom?A.__trgCustom({container:Mt.get(0)}):_t.appendTo||Mt.append(A.render());var le="views-container",ce=N.getPanel(le)||N.addPanel({id:le});ce.set("appendContent",z).trigger(R);var te=et.getModel();this.listenTo(te,A.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var et=this,q=et.sender,k=et.sm,N=et.$cntInner,S=et.$header;q&&q.get&&!q.get("active")||!k||(k.getSelected()?(N==null||N.show(),S==null||S.hide()):(N==null||N.hide(),S==null||S.show()))},stop:function(){var et,q;(et=this.$cntInner)===null||et===void 0||et.hide(),(q=this.$header)===null||q===void 0||q.hide()}}},395:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>Lt});var st=ut(895);const Lt={run:function(et,q){this.sender=q;var k=et.getModel(),N=et.Config,S=N.stylePrefix,L=et.TraitManager,A=L.getConfig(),R;if(!A.appendTo){if(!this.$cn){this.$cn=(0,st.default)("<div></div>"),this.$cn2=(0,st.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,st.default)("<div>").append('<div class="'.concat(A.stylePrefix,'header">').concat(k.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),A.custom?L.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(S,'traits-label">').concat(k.t("traitManager.label"),"</div>")),this.$cn2.append(L.render()));var z=et.Panels;z.getPanel("views-container")?R=z.getPanel("views-container"):R=z.addPanel({id:"views-container"}),R==null||R.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=et.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var et=this.sender;et&&et.get&&!et.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},98:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>Lt});var st=ut(50);const Lt={run:function(et,q,k){k===void 0&&(k={});var N=et.getModel(),S=N.get("clipboard"),L=et.getSelected();S&&L&&(et.getSelectedAll().forEach(function(A){var R=A.collection;if(R){var z,it=A.index()+1,Ct={at:it,action:k.action||"paste-component"};if((0,st.contains)(S,A)&&A.get("copyable"))z=R.add(A.clone(),Ct);else{var Mt=S.filter(function(Ft){return Ft.get("copyable")}),Ht=Mt.filter(function(Ft){return et.Components.canMove(A.parent(),Ft).result});z=R.add(Ht.map(function(Ft){return Ft.clone()}),Ct)}z=(0,st.isArray)(z)?z:[z],z.forEach(function(Ft){return et.trigger("component:paste",Ft)})}}),L.emitUpdate())}}},129:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>q});var st=ut(50),Lt=function(k,N,S){if(S||arguments.length===2)for(var L=0,A=N.length,R;L<A;L++)(R||!(L in N))&&(R||(R=Array.prototype.slice.call(N,0,L)),R[L]=N[L]);return k.concat(R||Array.prototype.slice.call(N))},et="core:component-outline";const q={getPanels:function(k){return this.panels||(this.panels=k.Panels.getPanels()),this.panels},preventDrag:function(k){k.abort=1},tglEffects:function(k){var N=this.em,S=k?"on":"off";if(N){var L=N.Canvas,A=L.getBody(),R=L.getToolbarEl();R&&(R.style.display=k?"none":"");var z=A.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,st.each)(z,function(it){return it.style.pointerEvents=k?"all":""}),N[S]("run:tlb-move:before",this.preventDrag)}},run:function(k,N){var S=this;this.sender=N,this.selected=Lt([],k.getSelectedAll(),!0),k.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=k.Commands.isActive(et)),this.shouldRunSwVisibility&&k.stopCommand(et),k.getModel().stopDefault();var L=this.getPanels(k),A=k.Canvas.getElement(),R=k.getEl(),z=k.Config.stylePrefix;if(!this.helper){var it=document.createElement("span");it.className="".concat(z,"off-prv fa fa-eye-slash"),R.appendChild(it),it.onclick=function(){return S.stopCommand()},this.helper=it}this.helper.style.display="inline-block",L.forEach(function(Mt){return Mt.set("visible",!1)});var Ct=A.style;Ct.width="100%",Ct.height="100%",Ct.top="0",Ct.left="0",Ct.padding="0",Ct.margin="0",k.refresh(),this.tglEffects(1)},stop:function(k){var N=this,S=N.sender,L=S===void 0?{}:S,A=N.selected;L.set&&L.set("active",0);var R=this.getPanels(k);this.shouldRunSwVisibility&&(k.runCommand(et),this.shouldRunSwVisibility=!1),k.getModel().runDefault(),R.forEach(function(it){return it.set("visible",!0)});var z=k.Canvas.getElement();z.setAttribute("style",""),A&&k.select(A),delete this.selected,this.helper&&(this.helper.style.display="none"),k.refresh(),this.tglEffects()}}},116:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>Lt});var st=function(){return st=Object.assign||function(et){for(var q,k=1,N=arguments.length;k<N;k++){q=arguments[k];for(var S in q)Object.prototype.hasOwnProperty.call(q,S)&&(et[S]=q[S])}return et},st.apply(this,arguments)};const Lt={run:function(et,q,k){var N=k||{},S=et.Canvas,L=S.getCanvasView(),A=st({appendTo:S.getResizerEl(),prefix:et.getConfig().stylePrefix,posFetcher:L.getElementPos.bind(L),mousePosFetcher:S.getMouseRelativePos},N.options||{}),R=this.canvasResizer;return(!R||N.forceNew)&&(this.canvasResizer=new et.Utils.Resizer(A),R=this.canvasResizer),R.setOptions(A,!0),R.blur(),R.focus(N.el),R},stop:function(){var et;(et=this.canvasResizer)===null||et===void 0||et.blur()}}},407:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>te});var st=ut(50),Lt=ut(346),et=function(){var H=function(nt,B){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tt,mt){tt.__proto__=mt}||function(tt,mt){for(var V in mt)Object.prototype.hasOwnProperty.call(mt,V)&&(tt[V]=mt[V])},H(nt,B)};return function(nt,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");H(nt,B);function tt(){this.constructor=nt}nt.prototype=B===null?Object.create(B):(tt.prototype=B.prototype,new tt)}}(),q=function(H){et(nt,H);function nt(){return H!==null&&H.apply(this,arguments)||this}return nt.prototype.defaults=function(){return{command:"",attributes:{}}},nt}(Lt.Hn);const k=q;var N=function(){var H=function(nt,B){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tt,mt){tt.__proto__=mt}||function(tt,mt){for(var V in mt)Object.prototype.hasOwnProperty.call(mt,V)&&(tt[V]=mt[V])},H(nt,B)};return function(nt,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");H(nt,B);function tt(){this.constructor=nt}nt.prototype=B===null?Object.create(B):(tt.prototype=B.prototype,new tt)}}(),S=function(H){N(nt,H);function nt(){return H!==null&&H.apply(this,arguments)||this}return nt}(Lt.FE);const L=S;S.prototype.model=k;var A=ut(330),R=function(){var H=function(nt,B){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tt,mt){tt.__proto__=mt}||function(tt,mt){for(var V in mt)Object.prototype.hasOwnProperty.call(mt,V)&&(tt[V]=mt[V])},H(nt,B)};return function(nt,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");H(nt,B);function tt(){this.constructor=nt}nt.prototype=B===null?Object.create(B):(tt.prototype=B.prototype,new tt)}}(),z=function(){return z=Object.assign||function(H){for(var nt,B=1,tt=arguments.length;B<tt;B++){nt=arguments[B];for(var mt in nt)Object.prototype.hasOwnProperty.call(nt,mt)&&(H[mt]=nt[mt])}return H},z.apply(this,arguments)},it=function(H){R(nt,H);function nt(B){var tt=H.call(this,B)||this;return tt.em=B.config.em,tt}return nt.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},nt.prototype.attributes=function(){return this.model.get("attributes")},nt.prototype.handleClick=function(B){B.preventDefault(),B.stopPropagation();var tt=this.em,mt=tt.Canvas.getFrameEl().getBoundingClientRect(),V=mt.left,Et=mt.top,j=z(z({},B),{clientX:B.clientX-V,clientY:B.clientY-Et});tt.trigger("toolbar:run:before",{event:j}),this.execCommand(j)},nt.prototype.execCommand=function(B){var tt=this,mt=tt.em,V=tt.model,Et={event:B},j=V.get("command"),Rt=mt.Editor;(0,st.isFunction)(j)&&j(Rt,null,Et),(0,st.isString)(j)&&Rt.runCommand(j,Et)},nt.prototype.render=function(){var B=this,tt=B.em,mt=B.$el,V=B.model,Et=V.get("id"),j=V.get("label"),Rt=tt.getConfig().stylePrefix;return mt.addClass("".concat(Rt,"toolbar-item")),Et&&mt.addClass("".concat(Rt,"toolbar-item__").concat(Et)),j&&mt.append(j),this},nt}(Lt.G7);const Ct=it;var Mt=function(){var H=function(nt,B){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tt,mt){tt.__proto__=mt}||function(tt,mt){for(var V in mt)Object.prototype.hasOwnProperty.call(mt,V)&&(tt[V]=mt[V])},H(nt,B)};return function(nt,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");H(nt,B);function tt(){this.constructor=nt}nt.prototype=B===null?Object.create(B):(tt.prototype=B.prototype,new tt)}}(),Ht=function(H){Mt(nt,H);function nt(B){var tt=H.call(this,B)||this,mt=B.em;return tt.em=mt,tt.config={em:mt},tt.listenTo(tt.collection,"reset",tt.render),tt}return nt.prototype.onRender=function(){var B=this.em.config.stylePrefix;this.el.className="".concat(B,"toolbar-items")},nt}(A.Z);const Ft=Ht;Ht.prototype.itemView=Ct;var xt=ut(491),_t=ut(163),qt=ut(675),le=function(){return le=Object.assign||function(H){for(var nt,B=1,tt=arguments.length;B<tt;B++){nt=arguments[B];for(var mt in nt)Object.prototype.hasOwnProperty.call(nt,mt)&&(H[mt]=nt[mt])}return H},le.apply(this,arguments)},ce;const te={init:function(){this.onSelect=(0,st.debounce)(this.onSelect,0),(0,st.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),ce=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(H){var nt=this,B=this.em,tt=B.getConfig().listenToEl,mt=B.getContainer().parentNode,V=H?"on":"off",Et={on:xt.on,off:xt.S1};!tt.length&&mt&&tt.push(mt);var j=function(Rt,At){Et[V](At,"mouseover",nt.onHover),Et[V](At,"mouseleave",nt.onOut),Et[V](At,"click",nt.onClick),Et[V](Rt,"scroll",nt.onFrameScroll,!0),Et[V](Rt,"resize",nt.onFrameResize)};Et[V](window,"resize",this.onFrameUpdated),Et[V](tt,"scroll",this.onContainerChange),B[V]("component:toggled component:update undo redo",this.onSelect,this),B[V]("change:componentHovered",this.onHovered,this),B[V]("component:resize styleable:change component:input",this.updateGlobalPos,this),B[V]("component:update:toolbar",this._upToolbar,this),B[V]("change:canvasOffset",this.updateAttached,this),B[V]("frame:updated",this.onFrameUpdated,this),B[V]("canvas:updateTools",this.onFrameUpdated,this),B.Canvas.getFrames().forEach(function(Rt){var At=Rt.view,ft=At==null?void 0:At.getWindow();ft&&j(ft,At==null?void 0:At.getBody())})},onHover:function(H){H.stopPropagation();var nt=this.em,B=H.target,tt=(0,_t.getComponentView)(B),mt=tt==null?void 0:tt.frameView,V=tt==null?void 0:tt.model;if(!V)for(var Et=B.parentNode;!V&&Et&&!(0,xt.Mx)(Et);)V=(0,_t.getComponentModel)(Et),Et=Et.parentNode;this.currentDoc=B.ownerDocument,nt.setHovered(V,{useValid:!0}),mt&&nt.setCurrentFrame(mt)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(H,nt){var B=this,tt,mt={};nt?(tt=nt.views)===null||tt===void 0||tt.forEach(function(V){var Et=V.el,j=B.getElementPos(Et);mt={el:Et,pos:j,component:nt,view:(0,_t.getViewEl)(Et)},Et.ownerDocument===B.currentDoc&&(B.elHovered=mt),B.updateToolsLocal(mt)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(V){var Et=V.view,j=Et&&Et.getToolsEl();j&&B.toggleToolsEl(0,0,{el:j})}))},onSelect:function(){var H=this.em,nt=H.getSelected(),B=H.getCurrentFrame(),tt=nt&&nt.getView(B==null?void 0:B.model),mt=tt&&tt.el,V={};if(mt&&(0,xt.pn)(mt)){var Et=this.getElementPos(mt);V={el:mt,pos:Et,component:nt,view:(0,_t.getViewEl)(mt)}}this.elSelected=V,this.updateToolsGlobal(),this.updateLocalPos(V),this.initResize(nt)},updateGlobalPos:function(){var H=this.getElSelected();H.el&&(H.pos=this.getElementPos(H.el),this.updateToolsGlobal())},updateLocalPos:function(H){var nt=this.getElHovered();nt.el&&(nt.pos=this.getElementPos(nt.el),this.updateToolsLocal(H))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(H,nt,B){B===void 0&&(B={});var tt=B.el||this.canvas.getToolsEl(nt);return tt&&(tt.style.display=H?"":"none"),tt||{}},showElementOffset:function(H,nt,B){B===void 0&&(B={}),ce&&this.editor.runCommand("show-offset",{el:H,elPos:nt,view:B.view,force:1,top:0,left:0})},hideElementOffset:function(H){this.editor.stopCommand("show-offset",{view:H})},showFixedElementOffset:function(H,nt){this.editor.runCommand("show-offset",{el:H,elPos:nt,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(H){this.canvas.getHighlighter(H).style.opacity=0},onClick:function(H){H.stopPropagation(),H.preventDefault();var nt=this.em;if(nt.get("_cmpDrag"))return nt.set("_cmpDrag");var B=H.target,tt=(0,_t.getComponentModel)(B);if(!tt)for(var mt=B.parentNode;!tt&&mt&&!(0,xt.Mx)(mt);)tt=(0,_t.getComponentModel)(mt),mt=mt.parentNode;if(tt){if(nt.isEditing()&&!tt.get("textable")&&tt.isChildOf("text"))return;this.select(tt,H)}},select:function(H,nt){nt===void 0&&(nt={}),H&&(this.editor.select(H,{event:nt,useValid:!0}),this.initResize(H))},updateBadge:function(H,nt,B){B===void 0&&(B={});var tt=this.canvas,mt=(0,_t.getComponentModel)(H),V=this.getBadge(B),Et=V.style;if(!mt||!mt.get("badgable")){Et.display="none";return}if(!B.posOnly){var j=this.canvas.getConfig(),Rt=mt.getIcon(),At=j.pStylePrefix||"",ft="".concat(At,"badge"),Wt=j.customBadgeLabel,Jt="".concat(Rt?'<div class="'.concat(ft,'__icon">').concat(Rt,"</div>"):"",`
        <div class="`).concat(ft,'__name">').concat(mt.getName(),"</div>");V.innerHTML=Wt?Wt(mt):Jt}var pe="px";Et.display="block";var Ot=tt.getTargetToElementFixed(H,V,{pos:nt}),jt=Ot.top,Bt=B.leftOff<0?-B.leftOff:0;Et.top=jt+pe,Et.left=Bt+pe},showHighlighter:function(H){this.canvas.getHighlighter(H).style.opacity=""},initResize:function(H){var nt=this,B=nt.em,tt=nt.canvas,mt=B.Editor,V=!(0,st.isElement)(H)&&(0,xt.o5)(H)?H:B.getSelected(),Et=V==null?void 0:V.get("resizable"),j=qt.q.Resize,Rt=tt.hasCustomSpot(j);if(tt.removeSpots({type:j}),V&&Et){tt.addSpot({type:j,component:V});var At=(0,st.isElement)(H)?H:V.getEl();if(Rt||!At)return;var ft,Wt=B.config,Jt=Wt.stylePrefix||"",pe="".concat(Jt,"resizing"),Ot=function(Bt,Kt,zt){var Ut=zt.docs;Ut&&Ut.forEach(function(be){var xe=be.body,oe=xe.className||"";xe.className=(Bt=="add"?"".concat(oe," ").concat(pe):oe.replace(pe,"")).trim()})},jt=le({onStart:function(Bt,Kt){Kt===void 0&&(Kt={});var zt=Kt.el,Ut=Kt.config,be=Kt.resizer,xe=Ut.keyHeight,oe=Ut.keyWidth,ge=Ut.currentUnit,Ke=Ut.keepAutoHeight,gr=Ut.keepAutoWidth;Ot("add",Bt,Kt),ft=B.Styles.getModelToStyle(V),tt.toggleFramesEvents(!1);var fr=getComputedStyle(zt),er=ft.getStyle(),ae=er[oe];Ut.autoWidth=gr&&ae==="auto",isNaN(parseFloat(ae))&&(ae=fr[oe]);var T=er[xe];Ut.autoHeight=Ke&&T==="auto",isNaN(parseFloat(T))&&(T=fr[xe]),be.startDim.w=parseFloat(ae),be.startDim.h=parseFloat(T),ce=!1,ge&&(Ut.unitHeight=(0,_t.getUnitFromValue)(T),Ut.unitWidth=(0,_t.getUnitFromValue)(ae))},onMove:function(){mt.trigger("component:resize")},onEnd:function(Bt,Kt){Ot("remove",Bt,Kt),mt.trigger("component:resize"),tt.toggleFramesEvents(!0),ce=!0},updateTarget:function(Bt,Kt,zt){if(zt===void 0&&(zt={}),!!ft){var Ut=zt.store,be=zt.selectedHandler,xe=zt.config,oe=xe.keyHeight,ge=xe.keyWidth,Ke=xe.autoHeight,gr=xe.autoWidth,fr=xe.unitWidth,er=xe.unitHeight,ae=["tc","bc"].indexOf(be)>=0,T=["cl","cr"].indexOf(be)>=0,F={};if(!ae){var Q=tt.getBody().offsetWidth,gt=Kt.w<Q?Kt.w:Q;F[ge]=gr?"auto":"".concat(gt).concat(fr)}T||(F[oe]=Ke?"auto":"".concat(Kt.h).concat(er)),B.getDragMode(V)&&(F.top="".concat(Kt.t).concat(er),F.left="".concat(Kt.l).concat(fr));var Pt=le(le({},F),{__p:!Ut});ft.addStyle(Pt,{avoidStore:!Ut}),B.Styles.__emitCmpStyleUpdate(Pt,{components:B.getSelected()})}}},(0,_t.isObject)(Et)?Et:{});this.resizer=mt.runCommand("resize",{el:At,options:jt,force:1})}else{if(Rt)return;mt.stopCommand("resize"),this.resizer=null}},updateToolbar:function(H){var nt=this.canvas,B=this.config.em,tt=H===B?B.getSelected():H,mt=nt.getToolbarEl(),V=mt.style,Et=tt.get("toolbar"),j=B.config.showToolbar,Rt=!nt.hasCustomSpot(qt.q.Select);if(tt&&j&&Et&&Et.length&&Rt){if(V.display="",!this.toolbar){mt.innerHTML="",this.toolbar=new L(Et);var At=new Ft({collection:this.toolbar,em:B});mt.appendChild(At.render().el)}this.toolbar.reset(Et),V.top="-100px",V.left="0"}else V.display="none"},updateToolbarPos:function(H){var nt="px",B=this.canvas.getToolbarEl().style;B.top="".concat(H.top).concat(nt),B.left="".concat(H.left).concat(nt),B.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(H){return H===void 0&&(H={}),this.canvas.getBadgeEl(H.view)},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refreshSpots()},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(H){return H&&H.get("status")==="selected"},updateToolsLocal:function(H){var nt=this.em.getConfig(),B=H||this.getElHovered(),tt=B.el,mt=B.pos,V=B.view,Et=B.component;if(!tt){this.lastHovered=0;return}var j=Et.get("hoverable"),Rt=this.lastHovered!==tt,At=Rt?{}:{posOnly:1},ft=this.canvas.hasCustomSpot(qt.q.Hover);Rt&&j&&(this.lastHovered=tt,ft?this.hideHighlighter(V):this.showHighlighter(V),this.showElementOffset(tt,mt,{view:V})),this.isCompSelected(Et)&&(this.hideHighlighter(V),!nt.showOffsetsSelected&&this.hideElementOffset(V));var Wt="px",Jt=this.toggleToolsEl(1,V),pe=Jt.style,Ot=this.canvas.canvasRectOffset(tt,mt),jt=Ot.top,Bt=Ot.left;!ft&&this.updateBadge(tt,mt,le(le({},At),{view:V,topOff:jt,leftOff:Bt})),pe.top=jt+Wt,pe.left=Bt+Wt,pe.width=mt.width+Wt,pe.height=mt.height+Wt,this._trgToolUp("local",{component:Et,el:Jt,top:jt,left:Bt,width:mt.width,height:mt.height})},_upToolbar:(0,st.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(H,nt){nt===void 0&&(nt={}),this.em.trigger("canvas:tools:update",le({type:H},nt))},updateToolsGlobal:function(H){H===void 0&&(H={});var nt=this.getElSelected(),B=nt.el,tt=nt.pos,mt=nt.component;if(!B){this.toggleToolsEl(),this.lastSelected=0;return}var V=this.canvas,Et=this.lastSelected!==B;(Et||H.force)&&(this.lastSelected=B,this.updateToolbar(mt));var j="px",Rt=this.toggleToolsEl(1),At=Rt.style,ft=V.getTargetToElementFixed(B,V.getToolbarEl(),{pos:tt}),Wt=ft.canvasOffsetTop,Jt=ft.canvasOffsetLeft;At.top=Wt+j,At.left=Jt+j,At.width=tt.width+j,At.height=tt.height+j,this.updateToolbarPos({top:ft.top,left:ft.left}),this._trgToolUp("global",{component:mt,el:Rt,top:Wt,left:Jt,width:tt.width,height:tt.height})},updateAttached:(0,st.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,st.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(H){return this.canvas.getCanvasView().getElementPos(H,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(H){H&&H.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(H){(0,_t.hasWin)()&&(this.editor=H&&H.get("Editor"),this.enable())},stop:function(H,nt,B){if(B===void 0&&(B={}),!!(0,_t.hasWin)()){var tt=this,mt=tt.em,V=tt.editor;this.onHovered(),this.stopSelectComponent(),!B.preserveSelected&&mt.setSelected(),this.toggleToolsEl(),V&&V.stopCommand("resize")}}}},189:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>Lt});var st=ut(895);const Lt={startSelectPosition:function(et,q,k){var N=this;k===void 0&&(k={}),this.isPointed=!1;var S=this.em.Utils,L=et.ownerDocument.body;S&&!this.sorter&&(this.sorter=new S.Sorter({container:L,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:q,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return N.em.getZoomDecimal()}})),k.onStart&&(this.sorter.onStart=k.onStart),et&&this.sorter.startSort(et,{container:L})},getOffsetDim:function(){var et=this.offset(this.canvas.getFrameEl()),q=this.offset(this.canvas.getElement()),k=et.top-q.top,N=et.left-q.left;return{top:k,left:N}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,st.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,st.default)(this.cDim[this.posIndex][5]).parent():(0,st.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(et,q,k){var N=et||0,S=q||"before",L=k.length,A=L!==0&&S=="after"&&N==L;return L!==0&&(!A&&!k[N][4]||k[N-1]&&!k[N-1][4]||A&&!k[N-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},804:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>N});var st=ut(50),Lt=ut(675),et=ut(895),q=ut(491),k=function(){return k=Object.assign||function(S){for(var L,A=1,R=arguments.length;A<R;A++){L=arguments[A];for(var z in L)Object.prototype.hasOwnProperty.call(L,z)&&(S[z]=L[z])}return S},k.apply(this,arguments)};const N={getOffsetMethod:function(S){var L=S||"";return"get"+L+"OffsetViewerEl"},run:function(S,L,A){var R=this.canvas,z=A||{},it=z.state||"",Ct=S.getConfig(),Mt=this.em.getZoomDecimal(),Ht=z.el;if(!Ct.showOffsets||!Ht||(0,q.BM)(Ht)||!Ct.showOffsetsSelected&&it=="Fixed"){S.stopCommand("".concat(this.id),A);return}if(!R.hasCustomSpot(Lt.q.Spacing)){var Ft=k({},z.elPos||R.getElementPos(Ht));(0,st.isUndefined)(z.top)||(Ft.top=z.top),(0,st.isUndefined)(z.left)||(Ft.left=z.left);var xt=window.getComputedStyle(Ht),_t=this.ppfx,qt=it+"State",le=this.getOffsetMethod(it),ce=R[le](A.view);ce.style.opacity="";var te=this["marginT"+it],H=this["marginB"+it],nt=this["marginL"+it],B=this["marginR"+it],tt=this["padT"+it],mt=this["padB"+it],V=this["padL"+it],Et=this["padR"+it];if(ce.childNodes.length&&(this[qt]="1",te=ce.querySelector("[data-offset-m-t]"),H=ce.querySelector("[data-offset-m-b]"),nt=ce.querySelector("[data-offset-m-l]"),B=ce.querySelector("[data-offset-m-r]"),tt=ce.querySelector("[data-offset-p-t]"),mt=ce.querySelector("[data-offset-p-b]"),V=ce.querySelector("[data-offset-p-l]"),Et=ce.querySelector("[data-offset-p-r]")),!this[qt]){var j=it.toLowerCase(),Rt=j+"margin-v",At=j+"padding-v",ft=(0,et.default)('<div class="'.concat(_t,'marginName">')).get(0),Wt=(0,et.default)('<div class="'.concat(_t,'paddingName">')).get(0),Jt=_t+Rt+"-el",pe=_t+At+"-el",Ot="".concat(Jt," ").concat(_t+Rt),jt="".concat(pe," ").concat(_t+At);te=(0,et.default)('<div class="'.concat(Ot,'-top"></div>')).get(0),H=(0,et.default)('<div class="'.concat(Ot,'-bottom"></div>')).get(0),nt=(0,et.default)('<div class="'.concat(Ot,'-left"></div>')).get(0),B=(0,et.default)('<div class="'.concat(Ot,'-right"></div>')).get(0),tt=(0,et.default)('<div class="'.concat(jt,'-top"></div>')).get(0),mt=(0,et.default)('<div class="'.concat(jt,'-bottom"></div>')).get(0),V=(0,et.default)('<div class="'.concat(jt,'-left"></div>')).get(0),Et=(0,et.default)('<div class="'.concat(jt,'-right"></div>')).get(0),this["marginT"+it]=te,this["marginB"+it]=H,this["marginL"+it]=nt,this["marginR"+it]=B,this["padT"+it]=tt,this["padB"+it]=mt,this["padL"+it]=V,this["padR"+it]=Et,ft.appendChild(te),ft.appendChild(H),ft.appendChild(nt),ft.appendChild(B),Wt.appendChild(tt),Wt.appendChild(mt),Wt.appendChild(V),Wt.appendChild(Et),ce.appendChild(ft),ce.appendChild(Wt),this[qt]="1"}var Bt="px",Kt=parseFloat(xt.marginLeft.replace(Bt,""))*Mt,zt=parseFloat(xt.marginRight.replace(Bt,""))*Mt,Ut=parseFloat(xt.marginTop.replace(Bt,""))*Mt,be=parseFloat(xt.marginBottom.replace(Bt,""))*Mt,xe=te.style,oe=H.style,ge=nt.style,Ke=B.style,gr=tt.style,fr=mt.style,er=V.style,ae=Et.style,T=parseFloat(Ft.left),F=parseFloat(xt.width)*Mt+Bt;xe.height=Ut+Bt,xe.width=F,xe.top=Ft.top-Ut+Bt,xe.left=T+Bt,oe.height=be+Bt,oe.width=F,oe.top=Ft.top+Ft.height+Bt,oe.left=T+Bt;var Q=Ft.height+Ut+be+Bt,gt=Ft.top-Ut+Bt;ge.height=Q,ge.width=Kt+Bt,ge.top=gt,ge.left=T-Kt+Bt,Ke.height=Q,Ke.width=zt+Bt,Ke.top=gt,Ke.left=T+Ft.width+Bt;var Pt=parseFloat(xt.paddingTop)*Mt;gr.height=Pt+Bt;var Y=parseFloat(xt.paddingBottom)*Mt;fr.height=Y+Bt;var St=Ft.height-Y-Pt+Bt,dt=Ft.top+Pt+Bt;er.height=St,er.width=parseFloat(xt.paddingLeft)*Mt+Bt,er.top=dt;var Ce=parseFloat(xt.paddingRight)*Mt;ae.height=St,ae.width=Ce+Bt,ae.top=dt}},stop:function(S,L,A){A===void 0&&(A={});var R=A||{},z=R.state||"",it=this.getOffsetMethod(z),Ct=A.view,Mt=this.canvas,Ht=Mt[it](Ct);Ht.style.opacity=0}}},434:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>et});var st=ut(50),Lt=ut(163);const et={init:function(){(0,st.bindAll)(this,"_onFramesChange")},run:function(q){this.toggleVis(q,!0)},stop:function(q){this.toggleVis(q,!1)},toggleVis:function(q,k){if(k===void 0&&(k=!0),!q.Commands.isActive("preview")){var N=q.Canvas,S=k?"on":"off",L=N.getModel();L[S]("change:frames",this._onFramesChange),this.handleFrames(N.getFrames(),k)}},handleFrames:function(q,k){var N=this;q.forEach(function(S){var L;!((L=S.view)===null||L===void 0)&&L.loaded&&N._upFrame(S,k),S.__ol||(S.on("loaded",function(){return N._upFrame(S)}),S.__ol=!0)})},_onFramesChange:function(q,k){this.handleFrames(k)},_upFrame:function(q,k){var N,S=this,L=S.ppfx,A=S.em,R=S.id,z=(0,Lt.isDef)(k)?k:A.Commands.isActive(R),it=z?"add":"remove",Ct="".concat(L,"dashed");(N=q.view)===null||N===void 0||N.getBody().classList[it](Ct)}}},346:(O,J,ut)=>{ut.d(J,{FE:()=>N,G7:()=>S,Hn:()=>k,pH:()=>A,vA:()=>L});var st=ut(316),Lt=ut.n(st),et=function(){var R=function(z,it){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ct,Mt){Ct.__proto__=Mt}||function(Ct,Mt){for(var Ht in Mt)Object.prototype.hasOwnProperty.call(Mt,Ht)&&(Ct[Ht]=Mt[Ht])},R(z,it)};return function(z,it){if(typeof it!="function"&&it!==null)throw new TypeError("Class extends value "+String(it)+" is not a constructor or null");R(z,it);function Ct(){this.constructor=z}z.prototype=it===null?Object.create(it):(Ct.prototype=it.prototype,new Ct)}}(),q=function(){return q=Object.assign||function(R){for(var z,it=1,Ct=arguments.length;it<Ct;it++){z=arguments[it];for(var Mt in z)Object.prototype.hasOwnProperty.call(z,Mt)&&(R[Mt]=z[Mt])}return R},q.apply(this,arguments)},k=function(R){et(z,R);function z(){return R!==null&&R.apply(this,arguments)||this}return z}(Lt().Model),N=function(R){et(z,R);function z(){return R!==null&&R.apply(this,arguments)||this}return z}(Lt().Collection),S=function(R){et(z,R);function z(){return R!==null&&R.apply(this,arguments)||this}return z}(Lt().View),L;(function(R){R.Screen="screen",R.World="world"})(L||(L={}));var A={x:0,y:0};q(q({},A),{width:0,height:0})},330:(O,J,ut)=>{ut.d(J,{Z:()=>k});var st=ut(50),Lt=ut(346),et=function(){var N=function(S,L){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,R){A.__proto__=R}||function(A,R){for(var z in R)Object.prototype.hasOwnProperty.call(R,z)&&(A[z]=R[z])},N(S,L)};return function(S,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");N(S,L);function A(){this.constructor=S}S.prototype=L===null?Object.create(L):(A.prototype=L.prototype,new A)}}(),q=function(N){et(S,N);function S(L,A,R){L===void 0&&(L={}),R===void 0&&(R=!1);var z=N.call(this,L)||this;return z.itemsView="",z.itemType="type",z.reuseView=!1,z.config=A||L.config||{},R&&z.listenTo(z.collection,"add",z.addTo),z.items=[],z}return S.prototype.addTo=function(L){this.add(L)},S.prototype.itemViewNotFound=function(L){var A=this,R=A.config,z=A.ns,it=R.em,Ct="".concat(z?"[".concat(z,"]: "):"","'").concat(L,"' type not found");it&&it.logWarning(Ct)},S.prototype.add=function(L,A){var R=this,z=R.config,it=R.reuseView,Ct=R.items,Mt=this.itemsView||{},Ht=["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],Ft=A||null,xt=this.itemView,_t=L.get(this.itemType),qt;Mt[_t]?xt=Mt[_t]:_t&&!Mt[_t]&&!(0,st.includes)(Ht,_t)&&this.itemViewNotFound(_t),L.view&&it?qt=L.view:qt=new xt({model:L,config:z},z),Ct&&Ct.push(qt);var le=qt.render().el;Ft?Ft.appendChild(le):this.$el.append(le)},S.prototype.render=function(){var L=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(A){this.add(A,L)},this),this.$el.append(L),this.onRender(),this},S.prototype.onRender=function(){},S.prototype.onRemoveBefore=function(L,A){},S.prototype.onRemove=function(L,A){},S.prototype.remove=function(L){L===void 0&&(L={});var A=this.items;return this.onRemoveBefore(A,L),this.clearItems(),N.prototype.remove.call(this),this.onRemove(A,L),this},S.prototype.clearItems=function(){this.items},S}(Lt.G7);const k=q;q.prototype.itemView=""},668:(O,J,ut)=>{ut.d(J,{Z:()=>S});var st=ut(50),Lt=ut(491),et=function(){return et=Object.assign||function(L){for(var A,R=1,z=arguments.length;R<z;R++){A=arguments[R];for(var it in A)Object.prototype.hasOwnProperty.call(A,it)&&(L[it]=A[it])}return L},et.apply(this,arguments)},q=function(){return{x:0,y:0}},k=["x","y"],N=function(){function L(A){return A===void 0&&(A={}),this.opts={snapOffset:5,scale:1},(0,st.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(A),this.delta=q(),this.lastScroll=q(),this.lastScrollDiff=q(),this.startPointer=q(),this.startPosition=q(),this.globScrollDiff=q(),this.currentPointer=q(),this.position=q(),this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return L.prototype.setOptions=function(A){A===void 0&&(A={}),this.opts=et(et({},this.opts),A)},L.prototype.toggleDrag=function(A){var R=this.getDocumentEl(),z=this.getContainerEl(),it=this.getWindowEl(),Ct=A?"on":"off",Mt={on:Lt.on,off:Lt.S1};Mt[Ct](z,"mousemove dragover",this.drag),Mt[Ct](R,"mouseup dragend touchend",this.stop),Mt[Ct](R,"keydown",this.keyHandle),Mt[Ct](it,"scroll",this.handleScroll)},L.prototype.handleScroll=function(){var A=this,R=A.lastScroll,z=A.delta,it=this.getScrollInfo(),Ct={x:it.x-R.x,y:it.y-R.y};this.move(z.x+Ct.x,z.y+Ct.y),this.lastScrollDiff=Ct},L.prototype.start=function(A){var R=this.opts,z=R.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(A),this.guidesStatic=(0,st.result)(R,"guidesStatic")||[],this.guidesTarget=(0,st.result)(R,"guidesTarget")||[],(0,st.isFunction)(z)&&z(A,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff=q(),this.globScrollDiff=q(),this.drag(A)},L.prototype.drag=function(A){var R=this,z=this,it=z.opts,Ct=z.lastScrollDiff,Mt=z.globScrollDiff,Ht=it.onDrag,Ft=this.startPointer,xt=this.getPointerPos(A),_t={x:Mt.x+Ct.x,y:Mt.y+Ct.y};this.globScrollDiff=_t;var qt={x:xt.x-Ft.x+_t.x,y:xt.y-Ft.y+_t.y};this.lastScrollDiff=q();var le=this.lockedAxis;A.shiftKey?le=!le&&this.detectAxisLock(qt.x,qt.y):le=null,le==="x"?qt.x=Ft.x:le==="y"&&(qt.y=Ft.y);var ce=function(mt){k.forEach(function(V){return mt[V]=mt[V]*(0,st.result)(it,"scale")}),R.delta=mt,R.move(mt.x,mt.y),(0,st.isFunction)(Ht)&&Ht(A,R)},te=et({},qt);if(this.currentPointer=xt,this.lockedAxis=le,this.lastScroll=this.getScrollInfo(),ce(qt),this.guidesTarget.length){var H=this.snapGuides(te),nt=H.newDelta,B=H.trgX,tt=H.trgY;(B||tt)&&ce(nt)}A.which===0&&this.stop(A)},L.prototype.snapGuides=function(A){var R=this,z=A,it=this,Ct=it.trgX,Mt=it.trgY;return this.guidesTarget.forEach(function(Ht){Ht.x&&R.trgX||Ht.y&&R.trgY||(Ht.active=!1,R.guidesStatic.forEach(function(Ft){if(!(Ht.y&&Ft.x||Ht.x&&Ft.y)){var xt=Ht.y&&Ft.y,_t=xt?"y":"x",qt=Ht[_t],le=Ft[_t],ce=A[_t],te=xt?Mt:Ct;if(R.isPointIn(qt,le)&&(0,st.isUndefined)(te)){var H=ce-(qt-le);R.setGuideLock(Ht,H)}}}))}),Ct=this.trgX,Mt=this.trgY,k.forEach(function(Ht){var Ft=Ht.toUpperCase(),xt=R["trg".concat(Ft)];xt&&!R.isPointIn(A[Ht],xt.lock)&&(R.setGuideLock(xt,null),xt=null),xt&&!(0,st.isUndefined)(xt.lock)&&(z[Ht]=xt.lock)}),{newDelta:z,trgX:this.trgX,trgY:this.trgY}},L.prototype.isPointIn=function(A,R,z){var it=z===void 0?{}:z,Ct=it.offset,Mt=Ct||this.opts.snapOffset||0;return A>=R&&A<=R+Mt||A<=R&&A>=R-Mt},L.prototype.setGuideLock=function(A,R){var z=(0,st.isUndefined)(A.x)?"Y":"X",it="trg".concat(z);return R!==null?(A.active=!0,A.lock=R,this[it]=A):(delete A.active,delete A.lock,delete this[it]),A},L.prototype.stop=function(A,R){R===void 0&&(R={});var z=this.delta,it=!!R.cancel,Ct=it?0:z.x,Mt=it?0:z.y;this.toggleDrag(),this.lockedAxis=null,this.move(Ct,Mt,!0);var Ht=this.opts.onEnd;(0,st.isFunction)(Ht)&&Ht(A,this,{cancelled:it})},L.prototype.keyHandle=function(A){(0,Lt.kl)(A)&&this.stop(A,{cancel:!0})},L.prototype.move=function(A,R,z){var it=this,Ct=it.el,Mt=it.opts,Ht=this.startPosition;if(Ht){var Ft=Mt.setPosition,xt=Ht.x+A,_t=Ht.y+R;this.position={x:xt,y:_t,end:z},(0,st.isFunction)(Ft)&&Ft(this.position),Ct&&(Ct.style.left="".concat(xt,"px"),Ct.style.top="".concat(_t,"px"))}},L.prototype.getContainerEl=function(){var A=this.opts.container;return A?[A]:this.getDocumentEl()},L.prototype.getWindowEl=function(){var A=this.getContainerEl();return A.map(function(R){var z=R.ownerDocument||R;return z.defaultView||z.parentWindow})},L.prototype.getDocumentEl=function(A){var R=this.opts.doc;if(A=A||this.el,!this.docs.length){var z=[document];A&&z.push(A.ownerDocument),R&&z.push(R),this.docs=z}return this.docs},L.prototype.getPointerPos=function(A){var R=this.opts.getPointerPosition,z=(0,Lt.VB)(A);return R?R(A):{x:z.clientX,y:z.clientY}},L.prototype.getStartPosition=function(){var A=this,R=A.el,z=A.opts,it=z.getPosition,Ct=q();return(0,st.isFunction)(it)?Ct=it():R&&(Ct={x:parseFloat(R.style.left),y:parseFloat(R.style.top)}),Ct},L.prototype.getScrollInfo=function(){var A=this.opts.doc,R=A&&A.body;return{y:R?R.scrollTop:0,x:R?R.scrollLeft:0}},L.prototype.detectAxisLock=function(A,R){var z=A,it=R,Ct=Math.abs(z),Mt=Math.abs(it);if(it>=Ct||it<=-Ct)return"x";if(z>Mt||z<-Mt)return"y"},L}();const S=N},895:(O,J,ut)=>{ut.r(J),ut.d(J,{default:()=>Mn});var st=typeof document<"u"?document:null,Lt=typeof window<"u"?window:null,et=Array.prototype,q=et.filter,k=et.indexOf,N=et.map,S=et.push,L=et.reverse,A=et.slice,R=et.splice,z=/^#[\w-]*$/,it=/^\.[\w-]*$/,Ct=/<.+>/,Mt=/^\w+$/;function Ht(I,at){return at===void 0&&(at=st),it.test(I)?at.getElementsByClassName(I.slice(1)):Mt.test(I)?at.getElementsByTagName(I):at.querySelectorAll(I)}function Ft(I,at){if(at===void 0&&(at=st),!!I){if(I.__cash)return I;var ht=I;if(mt(I)){if(at.__cash&&(at=at[0]),ht=z.test(I)?at.getElementById(I.slice(1)):Ct.test(I)?Qe(I):Ht(I,at),!ht)return}else if(tt(I))return this.ready(I);(ht.nodeType||ht===Lt)&&(ht=[ht]),this.length=ht.length;for(var It=0,fe=this.length;It<fe;It++)this[It]=ht[It]}}function xt(I,at){return new Ft(I,at)}var _t=xt.fn=xt.prototype=Ft.prototype={constructor:xt,__cash:!0,length:0,splice:R};_t.get=function(I){return I===void 0?A.call(this):this[I<0?I+this.length:I]},_t.eq=function(I){return xt(this.get(I))},_t.first=function(){return this.eq(0)},_t.last=function(){return this.eq(-1)},_t.map=function(I){return xt(N.call(this,function(at,ht){return I.call(at,ht,at)}))},_t.slice=function(){return xt(A.apply(this,arguments))};var qt=/(?:^\w|[A-Z]|\b\w)/g,le=/[\s-_]+/g;function ce(I){return I.replace(qt,function(at,ht){return at[ht?"toUpperCase":"toLowerCase"]()}).replace(le,"")}xt.camelCase=ce;function te(I,at){for(var ht=0,It=I.length;ht<It&&at.call(I[ht],I[ht],ht,I)!==!1;ht++);}xt.each=te,_t.each=function(I){return te(this,function(at,ht){return I.call(at,ht,at)}),this},_t.removeProp=function(I){return this.each(function(at,ht){delete ht[I]})};function H(I){I===void 0&&(I=this);for(var at=arguments,ht=at.length,It=ht<2?0:1;It<ht;It++)for(var fe in at[It])I[fe]=at[It][fe];return I}xt.extend=_t.extend=H;var nt=1;xt.guid=nt;function B(I,at){var ht=I&&(I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.msMatchesSelector||I.oMatchesSelector);return!!ht&&ht.call(I,at)}xt.matches=B;function tt(I){return typeof I=="function"}xt.isFunction=tt;function mt(I){return typeof I=="string"}xt.isString=mt;function V(I){return!isNaN(parseFloat(I))&&isFinite(I)}xt.isNumeric=V;var Et=Array.isArray;xt.isArray=Et,_t.prop=function(I,at){if(I){if(mt(I))return arguments.length<2?this[0]&&this[0][I]:this.each(function(It,fe){fe[I]=at});for(var ht in I)this.prop(ht,I[ht]);return this}};function j(I){return mt(I)?function(at,ht){return B(ht,I)}:I.__cash?function(at,ht){return I.is(ht)}:function(at,ht,It){return ht===It}}_t.filter=function(I){if(!I)return xt();var at=tt(I)?I:j(I);return xt(q.call(this,function(ht,It){return at.call(ht,It,ht,I)}))};var Rt=/\S+/g;function At(I){return mt(I)?I.match(Rt)||[]:[]}_t.hasClass=function(I){var at=At(I),ht=!1;return at.length&&this.each(function(It,fe){return ht=fe.classList.contains(at[0]),!ht}),ht},_t.removeAttr=function(I){var at=At(I);return at.length?this.each(function(ht,It){te(at,function(fe){It.removeAttribute(fe)})}):this},_t.attr=function(I,at){if(I){if(mt(I)){if(arguments.length<2){if(!this[0])return;var ht=this[0].getAttribute(I);return ht===null?void 0:ht}return at===null?this.removeAttr(I):this.each(function(fe,Ae){Ae.setAttribute(I,at)})}for(var It in I)this.attr(It,I[It]);return this}},_t.toggleClass=function(I,at){var ht=At(I),It=at!==void 0;return ht.length?this.each(function(fe,Ae){te(ht,function(ze){It?at?Ae.classList.add(ze):Ae.classList.remove(ze):Ae.classList.toggle(ze)})}):this},_t.addClass=function(I){return this.toggleClass(I,!0)},_t.removeClass=function(I){return arguments.length?this.toggleClass(I,!1):this.attr("class","")};function ft(I){return I.filter(function(at,ht,It){return It.indexOf(at)===ht})}xt.unique=ft,_t.add=function(I,at){return xt(ft(this.get().concat(xt(I,at).get())))};function Wt(I,at,ht){if(I.nodeType===1){var It=Lt.getComputedStyle(I,null);return at?ht?It.getPropertyValue(at):It[at]:It}}function Jt(I,at){return parseInt(Wt(I,at),10)||0}var pe=/^--/;function Ot(I){return pe.test(I)}var jt={},Bt=st&&st.createElement("div"),Kt=Bt?Bt.style:{},zt=["webkit","moz","ms","o"];function Ut(I,at){if(at===void 0&&(at=Ot(I)),at)return I;if(!jt[I]){var ht=ce(I),It=""+ht.charAt(0).toUpperCase()+ht.slice(1),fe=(ht+" "+zt.join(It+" ")+It).split(" ");te(fe,function(Ae){if(Ae in Kt)return jt[I]=Ae,!1})}return jt[I]}xt.prefixedProp=Ut;var be={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function xe(I,at,ht){return ht===void 0&&(ht=Ot(I)),!ht&&!be[I]&&V(at)?at+"px":at}_t.css=function(I,at){if(mt(I)){var ht=Ot(I);return I=Ut(I,ht),arguments.length<2?this[0]&&Wt(this[0],I,ht):I?(at=xe(I,at,ht),this.each(function(fe,Ae){Ae.nodeType===1&&(ht?Ae.style.setProperty(I,at):Ae.style[I]=at)})):this}for(var It in I)this.css(It,I[It]);return this};var oe="__cashData",ge=/^data-(.*)/;xt.hasData=function(I){return oe in I};function Ke(I){return I[oe]=I[oe]||{}}function gr(I,at){var ht=Ke(I);if(at){if(!(at in ht)){var It=I.dataset?I.dataset[at]||I.dataset[ce(at)]:xt(I).attr("data-"+at);if(It!==void 0){try{It=JSON.parse(It)}catch{}ht[at]=It}}return ht[at]}return ht}function fr(I,at){at===void 0?delete I[oe]:delete Ke(I)[at]}function er(I,at,ht){Ke(I)[at]=ht}_t.data=function(I,at){var ht=this;if(!I)return this[0]?(te(this[0].attributes,function(fe){var Ae=fe.name.match(ge);Ae&&ht.data(Ae[1])}),gr(this[0])):void 0;if(mt(I))return at===void 0?this[0]&&gr(this[0],I):this.each(function(fe,Ae){return er(Ae,I,at)});for(var It in I)this.data(It,I[It]);return this},_t.removeData=function(I){return this.each(function(at,ht){return fr(ht,I)})};function ae(I,at){return Jt(I,"border"+(at?"Left":"Top")+"Width")+Jt(I,"padding"+(at?"Left":"Top"))+Jt(I,"padding"+(at?"Right":"Bottom"))+Jt(I,"border"+(at?"Right":"Bottom")+"Width")}te(["Width","Height"],function(I){_t["inner"+I]=function(){if(this[0])return this[0]===Lt?Lt["inner"+I]:this[0]["client"+I]}}),te(["width","height"],function(I,at){_t[I]=function(ht){return this[0]?arguments.length?(ht=parseInt(ht,10),this.each(function(It,fe){if(fe.nodeType===1){var Ae=Wt(fe,"boxSizing");fe.style[I]=xe(I,ht+(Ae==="border-box"?ae(fe,!at):0))}})):this[0]===Lt?this[0][ce("outer-"+I)]:this[0].getBoundingClientRect()[I]-ae(this[0],!at):ht===void 0?void 0:this}}),te(["Width","Height"],function(I,at){_t["outer"+I]=function(ht){if(this[0])return this[0]===Lt?Lt["outer"+I]:this[0]["offset"+I]+(ht?Jt(this[0],"margin"+(at?"Top":"Left"))+Jt(this[0],"margin"+(at?"Bottom":"Right")):0)}});function T(I,at){for(var ht=0,It=at.length;ht<It;ht++)if(I.indexOf(at[ht])<0)return!1;return!0}function F(I,at,ht){te(I[ht],function(It){It[0];var fe=It[1];at.removeEventListener(ht,fe)}),delete I[ht]}var Q="__cashEvents",gt=".";function Pt(I){return I[Q]=I[Q]||{}}function Y(I,at,ht,It){It.guid=It.guid||nt++;var fe=Pt(I);fe[at]=fe[at]||[],fe[at].push([ht,It]),I.addEventListener(at,It)}function St(I){var at=I.split(gt);return[at[0],at.slice(1).sort()]}function dt(I,at,ht,It){var fe=Pt(I);if(at){var Ae=fe[at];if(!Ae)return;It&&(It.guid=It.guid||nt++),fe[at]=Ae.filter(function(ze){var tn=ze[0],vn=ze[1];if(It&&vn.guid!==It.guid||!T(tn,ht))return!0;I.removeEventListener(at,vn)})}else if(!ht||!ht.length)for(at in fe)F(fe,I,at);else for(at in fe)dt(I,at,ht,It)}_t.off=function(I,at){var ht=this;return I===void 0?this.each(function(It,fe){return dt(fe)}):te(At(I),function(It){var fe=St(It),Ae=fe[0],ze=fe[1];ht.each(function(tn,vn){return dt(vn,Ae,ze,at)})}),this},_t.on=function(I,at,ht,It){var fe=this;if(!mt(I)){for(var Ae in I)this.on(Ae,at,I[Ae]);return this}return tt(at)&&(ht=at,at=!1),te(At(I),function(ze){var tn=St(ze),vn=tn[0],tr=tn[1];fe.each(function(Vi,gn){var Cn=function ii(Pr){if(!(Pr.namespace&&!T(tr,Pr.namespace.split(gt)))){var un=gn;if(at){for(var or=Pr.target;!B(or,at);)if(or===gn||(or=or.parentNode,!or))return;un=or}Pr.namespace=Pr.namespace||"";var Xt=ht.call(un,Pr,Pr.data);It&&dt(gn,vn,tr,ii),Xt===!1&&(Pr.preventDefault(),Pr.stopPropagation())}};Cn.guid=ht.guid=ht.guid||nt++,Y(gn,vn,tr,Cn)})}),this},_t.one=function(I,at,ht){return this.on(I,at,ht,!0)},_t.ready=function(I){var at=function(){return I(xt)};return st.readyState!=="loading"?setTimeout(at):st.addEventListener("DOMContentLoaded",at),this},_t.trigger=function(I,at){var ht=I;if(mt(I)){var It=St(I),fe=It[0],Ae=It[1];ht=st.createEvent("HTMLEvents"),ht.initEvent(fe,!0,!0),ht.namespace=Ae.join(gt)}return ht.data=at,this.each(function(ze,tn){tn.dispatchEvent(ht)})};function Ce(I){var at=[];return te(I.options,function(ht){ht.selected&&!ht.disabled&&!ht.parentNode.disabled&&at.push(ht.value)}),at}function Ye(I){return I.selectedIndex<0?null:I.options[I.selectedIndex].value}var Ne=/select-one/i,Ge=/select-multiple/i;function pr(I){var at=I.type;return Ne.test(at)?Ye(I):Ge.test(at)?Ce(I):I.value}var ye=/%20/g;function qr(I,at){return"&"+encodeURIComponent(I)+"="+encodeURIComponent(at).replace(ye,"+")}var ir=/file|reset|submit|button|image/i,$e=/radio|checkbox/i;_t.serialize=function(){var I="";return this.each(function(at,ht){te(ht.elements||[ht],function(It){if(!(It.disabled||!It.name||It.tagName==="FIELDSET")&&!ir.test(It.type)&&!($e.test(It.type)&&!It.checked)){var fe=pr(It);if(fe!==void 0){var Ae=Et(fe)?fe:[fe];te(Ae,function(ze){I+=qr(It.name,ze)})}}})}),I.substr(1)},_t.val=function(I){return I===void 0?this[0]&&pr(this[0]):this.each(function(at,ht){var It=Ge.test(ht.type),fe=I===null?It?[]:"":I;It&&Et(fe)?te(ht.options,function(Ae){Ae.selected=fe.indexOf(Ae.value)>=0}):ht.value=fe})},_t.clone=function(){return this.map(function(I,at){return at.cloneNode(!0)})},_t.detach=function(){return this.each(function(I,at){at.parentNode&&at.parentNode.removeChild(at)})};var Nr=/^\s*<(\w+)[^>]*>/,_e=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/,_r;function Pe(){if(!_r){var I=st.createElement("table"),at=st.createElement("tr");_r={"*":st.createElement("div"),tr:st.createElement("tbody"),td:at,th:at,thead:I,tbody:I,tfoot:I}}}function Qe(I){if(Pe(),!mt(I))return[];if(_e.test(I))return[st.createElement(RegExp.$1)];var at=Nr.test(I)&&RegExp.$1,ht=_r[at]||_r["*"];return ht.innerHTML=I,xt(ht.childNodes).detach().get()}xt.parseHTML=Qe,_t.empty=function(){var I=this[0];if(I)for(;I.firstChild;)I.removeChild(I.firstChild);return this};function sr(I,at,ht){ht?I.insertBefore(at,I.childNodes[0]):I.appendChild(at)}function Wr(I,at,ht){if(at!==void 0){var It=mt(at);!It&&at.length?te(at,function(fe){return Wr(I,fe,ht)}):te(I,It?function(fe){fe.insertAdjacentHTML(ht?"afterbegin":"beforeend",at)}:function(fe,Ae){return sr(fe,Ae?at.cloneNode(!0):at,ht)})}}_t.append=function(){var I=this;return te(arguments,function(at){Wr(I,at)}),this},_t.appendTo=function(I){return Wr(xt(I),this),this},_t.html=function(I){if(I===void 0)return this[0]&&this[0].innerHTML;var at=I.nodeType?I[0].outerHTML:I;return this.each(function(ht,It){It.innerHTML=at})},_t.insertAfter=function(I){var at=this;return xt(I).each(function(ht,It){var fe=It.parentNode;at.each(function(Ae,ze){fe.insertBefore(ht?ze.cloneNode(!0):ze,It.nextSibling)})}),this},_t.after=function(){var I=this;return te(L.apply(arguments),function(at){L.apply(xt(at).slice()).insertAfter(I)}),this},_t.insertBefore=function(I){var at=this;return xt(I).each(function(ht,It){var fe=It.parentNode;at.each(function(Ae,ze){fe.insertBefore(ht?ze.cloneNode(!0):ze,It)})}),this},_t.before=function(){var I=this;return te(arguments,function(at){xt(at).insertBefore(I)}),this},_t.prepend=function(){var I=this;return te(arguments,function(at){Wr(I,at,!0)}),this},_t.prependTo=function(I){return Wr(xt(I),L.apply(this.slice()),!0),this},_t.remove=function(){return this.detach().off()},_t.replaceWith=function(I){var at=this;return this.each(function(ht,It){var fe=It.parentNode;if(fe){var Ae=ht?xt(I).clone():xt(I);if(!Ae[0])return at.remove(),!1;fe.replaceChild(Ae[0],It),xt(Ae[0]).after(Ae.slice(1))}})},_t.replaceAll=function(I){return xt(I).replaceWith(this),this},_t.text=function(I){return I===void 0?this[0]?this[0].textContent:"":this.each(function(at,ht){ht.textContent=I})};var wr=st&&st.documentElement;_t.offset=function(){var I=this[0];if(I){var at=I.getBoundingClientRect();return{top:at.top+Lt.pageYOffset-wr.clientTop,left:at.left+Lt.pageXOffset-wr.clientLeft}}},_t.offsetParent=function(){return xt(this[0]&&this[0].offsetParent)},_t.position=function(){var I=this[0];if(I)return{left:I.offsetLeft,top:I.offsetTop}},_t.children=function(I){var at=[];return this.each(function(ht,It){S.apply(at,It.children)}),at=xt(ft(at)),I?at.filter(function(ht,It){return B(It,I)}):at},_t.contents=function(){var I=[];return this.each(function(at,ht){S.apply(I,ht.tagName==="IFRAME"?[ht.contentDocument]:ht.childNodes)}),xt(I.length&&ft(I))},_t.find=function(I){for(var at=[],ht=0,It=this.length;ht<It;ht++){var fe=Ht(I,this[ht]);fe.length&&S.apply(at,fe)}return xt(at.length&&ft(at))},_t.has=function(I){var at=mt(I)?function(ht,It){return!!Ht(I,It).length}:function(ht,It){return It.contains(I)};return this.filter(at)},_t.is=function(I){if(!I||!this[0])return!1;var at=j(I),ht=!1;return this.each(function(It,fe){return ht=at(It,fe,I),!ht}),ht},_t.next=function(){return xt(this[0]&&this[0].nextElementSibling)},_t.not=function(I){if(!I||!this[0])return this;var at=j(I);return this.filter(function(ht,It){return!at(ht,It,I)})},_t.parent=function(){var I=[];return this.each(function(at,ht){ht&&ht.parentNode&&I.push(ht.parentNode)}),xt(ft(I))},_t.index=function(I){var at=I?xt(I)[0]:this[0],ht=I?this:xt(at).parent().children();return k.call(ht,at)},_t.closest=function(I){return!I||!this[0]?xt():this.is(I)?this.filter(I):this.parent().closest(I)},_t.parents=function(I){var at=[],ht;return this.each(function(It,fe){for(ht=fe;ht&&ht.parentNode&&ht!==st.body.parentNode;)ht=ht.parentNode,(!I||I&&B(ht,I))&&at.push(ht)}),xt(ft(at))},_t.prev=function(){return xt(this[0]&&this[0].previousElementSibling)},_t.siblings=function(){var I=this[0];return this.parent().children().filter(function(at,ht){return ht!==I})};const Mn=xt},491:(O,J,ut)=>{ut.d(J,{$Q:()=>Ct,BM:()=>qt,FW:()=>R,G1:()=>k,GX:()=>H,L_:()=>S,Mx:()=>N,R3:()=>Mt,S1:()=>At,SJ:()=>_t,Ut:()=>te,VB:()=>tt,Vb:()=>j,cx:()=>L,dL:()=>it,kl:()=>mt,o5:()=>ce,on:()=>Rt,pn:()=>z,r$:()=>V,rw:()=>Ft,sE:()=>A,sN:()=>B,t3:()=>xt,ut:()=>Ht});var st=ut(50),Lt=function(ft,Wt,Jt){if(Jt||arguments.length===2)for(var pe=0,Ot=Wt.length,jt;pe<Ot;pe++)(jt||!(pe in Wt))&&(jt||(jt=Array.prototype.slice.call(Wt,0,pe)),jt[pe]=Wt[pe]);return ft.concat(jt||Array.prototype.slice.call(Wt))},et="tag",q="attributes",k="transitionend oTransitionEnd transitionend webkitTransitionEnd",N=function(ft){return(ft==null?void 0:ft.nodeType)===Node.DOCUMENT_NODE},S=function(ft){var Wt=ft&&ft.parentNode;Wt&&Wt.removeChild(ft)};function L(){for(var ft=[],Wt=0;Wt<arguments.length;Wt++)ft[Wt]=arguments[Wt];var Jt=Array.isArray(ft[0])?ft[0]:Lt([],ft,!0);return Jt.filter(Boolean).join(" ")}var A=function(ft,Wt){return ft.querySelectorAll(Wt)},R=function(ft,Wt){return Wt===void 0&&(Wt={}),ft&&ft.setAttribute&&(0,st.each)(Wt,function(Jt,pe){return ft.setAttribute(pe,Jt)})},z=function(ft){return ft&&!!(ft.offsetWidth||ft.offsetHeight||ft.getClientRects().length)},it=function(ft,Wt){var Jt;(Jt=ft.parentNode)===null||Jt===void 0||Jt.replaceChild(Wt,ft)},Ct=function(ft,Wt,Jt){var pe=ft.childNodes,Ot=pe.length,jt=(0,st.isUndefined)(Jt)?Ot:Jt;(0,st.isString)(Wt)&&(ft.insertAdjacentHTML("beforeEnd",Wt),Wt=ft.lastChild,ft.removeChild(Wt)),jt>=Ot?ft.appendChild(Wt):ft.insertBefore(Wt,pe[jt])},Mt=function(ft,Wt){return Ct(ft,Wt)},Ht=function(ft,Wt,Jt){Wt===void 0&&(Wt={});var pe=document.createElement(ft);return Wt&&(0,st.each)(Wt,function(Ot,jt){return pe.setAttribute(jt,Ot)}),Jt&&((0,st.isString)(Jt)?pe.innerHTML=Jt:pe.appendChild(Jt)),pe},Ft=function(ft){return document.createTextNode(ft)},xt=function(ft,Wt){var Jt,pe=ft.type;try{Jt=new window[Wt](pe,ft)}catch{Jt=document.createEvent(Wt),Jt.initEvent(pe,!0,!0)}return Jt._parentEvent=ft,pe.indexOf("key")===0&&(Jt.keyCodeVal=ft.keyCode,["keyCode","which"].forEach(function(Ot){Object.defineProperty(Jt,Ot,{get:function(){return this.keyCodeVal}})})),Jt},_t=function(ft,Wt){Wt===void 0&&(Wt=[]);var Jt=Array.isArray(Wt)?Wt:[Wt];Jt.forEach(function(pe){var Ot=pe[et]||"div",jt=pe[q]||{},Bt=document.createElement(Ot);(0,st.each)(jt,function(Kt,zt){Bt.setAttribute(zt,Kt)}),ft.appendChild(Bt)})},qt=function(ft){return(ft==null?void 0:ft.nodeType)===Node.TEXT_NODE},le=function(ft){return(ft==null?void 0:ft.nodeType)===Node.COMMENT_NODE},ce=function(ft){return ft&&!qt(ft)&&!le(ft)},te=function(ft){var Wt={top:0,left:0,width:0,height:0};if(!ft)return Wt;var Jt;if(qt(ft)){var pe=document.createRange();pe.selectNode(ft),Jt=pe.getBoundingClientRect(),pe.detach()}return Jt||(ft.getBoundingClientRect?ft.getBoundingClientRect():Wt)},H=function(ft){var Wt=(ft==null?void 0:ft.ownerDocument)||document,Jt=Wt.documentElement,pe=Wt.defaultView||window;return{x:(pe.pageXOffset||Jt.scrollLeft||0)-(Jt.clientLeft||0),y:(pe.pageYOffset||Jt.scrollTop||0)-(Jt.clientTop||0)}},nt=function(ft){return ft.which||ft.keyCode},B=function(ft){return String.fromCharCode(nt(ft))},tt=function(ft){return ft.touches&&ft.touches[0]?ft.touches[0]:ft},mt=function(ft){return nt(ft)===27},V=function(ft){return nt(ft)===13},Et=function(ft){return ft.ctrlKey},j=function(ft){return Et(ft)||ft.metaKey},Rt=function(ft,Wt,Jt,pe){var Ot=Wt.split(/\s+/),jt=(0,st.isArray)(ft)?ft:[ft];Ot.forEach(function(Bt){jt.forEach(function(Kt){return Kt==null?void 0:Kt.addEventListener(Bt,Jt,pe)})})},At=function(ft,Wt,Jt,pe){var Ot=Wt.split(/\s+/),jt=(0,st.isArray)(ft)?ft:[ft];Ot.forEach(function(Bt){jt.forEach(function(Kt){return Kt==null?void 0:Kt.removeEventListener(Bt,Jt,pe)})})}},163:(O,J,ut)=>{ut.r(J),ut.d(J,{appendStyles:()=>Ct,buildBase64UrlFromSvg:()=>pe,camelCase:()=>xt,capitalize:()=>V,createId:()=>Jt,deepMerge:()=>nt,escape:()=>te,escapeNodeContent:()=>H,find:()=>ce,getComponentModel:()=>ft,getComponentView:()=>At,getElement:()=>le,getGlobal:()=>L,getModel:()=>B,getUiClass:()=>it,getUnitFromValue:()=>Ht,getViewEl:()=>j,hasDnd:()=>qt,hasWin:()=>S,isComponent:()=>Rt,isDef:()=>N,isEmptyObj:()=>mt,isObject:()=>tt,isRule:()=>Et,matches:()=>z,normalizeFloat:()=>_t,setViewEl:()=>Wt,shallowDiff:()=>Mt,toLowerCase:()=>A,upFirst:()=>Ft,wait:()=>k});var st=ut(50),Lt=ut(491),et=function(){return et=Object.assign||function(Ot){for(var jt,Bt=1,Kt=arguments.length;Bt<Kt;Bt++){jt=arguments[Bt];for(var zt in jt)Object.prototype.hasOwnProperty.call(jt,zt)&&(Ot[zt]=jt[zt])}return Ot},et.apply(this,arguments)},q=function(Ot,jt,Bt){if(Bt||arguments.length===2)for(var Kt=0,zt=jt.length,Ut;Kt<zt;Kt++)(Ut||!(Kt in jt))&&(Ut||(Ut=Array.prototype.slice.call(jt,0,Kt)),Ut[Kt]=jt[Kt]);return Ot.concat(Ut||Array.prototype.slice.call(jt))},k=function(Ot){return Ot===void 0&&(Ot=0),new Promise(function(jt){return setTimeout(jt,Ot)})},N=function(Ot){return typeof Ot<"u"},S=function(){return typeof window<"u"},L=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:ut.g},A=function(Ot){return(Ot||"").toLowerCase()},R=S()?window.Element.prototype:{},z=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.msMatchesSelector,it=function(Ot,jt){var Bt=Ot.getConfig(),Kt=Bt.stylePrefix,zt=Bt.customUI;return[zt&&"".concat(Kt,"cui"),jt].filter(function(Ut){return Ut}).join(" ")},Ct=function(Ot,jt){jt===void 0&&(jt={});var Bt=(0,st.isArray)(Ot)?q([],Ot,!0):[Ot];if(Bt.length){var Kt=Bt.shift();if(Kt&&(!jt.unique||!document.querySelector('link[href="'.concat(Kt,'"]')))){var zt=document.head,Ut=document.createElement("link");Ut.href=Kt,Ut.rel="stylesheet",jt.prepand?zt.insertBefore(Ut,zt.firstChild):zt.appendChild(Ut)}Ct(Bt)}},Mt=function(Ot,jt){var Bt={},Kt=(0,st.keys)(jt);for(var zt in Ot)if(Ot.hasOwnProperty(zt)){var Ut=Ot[zt],be=jt[zt];Kt.indexOf(zt)>=0?Ut!==be&&(Bt[zt]=be):Bt[zt]=null}for(var zt in jt)jt.hasOwnProperty(zt)&&(0,st.isUndefined)(Ot[zt])&&(Bt[zt]=jt[zt]);return Bt},Ht=function(Ot){return Ot.replace(parseFloat(Ot),"")},Ft=function(Ot){return Ot[0].toUpperCase()+Ot.toLowerCase().slice(1)},xt=function(Ot){return Ot.replace(/-./g,function(jt){return jt[1].toUpperCase()})},_t=function(Ot,jt,Bt){jt===void 0&&(jt=1),Bt===void 0&&(Bt=0);var Kt=0;if(isNaN(Ot))return Bt;if(Ot=parseFloat(Ot),Math.floor(Ot)!==Ot){var zt=jt.toString().split(".")[1];Kt=zt?zt.length:0}return Kt?parseFloat(Ot.toFixed(Kt)):Ot},qt=function(Ot){return"draggable"in document.createElement("i")&&(Ot?Ot.config.nativeDnD:!0)},le=function(Ot){if((0,st.isElement)(Ot)||(0,Lt.BM)(Ot))return Ot;if(Ot&&Ot.getEl)return Ot.getEl()},ce=function(Ot,jt){var Bt=null;return Ot.some(function(Kt,zt){return jt(Kt,zt,Ot)?(Bt=Kt,1):0}),Bt},te=function(Ot){return Ot===void 0&&(Ot=""),"".concat(Ot).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},H=function(Ot){return Ot===void 0&&(Ot=""),"".concat(Ot).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},nt=function(){for(var Ot=[],jt=0;jt<arguments.length;jt++)Ot[jt]=arguments[jt];for(var Bt=et({},Ot[0]),Kt=1;Kt<Ot.length;Kt++){var zt=et({},Ot[Kt]);for(var Ut in zt){var be=Bt[Ut],xe=zt[Ut];tt(be)&&tt(xe)?Bt[Ut]=nt(be,xe):Bt[Ut]=xe}}return Bt},B=function(Ot,jt){var Bt=Ot;return!jt&&Ot&&Ot.__cashData?Bt=Ot.__cashData.model:(0,st.isElement)(Ot)&&(Bt=jt(Ot).data("model")),Bt},tt=function(Ot){return Ot&&!Array.isArray(Ot)&&typeof Ot=="object"},mt=function(Ot){return Object.keys(Ot).length<=0},V=function(Ot){return Ot===void 0&&(Ot=""),Ot&&Ot.charAt(0).toUpperCase()+Ot.substring(1)},Et=function(Ot){return Ot&&Ot.toCSS},j=function(Ot){return Ot==null?void 0:Ot.__gjsv},Rt=function(Ot){return!!(Ot!=null&&Ot.toHTML)},At=function(Ot){return j(Ot)},ft=function(Ot){var jt;return(jt=At(Ot))===null||jt===void 0?void 0:jt.model},Wt=function(Ot,jt){Ot.__gjsv=jt},Jt=function(Ot){Ot===void 0&&(Ot=16);for(var jt="",Bt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Kt=Bt.length,zt=0;zt<Ot;zt++)jt+=Bt.charAt(Math.floor(Math.random()*Kt));return jt},pe=function(Ot){if(Ot&&Ot.substr(0,4)==="<svg"){var jt="";return S()?jt=window.btoa(Ot):typeof Buffer<"u"&&(jt=Buffer.from(Ot,"utf8").toString("base64")),jt?"data:image/svg+xml;base64,".concat(jt):Ot}return Ot}},828:(O,J,ut)=>{var st={"./CanvasClear":858,"./CanvasClear.ts":858,"./CanvasMove":884,"./CanvasMove.ts":884,"./CommandAbstract":790,"./CommandAbstract.ts":790,"./ComponentDelete":180,"./ComponentDelete.ts":180,"./ComponentDrag":544,"./ComponentDrag.ts":544,"./ComponentEnter":236,"./ComponentEnter.ts":236,"./ComponentExit":368,"./ComponentExit.ts":368,"./ComponentNext":243,"./ComponentNext.ts":243,"./ComponentPrev":400,"./ComponentPrev.ts":400,"./ComponentStyleClear":910,"./ComponentStyleClear.ts":910,"./CopyComponent":744,"./CopyComponent.ts":744,"./DeleteComponent":517,"./DeleteComponent.ts":517,"./ExportTemplate":457,"./ExportTemplate.ts":457,"./Fullscreen":975,"./Fullscreen.ts":975,"./MoveComponent":191,"./MoveComponent.ts":191,"./OpenAssets":912,"./OpenAssets.ts":912,"./OpenBlocks":117,"./OpenBlocks.ts":117,"./OpenLayers":614,"./OpenLayers.ts":614,"./OpenStyleManager":801,"./OpenStyleManager.ts":801,"./OpenTraitManager":395,"./OpenTraitManager.ts":395,"./PasteComponent":98,"./PasteComponent.ts":98,"./Preview":129,"./Preview.ts":129,"./Resize":116,"./Resize.ts":116,"./SelectComponent":407,"./SelectComponent.ts":407,"./SelectPosition":189,"./SelectPosition.ts":189,"./ShowOffset":804,"./ShowOffset.ts":804,"./SwitchVisibility":434,"./SwitchVisibility.ts":434};function Lt(q){var k=et(q);return ut(k)}function et(q){if(!ut.o(st,q)){var k=new Error("Cannot find module '"+q+"'");throw k.code="MODULE_NOT_FOUND",k}return st[q]}Lt.keys=function(){return Object.keys(st)},Lt.resolve=et,O.exports=Lt,Lt.id=828},50:(O,J,ut)=>{ut.r(J),ut.d(J,{VERSION:()=>Lt,after:()=>ua,all:()=>Vn,allKeys:()=>_r,any:()=>si,assign:()=>Cn,before:()=>Ra,bind:()=>ko,bindAll:()=>Ts,chain:()=>ai,chunk:()=>to,clone:()=>Xt,collect:()=>Nn,compact:()=>Ha,compose:()=>Ps,constant:()=>ae,contains:()=>Ar,countBy:()=>nn,create:()=>or,debounce:()=>Ui,default:()=>ro,defaults:()=>ii,defer:()=>Ia,delay:()=>jn,detect:()=>qi,difference:()=>li,drop:()=>fn,each:()=>mn,escape:()=>$t,every:()=>Vn,extend:()=>gn,extendOwn:()=>Cn,filter:()=>Fn,find:()=>qi,findIndex:()=>zi,findKey:()=>ca,findLastIndex:()=>Ki,findWhere:()=>vi,first:()=>Ji,flatten:()=>Ba,foldl:()=>Yi,foldr:()=>Do,forEach:()=>mn,functions:()=>tr,get:()=>Fr,groupBy:()=>Zi,has:()=>oi,head:()=>Ji,identity:()=>xn,include:()=>Ar,includes:()=>Ar,indexBy:()=>Si,indexOf:()=>Lo,initial:()=>zr,inject:()=>Yi,intersection:()=>Ti,invert:()=>vn,invoke:()=>gi,isArguments:()=>gr,isArray:()=>oe,isArrayBuffer:()=>Jt,isBoolean:()=>tt,isDataView:()=>xe,isDate:()=>Rt,isElement:()=>mt,isEmpty:()=>Ge,isEqual:()=>_e,isError:()=>ft,isFinite:()=>fr,isFunction:()=>jt,isMap:()=>ht,isMatch:()=>pr,isNaN:()=>er,isNull:()=>nt,isNumber:()=>j,isObject:()=>H,isRegExp:()=>At,isSet:()=>fe,isString:()=>Et,isSymbol:()=>Wt,isTypedArray:()=>St,isUndefined:()=>B,isWeakMap:()=>It,isWeakSet:()=>Ae,iteratee:()=>On,keys:()=>Ne,last:()=>kr,lastIndexOf:()=>$i,map:()=>Nn,mapObject:()=>en,matcher:()=>Sn,matches:()=>Sn,max:()=>Na,memoize:()=>Dn,methods:()=>tr,min:()=>As,mixin:()=>Ei,negate:()=>Zn,noop:()=>Xe,now:()=>x,object:()=>Is,omit:()=>Ms,once:()=>Mo,pairs:()=>tn,partial:()=>Bi,partition:()=>En,pick:()=>Qn,pluck:()=>Xi,property:()=>bi,propertyOf:()=>Yn,random:()=>Vr,range:()=>Ua,reduce:()=>Yi,reduceRight:()=>Do,reject:()=>Jn,rest:()=>fn,restArguments:()=>te,result:()=>ja,sample:()=>He,select:()=>Fn,shuffle:()=>Va,size:()=>Io,some:()=>si,sortBy:()=>cn,sortedIndex:()=>Rn,tail:()=>fn,take:()=>Ji,tap:()=>$n,template:()=>Hi,templateSettings:()=>Je,throttle:()=>Es,times:()=>hi,toArray:()=>Fa,toPath:()=>Po,transpose:()=>mi,unescape:()=>Re,union:()=>Ds,uniq:()=>Qi,unique:()=>Qi,uniqueId:()=>aa,unzip:()=>mi,values:()=>ze,where:()=>xi,without:()=>Ls,wrap:()=>Wi,zip:()=>js});var st={};ut.r(st),ut.d(st,{VERSION:()=>Lt,after:()=>ua,all:()=>Vn,allKeys:()=>_r,any:()=>si,assign:()=>Cn,before:()=>Ra,bind:()=>ko,bindAll:()=>Ts,chain:()=>ai,chunk:()=>to,clone:()=>Xt,collect:()=>Nn,compact:()=>Ha,compose:()=>Ps,constant:()=>ae,contains:()=>Ar,countBy:()=>nn,create:()=>or,debounce:()=>Ui,default:()=>Hn,defaults:()=>ii,defer:()=>Ia,delay:()=>jn,detect:()=>qi,difference:()=>li,drop:()=>fn,each:()=>mn,escape:()=>$t,every:()=>Vn,extend:()=>gn,extendOwn:()=>Cn,filter:()=>Fn,find:()=>qi,findIndex:()=>zi,findKey:()=>ca,findLastIndex:()=>Ki,findWhere:()=>vi,first:()=>Ji,flatten:()=>Ba,foldl:()=>Yi,foldr:()=>Do,forEach:()=>mn,functions:()=>tr,get:()=>Fr,groupBy:()=>Zi,has:()=>oi,head:()=>Ji,identity:()=>xn,include:()=>Ar,includes:()=>Ar,indexBy:()=>Si,indexOf:()=>Lo,initial:()=>zr,inject:()=>Yi,intersection:()=>Ti,invert:()=>vn,invoke:()=>gi,isArguments:()=>gr,isArray:()=>oe,isArrayBuffer:()=>Jt,isBoolean:()=>tt,isDataView:()=>xe,isDate:()=>Rt,isElement:()=>mt,isEmpty:()=>Ge,isEqual:()=>_e,isError:()=>ft,isFinite:()=>fr,isFunction:()=>jt,isMap:()=>ht,isMatch:()=>pr,isNaN:()=>er,isNull:()=>nt,isNumber:()=>j,isObject:()=>H,isRegExp:()=>At,isSet:()=>fe,isString:()=>Et,isSymbol:()=>Wt,isTypedArray:()=>St,isUndefined:()=>B,isWeakMap:()=>It,isWeakSet:()=>Ae,iteratee:()=>On,keys:()=>Ne,last:()=>kr,lastIndexOf:()=>$i,map:()=>Nn,mapObject:()=>en,matcher:()=>Sn,matches:()=>Sn,max:()=>Na,memoize:()=>Dn,methods:()=>tr,min:()=>As,mixin:()=>Ei,negate:()=>Zn,noop:()=>Xe,now:()=>x,object:()=>Is,omit:()=>Ms,once:()=>Mo,pairs:()=>tn,partial:()=>Bi,partition:()=>En,pick:()=>Qn,pluck:()=>Xi,property:()=>bi,propertyOf:()=>Yn,random:()=>Vr,range:()=>Ua,reduce:()=>Yi,reduceRight:()=>Do,reject:()=>Jn,rest:()=>fn,restArguments:()=>te,result:()=>ja,sample:()=>He,select:()=>Fn,shuffle:()=>Va,size:()=>Io,some:()=>si,sortBy:()=>cn,sortedIndex:()=>Rn,tail:()=>fn,take:()=>Ji,tap:()=>$n,template:()=>Hi,templateSettings:()=>Je,throttle:()=>Es,times:()=>hi,toArray:()=>Fa,toPath:()=>Po,transpose:()=>mi,unescape:()=>Re,union:()=>Ds,uniq:()=>Qi,unique:()=>Qi,uniqueId:()=>aa,unzip:()=>mi,values:()=>ze,where:()=>xi,without:()=>Ls,wrap:()=>Wi,zip:()=>js});var Lt="1.13.6",et=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},q=Array.prototype,k=Object.prototype,N=typeof Symbol<"u"?Symbol.prototype:null,S=q.push,L=q.slice,A=k.toString,R=k.hasOwnProperty,z=typeof ArrayBuffer<"u",it=typeof DataView<"u",Ct=Array.isArray,Mt=Object.keys,Ht=Object.create,Ft=z&&ArrayBuffer.isView,xt=isNaN,_t=isFinite,qt=!{toString:null}.propertyIsEnumerable("toString"),le=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ce=Math.pow(2,53)-1;function te(C,M){return M=M==null?C.length-1:+M,function(){for(var Z=Math.max(arguments.length-M,0),ot=Array(Z),wt=0;wt<Z;wt++)ot[wt]=arguments[wt+M];switch(M){case 0:return C.call(this,ot);case 1:return C.call(this,arguments[0],ot);case 2:return C.call(this,arguments[0],arguments[1],ot)}var pt=Array(M+1);for(wt=0;wt<M;wt++)pt[wt]=arguments[wt];return pt[M]=ot,C.apply(this,pt)}}function H(C){var M=typeof C;return M==="function"||M==="object"&&!!C}function nt(C){return C===null}function B(C){return C===void 0}function tt(C){return C===!0||C===!1||A.call(C)==="[object Boolean]"}function mt(C){return!!(C&&C.nodeType===1)}function V(C){var M="[object "+C+"]";return function(Z){return A.call(Z)===M}}const Et=V("String"),j=V("Number"),Rt=V("Date"),At=V("RegExp"),ft=V("Error"),Wt=V("Symbol"),Jt=V("ArrayBuffer");var pe=V("Function"),Ot=et.document&&et.document.childNodes;typeof Int8Array!="object"&&typeof Ot!="function"&&(pe=function(C){return typeof C=="function"||!1});const jt=pe,Bt=V("Object");var Kt=it&&Bt(new DataView(new ArrayBuffer(8))),zt=typeof Map<"u"&&Bt(new Map),Ut=V("DataView");function be(C){return C!=null&&jt(C.getInt8)&&Jt(C.buffer)}const xe=Kt?be:Ut,oe=Ct||V("Array");function ge(C,M){return C!=null&&R.call(C,M)}var Ke=V("Arguments");(function(){Ke(arguments)||(Ke=function(C){return ge(C,"callee")})})();const gr=Ke;function fr(C){return!Wt(C)&&_t(C)&&!isNaN(parseFloat(C))}function er(C){return j(C)&&xt(C)}function ae(C){return function(){return C}}function T(C){return function(M){var Z=C(M);return typeof Z=="number"&&Z>=0&&Z<=ce}}function F(C){return function(M){return M==null?void 0:M[C]}}const Q=F("byteLength"),gt=T(Q);var Pt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Y(C){return Ft?Ft(C)&&!xe(C):gt(C)&&Pt.test(A.call(C))}const St=z?Y:ae(!1),dt=F("length");function Ce(C){for(var M={},Z=C.length,ot=0;ot<Z;++ot)M[C[ot]]=!0;return{contains:function(wt){return M[wt]===!0},push:function(wt){return M[wt]=!0,C.push(wt)}}}function Ye(C,M){M=Ce(M);var Z=le.length,ot=C.constructor,wt=jt(ot)&&ot.prototype||k,pt="constructor";for(ge(C,pt)&&!M.contains(pt)&&M.push(pt);Z--;)pt=le[Z],pt in C&&C[pt]!==wt[pt]&&!M.contains(pt)&&M.push(pt)}function Ne(C){if(!H(C))return[];if(Mt)return Mt(C);var M=[];for(var Z in C)ge(C,Z)&&M.push(Z);return qt&&Ye(C,M),M}function Ge(C){if(C==null)return!0;var M=dt(C);return typeof M=="number"&&(oe(C)||Et(C)||gr(C))?M===0:dt(Ne(C))===0}function pr(C,M){var Z=Ne(M),ot=Z.length;if(C==null)return!ot;for(var wt=Object(C),pt=0;pt<ot;pt++){var Nt=Z[pt];if(M[Nt]!==wt[Nt]||!(Nt in wt))return!1}return!0}function ye(C){if(C instanceof ye)return C;if(!(this instanceof ye))return new ye(C);this._wrapped=C}ye.VERSION=Lt,ye.prototype.value=function(){return this._wrapped},ye.prototype.valueOf=ye.prototype.toJSON=ye.prototype.value,ye.prototype.toString=function(){return String(this._wrapped)};function qr(C){return new Uint8Array(C.buffer||C,C.byteOffset||0,Q(C))}var ir="[object DataView]";function $e(C,M,Z,ot){if(C===M)return C!==0||1/C===1/M;if(C==null||M==null)return!1;if(C!==C)return M!==M;var wt=typeof C;return wt!=="function"&&wt!=="object"&&typeof M!="object"?!1:Nr(C,M,Z,ot)}function Nr(C,M,Z,ot){C instanceof ye&&(C=C._wrapped),M instanceof ye&&(M=M._wrapped);var wt=A.call(C);if(wt!==A.call(M))return!1;if(Kt&&wt=="[object Object]"&&xe(C)){if(!xe(M))return!1;wt=ir}switch(wt){case"[object RegExp]":case"[object String]":return""+C==""+M;case"[object Number]":return+C!=+C?+M!=+M:+C==0?1/+C===1/M:+C==+M;case"[object Date]":case"[object Boolean]":return+C==+M;case"[object Symbol]":return N.valueOf.call(C)===N.valueOf.call(M);case"[object ArrayBuffer]":case ir:return Nr(qr(C),qr(M),Z,ot)}var pt=wt==="[object Array]";if(!pt&&St(C)){var Nt=Q(C);if(Nt!==Q(M))return!1;if(C.buffer===M.buffer&&C.byteOffset===M.byteOffset)return!0;pt=!0}if(!pt){if(typeof C!="object"||typeof M!="object")return!1;var se=C.constructor,De=M.constructor;if(se!==De&&!(jt(se)&&se instanceof se&&jt(De)&&De instanceof De)&&"constructor"in C&&"constructor"in M)return!1}Z=Z||[],ot=ot||[];for(var Ee=Z.length;Ee--;)if(Z[Ee]===C)return ot[Ee]===M;if(Z.push(C),ot.push(M),pt){if(Ee=C.length,Ee!==M.length)return!1;for(;Ee--;)if(!$e(C[Ee],M[Ee],Z,ot))return!1}else{var ur=Ne(C),Yr;if(Ee=ur.length,Ne(M).length!==Ee)return!1;for(;Ee--;)if(Yr=ur[Ee],!(ge(M,Yr)&&$e(C[Yr],M[Yr],Z,ot)))return!1}return Z.pop(),ot.pop(),!0}function _e(C,M){return $e(C,M)}function _r(C){if(!H(C))return[];var M=[];for(var Z in C)M.push(Z);return qt&&Ye(C,M),M}function Pe(C){var M=dt(C);return function(Z){if(Z==null)return!1;var ot=_r(Z);if(dt(ot))return!1;for(var wt=0;wt<M;wt++)if(!jt(Z[C[wt]]))return!1;return C!==I||!jt(Z[Qe])}}var Qe="forEach",sr="has",Wr=["clear","delete"],wr=["get",sr,"set"],Mn=Wr.concat(Qe,wr),I=Wr.concat(wr),at=["add"].concat(Wr,Qe,sr);const ht=zt?Pe(Mn):V("Map"),It=zt?Pe(I):V("WeakMap"),fe=zt?Pe(at):V("Set"),Ae=V("WeakSet");function ze(C){for(var M=Ne(C),Z=M.length,ot=Array(Z),wt=0;wt<Z;wt++)ot[wt]=C[M[wt]];return ot}function tn(C){for(var M=Ne(C),Z=M.length,ot=Array(Z),wt=0;wt<Z;wt++)ot[wt]=[M[wt],C[M[wt]]];return ot}function vn(C){for(var M={},Z=Ne(C),ot=0,wt=Z.length;ot<wt;ot++)M[C[Z[ot]]]=Z[ot];return M}function tr(C){var M=[];for(var Z in C)jt(C[Z])&&M.push(Z);return M.sort()}function Vi(C,M){return function(Z){var ot=arguments.length;if(M&&(Z=Object(Z)),ot<2||Z==null)return Z;for(var wt=1;wt<ot;wt++)for(var pt=arguments[wt],Nt=C(pt),se=Nt.length,De=0;De<se;De++){var Ee=Nt[De];(!M||Z[Ee]===void 0)&&(Z[Ee]=pt[Ee])}return Z}}const gn=Vi(_r),Cn=Vi(Ne),ii=Vi(_r,!0);function Pr(){return function(){}}function un(C){if(!H(C))return{};if(Ht)return Ht(C);var M=Pr();M.prototype=C;var Z=new M;return M.prototype=null,Z}function or(C,M){var Z=un(C);return M&&Cn(Z,M),Z}function Xt(C){return H(C)?oe(C)?C.slice():gn({},C):C}function $n(C,M){return M(C),C}function Po(C){return oe(C)?C:[C]}ye.toPath=Po;function Ln(C){return ye.toPath(C)}function qn(C,M){for(var Z=M.length,ot=0;ot<Z;ot++){if(C==null)return;C=C[M[ot]]}return Z?C:void 0}function Fr(C,M,Z){var ot=qn(C,Ln(M));return B(ot)?Z:ot}function oi(C,M){M=Ln(M);for(var Z=M.length,ot=0;ot<Z;ot++){var wt=M[ot];if(!ge(C,wt))return!1;C=C[wt]}return!!Z}function xn(C){return C}function Sn(C){return C=Cn({},C),function(M){return pr(M,C)}}function bi(C){return C=Ln(C),function(M){return qn(M,C)}}function rr(C,M,Z){if(M===void 0)return C;switch(Z??3){case 1:return function(ot){return C.call(M,ot)};case 3:return function(ot,wt,pt){return C.call(M,ot,wt,pt)};case 4:return function(ot,wt,pt,Nt){return C.call(M,ot,wt,pt,Nt)}}return function(){return C.apply(M,arguments)}}function me(C,M,Z){return C==null?xn:jt(C)?rr(C,M,Z):H(C)&&!oe(C)?Sn(C):bi(C)}function On(C,M){return me(C,M,1/0)}ye.iteratee=On;function br(C,M,Z){return ye.iteratee!==On?ye.iteratee(C,M):me(C,M,Z)}function en(C,M,Z){M=br(M,Z);for(var ot=Ne(C),wt=ot.length,pt={},Nt=0;Nt<wt;Nt++){var se=ot[Nt];pt[se]=M(C[se],se,C)}return pt}function Xe(){}function Yn(C){return C==null?Xe:function(M){return Fr(C,M)}}function hi(C,M,Z){var ot=Array(Math.max(0,C));M=rr(M,Z,1);for(var wt=0;wt<C;wt++)ot[wt]=M(wt);return ot}function Vr(C,M){return M==null&&(M=C,C=0),C+Math.floor(Math.random()*(M-C+1))}const x=Date.now||function(){return new Date().getTime()};function U(C){var M=function(pt){return C[pt]},Z="(?:"+Ne(C).join("|")+")",ot=RegExp(Z),wt=RegExp(Z,"g");return function(pt){return pt=pt==null?"":""+pt,ot.test(pt)?pt.replace(wt,M):pt}}const Dt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$t=U(Dt),Me=vn(Dt),Re=U(Me),Je=ye.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var we=/(.)^/,Tn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ia=/\\|'|\r|\n|\u2028|\u2029/g;function oa(C){return"\\"+Tn[C]}var Xn=/^\s*(\w|\$)+\s*$/;function Hi(C,M,Z){!M&&Z&&(M=Z),M=ii({},M,ye.templateSettings);var ot=RegExp([(M.escape||we).source,(M.interpolate||we).source,(M.evaluate||we).source].join("|")+"|$","g"),wt=0,pt="__p+='";C.replace(ot,function(Ee,ur,Yr,Wa,Ro){return pt+=C.slice(wt,Ro).replace(ia,oa),wt=Ro+Ee.length,ur?pt+=`'+
((__t=(`+ur+`))==null?'':_.escape(__t))+
'`:Yr?pt+=`'+
((__t=(`+Yr+`))==null?'':__t)+
'`:Wa&&(pt+=`';
`+Wa+`
__p+='`),Ee}),pt+=`';
`;var Nt=M.variable;if(Nt){if(!Xn.test(Nt))throw new Error("variable is not a bare identifier: "+Nt)}else pt=`with(obj||{}){
`+pt+`}
`,Nt="obj";pt=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+pt+`return __p;
`;var se;try{se=new Function(Nt,"_",pt)}catch(Ee){throw Ee.source=pt,Ee}var De=function(Ee){return se.call(this,Ee,ye)};return De.source="function("+Nt+`){
`+pt+"}",De}function ja(C,M,Z){M=Ln(M);var ot=M.length;if(!ot)return jt(Z)?Z.call(C):Z;for(var wt=0;wt<ot;wt++){var pt=C==null?void 0:C[M[wt]];pt===void 0&&(pt=Z,wt=ot),C=jt(pt)?pt.call(C):pt}return C}var Ao=0;function aa(C){var M=++Ao+"";return C?C+M:M}function ai(C){var M=ye(C);return M._chain=!0,M}function sa(C,M,Z,ot,wt){if(!(ot instanceof M))return C.apply(Z,wt);var pt=un(C.prototype),Nt=C.apply(pt,wt);return H(Nt)?Nt:pt}var la=te(function(C,M){var Z=la.placeholder,ot=function(){for(var wt=0,pt=M.length,Nt=Array(pt),se=0;se<pt;se++)Nt[se]=M[se]===Z?arguments[wt++]:M[se];for(;wt<arguments.length;)Nt.push(arguments[wt++]);return sa(C,ot,this,this,Nt)};return ot});la.placeholder=ye;const Bi=la,ko=te(function(C,M,Z){if(!jt(C))throw new TypeError("Bind must be called on a function");var ot=te(function(wt){return sa(C,ot,M,this,Z.concat(wt))});return ot}),rn=T(dt);function Ci(C,M,Z,ot){if(ot=ot||[],!M&&M!==0)M=1/0;else if(M<=0)return ot.concat(C);for(var wt=ot.length,pt=0,Nt=dt(C);pt<Nt;pt++){var se=C[pt];if(rn(se)&&(oe(se)||gr(se)))if(M>1)Ci(se,M-1,Z,ot),wt=ot.length;else for(var De=0,Ee=se.length;De<Ee;)ot[wt++]=se[De++];else Z||(ot[wt++]=se)}return ot}const Ts=te(function(C,M){M=Ci(M,!1,!1);var Z=M.length;if(Z<1)throw new Error("bindAll must be passed function names");for(;Z--;){var ot=M[Z];C[ot]=ko(C[ot],C)}return C});function Dn(C,M){var Z=function(ot){var wt=Z.cache,pt=""+(M?M.apply(this,arguments):ot);return ge(wt,pt)||(wt[pt]=C.apply(this,arguments)),wt[pt]};return Z.cache={},Z}const jn=te(function(C,M,Z){return setTimeout(function(){return C.apply(null,Z)},M)}),Ia=Bi(jn,ye,1);function Es(C,M,Z){var ot,wt,pt,Nt,se=0;Z||(Z={});var De=function(){se=Z.leading===!1?0:x(),ot=null,Nt=C.apply(wt,pt),ot||(wt=pt=null)},Ee=function(){var ur=x();!se&&Z.leading===!1&&(se=ur);var Yr=M-(ur-se);return wt=this,pt=arguments,Yr<=0||Yr>M?(ot&&(clearTimeout(ot),ot=null),se=ur,Nt=C.apply(wt,pt),ot||(wt=pt=null)):!ot&&Z.trailing!==!1&&(ot=setTimeout(De,Yr)),Nt};return Ee.cancel=function(){clearTimeout(ot),se=0,ot=wt=pt=null},Ee}function Ui(C,M,Z){var ot,wt,pt,Nt,se,De=function(){var ur=x()-wt;M>ur?ot=setTimeout(De,M-ur):(ot=null,Z||(Nt=C.apply(se,pt)),ot||(pt=se=null))},Ee=te(function(ur){return se=this,pt=ur,wt=x(),ot||(ot=setTimeout(De,M),Z&&(Nt=C.apply(se,pt))),Nt});return Ee.cancel=function(){clearTimeout(ot),ot=pt=se=null},Ee}function Wi(C,M){return Bi(M,C)}function Zn(C){return function(){return!C.apply(this,arguments)}}function Ps(){var C=arguments,M=C.length-1;return function(){for(var Z=M,ot=C[M].apply(this,arguments);Z--;)ot=C[Z].call(this,ot);return ot}}function ua(C,M){return function(){if(--C<1)return M.apply(this,arguments)}}function Ra(C,M){var Z;return function(){return--C>0&&(Z=M.apply(this,arguments)),C<=1&&(M=null),Z}}const Mo=Bi(Ra,2);function ca(C,M,Z){M=br(M,Z);for(var ot=Ne(C),wt,pt=0,Nt=ot.length;pt<Nt;pt++)if(wt=ot[pt],M(C[wt],wt,C))return wt}function In(C){return function(M,Z,ot){Z=br(Z,ot);for(var wt=dt(M),pt=C>0?0:wt-1;pt>=0&&pt<wt;pt+=C)if(Z(M[pt],pt,M))return pt;return-1}}const zi=In(1),Ki=In(-1);function Rn(C,M,Z,ot){Z=br(Z,ot,1);for(var wt=Z(M),pt=0,Nt=dt(C);pt<Nt;){var se=Math.floor((pt+Nt)/2);Z(C[se])<wt?pt=se+1:Nt=se}return pt}function Gi(C,M,Z){return function(ot,wt,pt){var Nt=0,se=dt(ot);if(typeof pt=="number")C>0?Nt=pt>=0?pt:Math.max(pt+se,Nt):se=pt>=0?Math.min(pt+1,se):pt+se+1;else if(Z&&pt&&se)return pt=Z(ot,wt),ot[pt]===wt?pt:-1;if(wt!==wt)return pt=M(L.call(ot,Nt,se),er),pt>=0?pt+Nt:-1;for(pt=C>0?Nt:se-1;pt>=0&&pt<se;pt+=C)if(ot[pt]===wt)return pt;return-1}}const Lo=Gi(1,zi,Rn),$i=Gi(-1,Ki);function qi(C,M,Z){var ot=rn(C)?zi:ca,wt=ot(C,M,Z);if(wt!==void 0&&wt!==-1)return C[wt]}function vi(C,M){return qi(C,Sn(M))}function mn(C,M,Z){M=rr(M,Z);var ot,wt;if(rn(C))for(ot=0,wt=C.length;ot<wt;ot++)M(C[ot],ot,C);else{var pt=Ne(C);for(ot=0,wt=pt.length;ot<wt;ot++)M(C[pt[ot]],pt[ot],C)}return C}function Nn(C,M,Z){M=br(M,Z);for(var ot=!rn(C)&&Ne(C),wt=(ot||C).length,pt=Array(wt),Nt=0;Nt<wt;Nt++){var se=ot?ot[Nt]:Nt;pt[Nt]=M(C[se],se,C)}return pt}function dr(C){var M=function(Z,ot,wt,pt){var Nt=!rn(Z)&&Ne(Z),se=(Nt||Z).length,De=C>0?0:se-1;for(pt||(wt=Z[Nt?Nt[De]:De],De+=C);De>=0&&De<se;De+=C){var Ee=Nt?Nt[De]:De;wt=ot(wt,Z[Ee],Ee,Z)}return wt};return function(Z,ot,wt,pt){var Nt=arguments.length>=3;return M(Z,rr(ot,pt,4),wt,Nt)}}const Yi=dr(1),Do=dr(-1);function Fn(C,M,Z){var ot=[];return M=br(M,Z),mn(C,function(wt,pt,Nt){M(wt,pt,Nt)&&ot.push(wt)}),ot}function Jn(C,M,Z){return Fn(C,Zn(br(M)),Z)}function Vn(C,M,Z){M=br(M,Z);for(var ot=!rn(C)&&Ne(C),wt=(ot||C).length,pt=0;pt<wt;pt++){var Nt=ot?ot[pt]:pt;if(!M(C[Nt],Nt,C))return!1}return!0}function si(C,M,Z){M=br(M,Z);for(var ot=!rn(C)&&Ne(C),wt=(ot||C).length,pt=0;pt<wt;pt++){var Nt=ot?ot[pt]:pt;if(M(C[Nt],Nt,C))return!0}return!1}function Ar(C,M,Z,ot){return rn(C)||(C=ze(C)),(typeof Z!="number"||ot)&&(Z=0),Lo(C,M,Z)>=0}const gi=te(function(C,M,Z){var ot,wt;return jt(M)?wt=M:(M=Ln(M),ot=M.slice(0,-1),M=M[M.length-1]),Nn(C,function(pt){var Nt=wt;if(!Nt){if(ot&&ot.length&&(pt=qn(pt,ot)),pt==null)return;Nt=pt[M]}return Nt==null?Nt:Nt.apply(pt,Z)})});function Xi(C,M){return Nn(C,bi(M))}function xi(C,M){return Fn(C,Sn(M))}function Na(C,M,Z){var ot=-1/0,wt=-1/0,pt,Nt;if(M==null||typeof M=="number"&&typeof C[0]!="object"&&C!=null){C=rn(C)?C:ze(C);for(var se=0,De=C.length;se<De;se++)pt=C[se],pt!=null&&pt>ot&&(ot=pt)}else M=br(M,Z),mn(C,function(Ee,ur,Yr){Nt=M(Ee,ur,Yr),(Nt>wt||Nt===-1/0&&ot===-1/0)&&(ot=Ee,wt=Nt)});return ot}function As(C,M,Z){var ot=1/0,wt=1/0,pt,Nt;if(M==null||typeof M=="number"&&typeof C[0]!="object"&&C!=null){C=rn(C)?C:ze(C);for(var se=0,De=C.length;se<De;se++)pt=C[se],pt!=null&&pt<ot&&(ot=pt)}else M=br(M,Z),mn(C,function(Ee,ur,Yr){Nt=M(Ee,ur,Yr),(Nt<wt||Nt===1/0&&ot===1/0)&&(ot=Ee,wt=Nt)});return ot}var ks=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Fa(C){return C?oe(C)?L.call(C):Et(C)?C.match(ks):rn(C)?Nn(C,xn):ze(C):[]}function He(C,M,Z){if(M==null||Z)return rn(C)||(C=ze(C)),C[Vr(C.length-1)];var ot=Fa(C),wt=dt(ot);M=Math.max(Math.min(M,wt),0);for(var pt=wt-1,Nt=0;Nt<M;Nt++){var se=Vr(Nt,pt),De=ot[Nt];ot[Nt]=ot[se],ot[se]=De}return ot.slice(0,M)}function Va(C){return He(C,1/0)}function cn(C,M,Z){var ot=0;return M=br(M,Z),Xi(Nn(C,function(wt,pt,Nt){return{value:wt,index:ot++,criteria:M(wt,pt,Nt)}}).sort(function(wt,pt){var Nt=wt.criteria,se=pt.criteria;if(Nt!==se){if(Nt>se||Nt===void 0)return 1;if(Nt<se||se===void 0)return-1}return wt.index-pt.index}),"value")}function jo(C,M){return function(Z,ot,wt){var pt=M?[[],[]]:{};return ot=br(ot,wt),mn(Z,function(Nt,se){var De=ot(Nt,se,Z);C(pt,Nt,De)}),pt}}const Zi=jo(function(C,M,Z){ge(C,Z)?C[Z].push(M):C[Z]=[M]}),Si=jo(function(C,M,Z){C[Z]=M}),nn=jo(function(C,M,Z){ge(C,Z)?C[Z]++:C[Z]=1}),En=jo(function(C,M,Z){C[Z?0:1].push(M)},!0);function Io(C){return C==null?0:rn(C)?C.length:Ne(C).length}function Oi(C,M,Z){return M in Z}const Qn=te(function(C,M){var Z={},ot=M[0];if(C==null)return Z;jt(ot)?(M.length>1&&(ot=rr(ot,M[1])),M=_r(C)):(ot=Oi,M=Ci(M,!1,!1),C=Object(C));for(var wt=0,pt=M.length;wt<pt;wt++){var Nt=M[wt],se=C[Nt];ot(se,Nt,C)&&(Z[Nt]=se)}return Z}),Ms=te(function(C,M){var Z=M[0],ot;return jt(Z)?(Z=Zn(Z),M.length>1&&(ot=M[1])):(M=Nn(Ci(M,!1,!1),String),Z=function(wt,pt){return!Ar(M,pt)}),Qn(C,Z,ot)});function zr(C,M,Z){return L.call(C,0,Math.max(0,C.length-(M==null||Z?1:M)))}function Ji(C,M,Z){return C==null||C.length<1?M==null||Z?void 0:[]:M==null||Z?C[0]:zr(C,C.length-M)}function fn(C,M,Z){return L.call(C,M==null||Z?1:M)}function kr(C,M,Z){return C==null||C.length<1?M==null||Z?void 0:[]:M==null||Z?C[C.length-1]:fn(C,Math.max(0,C.length-M))}function Ha(C){return Fn(C,Boolean)}function Ba(C,M){return Ci(C,M,!1)}const li=te(function(C,M){return M=Ci(M,!0,!0),Fn(C,function(Z){return!Ar(M,Z)})}),Ls=te(function(C,M){return li(C,M)});function Qi(C,M,Z,ot){tt(M)||(ot=Z,Z=M,M=!1),Z!=null&&(Z=br(Z,ot));for(var wt=[],pt=[],Nt=0,se=dt(C);Nt<se;Nt++){var De=C[Nt],Ee=Z?Z(De,Nt,C):De;M&&!Z?((!Nt||pt!==Ee)&&wt.push(De),pt=Ee):Z?Ar(pt,Ee)||(pt.push(Ee),wt.push(De)):Ar(wt,De)||wt.push(De)}return wt}const Ds=te(function(C){return Qi(Ci(C,!0,!0))});function Ti(C){for(var M=[],Z=arguments.length,ot=0,wt=dt(C);ot<wt;ot++){var pt=C[ot];if(!Ar(M,pt)){var Nt;for(Nt=1;Nt<Z&&Ar(arguments[Nt],pt);Nt++);Nt===Z&&M.push(pt)}}return M}function mi(C){for(var M=C&&Na(C,dt).length||0,Z=Array(M),ot=0;ot<M;ot++)Z[ot]=Xi(C,ot);return Z}const js=te(mi);function Is(C,M){for(var Z={},ot=0,wt=dt(C);ot<wt;ot++)M?Z[C[ot]]=M[ot]:Z[C[ot][0]]=C[ot][1];return Z}function Ua(C,M,Z){M==null&&(M=C||0,C=0),Z||(Z=M<C?-1:1);for(var ot=Math.max(Math.ceil((M-C)/Z),0),wt=Array(ot),pt=0;pt<ot;pt++,C+=Z)wt[pt]=C;return wt}function to(C,M){if(M==null||M<1)return[];for(var Z=[],ot=0,wt=C.length;ot<wt;)Z.push(L.call(C,ot,ot+=M));return Z}function fa(C,M){return C._chain?ye(M).chain():M}function Ei(C){return mn(tr(C),function(M){var Z=ye[M]=C[M];ye.prototype[M]=function(){var ot=[this._wrapped];return S.apply(ot,arguments),fa(this,Z.apply(ye,ot))}}),ye}mn(["pop","push","reverse","shift","sort","splice","unshift"],function(C){var M=q[C];ye.prototype[C]=function(){var Z=this._wrapped;return Z!=null&&(M.apply(Z,arguments),(C==="shift"||C==="splice")&&Z.length===0&&delete Z[0]),fa(this,Z)}}),mn(["concat","join","slice"],function(C){var M=q[C];ye.prototype[C]=function(){var Z=this._wrapped;return Z!=null&&(Z=M.apply(Z,arguments)),fa(this,Z)}});const Hn=ye;var eo=Ei(st);eo._=eo;const ro=eo}},bh={};function vr(O){var J=bh[O];if(J!==void 0)return J.exports;var ut=bh[O]={exports:{}};return f_[O].call(ut.exports,ut,ut.exports,vr),ut.exports}vr.n=O=>{var J=O&&O.__esModule?()=>O.default:()=>O;return vr.d(J,{a:J}),J};vr.d=(O,J)=>{for(var ut in J)vr.o(J,ut)&&!vr.o(O,ut)&&Object.defineProperty(O,ut,{enumerable:!0,get:J[ut]})};vr.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();vr.o=(O,J)=>Object.prototype.hasOwnProperty.call(O,J);vr.r=O=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})};var Ch={};(()=>{vr.d(Ch,{ZP:()=>A0,kr:()=>ih,j7:()=>nh});var O=vr(50),J=vr(163);function ut(a){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var e=a.raw;return e.reduce(function(r,i,l){var f=n[l-1],d=e[l-1];return Array.isArray(f)?f=f.join(""):d&&d.slice(-1)==="$"?r=r.slice(0,-1):f=(0,J.escape)(f),r+f+i})}var st={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1};const Lt=st;var et=vr(316),q=vr.n(et),k=vr(895);const N=function(a){var n=a.$;if(n&&n.prototype&&n.prototype.constructor.name!=="jQuery"){var t=n.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var i=this.get(0);return i&&i.focus(),this},t.bind=function(i,l){return this.on(i,l)},t.unbind=function(i,l){if((0,O.isObject)(i)){for(var f in i)i.hasOwnProperty(f)&&this.off(f,i[f]);return this}else return this.off(i,l)},t.click=function(i){return i?this.on("click",i):this.trigger("click")},t.change=function(i){return i?this.on("change",i):this.trigger("change")},t.keydown=function(i){return i?this.on("keydown",i):this.trigger("keydown")},t.delegate=function(i,l,f,d){return d||(d=f),this.on(l,i,function(h){h.data=f,d(h)})},t.scrollLeft=function(){var i=this.get(0);i=i.nodeType==9?i.defaultView:i;var l=i instanceof Window?i:null;return l?l.pageXOffset:i.scrollLeft||0},t.scrollTop=function(){var i=this.get(0);i=i.nodeType==9?i.defaultView:i;var l=i instanceof Window?i:null;return l?l.pageYOffset:i.scrollTop||0};var e=n.prototype.offset;t.offset=function(i){var l,f;return i&&(l=i.top,f=i.left),typeof l<"u"&&this.css("top","".concat(l,"px")),typeof f<"u"&&this.css("left","".concat(f,"px")),e.call(this)},n.map=function(i,l){for(var f=[],d=0;d<i.length;d++)f.push(l(i[d],d));return f};var r=Array.prototype.indexOf;n.inArray=function(i,l,f){return l==null?-1:r.call(l,i,f)},n.Event=function(i,l){if(!(this instanceof n.Event))return new n.Event(i,l);this.type=i,this.isDefaultPrevented=function(){return!1}}}};var S=vr(346),L=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),A=function(a){L(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(S.Hn),R=function(a){L(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getByComponent=function(t){var e=this;return this.filter(function(r){return e.getComponent(r)===t})[0]},n.prototype.addComponent=function(t,e){var r=this,i=((0,O.isArray)(t)?t:[t]).filter(function(l){return!r.hasComponent(l)}).map(function(l){return new A({component:l})})[0];return this.push(i,e)},n.prototype.getComponent=function(t){return t.get("component")},n.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},n.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},n.prototype.allComponents=function(){var t=this;return this.map(function(e){return t.getComponent(e)}).filter(function(e){return e})},n.prototype.removeComponent=function(t,e){var r=this,i=((0,O.isArray)(t)?t:[t]).map(function(l){return r.getByComponent(l)});return this.remove(i,e)},n}(S.FE);const z=R;var it=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ct=function(){return Ct=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ct.apply(this,arguments)},Mt=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Ht=function(){function a(n,t,e){this.cls=[],this._em=n,this._name=t;var r=this.name.charAt(0).toLowerCase()+this.name.slice(1),i=(0,O.isUndefined)(n.config[r])?n.config[this.name]:n.config[r],l=i===!0?{}:i||{};l.pStylePrefix=n.config.pStylePrefix||"",!(0,O.isUndefined)(i)&&!i&&(l._disable=1),l.em=n,this._config=(0,J.deepMerge)(e||{},l)}return Object.defineProperty(a.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),a.prototype.render=function(n){},a.prototype.postLoad=function(n){},Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(n){return n?this.config[n]:this.config},a.prototype.__logWarn=function(n,t){t===void 0&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(n),t)},a.prototype.__appendTo=function(){var n=this.getConfig().appendTo;if(n){var t=(0,O.isElement)(n)?n:document.querySelector(n);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},a}();const Ft=Ht;var xt=function(a){it(n,a);function n(t,e,r,i,l,f){f===void 0&&(f={});var d=a.call(this,t,e,l)||this;return d.cls=[],d.private=!1,d.all=r,d.events=i,!f.skipListen&&d.__initListen(),d}return n.prototype.postLoad=function(t){},n.prototype.render=function(t){},n.prototype.getProjectData=function(t){var e={},r=this.storageKey;return r&&(e[r]=t||this.getAll()),e},n.prototype.loadProjectData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=e.all,i=e.onResult,l=e.reset,f=this.storageKey,d={action:"load"},h=r||this.all,g=t[f];if(typeof g=="string")try{g=JSON.parse(g)}catch{this.__logWarn("Data parsing failed",{input:g})}return l&&g&&h.reset(void 0,d),i?g&&i(g,d):g&&(0,J.isDef)(g.length)&&h.reset(g,d),g},n.prototype.clear=function(t){t===void 0&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},n.prototype.getAll=function(){return Mt([],this.all.models,!0)},n.prototype.getAllMap=function(){return this.getAll().reduce(function(t,e){return t[e.get(e.idAttribute)]=e,t},{})},n.prototype.__initListen=function(t){t===void 0&&(t={});var e=this,r=e.all,i=e.em,l=e.events;r&&i&&r.on("add",function(f,d,h){return i.trigger(l.add,f,h)}).on("remove",function(f,d,h){return i.trigger(l.remove,f,h)}).on("change",function(f,d){return i.trigger(l.update,f,f.changedAttributes(),d)}).on("all",this.__catchAllEvent,this),this.cls=[r].concat(t.collections||[]),(t.propagate||[]).forEach(function(f){var d=f.entity,h=f.event;d.on("all",function(g,y,b,P){var D=P||b,$=Ct({event:g},D);[i,r].map(function(X){return X.trigger(h,y,$)})})})},n.prototype.__remove=function(t,e){var r=this;e===void 0&&(e={});var i=this.em,l=(0,O.isString)(t)?this.get(t):t,f=function(){return l&&r.all.remove(l,e),l};return!e.silent&&(i==null||i.trigger(this.events.removeBefore,l,f,e)),!e.abort&&f()},n.prototype.__catchAllEvent=function(t,e,r,i){var l=this,f=l.em,d=l.events,h=i||r;f&&d.all&&f.trigger(d.all,{event:t,model:e,options:h}),this.__onAllEvent()},n.prototype.__appendTo=function(t){var e=this.config.appendTo;if(e){var r=(0,O.isElement)(e)?e:document.querySelector(e);if(!r)return this.__logWarn('"appendTo" element not found');r.appendChild(this.render(t))}},n.prototype.__onAllEvent=function(){},n.prototype._createId=function(t){t===void 0&&(t=16);var e=this.getAll(),r=e.length+t,i=this.getAllMap(),l;do l=(0,J.createId)(r);while(i[l]);return l},n.prototype.__listenAdd=function(t,e){var r=this;t.on("add",function(i,l,f){return r.em.trigger(e,i,f)})},n.prototype.__listenRemove=function(t,e){var r=this;t.on("remove",function(i,l,f){return r.em.trigger(e,i,f)})},n.prototype.__listenUpdate=function(t,e){var r=this;t.on("change",function(i,l){return r.em.trigger(e,i,i.changedAttributes(),l)})},n.prototype.__destroy=function(){var t;this.cls.forEach(function(e){e.stopListening(),e.reset()}),(t=this.view)===null||t===void 0||t.remove(),this.view=void 0},n}(Ht),_t={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0};const qt=_t;var le=vr(642),ce={default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]};const te=ce;var H=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nt=function(a){H(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},n.prototype.initialize=function(){var t=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0);var e=["width","height","widthMedia"];e.forEach(function(r){return t.checkUnit(r)})},n.prototype.checkUnit=function(t){var e=this.get(t)||"",r=(parseFloat(e)||0).toString()===e.toString();r&&this.set(t,"".concat(e,"px"))},n.prototype.getName=function(){return this.get("name")||this.get("id")},n.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},n}(S.Hn);const B=nt;var tt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mt=function(a){tt(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(S.FE);const V=mt;mt.prototype.model=B;var Et=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),j=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Rt=function(a){Et(n,a);function n(t){var e=a.call(this,t)||this;return e.config=t.config||{},e.em=e.config.em,e.ppfx=e.config.pStylePrefix||"",e.listenTo(e.em,"change:device",e.updateSelect),e}return n.prototype.template=function(t){var e=t.ppfx,r=t.label;return ut(ft||(ft=j([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),e,r,e,e,e,e,e,e,e)},n.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},n.prototype.startAdd=function(){},n.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set("device",e?e.val():"")}},n.prototype.updateSelect=function(){var t=this,e=t.em,r=t.devicesEl;if(e&&e.getDeviceModel&&r){var i=e.getDeviceModel();r.val(i?i.get("id"):"")}},n.prototype.getOptions=function(){var t=this,e=t.collection,r=t.em,i="";return e.forEach(function(l){var f=l.attributes,d=f.name,h=f.id,g=r&&r.t&&r.t("deviceManager.devices.".concat(h))||d;i+='<option value="'.concat(h||d,'">').concat(g,"</option>")}),i},n.prototype.render=function(){var t=this,e=t.em,r=t.ppfx,i=t.$el,l=t.el,f=e&&e.t&&e.t("deviceManager.device");return i.html(this.template({ppfx:r,label:f})),this.devicesEl=i.find(".".concat(r,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get("device")),l.className="".concat(r,"devices-c"),this},n}(S.G7);const At=Rt;var ft,Wt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jt=function(){return Jt=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Jt.apply(this,arguments)},pe="device",Ot="".concat(pe,":"),jt="".concat(Ot,"select"),Bt="".concat(Ot,"update"),Kt="".concat(Ot,"add"),zt="".concat(Ot,"remove"),Ut="".concat(zt,":before"),be="change:device",xe={all:pe,select:jt,update:Bt,add:Kt,remove:zt,removeBefore:Ut},oe=function(a){Wt(n,a);function n(t){var e,r=a.call(this,t,"DeviceManager",new V,xe,te)||this;return r.Device=B,r.Devices=V,r.storageKey="",r.devices=r.all,(e=r.config.devices)===null||e===void 0||e.forEach(function(i){return r.add(i,{silent:!0})}),r.select(r.config.default||r.devices.at(0)),t.on(be,r._onSelect,r),r}return n.prototype._onSelect=function(t,e,r){var i=this,l=i.em,f=i.events,d=t.previous("device"),h=this.get(e),g=f.select;l.trigger(g,h,this.get(d)),this.__catchAllEvent(g,h,r)},n.prototype.add=function(t,e){e===void 0&&(e={});var r,i=e;if((0,O.isString)(t)){var l=e;i=arguments[2]||{},r=Jt(Jt({},i),{id:t,name:i.name||t,width:l})}else r=t;return r.id||(r.id=r.name||this._createId()),this.devices.add(r,i)},n.prototype.get=function(t){var e=this.getAll().filter(function(r){return r.get("name")===t})[0];return e||this.devices.get(t)||null},n.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},n.prototype.getDevices=function(){return this.devices.models},n.prototype.select=function(t,e){e===void 0&&(e={});var r=(0,O.isString)(t)?this.get(t):t;return r&&this.em.set("device",r.get("id"),e),this},n.prototype.getSelected=function(){return this.get(this.em.get("device"))},n.prototype.getAll=function(){return this.devices},n.prototype.render=function(){var t,e=this.em;return(t=this.view)===null||t===void 0||t.remove(),this.view=new At({collection:this.devices,config:Jt({em:e},this.config)}),this.view.render().el},n.prototype.destroy=function(){this.__destroy()},n}(xt);const ge=oe;var Ke=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gr=function(a){Ke(n,a);function n(t,e,r){return a.call(this,e,{module:t,modelConstructor:r})||this}return n.prototype.add=function(t,e){var r=this,i,l=(0,O.isArray)(t)?t:(0,O.isUndefined)(t)?void 0:[t];return l=(i=l==null?void 0:l.map(function(f){return f instanceof r.newModel?f:new r.newModel(r.module,f)}))!==null&&i!==void 0?i:[void 0],a.prototype.add.call(this,(0,O.isArray)(t)?l:l[0],e)},n.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},n}(S.FE);const fr=gr;var er=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ae=function(){return ae=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ae.apply(this,arguments)},T=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},F="__aw",Q="__ah",gt=function(a,n){var t,e=a.get(n),r=(t=a.view)===null||t===void 0?void 0:t.el[n==="width"?"offsetWidth":"offsetHeight"];return(0,O.isNumber)(e)?e:(0,O.isString)(e)&&e.endsWith("px")?parseFloat(e):r||0},Pt=function(a){er(n,a);function n(t,e){var r=a.call(this,t,e)||this,i=r.em,l=r.attributes,f=l.styles,d=l.component,h=i.Components,g=h.getConfig(),y=i.Css.getAll(),b={},P={em:i,config:g,frame:r,idMap:b};if(!(0,J.isComponent)(d)){var D=(0,J.isObject)(d)?d:{components:d};!D.type&&(D.type="wrapper");var $=h.getType("wrapper").model;r.set("component",new $(D,P))}if(!f)r.set("styles",y);else if(!(0,J.isObject)(f)){var X=Object.keys(b);X.length&&Array.isArray(f)&&f.forEach(function(lt){var Tt=lt.selectors;if(Tt&&Tt.length==1){var bt=Tt[0],Zt=bt.name&&bt.type===2&&bt;if(Zt&&b[Zt.name])Zt.name=b[Zt.name];else if((0,O.isString)(bt)&&bt[0]==="#"){var ue=bt.substring(1);ue&&b[ue]&&(Tt[0]="#".concat(b[ue]))}}}),y.add(f),r.set("styles",y)}return!e.width&&r.set(F,1),!e.height&&r.set(Q,1),!r.id&&r.set("id",(0,J.createId)()),r}return n.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(n.prototype,"width",{get:function(){return gt(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return gt(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){var t=this.refFrame;return(t==null?void 0:t.getComponent())||this.getComponent()},enumerable:!1,configurable:!0}),n.prototype.initRefs=function(){var t=this.refFrame;if((0,O.isString)(t)){var e=this.module.framesById[t];e&&this.set({refFrame:e},{silent:!0})}},n.prototype.getBoxRect=function(){var t=this.attributes,e=t.x,r=t.y,i=this,l=i.width,f=i.height;return{x:e,y:r,width:l,height:f}},n.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},n.prototype.changesUp=function(t){t===void 0&&(t={}),!(t.temporary||t.noCount||t.avoidStore)&&this.set("changesCount",this.get("changesCount")+1)},n.prototype.getComponent=function(){return this.get("component")},n.prototype.getStyles=function(){return this.get("styles")},n.prototype.disable=function(){this.trigger("disable")},n.prototype.remove=function(){var t;(t=this.view)===null||t===void 0||t.remove(),this.view=void 0;var e=this.collection;return e&&e.remove(this)},n.prototype.getHead=function(){return T([],this.head,!0)},n.prototype.setHead=function(t){return this.set("head",T([],t,!0))},n.prototype.addHeadItem=function(t){this.head.push(t)},n.prototype.getHeadByAttr=function(t,e,r){return this.head.filter(function(i){return i.attributes&&i.attributes[t]==e&&(!r||r===i.tag)})[0]},n.prototype.removeHeadByAttr=function(t,e,r){var i=this.getHeadByAttr(t,e,r),l=this.head.indexOf(i);l>=0&&this.head.splice(l,1)},n.prototype.addLink=function(t){var e="link";!this.getHeadByAttr("href",t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:"stylesheet"}})},n.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},n.prototype.addScript=function(t){var e="script";!this.getHeadByAttr("src",t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},n.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},n.prototype.getPage=function(){var t;return(t=this.collection)===null||t===void 0?void 0:t.page},n.prototype._emitUpdated=function(t){t===void 0&&(t={}),this.em.trigger("frame:updated",ae({frame:this},t))},n.prototype.hasAutoHeight=function(){var t=this.attributes.height;return!!(t==="auto"||this.config.infiniteCanvas)},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=le.Z.prototype.toJSON.call(this,t),r=(0,O.result)(this,"defaults");return t.fromUndo&&delete e.component,delete e.styles,delete e.changesCount,e[F]&&delete e.width,e[Q]&&delete e.height,e.refFrame&&(e.refFrame=e.refFrame.id,delete e.component),(0,O.forEach)(e,function(i,l){l.indexOf("_")===0&&delete e[l]}),(0,O.forEach)(r,function(i,l){e[l]===i&&delete e[l]}),(0,O.forEach)(["attributes","head"],function(i){(0,O.isEmpty)(e[i])&&delete e[i]}),e},n}(le.Z);const Y=Pt;var St=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dt=function(a){St(n,a);function n(t,e){e===void 0&&(e=[]);var r=a.call(this,t,e,Y)||this;return r.loadedItems=0,r.itemsToLoad=0,(0,O.bindAll)(r,"itemLoaded"),r.on("add",r.onAdd),r.on("reset",r.onReset),r.on("remove",r.onRemove),r.forEach(function(i){return r.onAdd(i)}),r}return n.prototype.onAdd=function(t){this.module.framesById[t.id]=t},n.prototype.onReset=function(t,e){var r=this,i=(e==null?void 0:e.previousModels)||[];i.map(function(l){return r.onRemove(l)})},n.prototype.onRemove=function(t){t.onRemove(),delete this.module.framesById[t.id]},n.prototype.initRefs=function(){this.forEach(function(t){return t.initRefs()})},n.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},n.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},n.prototype.listenToLoadItems=function(t){var e=this;this.forEach(function(r){return r[t?"on":"off"]("loaded",e.itemLoaded)})},n}(fr);const Ce=dt;var Ye=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ne=function(a){Ye(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t,e)||this,i=e.em,l={};r.em=i,t.frames||(l.component=t.component,l.styles=t.styles,["component","styles"].map(function(h){return r.unset(h)}));var f=t.frames||[l],d=new Ce(i.Canvas,f);return d.page=r,r.set("frames",d),!r.getId()&&r.set("id",i==null?void 0:i.Pages._createId()),i==null||i.UndoManager.add(d),r}return n.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},n.prototype.onRemove=function(){this.getFrames().reset()},n.prototype.getFrames=function(){return this.get("frames")},n.prototype.getId=function(){return this.id},n.prototype.getName=function(){return this.get("name")},n.prototype.setName=function(t){return this.set({name:t})},n.prototype.getAllFrames=function(){return this.getFrames().models||[]},n.prototype.getMainFrame=function(){return this.getFrames().at(0)},n.prototype.getMainComponent=function(){var t=this.getMainFrame();return t==null?void 0:t.getComponent()},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=S.Hn.prototype.toJSON.call(this,t),r=(0,O.result)(this,"defaults");return(0,O.forEach)(e,function(i,l){l.indexOf("_")===0&&delete e[l]}),(0,O.forEach)(r,function(i,l){e[l]===i&&delete e[l]}),e},n}(S.Hn);const Ge=Ne;var pr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ye=function(){return ye=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ye.apply(this,arguments)},qr=function(a){pr(n,a);function n(t,e){var r=a.call(this,t)||this;return r.on("reset",r.onReset),r.on("remove",r.onRemove),r.model=function(i,l){return l===void 0&&(l={}),new Ge(i,ye(ye({},l),{em:e}))},r}return n.prototype.onReset=function(t,e){var r=this,i;(i=e==null?void 0:e.previousModels)===null||i===void 0||i.map(function(l){return r.onRemove(l)})},n.prototype.onRemove=function(t){t==null||t.onRemove()},n}(S.FE);const ir=qr;var $e=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nr=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},_e="page",_r="".concat(_e,":"),Pe="".concat(_r,"select"),Qe="".concat(Pe,":before"),sr="".concat(_r,"update"),Wr="".concat(_r,"add"),wr="".concat(Wr,":before"),Mn="".concat(_r,"remove"),I="".concat(Mn,":before"),at="change:selected",ht="main",It={all:_e,select:Pe,selectBefore:Qe,update:sr,add:Wr,addBefore:wr,remove:Mn,removeBefore:I},fe=function(a){$e(n,a);function n(t){var e=a.call(this,t,"PageManager",new ir([],t),It)||this;e.storageKey="pages",(0,O.bindAll)(e,"_onPageChange");var r=new le.Z({_undo:!0});return e.model=r,e.pages.on("reset",function(i){return i.at(0)&&e.select(i.at(0))}),e.pages.on("all",e.__onChange,e),r.on(at,e._onPageChange),e}return Object.defineProperty(n.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),n.prototype.getAll=function(){return Nr([],this.all.models,!0)},n.prototype.__onChange=function(t,e,r,i){var l=i||r;this.em.trigger(_e,{event:t,page:e,options:l})},n.prototype.onLoad=function(){var t,e=this,r=e.pages,i=e.config,l=e.em,f={silent:!0},d=((t=i.pages)===null||t===void 0?void 0:t.map(function(g){return new Ge(g,{em:l,config:i})}))||[];r.add(d,f);var h=r.length?this.getMain():this.add({type:ht},f);h&&this.select(h,f)},n.prototype._onPageChange=function(t,e,r){var i=this.em,l=i.Layers,f=e.getMainComponent();l&&f&&l.setRoot(f),i.trigger(Pe,e,t.previous("selected")),this.__onChange(at,e,r)},n.prototype.postLoad=function(){var t=this,e=t.em,r=t.model,i=t.pages,l=e.UndoManager;l.add(r),l.add(i),i.on("add remove reset change",function(f,d,h){return e.changesUp(h||d)})},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={});var i=this.em;t.id=t.id||this._createId();var l=function(){var f=r.pages.add(new Ge(t,{em:r.em,config:r.config}),e);return e.select&&r.select(f),f};return!e.silent&&i.trigger(wr,t,l,e),!e.abort&&l()},n.prototype.remove=function(t,e){var r=this;e===void 0&&(e={});var i=this.em,l=(0,O.isString)(t)?this.get(t):t,f=function(){return l&&r.pages.remove(l,e),l};return!e.silent&&i.trigger(I,l,f,e),!e.abort&&f()},n.prototype.get=function(t){return this.pages.filter(function(e){return e.get(e.idAttribute)===t})[0]},n.prototype.getMain=function(){var t=this.pages;return t.filter(function(e){return e.get("type")===ht})[0]||t.at(0)},n.prototype.getAllWrappers=function(){var t=this.getAll();return(0,O.unique)((0,O.flatten)(t.map(function(e){return e.getAllFrames().map(function(r){return r.getComponent()})})))},n.prototype.select=function(t,e){e===void 0&&(e={});var r=(0,O.isString)(t)?this.get(t):t;return r&&(this.em.trigger(Qe,r,e),this.model.set("selected",r,e)),this},n.prototype.getSelected=function(){return this.model.get("selected")},n.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(e){return t[e]=0})},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){var e=this.loadProjectData(t,{all:this.pages,reset:!0});return this.pages.forEach(function(r){return r.getFrames().initRefs()}),e},n.prototype._createId=function(){var t=this.getAll(),e=t.length+16,r=this.getAllMap(),i;do i=(0,J.createId)(e);while(r[i]);return i},n}(xt);const Ae=fe;var ze=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tn=function(a){ze(n,a);function n(t){var e=this,r=t.em,i=t.config,l=i.scripts,f=i.styles;return e=a.call(this,t,{scripts:l,styles:f})||this,e.set("frames",new Ce(t)),e.on("change:zoom",e.onZoomChange),e.on("change:x change:y",e.onCoordsChange),e.on("change:pointer change:pointerScreen",e.onPointerChange),e.listenTo(r,"change:device ".concat(Bt),e.updateDevice),e.listenTo(r,Pe,e._pageUpdated),e}return n.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:S.pH,pointerScreen:S.pH}},Object.defineProperty(n.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),n.prototype.init=function(){var t=this.em,e=t.Pages.getMain();this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},n.prototype._pageUpdated=function(t,e){var r=this.em;r.setSelected(),r.get("readyCanvas")&&r.stopDefault(),e==null||e.getFrames().map(function(i){return i.disable()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},n.prototype.updateDevice=function(t){t===void 0&&(t={});var e=this.em,r=e.getDeviceModel(),i=t.frame||e.getCurrentFrameModel();if(i&&r){var l=r.attributes,f=l.width,d=l.height;i.set({width:f,height:d},{noUndo:1})}},n.prototype.onZoomChange=function(){var t=this,e=t.em,r=t.module,i=this.get("zoom");i<1&&this.set("zoom",1),e.trigger(r.events.zoom)},n.prototype.onCoordsChange=function(){var t=this,e=t.em,r=t.module;e.trigger(r.events.coords)},n.prototype.onPointerChange=function(){var t=this,e=t.em,r=t.module;e.trigger(r.events.pointer)},n.prototype.getPointerCoords=function(t){t===void 0&&(t=S.vA.World);var e=this.attributes,r=e.pointer,i=e.pointerScreen;return t===S.vA.World?r:i},n}(le.Z);const vn=tn;var tr=vr(675),Vi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gn=function(a){Vi(n,a);function n(t,e){e===void 0&&(e=[]);var r=a.call(this,t,e,tr.Z)||this;r.on("add",r.onAdd),r.on("change",r.onChange),r.on("remove",r.onRemove);var i=r.em;r.refreshDbn=(0,O.debounce)(function(){return r.refresh()},0);var l="component:resize styleable:change component:input component:update frame:updated undo redo";return r.listenTo(i,l,function(){return r.refreshDbn()}),r}return Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),n.prototype.refresh=function(){var t=this,e=t.em,r=t.events;e.trigger(r.spot)},n.prototype.onAdd=function(t){this.__trgEvent(this.events.spotAdd,{spot:t})},n.prototype.onChange=function(t){this.__trgEvent(this.events.spotUpdate,{spot:t})},n.prototype.onRemove=function(t){this.__trgEvent(this.events.spotRemove,{spot:t})},n.prototype.__trgEvent=function(t,e){var r=this.module,i=r.em;i.trigger(t,e),this.refreshDbn()},n}(fr);const Cn=gn;var ii;(function(a){a.dragEnter="canvas:dragenter",a.dragOver="canvas:dragover",a.dragEnd="canvas:dragend",a.dragData="canvas:dragdata",a.drop="canvas:drop",a.spot="canvas:spot",a.spotAdd="canvas:spot:add",a.spotUpdate="canvas:spot:update",a.spotRemove="canvas:spot:remove",a.coords="canvas:coords",a.zoom="canvas:zoom",a.pointer="canvas:pointer"})(ii||(ii={}));var Pr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),un=function(a){Pr(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"module",{get:function(){var t,e;return(e=(t=this.model)===null||t===void 0?void 0:t.module)!==null&&e!==void 0?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),n.prototype.preinitialize=function(t){this.className=""},n}(S.G7);const or=un;var Xt=vr(491),$n=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Po=function(a){$n(n,a);function n(t,e){t===void 0&&(t={}),e===void 0&&(e=!1);var r=a.call(this,t)||this;return r.itemsView="",r.itemType="type",r.reuseView=!1,r.viewCollection=[],e&&r.listenTo(r.collection,"add",r.addTo),r}return n.prototype.addTo=function(t){this.add(t)},n.prototype.itemViewNotFound=function(t){},n.prototype.add=function(t,e){var r=this,i=r.reuseView,l=r.viewCollection,f=e||null,d=t.get(this.itemType),h;t.view&&i?h=t.view:h=this.renderView(t,d),l.push(h);var g=h.render().el;f?f.appendChild(g):this.$el.append(g)},n.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(r){return t.add(r,e)}),this.$el.append(e),this.onRender(),this},n.prototype.onRender=function(){},n.prototype.onRemoveBefore=function(t,e){},n.prototype.onRemove=function(t,e){},n.prototype.remove=function(t){t===void 0&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),S.G7.prototype.remove.apply(this,t),this.onRemove(e,t),this},n.prototype.clearItems=function(){this.viewCollection},n}(or);const Ln=Po;var qn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fr=function(a){qn(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{};var r=e.model;return e.listenTo(r,"change",e.render),e.listenTo(r,"destroy remove",e.remove),e.listenTo(r.get("selectors"),"change",e.render),e}return n.prototype.tagName=function(){return"style"},n.prototype.render=function(){var t=this,e=t.model,r=t.el,i=e.get("important");return r.innerHTML=e.toCSS({important:i}),this},n}(S.G7);const oi=Fr;var xn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sn=function(a){xn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var t=this.model,e=t.get("important");return this.el.textContent=t.getDeclaration({important:e}),this},n}(oi);const bi=Sn;var rr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),me=function(a,n){return"".concat(a).concat(n?"-".concat(parseFloat(n)):"")},On=function(a){rr(n,a);function n(t){var e=a.call(this,t)||this;(0,O.bindAll)(e,"sortRules");var r=t.config||{};e.atRules={},e.config=r,e.em=r.em,e.pfx=r.stylePrefix||"",e.className=e.pfx+"rules";var i=e.collection;return e.listenTo(i,"add",e.addTo),e.listenTo(i,"reset",e.render),e}return n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){if(this.renderStarted){var r=e||null,i=this.config,l={model:t,config:i},f,d;if(t.get("atRuleType")==="keyframes"){var h=t.getAtRule(),g=this.atRules[h];if(!g){var y=document.createElement("style");g=document.createTextNode(""),y.appendChild(document.createTextNode("".concat(h,"{"))),y.appendChild(g),y.appendChild(document.createTextNode("}")),this.atRules[h]=g,f=y}d=new bi(l),g.appendData(d.render().el.textContent)}else d=new oi(l),f=d.render().el;var b=this.className,P=t.get("mediaText"),D=me(b),$=D;if(P&&($=me(b,this.getMediaWidth(P))),f){var X=r||this.el,lt=void 0;try{lt=X.querySelector("#".concat($))}catch{}lt||(lt=X.querySelector("#".concat(D))),lt==null||lt.appendChild(f)}return f}},n.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},n.prototype.sortRules=function(t,e){var r=this.em,i=(r.getConfig().mediaCondition||"").indexOf("min-width")!==-1;if(!i)return 0;var l=i?t:e,f=i?e:t;return l-f},n.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,r=e.em,i=e.$el,l=e.collection,f=this.className,d=document.createDocumentFragment();i.empty();var h=r.Devices.getAll().pluck("priority").sort(this.sortRules);return h.every(function(g){return g})&&h.unshift(0),h.forEach(function(g){return d.appendChild((0,Xt.ut)("div",{id:me(f,g)}))}),l.each(function(g){return t.addToCollection(g,d)}),i.append(d),i.attr("class",f),this},n}(S.G7);const br=On;var en=function(){return en=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},en.apply(this,arguments)},Xe=function(){function a(n,t){var e=this;this.em=n,this.canvas=n.Canvas;var r=t||this.canvas.getFrames().map(function(l){return l.getComponent().getEl()}),i=Array.isArray(r)?r:[r];this.el=i[0],this.counter=0,(0,O.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),i.forEach(function(l){return e.toggleEffects(l,!0)})}return a.prototype.toggleEffects=function(n,t){var e={on:Xt.on,off:Xt.S1},r=t?"on":"off";e[r](n,"dragenter",this.handleDragEnter),e[r](n,"dragover",this.handleDragOver),e[r](n,"drop",this.handleDrop),e[r](n,"dragleave",this.handleDragLeave)},a.prototype.__customTglEff=function(n){var t,e=n?Xt.on:Xt.S1,r=this.el.ownerDocument,i=(t=r.defaultView)===null||t===void 0?void 0:t.frameElement;this.sortOpts=n?{onStart:function(l){var f=l.sorter;(0,Xt.on)(i,"pointermove",f.onMove)},onEnd:function(l){var f=l.sorter;(0,Xt.S1)(i,"pointermove",f.onMove)},customTarget:function(l){var f=l.event;return r.elementFromPoint(f.clientX,f.clientY)}}:null,e(i,"pointerenter",this.handleDragEnter),e(i,"pointermove",this.handleDragOver),e(document,"pointerup",this.handleDrop),e(i,"pointerout",this.handleDragLeave)},a.prototype.startCustom=function(){this.__customTglEff(!0)},a.prototype.endCustom=function(n){this.over?this.endDrop(n):this.__customTglEff(!1)},a.prototype.endDrop=function(n,t){var e=this,r=e.em,i=e.dragStop;this.counter=0,i&&i(n||!this.over),this.__customTglEff(!1),r.trigger("canvas:dragend",t)},a.prototype.handleDragLeave=function(n){this.updateCounter(-1,n)},a.prototype.updateCounter=function(n,t){this.counter+=n,this.counter===0&&this.endDrop(!0,t)},a.prototype.handleDragEnter=function(n){var t=this,e=this,r=e.em,i=e.canvas,l=n.dataTransfer,f=r.get("dragContent");if(!(!f&&!i.getConfig().allowExternalDrop)&&(this.updateCounter(1,n),!this.over)){this.over=!0;var d=r.Utils,h=f||"<br>",g,y;if(r.stopDefault(),r.inAbsoluteMode()){var b=r.Components.getWrapper(),P=b.append({})[0],D=r.Commands.run("core:component-drag",{event:n,guidesInfo:1,center:1,target:P,onEnd:function(X,lt,Tt){var bt=Tt.cancelled,Zt;if(!bt){Zt=b.append(h)[0];var ue=i.getOffset(),Oe=P.getStyle(),Ie=Oe.top,ee=Oe.left,je=Oe.position,Ze=(0,Xt.GX)(X.target),ln=parseInt("".concat(parseFloat(ee)+Ze.x-ue.left),10),ne=parseInt("".concat(parseFloat(Ie)+Ze.y-ue.top),10);Zt.addStyle({left:ln+"px",top:ne+"px",position:je})}t.handleDragEnd(Zt,l),P.remove()}});g=function(X){return D.stop(n,{cancel:X})},y=function(X){return h=X}}else{var $=new d.Sorter(en({em:r,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:this.el,placer:i.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(X){return t.handleDragEnd(X,l)},document:this.el.ownerDocument},this.sortOpts||{}));$.setDropContent(h),$.startSort(),this.sorter=$,g=function(X){X&&($.moved=!1),$.endMove()},y=function(X){return $.setDropContent(X)}}this.dragStop=g,this.dragContent=y,r.trigger("canvas:dragenter",l,h)}},a.prototype.handleDragEnd=function(n,t){var e=this.em;this.over=!1,n&&(e.set("dragResult",n),e.trigger("canvas:drop",t,n)),e.runDefault({preserveSelected:1})},a.prototype.handleDragOver=function(n){n.preventDefault(),this.em.trigger("canvas:dragover",n)},a.prototype.handleDrop=function(n){n.preventDefault();var t=this.dragContent,e=n.dataTransfer,r=this.getContentByData(e).content;n.target.style.border="",r&&t&&t(r),this.endDrop(!r,n)},a.prototype.getContentByData=function(n){var t=this.em,e=n&&n.types,r=n&&n.files||[],i=t.get("dragContent"),l=n&&n.getData("text");if(r.length){l=[];for(var f=0;f<r.length;f++){var d=r[f],h=d.type.split("/")[0];h=="image"&&l.push({type:h,file:d,attributes:{alt:d.name}})}}else if(i)l=i;else if((0,O.indexOf)(e,"text/html")>=0)l=n&&n.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,O.indexOf)(e,"text/uri-list")>=0)l={type:"link",attributes:{href:l},content:l};else if((0,O.indexOf)(e,"text/json")>=0){var g=n&&n.getData("text/json");g&&(l=JSON.parse(g))}else e.length===1&&e[0]==="text/plain"&&(l="<div>".concat(l,"</div>"));var y={content:l};return t.trigger("canvas:dragdata",n,y),y},a}();const Yn=Xe;var hi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vr=function(){return Vr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Vr.apply(this,arguments)},x=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},U=function(a){hi(n,a);function n(t,e){var r=a.call(this,{model:t})||this;r.dragging=!1,r.loaded=!1,r.lastMaxHeight=0,r.tools={},(0,O.bindAll)(r,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var i=r.el;r.module._config=Vr(Vr({},r.config||{}),{frameView:r}),r.frameWrapView=e,r.showGlobalTools=(0,O.debounce)(r.showGlobalTools.bind(r),50);var l=r.getCanvasModel();return r.listenTo(t,"change:head",r.updateHead),r.listenTo(l,"change:styles",r.renderStyles),t.view=r,(0,J.setViewEl)(i,r),r}return Object.defineProperty(n.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),n.prototype.getBoxRect=function(){var t=this,e=t.el,r=t.module,i=r.getCanvasView(),l=r.getCoords(),f=e.getBoundingClientRect(),d=i.getCanvasOffset(),h=i.getViewportDelta(),g=r.getZoomMultiplier(),y=(f.x-d.left-h.x-l.x)*g,b=(f.y-d.top-h.y-l.y)*g,P=f.width*g,D=f.height*g;return{x:y,y:b,width:P,height:D}},n.prototype.updateHead=function(){var t=this.model,e=this.getHead(),r=[],i=[],l=t.head,f=t.previous("head"),d=function(g){return g===void 0&&(g={}),Object.keys(g).sort().map(function(y){return"[".concat(y,'="').concat(g[y],'"]')}).join("")},h=function(g,y,b){g.forEach(function(P){var D=P.tag,$=P.attributes,X=y.some(function(lt){return lt.tag===D&&d(lt.attributes)===d($)});!X&&b.push(P)})};h(l,f,i),h(f,l,r),r.forEach(function(g){var y,b=e.querySelector("".concat(g.tag).concat(d(g.attributes)));(y=b==null?void 0:b.parentNode)===null||y===void 0||y.removeChild(b)}),(0,Xt.SJ)(e,i)},n.prototype.getEl=function(){return this.el},n.prototype.getCanvasModel=function(){return this.em.Canvas.getModel()},n.prototype.getWindow=function(){return this.getEl().contentWindow},n.prototype.getDoc=function(){return this.getEl().contentDocument},n.prototype.getHead=function(){return this.getDoc().querySelector("head")},n.prototype.getBody=function(){return this.getDoc().querySelector("body")},n.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},n.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,Xt.ut)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},n.prototype.getToolsEl=function(){var t;return(t=this.frameWrapView)===null||t===void 0?void 0:t.elTools},n.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},n.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},n.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},n.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},n.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},n.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),r=e.scrollTop,i=e.scrollLeft,l=t.offsetHeight,f=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:l,width:f,scrollTop:r,scrollLeft:i,scrollBottom:r+l,scrollRight:i+f}},n.prototype._getTool=function(t){var e=this.tools,r=this.getToolsEl();return e[t]||(e[t]=r.querySelector(t)),e[t]},n.prototype.remove=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._toggleEffects(!1),this.tools={},(t=this.wrapper)===null||t===void 0||t.remove(),or.prototype.remove.apply(this,e),this},n.prototype.startAutoscroll=function(){var t=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout(function(){t._toggleAutoscrollFx(!0),requestAnimationFrame(t.autoscroll)},0)},n.prototype.autoscroll=function(){if(this.dragging){var t=this.lastClientY,e=this.em.Canvas,r=this.getWindow(),i=r.pageYOffset,l=t||0,f=e.getConfig().autoscrollLimit,d=this.getRect().height-f,h=i;if(l<f&&(h-=f-l),l>d&&(h+=l-d),!(0,O.isUndefined)(t)&&h!==i&&h>0&&h<this.lastMaxHeight){var g=this.getGlobalToolsEl();g.style.opacity="0",this.showGlobalTools(),r.scrollTo(0,h),e.spots.refreshDbn()}requestAnimationFrame(this.autoscroll)}},n.prototype.updateClientY=function(t){t.preventDefault(),this.lastClientY=(0,Xt.VB)(t).clientY*this.em.getZoomDecimal()},n.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},n.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},n.prototype._toggleAutoscrollFx=function(t){this.dragging=t;var e=this.getWindow(),r=t?"on":"off",i={on:Xt.on,off:Xt.S1};i[r](e,"mousemove dragover",this.updateClientY),i[r](e,"mouseup",this.stopAutoscroll)},n.prototype.render=function(){var t=this,e=t.$el,r=t.ppfx,i=t.em;return e.attr({class:"".concat(r,"frame")}),this.renderScripts(),i.trigger("frame:render",this),this},n.prototype.renderScripts=function(){var t=this,e=this,r=e.el,i=e.model,l=e.em,f="frame:load",d={el:r,model:i,view:this},h=this.getCanvasModel(),g=function(y){var b;if(y.length>0){var P=y.shift(),D=(0,Xt.ut)("script",Vr({type:"text/javascript"},(0,O.isString)(P)?{src:P}:P));D.onerror=D.onload=g.bind(null,y),(b=r.contentDocument)===null||b===void 0||b.head.appendChild(D)}else t.renderBody(),l&&l.trigger(f,d)};r.onload=function(){var y=t.config.frameContent;if(y){var b=t.getDoc();b.open(),b.write(y),b.close()}l&&l.trigger("".concat(f,":before"),d),g(x([],h.get("scripts"),!0))}},n.prototype.renderStyles=function(t){t===void 0&&(t={});var e=this.getHead(),r=this.getCanvasModel(),i=function(y){return y.map(function(b){return{tag:"link",attributes:Vr({rel:"stylesheet"},(0,O.isString)(b)?{href:b}:b)}})},l=i(t.prev||r.previous("styles")),f=i(r.get("styles")),d=[],h=[],g=function(y,b,P){y.forEach(function(D){var $=D.attributes.href,X=b.some(function(lt){return lt.attributes.href===$});!X&&P.push(D)})};g(f,l,h),g(l,f,d),d.forEach(function(y){var b,P=e.querySelector('link[href="'.concat(y.attributes.href,'"]'));(b=P==null?void 0:P.parentNode)===null||b===void 0||b.removeChild(P)}),(0,Xt.SJ)(e,h)},n.prototype.renderBody=function(){var t=this,e,r,i=this,l=i.config,f=i.em,d=i.model,h=i.ppfx,g=this.getDoc(),y=this.getBody(),b=this.getWindow(),P=d.hasAutoHeight(),D=f.config;b._isEditor=!0,this.renderStyles({prev:[]});var $="#ffca6f";(0,Xt.R3)(y,`<style>
      `.concat(D.baseCss||l.frameStyle||"",`

      `).concat(P?"body { overflow: hidden }":"",`

      [data-gjs-type="wrapper"] {
        `).concat(P?"":"min-height: 100vh;",`
        padding-top: 0.001em;
      }

      .`).concat(h,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(h,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(h,`selected-parent {
        outline: 2px solid `).concat($,` !important
      }

      .`).concat(h,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(h,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(h,`no-pointer {
        pointer-events: none;
      }

      .`).concat(h,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(h,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(h,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(h,`is__grabbing,
      .`).concat(h,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(D.canvasCss||"",`
      `).concat(D.protectedCss||"",`
    </style>`));var X=d.root,lt=f.Components.getType("wrapper").view;this.wrapper=new lt({model:X,config:Vr(Vr({},X.config),{em:f,frameView:this})}).render(),(0,Xt.R3)(y,(e=this.wrapper)===null||e===void 0?void 0:e.el),(0,Xt.R3)(y,new br({collection:d.getStyles(),config:Vr(Vr({},f.Css.getConfig()),{frameView:this})}).render().el),(0,Xt.R3)(y,this.getJsContainer()),(0,Xt.on)(y,"click",function(Tt){var bt;return Tt&&((bt=Tt.target)===null||bt===void 0?void 0:bt.tagName)=="A"&&Tt.preventDefault()}),(0,Xt.on)(y,"submit",function(Tt){return Tt&&Tt.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!l.infiniteCanvas}}].forEach(function(Tt){return Tt.event.split(" ").forEach(function(bt){g.addEventListener(bt,function(Zt){return t.el.dispatchEvent((0,Xt.t3)(Zt,Tt.class))},Tt.opts)})}),this._toggleEffects(!0),(0,J.hasDnd)(f)&&(this.droppable=new Yn(f,(r=this.wrapper)===null||r===void 0?void 0:r.el)),this.loaded=!0,d.trigger("loaded")},n.prototype._toggleEffects=function(t){var e=t?Xt.on:Xt.S1,r=this.getWindow();r&&e(r,"".concat(Xt.G1," resize"),this._emitUpdate)},n.prototype._emitUpdate=function(){this.model._emitUpdated()},n}(or);const Dt=U;var $t=vr(668),Me=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Re=function(){return Re=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Re.apply(this,arguments)},Je=function(a){Me(n,a);function n(t,e){var r=a.call(this,{model:t})||this;return(0,O.bindAll)(r,"onScroll","frameLoaded","updateOffset","remove","startDrag"),Re(Re({},t.config),{frameWrapView:r}),r.cv=e,r.frame=new Dt(t,r),r.classAnim="".concat(r.ppfx,"frame-wrapper--anim"),r.updateOffset=(0,O.debounce)(r.updateOffset.bind(r),0),r.updateSize=(0,O.debounce)(r.updateSize.bind(r),0),r.listenTo(t,"loaded",r.frameLoaded),r.listenTo(t,"change:x change:y",r.updatePos),r.listenTo(t,"change:width change:height",r.updateSize),r.listenTo(t,"destroy remove",r.remove),r.updatePos(),r.setupDragger(),r}return n.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},n.prototype.setupDragger=function(){var t=this,e=this,r=e.module,i=e.model,l,f,d,h=function(g){r.toggleFramesEvents(g)};this.dragger=new $t.Z({onStart:function(){var g=i.attributes,y=g.x,b=g.y;d=t.em.getZoomMultiplier(),l=y,f=b,h(!1)},onEnd:function(){return h(!0)},setPosition:function(g){i.set({x:l+g.x*d,y:f+g.y*d})}})},n.prototype.startDrag=function(t){var e;t&&((e=this.dragger)===null||e===void 0||e.start(t))},n.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,Xt.L_)(this.elTools)},n.prototype.remove=function(t){var e=this;return this.__clear(t),or.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(r){return e[r]=0}),this},n.prototype.updateOffset=function(){var t,e=this,r=e.em,i=e.$el,l=e.frame;!r||r.destroyed||(r.runDefault({preserveSelected:1}),i.removeClass(this.classAnim),(t=l==null?void 0:l.model)===null||t===void 0||t._emitUpdated())},n.prototype.updatePos=function(t){var e=this,r=e.model,i=e.el,l=r.attributes,f=l.x,d=l.y,h=i.style;this.frame.rect=void 0,h.left=isNaN(f)?f:"".concat(f,"px"),h.top=isNaN(d)?d:"".concat(d,"px"),t&&this.updateOffset()},n.prototype.updateSize=function(){this.updateDim()},n.prototype.updateDim=function(){var t=this,e=t.em,r=t.el,i=t.$el,l=t.model,f=t.classAnim,d=t.frame;if(d){d.rect=void 0,i.addClass(f);var h=this.__handleSize(),g=h.noChanges,y=h.width,b=h.height;((0,O.isNull)(y)||(0,O.isNull)(b))&&l.set(Re(Re({},y?{}:{width:r.offsetWidth}),b?{}:{height:r.offsetHeight}),{silent:1}),e.stopDefault({preserveSelected:1}),g?this.updateOffset():setTimeout(this.updateOffset,350)}},n.prototype.onScroll=function(){var t=this,e=t.frame,r=t.em;r.trigger("frame:scroll",{frame:e,body:e.getBody(),target:e.getWindow()})},n.prototype.frameLoaded=function(){var t=this,e=t.frame;t.config,e.getWindow().onscroll=this.onScroll,this.updateDim()},n.prototype.__handleSize=function(){var t,e,r="px",i=this,l=i.model,f=i.el,d=f.style,h=l.attributes,g=h.width,y=h.height,b=d.width||"",P=d.height||"",D=g||"",$=y||"",X=b==D&&P==$,lt=(0,O.isNumber)(D)?"".concat(D).concat(r):D,Tt=(0,O.isNumber)($)?"".concat($).concat(r):$;if(d.width=lt,l.hasAutoHeight()){var bt=this.frame.el;if(bt.contentDocument){var Zt=bt.contentDocument,ue=new ResizeObserver(function(){d.height="".concat(Zt.body.scrollHeight,"px")});ue.observe(Zt.body),(t=this.sizeObserver)===null||t===void 0||t.disconnect(),this.sizeObserver=ue}}else d.height=Tt,(e=this.sizeObserver)===null||e===void 0||e.disconnect(),delete this.sizeObserver;return{noChanges:X,width:g,height:y,newW:D,newH:$}},n.prototype.render=function(){var t=this,e=t.frame,r=t.$el,i=t.ppfx,l=t.cv,f=t.model,d=t.el,h=f.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),r.empty().attr({class:"".concat(i,"frame-wrapper")}).append(`
      <div class="`.concat(i,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(i,`frame-wrapper__name" data-action-move>
          `).concat(f.get("name")||"",`
        </div>
        <div class="`).concat(i,`frame-wrapper__top-r">
          <div class="`).concat(i,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(i,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(i,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(i,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(e.el);var g=(0,Xt.ut)("div",{class:"".concat(i,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(i,`highlighter" data-hl></div>
      <div class="`).concat(i,`badge" data-badge></div>
      <div class="`).concat(i,`placeholder">
        <div class="`).concat(i,`placeholder-int"></div>
      </div>
      <div class="`).concat(i,`ghost"></div>
      <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(i,`resizer"></div>
      <div class="`).concat(i,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(i,`offset-fixed-v"></div>
    `));this.elTools=g;var y=l==null?void 0:l.toolsWrapper;return y&&y.appendChild(g),h&&h({el:d,elTop:d.querySelector("[data-frame-top]"),elRight:d.querySelector("[data-frame-right]"),elBottom:d.querySelector("[data-frame-bottom]"),elLeft:d.querySelector("[data-frame-left]"),frame:f,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},n}(or);const we=Je;var Tn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ia=function(a){Tn(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,!0)||this;return r.listenTo(r.collection,"reset",r.render),r.canvasView=e.canvasView,r._module=e.module,r}return n.prototype.onRemoveBefore=function(t,e){e===void 0&&(e={}),t.forEach(function(r){return r.remove(e)})},n.prototype.onRender=function(){var t=this,e=t.$el,r=t.ppfx;e.attr({class:"".concat(r,"frames")})},n.prototype.clearItems=function(){var t=this.viewCollection||[];t.forEach(function(e){return e.remove()}),this.viewCollection=[]},n.prototype.renderView=function(t,e){return new we(t,this.canvasView)},n}(Ln);const oa=ia;var Xn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hi=function(){return Hi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Hi.apply(this,arguments)},ja=function(a){Xn(n,a);function n(t){var e=a.call(this,{model:t})||this;e.ready=!1,(0,O.bindAll)(e,"clearOff","onKeyPress","onWheel","onPointer");var r=e,i=r.em,l=r.pfx,f=r.ppfx,d=e.module.events;return e.className="".concat(l,"canvas ").concat(f,"no-touch-actions").concat(i.config.customUI?"":" ".concat(l,"canvas-bg")),e.clsUnscale="".concat(l,"unscale"),e._initFrames(),e.listenTo(i,"change:canvasOffset",e.clearOff),e.listenTo(i,"component:selected",e.checkSelected),e.listenTo(i,"".concat(d.coords," ").concat(d.zoom),e.updateFrames),e.listenTo(t,"change:frames",e._onFramesUpdate),e.toggleListeners(!0),e}return n.prototype.template=function(){var t=this.pfx;return`
      <div class="`.concat(t,`canvas__frames" data-frames>
        <div class="`).concat(t,`canvas__spots" data-spots></div>
      </div>
      <div id="`).concat(t,'tools" class="').concat(t,`canvas__tools" data-tools></div>
      <style data-canvas-style></style>
    `)},n.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},n.prototype._initFrames=function(){var t=this,e=t.frames,r=t.model,i=t.config,l=t.em,f=r.frames;l.set("readyCanvas",0),f.once("loaded:all",function(){return l.set("readyCanvas",1)}),e==null||e.remove(),this.frames=new oa({collection:f},Hi(Hi({},i),{canvasView:this}))},n.prototype.checkSelected=function(t,e){var r;e===void 0&&(e={});var i=e.scroll,l=this.em.getCurrentFrame();i&&((r=t.views)===null||r===void 0||r.forEach(function(f){f.frameView===l&&f.scrollIntoView(i)}))},n.prototype.remove=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this.frames)===null||t===void 0||t.remove(),this.frames=void 0,or.prototype.remove.apply(this,e),this.toggleListeners(!1),this},n.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),(e=t._parentEvent)===null||e===void 0||e.preventDefault())},n.prototype.toggleListeners=function(t){var e=this,r=e.el,i=e.config,l=t?Xt.on:Xt.S1;l(document,"keypress",this.onKeyPress),l(window,"scroll resize",this.clearOff),l(r,"wheel",this.onWheel,{passive:!i.infiniteCanvas}),l(r,"pointermove",this.onPointer)},n.prototype.screenToWorld=function(t,e){var r=this.module,i=r.getCoords(),l=r.getZoomMultiplier(),f=this.getViewportDelta();return{x:(t-i.x-f.x)*l,y:(e-i.y-f.y)*l}},n.prototype.onPointer=function(t){if(this.config.infiniteCanvas){var e=this.getCanvasOffset(),r=(0,Xt.GX)(),i={x:t.clientX-e.left+r.x,y:t.clientY-e.top+r.y};if(t._parentEvent){var l=t.target.getBoundingClientRect(),f=this.module.getZoomDecimal();i.x=l.left-e.left+r.x+t.clientX*f,i.y=l.top-e.top+r.y+t.clientY*f}this.model.set({pointerScreen:i,pointer:this.screenToWorld(i.x,i.y)})}},n.prototype.onKeyPress=function(t){var e=this.em,r=(0,Xt.sN)(t);r===" "&&e.getZoomDecimal()!==1&&!e.Canvas.isInputFocused()&&(this.preventDefault(t),e.Editor.runCommand("core:canvas-move"))},n.prototype.onWheel=function(t){var e=this,r=e.module,i=e.config;if(i.infiniteCanvas){this.preventDefault(t);var l=t.deltaX,f=t.deltaY,d=r.getZoomDecimal(),h=(0,Xt.Vb)(t),g=r.getCoords();if(h){var y=d-f*d*.01;r.setZoom(y*100);var b=this.model.getPointerCoords(S.vA.Screen),P=this.getCanvasOffset(),D=b.x-P.width/2,$=b.y-P.height/2,X=y/d,lt=D-(D-g.x)*X,Tt=$-($-g.y)*X;r.setCoords(lt,Tt)}else this.onPointer(t),r.setCoords(g.x-l,g.y-f)}},n.prototype.updateFrames=function(t){var e=this.em,r=this.toolsWrapper,i={preserveSelected:1};this.updateFramesArea(),this.clearOff(),r.style.display="none",e.trigger("canvas:update",t),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){e.stopDefault(i),e.runDefault(i),r.style.display=""},300)},n.prototype.updateFramesArea=function(){var t=this,e=t.framesArea,r=t.model,i=t.module,l=t.cvStyle,f=t.clsUnscale,d=i.getZoomMultiplier();if(e){var h=r.attributes,g=h.x,y=h.y,b=i.getZoomDecimal();e.style.transform="scale(".concat(b,") translate(").concat(g*d,"px, ").concat(y*d,"px)")}l&&(l.innerHTML=`
        .`.concat(f," { scale: ").concat(d,` }
      `))},n.prototype.fitViewport=function(t){var e,r;t===void 0&&(t={});var i=this,l=i.em,f=i.module,d=i.model,h=this.getCanvasOffset(),g=t.el,y=g&&((e=(0,J.getComponentView)(g))===null||e===void 0?void 0:e.frameView),b=y?y.model:t.frame||l.getCurrentFrameModel()||d.frames.at(0),P=b.attributes,D=P.x,$=P.y,X={x:D??0,y:$??0,width:b.width,height:b.height};if(g){var lt=this.getElBoxRect(g);X.x=X.x+lt.x,X.y=X.y+lt.y,X.width=lt.width,X.height=lt.height}var Tt=t.ignoreHeight,bt=(r=t.gap)!==null&&r!==void 0?r:0,Zt=(0,O.isNumber)(bt),ue=Zt?bt:bt.x,Oe=Zt?bt:bt.y,Ie=X.width+ue*2,ee=X.height+Oe*2,je=h.width,Ze=h.height,ln=je/Ie,ne=Ze/ee,hn=Tt?ln:Math.min(ln,ne),wo=hn*100;f.setZoom(wo);var bo=-X.x+(b.width>=je?je/2-Ie/2:-ue),Co=-X.y+Ze/2-ee/2,Ni={x:(bo+ue)*hn,y:(Co+Oe)*hn};if(Tt){var rf=f.getZoomMultiplier(),nf=Ze*rf,of=nf-Ze,Hp=of/2;Ni.y=(-X.y+Oe)*hn-Hp/rf}f.setCoords(Ni.x,Ni.y)},n.prototype.isElInViewport=function(t){var e=(0,J.getElement)(t),r=(0,Xt.Ut)(e),i=this.getFrameOffset(e),l=r.top,f=r.left;return l>=0&&f>=0&&l<=i.height&&f<=i.width},n.prototype.offset=function(t,e){e===void 0&&(e={});var r=e.noScroll,i=(0,Xt.Ut)(t),l=r?{x:0,y:0}:(0,Xt.GX)(t);return{top:i.top+l.y,left:i.left+l.x,width:i.width,height:i.height}},n.prototype.getRectToScreen=function(t){var e,r,i,l,f=this.module.getZoomDecimal(),d=this.module.getCoords(),h=this.getViewportDelta(),g=((e=t.x)!==null&&e!==void 0?e:0)*f+d.x+h.x||0,y=((r=t.y)!==null&&r!==void 0?r:0)*f+d.y+h.y||0;return{x:g,y,width:((i=t.width)!==null&&i!==void 0?i:0)*f,height:((l=t.height)!==null&&l!==void 0?l:0)*f}},n.prototype.getElBoxRect=function(t,e){var r,i,l;e===void 0&&(e={});var f=this.module,d=(0,Xt.Ut)(t),h=d.width,g=d.height,y=d.left,b=d.top,P=(r=(0,J.getComponentView)(t))===null||r===void 0?void 0:r.frameView,D=P==null?void 0:P.getBoxRect(),$=f.getZoomMultiplier(),X=(i=D==null?void 0:D.x)!==null&&i!==void 0?i:0,lt=(l=D==null?void 0:D.y)!==null&&l!==void 0?l:0,Tt=this.el,bt=(0,Xt.GX)(),Zt=y+X+(Tt.scrollLeft+bt.x)*$,ue=b+lt+(Tt.scrollTop+bt.y)*$,Oe={x:Zt,y:ue,width:h,height:g};return e.local&&(Oe.x=y,Oe.y=b),e.toScreen?this.getRectToScreen(Oe):Oe},n.prototype.getViewportRect=function(t){t===void 0&&(t={});var e=this.getCanvasOffset(),r=e.top,i=e.left,l=e.width,f=e.height,d=this.module;if(t.toWorld){var h=d.getZoomMultiplier(),g=d.getCoords(),y=this.getViewportDelta(),b=-g.x-y.x||0,P=-g.y-y.y||0;return{x:b*h,y:P*h,width:l*h,height:f*h}}else return{x:i,y:r,width:l,height:f}},n.prototype.getViewportDelta=function(t){var e=this.module.getZoomMultiplier(),r=this.getCanvasOffset(),i=r.width,l=r.height,f=i*e,d=l*e,h=f-i,g=d-l;return{x:h/2/e,y:g/2/e}},n.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},n.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var r=(e=this.frame)===null||e===void 0?void 0:e.el,i=t==null?void 0:t.ownerDocument.defaultView,l=i?i.frameElement:r;this.frmOff=this.offset(l||r)}return this.frmOff},n.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},n.prototype.getElementPos=function(t,e){e===void 0&&(e={});var r=this.module.getZoomDecimal(),i=this.getFrameOffset(t),l=this.el,f=this.getCanvasOffset(),d=this.offset(t,e),h=e.avoidFrameOffset?0:i.top,g=e.avoidFrameOffset?0:i.left,y=e.avoidFrameZoom?d.top:d.top*r,b=e.avoidFrameZoom?d.left:d.left*r,P=e.avoidFrameOffset?y:y+h-f.top+l.scrollTop,D=e.avoidFrameOffset?b:b+g-f.left+l.scrollLeft,$=e.avoidFrameZoom?d.height:d.height*r,X=e.avoidFrameZoom?d.width:d.width*r;return{top:P,left:D,height:$,width:X,zoom:r,rect:d}},n.prototype.getElementOffsets=function(t){if(!t||(0,Xt.BM)(t))return{};var e={},r=window.getComputedStyle(t),i=this.module.getZoomDecimal(),l=["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft"];return l.forEach(function(f){e[f]=parseFloat(r[f])*i}),e},n.prototype.getPosition=function(t){var e;t===void 0&&(t={});var r=(e=this.frame)===null||e===void 0?void 0:e.el.contentDocument;if(!r)return{top:0,left:0,width:0,height:0};var i=r.body,l=this.module.getZoomDecimal(),f=this.getFrameOffset(),d=this.getCanvasOffset(),h=t.noScroll;return{top:f.top+(h?0:i.scrollTop)*l-d.top,left:f.left+(h?0:i.scrollLeft)*l-d.left,width:d.width,height:d.height}},n.prototype.updateScript=function(t){var e=t.model,r=e.getId();if(!t.scriptContainer){t.scriptContainer=(0,Xt.ut)("div",{"data-id":r});var i=this.getJsContainer();i==null||i.appendChild(t.scriptContainer)}t.el.id=r,t.scriptContainer.innerHTML="";var l=document.createElement("script"),f=e.getScriptString(),d=e.get("script-props")?f:`function(){
`.concat(f,`
;}`),h=JSON.stringify(e.__getScriptProps());l.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(r,`');
        if (!item) return;
        (`).concat(d,".bind(item))(").concat(h,`)
      }, 1);`),setTimeout(function(){var g=t.scriptContainer;g==null||g.appendChild(l)},0)},n.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return e==null?void 0:e.getJsContainer()},n.prototype.getFrameView=function(t){return(t==null?void 0:t.frameView)||this.em.getCurrentFrame()},n.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,r=t.frames,i=t.em,l=t.framesArea,f=e.frames;f.listenToLoad(),r.render();var d=f.at(0),h=d==null?void 0:d.view;i.setCurrentFrame(h),l==null||l.appendChild(r.el),this.frame=h,this.updateFramesArea()}},n.prototype.renderFrames=function(){this._renderFrames()},n.prototype.render=function(){var t=this,e=t.el,r=t.$el,i=t.ppfx,l=t.config,f=t.em;r.html(this.template());var d=r.find("[data-frames]");this.framesArea=d.get(0);var h=r.find("[data-tools]");return this.toolsWrapper=h.get(0),h.append(`
      <div class="`.concat(i,"tools ").concat(i,`tools-gl" style="pointer-events:none">
        <div class="`).concat(i,`placeholder">
          <div class="`).concat(i,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(i,`tools" style="pointer-events:none">
        `).concat(l.extHl?'<div class="'.concat(i,'highlighter-sel"></div>'):"",`
        <div class="`).concat(i,`badge"></div>
        <div class="`).concat(i,`ghost"></div>
        <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(i,`resizer"></div>
        <div class="`).concat(i,`offset-v"></div>
        <div class="`).concat(i,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=e.querySelector("#".concat(i,"tools")),this.hlEl=e.querySelector(".".concat(i,"highlighter")),this.badgeEl=e.querySelector(".".concat(i,"badge")),this.placerEl=e.querySelector(".".concat(i,"placeholder")),this.ghostEl=e.querySelector(".".concat(i,"ghost")),this.toolbarEl=e.querySelector(".".concat(i,"toolbar")),this.resizerEl=e.querySelector(".".concat(i,"resizer")),this.offsetEl=e.querySelector(".".concat(i,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(i,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(i,"tools-gl")),this.spotsEl=e.querySelector("[data-spots]"),this.cvStyle=e.querySelector("[data-canvas-style]"),this.el.className=(0,J.getUiClass)(f,this.className),this.ready=!0,this._renderFrames(),this},n}(or);const Ao=ja;var aa=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ai=function(){return ai=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ai.apply(this,arguments)},sa=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},la=function(a){aa(n,a);function n(t){var e=a.call(this,t,"Canvas",qt)||this;return e.events=ii,e.framesById={},e.canvas=new vn(e),e.spots=new Cn(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e}return n.prototype.getCanvasView=function(){return this.canvasView},n.prototype.postLoad=function(){this.model.init()},n.prototype.getModel=function(){return this.canvas},n.prototype.getElement=function(){return this.getCanvasView().el},n.prototype.getFrame=function(t){return this.getFrames()[t||0]},n.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.el},n.prototype.getFramesEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.framesArea},n.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.getWindow()},n.prototype.getDocument=function(){var t=this.getFrameEl();return t==null?void 0:t.contentDocument},n.prototype.getBody=function(){var t=this.getDocument();return t==null?void 0:t.body},n.prototype._getLocalEl=function(t,e,r){var i=t,l=e==null?void 0:e.frameView;return i=l?l[r]():i,i},n.prototype.getGlobalToolsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.toolsGlobEl},n.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},n.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},n.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},n.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},n.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},n.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},n.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},n.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},n.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},n.prototype.getSpotsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.spotsEl},n.prototype.render=function(){var t;return(t=this.canvasView)===null||t===void 0||t.remove(),this.canvasView=new Ao(this.canvas),this.canvasView.render().el},n.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},n.prototype.offset=function(t){return this.getCanvasView().offset(t)},n.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},n.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},n.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},n.prototype.getRect=function(){var t,e=(t=this.getCanvasView().getPosition())!==null&&t!==void 0?t:{},r=e.top,i=r===void 0?0:r,l=e.left,f=l===void 0?0:l;return ai(ai({},this.getCanvasView().getCanvasOffset()),{topScroll:i,leftScroll:f})},n.prototype.getTargetToElementDim=function(t,e,r){r===void 0&&(r={});var i=r||{},l=this.getCanvasView().getPosition();if(l){var f=i.elPos||this.getCanvasView().getElementPos(e),d=r.toRight||0,h=i.targetHeight||t.offsetHeight,g=i.targetWidth||t.offsetWidth,y=i.event||null,b=f.top-h,P=f.left;P+=d?f.width:0,P=d?P-g:P;var D=P<l.left?l.left:P,$=b<l.top?l.top:b;$=$>f.top+f.height?f.top+f.height:$;var X={top:$,left:D,elementTop:f.top,elementLeft:f.left,elementWidth:f.width,elementHeight:f.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:l.top,canvasLeft:l.left,canvasWidth:l.width,canvasHeight:l.height};return y&&this.em&&this.em.trigger(y,X),X}},n.prototype.canvasRectOffset=function(t,e,r){var i=this;r===void 0&&(r={});var l=function(d){var h=d.defaultView;return h==null?void 0:h.frameElement},f=function(d,h,g){h===void 0&&(h=1);var y=i.em.getZoomDecimal(),b=h?"top":"left",P=d.ownerDocument,D=r.offset?l(P):{},$=D.offsetTop,X=$===void 0?0:$,lt=D.offsetLeft,Tt=lt===void 0?0:lt,bt=P.body||{},Zt=bt.scrollTop,ue=Zt===void 0?0:Zt,Oe=bt.scrollLeft,Ie=Oe===void 0?0:Oe,ee=h?ue:Ie,je=h?X:Tt;return g[b]-(ee-je)*y};return{top:f(t,1,e),left:f(t,0,e)}},n.prototype.getTargetToElementFixed=function(t,e,r){r===void 0&&(r={});var i=r.pos||this.getElementPos(t,{noScroll:!0}),l=r.canvasOff||this.canvasRectOffset(t,i),f=e.offsetHeight||0,d=e.offsetWidth||0,h=i.left+i.width,g=this.getCanvasView(),y=g.getPosition(),b=g.getFrameOffset(t),P=r.event,D=-f,$=(0,O.isUndefined)(r.left)?i.width-d:r.left;if($=i.left<-$?-i.left:$,$=h>y.width?$-(h-y.width):$,l.top<f){var X=i.height+f,lt=X<b.height;lt?D=D+X:D=-l.top<i.height?-l.top:i.height}var Tt={top:D,left:$,canvasOffsetTop:l.top,canvasOffsetLeft:l.left,elRect:i,canvasOffset:l,canvasRect:y,targetWidth:d,targetHeight:f};return P&&this.em.trigger(P,Tt),Tt},n.prototype.getMouseRelativePos=function(t,e){e===void 0&&(e={});var r=0,i=0,l=e.subWinOffset,f=t.target.ownerDocument,d=f.defaultView||f.parentWindow,h=d.frameElement,g=l?d.pageYOffset:0,y=l?d.pageXOffset:0;if(h){var b=h.getBoundingClientRect();r=b.top||0,i=b.left||0}return{y:t.clientY+r-g,x:t.clientX+i-y}},n.prototype.getMouseRelativeCanvas=function(t,e){var r,i=this.getZoomDecimal(),l=(r=this.getCanvasView().getPosition(e))!==null&&r!==void 0?r:{},f=l.top,d=f===void 0?0:f,h=l.left,g=h===void 0?0:h;return{y:t.clientY*i+d,x:t.clientX*i+g}},n.prototype.hasFocus=function(){return this.getDocument().hasFocus()},n.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),r=sa(["body"],this.config.notTextable,!0),i=e&&document.activeElement===e,l=i?t&&t.activeElement:document.activeElement;return l&&!r.some(function(f){return l.matches(f)})},n.prototype.scrollTo=function(t,e){e===void 0&&(e={});var r=(0,J.getElement)(t),i=r&&(0,J.getViewEl)(r);i&&i.scrollIntoView(e)},n.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.startAutoscroll()},n.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll()},n.prototype.setZoom=function(t){return this.canvas.set("zoom",typeof t=="string"?parseFloat(t):t),this},n.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},n.prototype.setCoords=function(t,e,r){var i;r===void 0&&(r={});var l=t||t===0,f=e||e===0,d={x:this.canvas.get("x"),y:this.canvas.get("y")};if(l&&(d.x=parseFloat("".concat(t))),f&&(d.y=parseFloat("".concat(e))),r.toWorld){var h=(i=this.canvasView)===null||i===void 0?void 0:i.getViewportDelta();h&&(l&&(d.x=d.x-h.x),f&&(d.y=d.y-h.y))}return this.canvas.set(d),this},n.prototype.getCoords=function(){var t=this.canvas.attributes,e=t.x,r=t.y;return{x:e,y:r}},n.prototype.getPointer=function(t){var e=this.canvas.attributes,r=e.pointer,i=e.pointerScreen;return t?i:r},n.prototype.getZoomDecimal=function(){return this.getZoom()/100},n.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},n.prototype.fitViewport=function(t){var e;(e=this.canvasView)===null||e===void 0||e.fitViewport(t)},n.prototype.toggleFramesEvents=function(t){var e=this.getFramesEl().style;e.pointerEvents=t?"":"none"},n.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},n.prototype.addFrame=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.canvas.frames.add(new Y(this,ai({},t)),e)},n.prototype.getLastDragResult=function(){return this.em.get("dragResult")},n.prototype.addSpot=function(t,e){var r;e===void 0&&(e={});var i=t,l=this.getSpots(i);if(l.length){var f=l[0];return f.set(i),f}var d=i.componentView||((r=i.component)===null||r===void 0?void 0:r.view),h=new tr.Z(this,ai(ai({},i),{id:i.id||"cs_".concat(i.type,"_").concat(d==null?void 0:d.cid),type:i.type||""}));return this.spots.add(h,e),h},n.prototype.getSpots=function(t){return t===void 0&&(t={}),this.spots.where(t.id?{id:t.id}:t)},n.prototype.removeSpots=function(t){t===void 0&&(t={});var e=(0,O.isArray)(t)?t:this.getSpots(t),r=this.spots.remove(e);return r},n.prototype.hasCustomSpot=function(t){var e=this.config.customSpots;return!!(e===!0||e&&t&&e[t])},n.prototype.getWorldRectToScreen=function(t){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.getRectToScreen(t)},n.prototype.refreshSpots=function(){this.spots.refresh()},n.prototype.destroy=function(){var t=this,e;this.canvas.stopListening(),(e=this.canvasView)===null||e===void 0||e.remove(),["model","droppable"].forEach(function(r){return t[r]={}})},n}(Ft);const Bi=la,ko={stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]};var rn="text/html",Ci=rn;const Ts=function(a,n){n===void 0&&(n={});var t=new DOMParser,e=n.htmlType||Ci,r=e===rn,i=r?a:"<div>".concat(a,"</div>"),l=t.parseFromString(i,e),f;if(r){var d=l.head,h=l.body,g=d.querySelectorAll("script");(0,O.each)(g,function(b){return h.appendChild(b)});var y=[];(0,O.each)(d.children,function(b){return y.push(b)}),(0,O.each)(y,function(b,P){return h.insertBefore(b,h.children[P])}),f=h}else f=l.firstChild;return f};var Dn=function(){return Dn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Dn.apply(this,arguments)},jn="data-gjs-",Ia="parse:html",Es=function(a,n){return n===void 0&&(n={}),{compTypes:"",modelAttrStart:jn,getPropAttribute:function(t,e){var r=t.replace(this.modelAttrStart,""),i=(e==null?void 0:e.length)||0,l=e==null?void 0:e.substring(0,1),f=e==null?void 0:e.substring(i-1),d=e==="true"?!0:e==="false"?!1:e;try{d=l=="{"&&f=="}"||l=="["&&f=="]"?JSON.parse(d):d}catch{}return{name:r,value:d}},splitPropsFromAttr:function(t){var e=this;t===void 0&&(t={});var r={},i={};return(0,O.each)(t,function(l,f){if(f.indexOf(e.modelAttrStart)===0){var d=e.getPropAttribute(f,l);r[d.name]=d.value}else i[f]=l}),{props:r,attrs:i}},parseStyle:function(t){for(var e={};t.indexOf("/*")>=0;){var r=t.indexOf("/*"),i=t.indexOf("*/")+2;t=t.replace(t.slice(r,i),"")}for(var l=t.split(";"),f=0,d=l.length;f<d;f++){var h=l[f].trim();if(h){var g=h.split(":"),y=g[0].trim(),b=g.slice(1).join(":").trim();e[y]?((0,O.isArray)(e[y])||(e[y]=[e[y]]),e[y].push(b)):e[y]=b}}return e},parseClass:function(t){for(var e=[],r=t.split(" "),i=0,l=r.length;i<l;i++){var f=r[i].trim();f&&e.push(f)}return e},parseNode:function(t,e){e===void 0&&(e={});for(var r=[],i=t.childNodes,l=0,f=i.length;l<f;l++){var d=i[l],h=d.attributes||[],g=h.length,y=r[r.length-1],b=d.childNodes.length,P=this.compTypes,D={};if(P){var $="",X=d.getAttribute&&d.getAttribute("".concat(this.modelAttrStart,"type"));if(X)D={type:X};else{for(var lt=0;lt<P.length;lt++){var Tt=P[lt];if($=Tt.model.isComponent(d,e),$){typeof $!="object"&&($={type:Tt.id});break}}D=$}}if(!D.tagName){var bt=d.tagName||"",Zt=d.namespaceURI||"";D.tagName=bt&&Zt==="http://www.w3.org/1999/xhtml"?bt.toLowerCase():bt}g&&(D.attributes={});for(var ue=0;ue<g;ue++){var Oe=h[ue].nodeName,Ie=h[ue].nodeValue;if(Oe=="style")D.style=this.parseStyle(Ie);else if(Oe=="class")D.classes=this.parseClass(Ie);else{if(Oe=="contenteditable")continue;if(Oe.indexOf(this.modelAttrStart)===0){var ee=this.getPropAttribute(Oe,Ie);D[ee.name]=ee.value}else Ie===""&&d[Oe]===!0&&(Ie=!0),D.attributes[Oe]=Ie}}if(b&&!D.components){var je=d.childNodes[0];b===1&&je.nodeType===3?(!D.type&&(D.type="text"),D.components={type:"textnode",content:je.nodeValue}):D.components=this.parseNode(d,Dn(Dn({},e),{inSvg:e.inSvg||D.type==="svg"}))}if(D.type=="textnode"){if(y&&y.type=="textnode"){y.content+=D.content;continue}if(!e.keepEmptyTextNodes){var Ze=d.nodeValue;if(Ze!=" "&&!Ze.trim())continue}}!b&&"".concat(d.outerHTML).slice(-2)==="/>"&&(D.void=!0);var ln=D.components;if(!D.type&&ln){for(var ne=1,hn=0,wo=0;wo<ln.length;wo++){var bo=ln[wo],Co=bo.type;if(["text","textnode"].indexOf(Co)<0&&n.textTags.indexOf(bo.tagName)<0){ne=0;break}Co=="textnode"&&(hn=1)}ne&&hn&&(D.type="text")}!D.tagName&&D.type!="textnode"||r.push(D)}return r},parse:function(t,e,r){var i;r===void 0&&(r={});var l=(a==null?void 0:a.get("Config"))||{},f={html:[]},d=Dn(Dn({},n),r),h=Dn(Dn(Dn({},n.optionsHtml),{htmlType:((i=n.optionsHtml)===null||i===void 0?void 0:i.htmlType)||n.htmlType}),r),g=(0,O.isFunction)(d.parserHtml)?d.parserHtml(t,h):Ts(t,h),y=g.querySelectorAll("script"),b=y.length,P=(0,O.isUndefined)(l.allowScripts)?h.allowScripts:l.allowScripts;if(!P)for(;b--;)y[b].parentNode.removeChild(y[b]);if(h.allowUnsafeAttr||this.__clearUnsafeAttr(g),e){for(var D=g.querySelectorAll("style"),$=D.length,X="";$--;)X=D[$].innerHTML+X,D[$].parentNode.removeChild(D[$]);X&&(f.css=e.parse(X))}a&&a.trigger("".concat(Ia,":root"),{input:t,root:g});var lt=this.parseNode(g,d),Tt=lt.length===1&&!d.returnArray?lt[0]:lt;return f.html=Tt,a&&a.trigger(Ia,{input:t,output:f}),f},__clearUnsafeAttr:function(t){var e=this,r=t.attributes||[],i=t.childNodes||[],l=[];(0,O.each)(r,function(f){var d=f.nodeName||"";d.indexOf("on")===0&&l.push(d)}),l.map(function(f){return t.removeAttribute(f)}),(0,O.each)(i,function(f){return e.__clearUnsafeAttr(f)})}}};const Ui=Es;var Wi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zn=function(){return Zn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Zn.apply(this,arguments)},Ps=Ui(),ua=function(a){return(0,O.isArray)(a)?a[a.length-1]:a},Ra=function(a){Wi(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.parseStyle=function(t){return Ps.parseStyle(t)},n.prototype.extendStyle=function(t){return Zn(Zn({},this.getStyle()),t)},n.prototype.getStyle=function(t){var e=this.get("style")||{},r=Zn({},e);return t&&(0,O.isString)(t)?r[t]:r},n.prototype.setStyle=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,O.isString)(t)&&(t=this.parseStyle(t));var i=this.getStyle(e);e.partial||e.avoidStore?(e.avoidStore=!0,t.__p=!0):delete t.__p;var l=Zn({},t),f=Zn({},l);(0,O.keys)(f).forEach(function(h){f[h]===""&&delete f[h]}),this.set("style",f,e);var d=(0,J.shallowDiff)(i,l);return delete d.__p,(0,O.keys)(d).forEach(function(h){var g=r.em;e.noEvent||(r.trigger("change:style:".concat(h)),g&&(g.trigger("styleable:change",r,h,e),g.trigger("styleable:change:".concat(h),r,h,e)))}),l},n.prototype.addStyle=function(t,e,r){var i;e===void 0&&(e=""),r===void 0&&(r={}),typeof t=="string"?t=(i={},i[t]=e,i):r=e||{},t=this.extendStyle(t),this.setStyle(t,r)},n.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},n.prototype.styleToString=function(t){t===void 0&&(t={});var e=[],r=this.getStyle(t),i=t.important,l=function(d){var h=(0,O.isArray)(i)?i.indexOf(d)>=0:i,g=d.substring(0,2),y=g==="__";if(y)return"continue";var b=r[d],P=(0,O.isArray)(b)?b:[b];P.forEach(function(D){var $="".concat(D).concat(h?" !important":"");$&&e.push("".concat(d,":").concat($,";"))})};for(var f in r)l(f);return e.join("")},n.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},n.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},n}(S.Hn);const Mo=Ra;var ca=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),In=function(){return In=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},In.apply(this,arguments)},zi=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Ki=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Rn=function(a,n){if(n===void 0&&(n=[]),!a)return[];var t=(0,O.isArray)(a)||(0,O.isFunction)(a.map)?a:[a];return t.map(function(e){n.push(e.getId()),Rn(e.components().models,n)}),n},Gi=function(a,n,t){n===void 0&&(n={}),t===void 0&&(t={}),t.visitedCmps=t.visitedCmps||{};var e=t.visitedCmps,r=(0,O.isArray)(a)?a:[a];return r.map(function(i){var l=i.attributes,f=l===void 0?{}:l,d=i.components,h=i.tagName,g=f.id;f.draggable;var y=zi(f,["id","draggable"]),b=i;if(g&&(e[g]?(e[g].push(b),g=zr.getNewId(n),b.attributes.id=g):(e[g]=[],n[g]&&(b=n[g],h&&b.set({tagName:h},In(In({},t),{silent:!0})),(0,O.keys)(y).length&&b.addAttributes(y,In({},t))))),d){var P=Gi(d,n);if((0,O.isFunction)(b.components)){var D=b.components();D.length>0&&D.reset(P,t)}else b.components=P}return b})},Lo=function(a){ca(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={}),this.opt=e,this.listenTo(this,"add",this.onAdd),this.listenTo(this,"remove",this.removeChildren),this.listenTo(this,"reset",this.resetChildren);var r=e.em,i=e.config;this.config=i,this.em=r,this.domc=e.domc||(r==null?void 0:r.Components)},n.prototype.resetChildren=function(t,e){var r=this;e===void 0&&(e={});var i=this,l=e.previousModels||[],f=l.filter(function(g){return!t.get(g.cid)}),d=Rn(t),h=Rn(l).filter(function(g){return d.indexOf(g)>=0});e.keepIds=(e.keepIds||[]).concat(h),f.forEach(function(g){return r.removeChildren(g,i,e)}),t.each(function(g){return r.onAdd(g)})},n.prototype.resetFromString=function(t,e){var r,i;t===void 0&&(t=""),e===void 0&&(e={}),e.keepIds=Rn(this);var l=this,f=l.domc,d=l.em,h=l.parent,g=d==null?void 0:d.Css,y=(f==null?void 0:f.allById())||{},b=this.parseString(t,e),P=Gi(b,y,e),D=e.visitedCmps,$=D===void 0?{}:D;Object.keys($).forEach(function(X){var lt=$[X];if(lt.length){var Tt=(g==null?void 0:g.getRules("#".concat(X)))||[];Tt.length&&lt.forEach(function(bt){Tt.forEach(function(Zt){var ue=Zt.clone();ue.set("selectors",["#".concat(bt.attributes.id)]),g.getAll().add(ue)})})}}),this.reset(P,e),d==null||d.trigger("component:content",h,e,t),(i=(r=h).__checkInnerChilds)===null||i===void 0||i.call(r)},n.prototype.removeChildren=function(t,e,r){var i=this;if(r===void 0&&(r={}),!!t){var l=this,f=l.domc,d=l.em,h=r.temporary||r.fromUndo;if(t.prevColl=this,!h){var g=t.getId(),y=d.Selectors.getAll(),b=d.Css.getAll(),P=(r.keepIds||[]).indexOf(g)<0,D=f?f.allById():{};delete D[g];var $=P?b.remove(b.filter(function(Tt){return Tt.getSelectors().getFullString()==="#".concat(g)}),r):[];y.remove($.map(function(Tt){return Tt.getSelectors().at(0)})),t.opt.temporary||(d.Commands.run("core:component-style-clear",{target:t}),t.removed(),t.trigger("removed"),d.trigger("component:remove",t));var X=t.components();X.forEach(function(Tt){return i.removeChildren(Tt,e,r)})}var lt=t.components();d.stopListening(lt),d.stopListening(t),d.stopListening(t.get("classes")),t.__postRemove()}},n.prototype.model=function(t,e){var r=e.collection.opt,i=r.em,l,f=i.Components.componentTypes;e.em=i,e.config=r.config,e.componentTypes=f,e.domc=r.domc;for(var d=0;d<f.length;d++){var h=f[d].id;if(h==t.type){l=f[d].model;break}}return l||(l=f[f.length-1].model,i&&t.type&&i.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new l(t,e)},n.prototype.parseString=function(t,e){e===void 0&&(e={});var r=this,i=r.em,l=r.domc,f=i.Css,d=i.Parser.parseHtml(t);if(zr.checkId(d.html,d.css,l.componentsById,e),d.css&&f&&!e.temporary){e.at;var h=zi(e,["at"]);f.addCollection(d.css,In(In({},h),{extend:1}))}return d.html},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={}),e.keepIds=Ki(Ki([],e.keepIds||[],!0),Rn(e.previousModels),!0),(0,O.isString)(t)?t=this.parseString(t,e):(0,O.isArray)(t)&&(t=Ki([],t,!0),t.forEach(function(f,d){if((0,O.isString)(f)){var h=r.parseString(f,e);t[d]=(0,O.isArray)(h)&&!h.length?null:h}}));var i=(0,O.isArray)(t);t=(i?t:[t]).filter(Boolean).map(function(f){return r.processDef(f)}),t=i?(0,O.flatten)(t,1):t[0];var l=S.FE.prototype.add.apply(this,[t,e]);return this.__firstAdd=l,l},n.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var e=this,r=e.em,i=e.config,l=i===void 0?{}:i,f=l.processor,d=t;if(f){d=In({},d);var h=f(d);h&&((0,O.each)(d,function(X,lt){return delete d[lt]}),(0,O.extend)(d,h))}if(d.$$typeof&&typeof d.props=="object"){d=In({},d),d.props=In({},d.props);var g=r.Components,y=r.Parser,b=y.parserHtml;(0,O.each)(d,function(X,lt){(0,O.includes)(["props","type"],lt)||delete d[lt]});var P=d.props,D=P.children;delete P.children,delete d.props;var $=b.splitPropsFromAttr(P);d.attributes=$.attrs,D&&(d.components=D),d.type?g.getType(d.type)||(d.tagName=d.type,delete d.type):d.type="textnode",(0,O.extend)(d,$.props)}return d},n.prototype.onAdd=function(t,e,r){r===void 0&&(r={});var i=this,l=i.domc,f=i.em,d=t.getStyle(),h=f&&f.getConfig().avoidInlineStyle;if(l&&l.Component.ensureInList(t),!(0,O.isEmpty)(d)&&!h&&f&&f.get&&f.getConfig().forceClass&&!r.temporary){var g=t.cid;f.Css.setClassRule(g,d),t.setStyle({}),t.addClass(g)}t.__postAdd({recursive:!0})},n}(S.FE);const $i=Lo;var qi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vi=1,mn=2,Nn=function(a){qi(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t,e)||this,i=e.config,l=i===void 0?{}:i,f=r.get("name"),d=r.get("label");f?d||r.set("label",f):r.set("name",d);var h=r.get("name"),g=l.escapeName,y=g?g(h):n.escapeName(h);return r.set("name",y),r.em=e.em,r}return n.prototype.defaults=function(){return{name:"",label:"",type:vi,active:!0,private:!1,protected:!1,_undo:!0}},n.prototype.isId=function(){return this.get("type")===mn},n.prototype.isClass=function(){return this.get("type")===vi},n.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.escape,r=this.get("name"),i="";switch(this.get("type")){case vi:i=".";break;case mn:i="#";break}return i+(e?e(r):r)},n.prototype.toString=function(){return this.getFullName()},n.prototype.getLabel=function(){return this.get("label")},n.prototype.setLabel=function(t){return this.set("label",t)},n.prototype.getActive=function(){return this.get("active")},n.prototype.setActive=function(t){return this.set("active",t)},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=this.em,r=S.Hn.prototype.toJSON.call(this,[t]),i=(0,O.result)(this,"defaults");if(e&&e.getConfig().avoidDefaults){(0,O.forEach)(i,function(f,d){r[d]===f&&delete r[d]}),r.label===r.name&&delete r.label;var l=(0,O.keys)(r).length;l===1&&r.name&&(r=r.name),l===2&&r.name&&r.type&&(r=this.getFullName())}return r},n.escapeName=function(t){return"".concat(t).trim().replace(/([^a-z0-9\w-\:@]+)/gi,"-")},n.TYPE_CLASS=vi,n.TYPE_ID=mn,n}(S.Hn);const dr=Nn;Nn.prototype.idAttribute="name";var Yi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Do=function(a,n){return a.reduce(function(t,e,r){return t.concat(Do(a.slice(r+1),"".concat(n).concat(e)))},[n])},Fn=function(a){Yi(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||dr.TYPE_CLASS)},n.prototype.getStyleable=function(){return(0,O.filter)(this.models,function(t){return t.get("active")&&!t.get("private")})},n.prototype.getValid=function(t){var e=t===void 0?{}:t,r=e.noDisabled;return(0,O.filter)(this.models,function(i){return!i.get("private")}).filter(function(i){return r?i.get("active"):1})},n.prototype.getFullString=function(t,e){e===void 0&&(e={});var r=[],i=t||this;return i.forEach(function(l){return r.push(l.getFullName(e))}),e.sort&&r.sort(),r.join("").trim()},n.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.combination,r=t.array,i=[],l=this.map(function(f){return f.getFullName(t)}).sort();return e?l.forEach(function(f,d){i=i.concat(Do(l.slice(d+1),f))}):i=l,r?i:e?i.join(","):i.join("")},n}(S.FE);const Jn=Fn;Fn.prototype.model=dr;var Vn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),si=function(){return si=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},si.apply(this,arguments)},Ar=function(a){Vn(n,a);function n(t,e){var r=a.call(this,t)||this,i=r.attributes,l=i.target,f=i.name;return!r.get("id")&&r.set("id",f),l&&r.setTarget(l),r.em=e,r}return n.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",changeProp:!1,options:[]}},n.prototype.setTarget=function(t){if(t){var e=this.attributes,r=e.name,i=e.changeProp,l=e.value;this.target=t,this.unset("target");var f=i?"change:".concat(r):"change:attributes:".concat(r);this.listenTo(t,f,this.targetUpdated);var d=l||this.getValue();!(0,O.isUndefined)(d)&&this.set({value:d},{silent:!0})}},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(t){var e;t===void 0&&(t={});var r=t.locale,i=r===void 0?!0:r,l=this.getId(),f=this.get("label")||this.getName();return i&&((e=this.em)===null||e===void 0?void 0:e.t("traitManager.traits.labels.".concat(l)))||f},n.prototype.getValue=function(){return this.getTargetValue()},n.prototype.setValue=function(t,e){var r=this,i;e===void 0&&(e={});var l={},f=this.get("setValue");if(f){f({value:t,editor:(i=this.em)===null||i===void 0?void 0:i.getEditor(),trait:this,component:this.target,partial:!!e.partial,emitUpdate:function(){return r.targetUpdated()}});return}e.partial&&(l.avoidStore=!0),this.setTargetValue(t,l),e.partial===!1&&(this.setTargetValue(""),this.setTargetValue(t))},n.prototype.getDefault=function(){return this.get("default")},n.prototype.getOptions=function(){return this.get("options")||[]},n.prototype.getOption=function(t){var e=this,r=(0,J.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(i){return e.getOptionId(i)===r})[0]},n.prototype.getOptionId=function(t){return t.id||t.value},n.prototype.getOptionLabel=function(t,e){var r;e===void 0&&(e={});var i=e.locale,l=i===void 0?!0:i,f=(0,O.isString)(t)?this.getOption(t):t,d=this.getOptionId(f),h=f.label||f.name||d,g=this.getName();return l&&((r=this.em)===null||r===void 0?void 0:r.t("traitManager.traits.options.".concat(g,".").concat(d)))||h},n.prototype.props=function(){return this.attributes},n.prototype.targetUpdated=function(){var t,e=this.getTargetValue();this.set({value:e},{fromTarget:1}),(t=this.em)===null||t===void 0||t.trigger("trait:update",{trait:this,component:this.target})},n.prototype.getTargetValue=function(){var t,e=this.getName(),r=this.target,i=this.get("getValue"),l;return i?l=i({editor:(t=this.em)===null||t===void 0?void 0:t.getEditor(),trait:this,component:r}):this.get("changeProp")?l=r.get(e):l=r.getAttributes()[e],(0,O.isUndefined)(l)?"":l},n.prototype.setTargetValue=function(t,e){var r;e===void 0&&(e={});var i=this,l=i.target,f=i.attributes,d=this.getName();if(!(0,O.isUndefined)(t)){var h=t;if(t==="false"?h=!1:t==="true"&&(h=!0),this.getType()==="checkbox"){var g=f.valueTrue,y=f.valueFalse;h&&!(0,O.isUndefined)(g)&&(h=g),!h&&!(0,O.isUndefined)(y)&&(h=y)}this.get("changeProp")?l.set(d,h,e):l.addAttributes((r={},r[d]=h,r),e)}},n.prototype.setValueFromInput=function(t,e,r){e===void 0&&(e=!0),r===void 0&&(r={});var i={value:t};this.set(i,si(si({},r),{avoidStore:1})),e&&(this.set("value","",r),this.set(i,r))},n.prototype.getInitValue=function(){var t=this.target,e=this.getName(),r;if(t){var i=t.get("attributes");r=this.get("changeProp")?t.get(e):i[e]}return r||this.get("value")||this.get("default")},n}(S.Hn);const gi=Ar;var Xi=function(){function a(n){n===void 0&&(n={}),this.config=n}return a.prototype.build=function(n,t){return(0,O.isString)(n)?this.buildFromString(n,t):new gi(n,t)},a.prototype.buildFromString=function(n,t){var e={name:n,type:"text"};switch(n){case"target":e.type="select",e.default=!1,e.options=this.config.optionsTarget;break}return new gi(e,t)},a}();const xi=Xi;var Na=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),As=function(a){Na(n,a);function n(t,e){var r,i=a.call(this,t)||this;i.em=e.em,i.listenTo(i,"add",i.handleAdd),i.listenTo(i,"reset",i.handleReset);var l=(r=i.em)===null||r===void 0?void 0:r.Traits,f=l==null?void 0:l.getConfig();return i.tf=new xi(f),i}return n.prototype.handleReset=function(t,e){var r=e===void 0?{}:e,i=r.previousModels,l=i===void 0?[]:i;l.forEach(function(f){return f.trigger("remove")})},n.prototype.handleAdd=function(t){t.em=this.em;var e=this.target;e&&(t.target=e)},n.prototype.setTarget=function(t){this.target=t,this.models.forEach(function(e){return e.setTarget(t)})},n.prototype.add=function(t,e){if(t!=null){var r=this,i=r.target,l=r.em;if((0,O.isArray)(t)){for(var f=[],d=0,h=t.length;d<h;d++){var g=t[d];f[d]=g instanceof gi?g:this.tf.build(g,l),f[d].setTarget(i)}return a.prototype.add.call(this,f,e)}var y=t instanceof gi?t:this.tf.build(t,l);return y.setTarget(i),a.prototype.add.call(this,y,e)}},n}(S.FE);const ks=As;var Fa=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),He=function(){return He=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},He.apply(this,arguments)},Va=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},cn=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},jo=function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Zi=function(a){return!!(a!=null&&a.getConfig().avoidInlineStyle)},Si="component:drag",nn="__symbols",En="__symbol",Io="__symbol_ovrd",Oi="component:update",Qn="".concat(Oi,"-inside"),Ms=function(a){Fa(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){var t;return t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,locked:!1,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null},t[En]=0,t[nn]=0,t[Io]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){var t;return(t=this.get("content"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.updated=function(t,e,r){},n.prototype.removed=function(){},n.prototype.initialize=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,O.bindAll)(this,"__upSymbProps","__upSymbCls","__upSymbComps");var i=e.em,l=this.parent(),f=l==null?void 0:l.attributes,d=this.get("propagate");if(d&&this.set("propagate",(0,O.isArray)(d)?d:[d]),f&&f.propagate&&!d){var h={},g=f.propagate;g.forEach(function($){return h[$]=l.get($)}),h.propagate=g,this.set(He(He({},h),t))}if(e&&e.config&&e.config.voidElements.indexOf(this.get("tagName"))>=0&&this.set("void",!0),e.em=i,this.opt=e,this.em=i,this.frame=e.frame,this.config=e.config||{},this.set("attributes",He(He({},(0,O.result)(this,"defaults").attributes||{}),this.get("attributes")||{})),this.ccid=n.createId(this,e),this.initClasses(),this.initComponents(),this.initTraits(),this.initToolbar(),this.initScriptProps(),this.listenTo(this,"change:script",this.scriptUpdated),this.listenTo(this,"change:tagName",this.tagUpdated),this.listenTo(this,"change:attributes",this.attrUpdated),this.listenTo(this,"change:attributes:id",this._idUpdated),this.on("change:toolbar",this.__emitUpdateTlb),this.on("change",this.__onChange),this.on(Qn,this.__propToParent),this.set("status",""),this.views=[],["classes","traits","components"].forEach(function($){var X="add remove ".concat($!=="components"?"change":"");r.listenTo(r.get($),X.trim(),function(){for(var lt=[],Tt=0;Tt<arguments.length;Tt++)lt[Tt]=arguments[Tt];return r.emitUpdate.apply(r,cn([$],lt,!1))})}),!e.temporary){var y=i&&i.Css,b=this.attributes,P=b.styles,D=b.type;P&&y&&y.addCollection(P,{avoidUpdateStyle:!0},{group:"cmp:".concat(D)}),this.__postAdd(),this.init(),this.__isSymbolOrInst()&&this.__initSymb(),i&&i.trigger("component:create",this)}},n.prototype.__postAdd=function(t){t===void 0&&(t={});var e=this.em,r=e==null?void 0:e.UndoManager,i=this.components();r&&!this.__hasUm&&(r.add(i),r.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&i.map(function(l){return l.__postAdd(t)})},n.prototype.__postRemove=function(){var t=this.em,e=t==null?void 0:t.get("UndoManager");e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},n.prototype.__onChange=function(t,e){var r=this,i=this.changedAttributes()||{};(0,O.keys)(i).forEach(function(l){return r.emitUpdate(l)}),["status","open","toolbar","traits"].forEach(function(l){return delete i[l]}),(0,J.isEmptyObj)(i)||(this.__changesUp(e),this.__propSelfToParent({component:this,changed:i,options:e}))},n.prototype.__changesUp=function(t){var e=this,r=e.em,i=e.frame;[i,r].forEach(function(l){return l&&l.changesUp(t)})},n.prototype.__propSelfToParent=function(t){this.trigger(Oi,t),this.__propToParent(t)},n.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(Qn,t)},n.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},n.prototype.is=function(t){return this.get("type")==t},n.prototype.props=function(){return this.attributes},n.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},n.prototype.setDragMode=function(t){return this.set("dmode",t)},n.prototype.getDragMode=function(){return this.get("dmode")||""},n.prototype.find=function(t){var e,r=[],i=(e=this.view)===null||e===void 0?void 0:e.$el.find(t);return i==null||i.each(function(l){var f=i.eq(l),d=f.data("model");d&&r.push(d)}),r},n.prototype.findType=function(t){var e=[],r=function(i){return i.forEach(function(l){l.is(t)&&e.push(l),r(l.components())})};return r(this.components()),e},n.prototype.closest=function(t){var e,r=(e=this.view)===null||e===void 0?void 0:e.$el.closest(t);return r!=null&&r.length?r.data("model"):void 0},n.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},n.prototype.contains=function(t){var e=!1;if(!t)return e;var r=function(i){!e&&i.forEach(function(l){l===t&&(e=!0),!e&&r(l.components())})};return r(this.components()),e},n.prototype.tagUpdated=function(){this.trigger("rerender")},n.prototype.replaceWith=function(t){var e=this.collection,r=e.indexOf(this);return e.remove(this),e.add(t,{at:r})},n.prototype.attrUpdated=function(t,e,r){var i=this;r===void 0&&(r={});var l=this.get("attributes"),f=l.class;f&&this.setClass(f),delete l.class;var d=l.style;d&&this.setStyle(d),delete l.style;var h=He({},this.previous("attributes")),g=(0,J.shallowDiff)(h,this.get("attributes"));(0,O.keys)(g).forEach(function(y){return i.trigger("change:attributes:".concat(y),i,g[y],r)})},n.prototype.setAttributes=function(t,e){return e===void 0&&(e={}),this.set("attributes",He({},t),e),this},n.prototype.addAttributes=function(t,e){return e===void 0&&(e={}),this.setAttributes(He(He({},this.getAttributes({noClass:!0})),t),e)},n.prototype.removeAttributes=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var r=Array.isArray(t)?t:[t],i=this.getAttributes();return r.map(function(l){return delete i[l]}),this.setAttributes(i,e)},n.prototype.getStyle=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=this.em,i=(0,O.isString)(t)?t:"",l=i?e:t;if(Zi(r)&&!l.inline){var f=r.get("state"),d=r.Css,h=d.getIdRule(this.getId(),He({state:f},l));if(this.rule=h,h)return h.getStyle(i)}return a.prototype.getStyle.call(this,i)},n.prototype.setStyle=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={});var i=this,l=i.opt,f=i.em;if(Zi(f)&&!l.temporary&&!e.inline){var d=this.get("style")||{};t=(0,O.isString)(t)?this.parseStyle(t):t,t=He(He({},t),d);var h=f.get("state"),g=f.Css,y=this.getStyle(e);this.rule=g.setIdRule(this.getId(),t,He({state:h},e));var b=(0,J.shallowDiff)(y,t);this.set("style","",{silent:!0}),(0,O.keys)(b).forEach(function(P){return r.trigger("change:style:".concat(P))})}else t=a.prototype.setStyle.apply(this,arguments);return t},n.prototype.getAttributes=function(t){t===void 0&&(t={});var e=this.em,r=[],i=He({},this.get("attributes")),l=e==null?void 0:e.Selectors,f=this.getId();if(t.noClass?delete i.class:(this.classes.forEach(function(g){return r.push((0,O.isString)(g)?g:g.get("name"))}),r.length&&(i.class=r.join(" "))),!t.noStyle){var d=this.get("style");(0,J.isObject)(d)&&!(0,J.isEmptyObj)(d)&&(i.style=this.styleToString({inline:1}))}if(!(0,O.has)(i,"id")){var h=!1;(Zi(e)||!(0,O.isEmpty)(this.getStyle()))&&(h=!!(l!=null&&l.get(f,l.Selector.TYPE_ID))),(this.__getSymbol()||this.__getSymbols())&&(h=!0),h&&(i.id=f)}return i},n.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},n.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},n.prototype.removeClass=function(t){var e=[];t=(0,O.isArray)(t)?t:[t];var r=this.classes,i=dr.TYPE_CLASS;return t.forEach(function(l){var f=l.split(" ");f.forEach(function(d){var h=r.where({name:d,type:i})[0];h&&e.push(r.remove(h))})}),e},n.prototype.getClasses=function(){var t=this.getAttributes(),e=t.class;return e?e.split(" "):[]},n.prototype.__logSymbol=function(t,e,r){r===void 0&&(r={});var i=this.__getSymbol(),l=this.__getSymbols();!i&&!l||this.em.log(t,{model:this,toUp:e,context:"symbols",opts:r})},n.prototype.__initSymb=function(){this.__symbReady||(this.on("change",this.__upSymbProps),this.__symbReady=!0)},n.prototype.__isSymbol=function(){return(0,O.isArray)(this.get(nn))},n.prototype.__isSymbolOrInst=function(){return!!(this.__isSymbol()||this.get(En))},n.prototype.__isSymbolTop=function(){var t=this.parent(),e=this.__isSymbolOrInst();return e&&(!t||t&&!t.__isSymbol()&&!t.__getSymbol())},n.prototype.__isSymbolNested=function(){if(!this.__isSymbolOrInst()||this.__isSymbolTop())return!1;var t=(this.__isSymbol()?this:this.__getSymbol()).__getSymbTop(),e=this.__getSymbTop(),r=e.__isSymbol()?e:e.__getSymbol();return r!==t},n.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},n.prototype.__getSymbol=function(){var t=this.get(En);if(t&&(0,O.isString)(t)){var e=this.__getAllById()[t];e?(t=e,this.set(En,e)):t=0}return t},n.prototype.__getSymbols=function(){var t=this,e=this.get(nn);return e&&(0,O.isArray)(e)&&(e.forEach(function(r,i){r&&(0,O.isString)(r)&&(e[i]=t.__getAllById()[r])}),e=e.filter(function(r){return r&&!(0,O.isString)(r)})),e},n.prototype.__isSymbOvrd=function(t){t===void 0&&(t="");var e=this.get(Io),r=t.split(":")[0],i=t!==r?[t,r]:[t];return e===!0||(0,O.isArray)(e)&&i.some(function(l){return e.indexOf(l)>=0})},n.prototype.__getSymbToUp=function(t){var e=this;t===void 0&&(t={});var r=[],i=t.changed;if(t.fromInstance||t.noPropagate||t.fromUndo||i&&this.__isSymbOvrd(i))return r;var l=this.__getSymbols()||[],f=this.__getSymbol(),d=f?cn([f],f.__getSymbols()||[],!0):l;return r=d.filter(function(h){return h!==e}).filter(function(h){return!(i&&h.__isSymbOvrd(i))}),r},n.prototype.__getSymbTop=function(t){for(var e=this,r=this.parent(t);r&&(r.__isSymbol()||r.__getSymbol());)e=r,r=r.parent(t);return e},n.prototype.__upSymbProps=function(t,e){var r=this;e===void 0&&(e={});var i=this.changedAttributes()||{},l=i.attributes||{};if(delete i.status,delete i.open,delete i[nn],delete i[En],delete i[Io],delete i.attributes,delete l.id,(0,J.isEmptyObj)(l)||(i.attributes=l),!(0,J.isEmptyObj)(i)){var f=this.__getSymbToUp(e);(0,O.keys)(i).map(function(d){r.__isSymbOvrd(d)&&delete i[d]}),this.__logSymbol("props",f,{opts:e,changed:i}),f.forEach(function(d){var h=He({},i);(0,O.keys)(h).map(function(g){d.__isSymbOvrd(g)&&delete h[g]}),d.set(h,He({fromInstance:r},e))})}},n.prototype.__upSymbCls=function(t,e,r){var i=this;r===void 0&&(r={});var l=this.__getSymbToUp(r);this.__logSymbol("classes",l,{opts:r}),l.forEach(function(f){f.set("classes",i.get("classes"),{fromInstance:i})}),this.__changesUp(r)},n.prototype.__upSymbComps=function(t,e,r){var i=this,l=r||e||{},f=l.fromInstance,d=l.fromUndo,h={fromInstance:f,fromUndo:d},g=t.opt.temporary;if(r)if(r.add){var P=[],D=!!this.__getSymbols(),y=this.__getSymbToUp(He(He({},h),{changed:"components:add"}));if(y.length){var $=t.__getSymbol();P=($?$.__getSymbols():t.__getSymbols())||[],P=cn([],P,!0),P.push($||t)}!g&&this.__logSymbol("add",y,{opts:r,addedInstances:P.map(function(ee){return ee.cid}),added:t.cid}),y.forEach(function(ee){var je=ee.__getSymbTop(),Ze=P.filter(function(ne){var hn=ne.__getSymbTop({prev:1});return je&&hn&&hn===je})[0],ln=Ze||t.clone({symbol:!0,symbolInv:D});ee.append(ln,He({fromInstance:i},r))})}else{var X=t.__getSymbol();if(X&&!r.temporary&&X.set(nn,X.__getSymbols().filter(function(Ie){return Ie!==t})),!t.__isSymbolTop()){var lt="components:remove",Tt=r.index,bt=t.parent(),Zt=He({fromInstance:t},r),ue=t.__isSymbolNested(),Oe=function(ee){var je=ee.parent();je&&!je.__isSymbOvrd(lt)&&ee.remove(Zt)},y=bt!=null&&bt.__isSymbOvrd(lt)?[]:t.__getSymbToUp(h);ue&&(y=bt==null?void 0:bt.__getSymbToUp(He(He({},h),{changed:lt})),Oe=function(ee){var je=ee.components().at(Tt);je&&je.remove(He({fromInstance:bt},Zt))}),!g&&this.__logSymbol("remove",y,{opts:r,removed:t.cid,isSymbNested:ue}),y.forEach(Oe)}}else{var y=this.__getSymbToUp(He(He({},h),{changed:"components:reset"})),b=t.models;this.__logSymbol("reset",y,{components:b}),y.forEach(function(Ie){var ee=b.map(function(je){return je.clone({symbol:!0})});Ie.components().reset(ee,He({fromInstance:i},e))})}this.__changesUp(l)},n.prototype.initClasses=function(t,e,r){r===void 0&&(r={});var i="change:classes",l=this.get("attributes")||{},f=l.class,d=Va(l,["class"]),h=[this,i,this.initClasses],g=this.get("classes")||f||[],y=(0,O.isString)(g)?g.split(" "):g;this.stopListening.apply(this,h);var b=this.normalizeClasses(y),P=new Jn([]);return this.set("classes",P,r),P.add(b),P.on("add remove reset",this.__upSymbCls),f&&b.length&&this.set("attributes",d),this.listenTo.apply(this,h),this},n.prototype.initComponents=function(){var t="change:components",e=[this,t,this.initComponents];this.stopListening.apply(this,e);var r=new $i([],this.opt);r.parent=this;var i=this.get("components"),l=!this.opt.avoidChildren;return this.set("components",r),l&&i&&r.add((0,O.isFunction)(i)?i(this):i,this.opt),r.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,e),this},n.prototype.initTraits=function(t){var e=this.em,r="change:traits";this.off(r,this.initTraits),this.__loadTraits();var i=He({},this.get("attributes")),l=this.traits;return l.each(function(f){if(!f.get("changeProp")){var d=f.get("name"),h=f.getInitValue();d&&h&&(i[d]=h)}}),l.length&&this.set("attributes",i),this.on(r,this.initTraits),t&&e&&e.trigger("component:toggled"),this},n.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var r=this.previous(t)||[],i=this.get(t)||[],l=r.map(function(d){return"change:".concat(d)}).join(" "),f=i.map(function(d){return"change:".concat(d)}).join(" ");l&&this.off(l,this.__scriptPropsChange),f&&this.on(f,this.__scriptPropsChange),this.on.apply(this,e)}},n.prototype.__scriptPropsChange=function(t,e,r){r===void 0&&(r={}),!r.avoidStore&&this.trigger("rerender")},n.prototype.append=function(t,e){e===void 0&&(e={});var r=(0,O.isArray)(t)?cn([],t,!0):[t],i=r.map(function(f){return(0,O.isString)(f)||f.collection&&f.collection.remove(f,{temporary:!0}),f}),l=this.components().add(i,e);return(0,O.isArray)(l)?l:[l]},n.prototype.components=function(t,e){e===void 0&&(e={});var r=this.get("components");return(0,O.isUndefined)(t)?r:(r.reset(void 0,e),t?this.append(t,e):[])},n.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},n.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},n.prototype.empty=function(t){return t===void 0&&(t={}),this.components().reset(void 0,t),this},n.prototype.parent=function(t){t===void 0&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},n.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},n.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},n.prototype.initToolbar=function(){var t=this.em,e=this,r=t&&t.getConfig().stylePrefix||"";if(!e.get("toolbar")&&t){var i=[];e.collection&&i.push({label:t.getIcon("arrowUp"),command:function(l){return l.runCommand("core:component-exit",{force:1})}}),e.get("draggable")&&i.push({attributes:{class:"".concat(r,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),e.get("copyable")&&i.push({label:t.getIcon("copy"),command:"tlb-clone"}),e.get("removable")&&i.push({label:t.getIcon("delete"),command:"tlb-delete"}),e.set("toolbar",i)}},n.prototype.__loadTraits=function(t,e){e===void 0&&(e={});var r=t||this.traits;if(!(r instanceof ks)){r=(0,O.isFunction)(r)?r(this):r;var i=new ks([],this.opt);i.setTarget(this),r.length&&(r.forEach(function(l){return l.attributes&&delete l.attributes.value}),i.add(r)),this.set({traits:i},e)}return this},n.prototype.getTraits=function(){return this.__loadTraits(),cn([],this.traits.models,!0)},n.prototype.setTraits=function(t){var e=(0,O.isArray)(t)?t:[t];return this.set({traits:e}),this.getTraits()},n.prototype.getTrait=function(t){return this.getTraits().filter(function(e){return e.get("id")===t||e.get("name")===t})[0]||null},n.prototype.updateTrait=function(t,e){var r,i=this.getTrait(t);return i&&i.set(e),(r=this.em)===null||r===void 0||r.trigger("component:toggled"),this},n.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},n.prototype.removeTrait=function(t){var e=this,r,i=(0,O.isArray)(t)?t:[t],l=i.map(function(h){return e.getTrait(h)}),f=this.traits,d=l.length?f.remove(l):[];return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,O.isArray)(d)?d:[d]},n.prototype.addTrait=function(t,e){var r;e===void 0&&(e={}),this.__loadTraits();var i=this.traits.add(t,e);return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,O.isArray)(i)?i:[i]},n.prototype.normalizeClasses=function(t){var e=[],r=this.em,i=r==null?void 0:r.Selectors;return i?t.models?cn([],t.models,!0):(t.forEach(function(l){return e.push(i.add(l))}),e):[]},n.prototype.clone=function(t){t===void 0&&(t={});var e=this.em,r=He({},this.attributes),i=He({},this.opt),l=this.getId(),f=e==null?void 0:e.Css;r.attributes=He({},r.attributes),delete r.attributes.id,r.components=[],r.classes=[],r.traits=[],this.__isSymbolTop()&&(t.symbol=!0),this.get("components").each(function(D,$){r.components[$]=D.clone(He(He({},t),{_inner:1}))}),this.get("traits").each(function(D,$){r.traits[$]=D.clone()}),this.get("classes").each(function(D,$){r.classes[$]=D.get("name")}),r.status="",i.collection=null;var d=new this.constructor(r,i),h="#".concat(d.getId()),g=f?f.getRules("#".concat(l)):[];g.forEach(function(D){var $=D.clone();$.set("selectors",[h]),f.getAll().add($)}),d.set(nn,0);var y=this.__getSymbol(),b=this.__getSymbols();!t.symbol&&(y||b)?(d.set(En,0),d.set(nn,0)):y?(y.set(nn,cn(cn([],y.__getSymbols(),!0),[d],!1)),d.__initSymb()):t.symbol&&(this.__isSymbol()?(this.set(nn,cn(cn([],b,!0),[d],!1)),d.set(En,this),d.__initSymb()):t.symbolInv?(this.set(nn,[d]),d.set(En,this),[this,d].map(function(D){return D.__initSymb()})):(d.set(nn,[this]),[this,d].map(function(D){return D.__initSymb()}),this.set(En,d)));var P="component:clone";return e&&e.trigger(P,d),this.trigger(P,d),d},n.prototype.getName=function(t){t===void 0&&(t={});var e=this.em,r=this.attributes,i=r.type,l=r.tagName,f=r.name,d=i||l,h=i?"":l,g="domComponents.names.",y=f&&(e==null?void 0:e.t("".concat(g).concat(f))),b=h&&(e==null?void 0:e.t("".concat(g).concat(h))),P=e&&(e.t("".concat(g).concat(i))||e.t("".concat(g).concat(l))),D=this.get("custom-name");return(t.noCustom?"":D)||y||f||b||(0,J.capitalize)(h)||P||(0,J.capitalize)(d)},n.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},n.prototype.toHTML=function(t){t===void 0&&(t={});var e=this,r=[],i=t.tag,l=i||e.get("tagName"),f=e.get("void"),d=t.attributes,h=this.getAttrToHTML();if(delete t.tag,d&&((0,O.isFunction)(d)?h=d(e,h)||{}:(0,J.isObject)(d)&&(h=d)),t.withProps){var g=this.toJSON();(0,O.forEach)(g,function(Tt,bt){var Zt=["classes","attributes","components"];bt[0]!=="_"&&Zt.indexOf(bt)<0&&(h["data-gjs-".concat(bt)]=(0,O.isArray)(Tt)||(0,J.isObject)(Tt)?JSON.stringify(Tt):Tt)})}for(var y in h){var b=h[y];if(!(0,O.isUndefined)(b)&&b!==null)if((0,O.isBoolean)(b))b&&r.push(y);else{var P="";if(t.altQuoteAttr&&(0,O.isString)(b)&&b.indexOf('"')>=0)P="'".concat(b.replace(/'/g,"&apos;"),"'");else{var D=(0,O.isString)(b)?b.replace(/"/g,"&quot;"):b;P='"'.concat(D,'"')}r.push("".concat(y,"=").concat(P))}}var $=r.length?" ".concat(r.join(" ")):"",X=e.getInnerHTML(t),lt="<".concat(l).concat($).concat(f?"/":"",">").concat(X);return!f&&(lt+="</".concat(l,">")),lt},n.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},n.prototype.__innerHTML=function(t){t===void 0&&(t={});var e=this.components();return e.length?e.map(function(r){return r.toHTML(t)}).join(""):this.content},n.prototype.getAttrToHTML=function(){var t=this.getAttributes();return Zi(this.em)&&delete t.style,t},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=et.Model.prototype.toJSON.call(this,t);if(e.attributes=this.getAttributes(),delete e.attributes.class,delete e.toolbar,delete e.traits,delete e.status,delete e.open,delete e._undoexc,!t.fromUndo){var r=e[En],i=e[nn];i&&(0,O.isArray)(i)&&(e[nn]=i.filter(function(l){return l}).map(function(l){return l.getId?l.getId():l})),r&&!(0,O.isString)(r)&&(e[En]=r.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(e),e},n.prototype.getChangedProps=function(t){var e=t||et.Model.prototype.toJSON.apply(this),r=(0,O.result)(this,"defaults");return(0,O.forEach)(r,function(i,l){["type"].indexOf(l)===-1&&e[l]===i&&delete e[l]}),(0,O.isEmpty)(e.type)&&delete e.type,(0,O.forEach)(["attributes","style"],function(i){(0,O.isEmpty)(r[i])&&(0,O.isEmpty)(e[i])&&delete e[i]}),(0,O.forEach)(["classes","components"],function(i){(!e[i]||(0,O.isEmpty)(r[i])&&!e[i].length)&&delete e[i]}),e},n.prototype.getId=function(){var t=this.get("attributes")||{};return t.id||this.ccid||this.cid},n.prototype.setId=function(t,e){var r=He({},this.get("attributes"));return r.id=t,this.set("attributes",r,e),this},n.prototype.getEl=function(t){var e=this.getView(t);return e&&e.el},n.prototype.getView=function(t){var e=this,r=e.view,i=e.views,l=e.em,f=t||(l==null?void 0:l.getCurrentFrameModel());return f&&(r=i.filter(function(d){return d.frameView===f.view})[0]),r},n.prototype.getCurrentView=function(){var t=this.em.getCurrentFrame(),e=t==null?void 0:t.model;return this.getView(e)},n.prototype.__getScriptProps=function(){var t=this.props(),e=this.get("script-props")||[];return e.reduce(function(r,i){return r[i]=t[i],r},{})},n.prototype.getScriptString=function(t){var e=this,r=t||this.get("script")||"";if(!r)return r;if(this.get("script-props"))r=r.toString().trim();else{if((0,O.isFunction)(r)){var i=r.toString().trim();i=i.slice(i.indexOf("{")+1,i.lastIndexOf("}")),r=i.trim()}var l=this.em.getConfig(),f=jo(l.tagVarStart||"{[ "),d=jo(l.tagVarEnd||" ]}"),h=new RegExp("".concat(f,"([\\w\\d-]*)").concat(d),"g");r=r.replace(h,function(g,y){e.scriptUpdated();var b=e.attributes[y]||"";return(0,O.isArray)(b)||typeof b=="object"?JSON.stringify(b):b})}return r},n.prototype.emitUpdate=function(t){for(var e,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var l=this.em,f=Oi+(t?":".concat(t):""),d=t&&this.get(t);t&&this.updated.apply(this,cn([t,d,t&&this.previous(t)],r,!1)),this.trigger.apply(this,cn([f],r,!1)),l&&l.trigger.apply(l,cn([f,this],r,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=d,e),options:r[2]||r[1]||{}})},n.prototype.onAll=function(t){return(0,O.isFunction)(t)&&(t(this),this.components().forEach(function(e){return e.onAll(t)})),this},n.prototype.forEachChild=function(t){(0,O.isFunction)(t)&&this.components().forEach(function(e){t(e),e.forEachChild(t)})},n.prototype.remove=function(t){var e=this;t===void 0&&(t={});var r=this.em,i=this.collection,l=function(){i&&i.remove(e,He(He({},t),{action:"remove-component"})),i||(e.components("",t),e.components().removeChildren(e,void 0,t))},f=He({},t);return[this,r].map(function(d){return d.trigger("component:remove:before",e,l,f)}),!f.abort&&l(),this},n.prototype.move=function(t,e){if(e===void 0&&(e={}),t){var r=e.at,i=this.index(),l=t===this.parent(),f=i===r||i===r-1;(!l||!f)&&(l&&r&&r>i&&(e.at=r-1),this.remove({temporary:1}),t.append(this,e),this.emitUpdate())}return this},n.prototype.isInstanceOf=function(t){var e,r,i=(r=(e=this.em)===null||e===void 0?void 0:e.Components.getType(t))===null||r===void 0?void 0:r.model;return i?this instanceof i:!1},n.prototype.isChildOf=function(t){for(var e=(0,O.isString)(t),r=this.parent();r;){if(e){if(r.isInstanceOf(t))return!0}else if(r===t)return!0;r=r.parent()}return!1},n.prototype.resetId=function(t){var e=this.em,r=this.getId();if(!r)return this;var i=n.createId(this);this.setId(i);var l=e==null?void 0:e.Css.getIdRule(r),f=l==null?void 0:l.get("selectors").at(0);return f==null||f.set("name",i),this},n.prototype._getStyleRule=function(t){var e=t===void 0?{}:t,r=e.id,i=this.em,l=r||this.getId();return i==null?void 0:i.Css.getIdRule(l)},n.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return e==null?void 0:e.get("selectors").at(0)},n.prototype._idUpdated=function(t,e,r){if(r===void 0&&(r={}),!r.idUpdate){var i=this.ccid,l=(this.get("attributes")||{}).id,f=(this.previous("attributes")||{}).id||i,d=n.getList(this);if(d[l]||!l&&f)return this.setId(f,{idUpdate:!0});delete d[f],d[l]=this,this.ccid=l;var h=this._getStyleSelector({id:f});h&&h.set({name:l,label:l})}},n.getDefaults=function(){return(0,O.result)(this.prototype,"defaults")},n.isComponent=function(t){return{tagName:(0,J.toLowerCase)(t.tagName)}},n.ensureInList=function(t){var e=n.getList(t),r=t.getId(),i=e[r];if(!i)e[r]=t;else if(i!==t){var l=n.getIncrementId(r,e);t.setId(l),e[l]=t}t.components().forEach(function(f){return n.ensureInList(f)})},n.createId=function(t,e){e===void 0&&(e={});var r=n.getList(t),i=e.idMap,l=i===void 0?{}:i,f=t.get("attributes").id,d;return f?(d=n.getIncrementId(f,r,e),t.setId(d),f!==d&&(l[f]=d)):d=n.getNewId(r),r[d]=t,d},n.getNewId=function(t){for(var e=Object.keys(t).length,r=e.toString().length+2,i=(Math.random()+1.1).toString(36).slice(-r),l="i".concat(i);t[l];)l=n.getNewId(t);return l},n.getIncrementId=function(t,e,r){r===void 0&&(r={});var i=r.keepIds,l=i===void 0?[]:i,f=1,d=t;if(l.indexOf(t)<0)for(;e[d];)f++,d="".concat(t,"-").concat(f);return d},n.getList=function(t){var e=t.opt,r=e===void 0?{}:e,i=r.domc,l=r.em,f=i||(l==null?void 0:l.Components);return f?f.componentsById:{}},n.checkId=function(t,e,r,i){e===void 0&&(e=[]),r===void 0&&(r={}),i===void 0&&(i={});var l=(0,O.isArray)(t)?t:[t],f=i.keepIds,d=f===void 0?[]:f;l.forEach(function(h){h.attributes;var g=h.attributes,y=g===void 0?{}:g,b=h.components,P=y.id;if(P&&r[P]&&d.indexOf(P)<0){var D=n.getIncrementId(P,r);y.id=D,(0,O.isArray)(e)&&e.forEach(function($){var X=$.selectors;X.forEach(function(lt,Tt){lt==="#".concat(P)&&(X[Tt]="#".concat(D))})})}b&&n.checkId(b,e,r,i)})},n}(Mo);const zr=Ms;var Ji=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fn=function(){return fn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},fn.apply(this,arguments)},kr=function(a){Ji(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return fn(fn({},a.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){var t=this.content,e=this.parent();return e!=null&&e.is("script")?t:this.__escapeContent(t)},n.prototype.__escapeContent=function(t){return(0,J.escapeNodeContent)(t)},n.isComponent=function(t){var e;if(t.nodeType===3)return{type:"textnode",content:(e=t.textContent)!==null&&e!==void 0?e:""}},n}(zr);const Ha=kr;var Ba=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),li=function(){return li=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},li.apply(this,arguments)},Ls=function(a){Ba(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return li({},a.prototype.defaults)},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){return"<!--".concat(this.content,"-->")},n.isComponent=function(t){var e;if(t.nodeType==8)return{tagName:"NULL",type:"comment",content:(e=t.textContent)!==null&&e!==void 0?e:""}},n}(Ha);const Qi=Ls;var Ds=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ti=function(){return Ti=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ti.apply(this,arguments)},mi="iframe",js=function(a){Ds(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ti(Ti({},a.prototype.defaults),{type:mi,tagName:mi,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,J.toLowerCase)(t.tagName)===mi},n}(zr);const Is=js;var Ua=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),to=function(){return to=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},to.apply(this,arguments)},fa='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',Ei=function(a){Ua(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return to(to({},a.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(fa,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(fa,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var r=this.get("attributes").src;r&&(0,J.buildBase64UrlFromSvg)((0,O.result)(this,"defaults").src)!==r&&this.set("src",r,{silent:!0})},n.prototype.initToolbar=function(){a.prototype.initToolbar.call(this);var t=this.em;if(t){var e=t.Commands,r="image-editor";if(e.has(r)){for(var i=!1,l=this.get("toolbar"),f=0;f<l.length;f++)if(l[f].command==="image-editor"){i=!0;break}i||(l.push({attributes:{class:"fa fa-pencil"},command:r}),this.set("toolbar",l))}}},n.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},n.prototype.getSrcResult=function(t){t===void 0&&(t={});var e=this.get(t.fallback?"fallback":"src")||"",r=e;return e&&e.substr(0,4)==="<svg"&&(r=(0,J.buildBase64UrlFromSvg)(e)),r},n.prototype.isDefaultSrc=function(){var t=this.get("src"),e=(0,O.result)(this,"defaults").src;return t===e||t===(0,J.buildBase64UrlFromSvg)(e)},n.prototype.toJSON=function(t){var e=a.prototype.toJSON.call(this,t),r=e.attributes;return r&&e.src===r.src&&delete e.src,e},n.prototype.parseUri=function(t){var e={},r=function(i){i===void 0&&(i="");for(var l={},f=i.substring(1).split("&"),d=0;d<f.length;d++){var h=f[d].split("="),g=decodeURIComponent(h[0]);g&&(l[g]=decodeURIComponent(h[1]||""))}return l};if((0,J.hasWin)())e=document.createElement("a"),e.href=t;else if(typeof URL<"u")try{e=new URL(t)}catch{}return{hostname:e.hostname||"",pathname:e.pathname||"",protocol:e.protocol||"",search:e.search||"",hash:e.hash||"",port:e.port||"",query:r(e.search)}},n.isComponent=function(t){return(0,J.toLowerCase)(t.tagName)==="img"},n}(zr);const Hn=Ei;var eo=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ro=function(){return ro=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ro.apply(this,arguments)},C=function(a){eo(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ro(ro({},a.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e),this.__checkInnerChilds()},n.prototype.__checkInnerChilds=function(){var t=this.em.Components.config.disableTextInnerChilds;if(t){var e=function(r){r.isInstanceOf("textnode")||r.set({locked:!0,layerable:!1})};(0,O.isFunction)(t)?this.forEachChild(function(r){t(r)&&e(r)}):this.forEachChild(e)}},n}(zr);const M=C;var Z=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ot=function(){return ot=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ot.apply(this,arguments)},wt="label",pt=function(a){Z(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ot(ot({},a.prototype.defaults),{type:wt,tagName:wt,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,J.toLowerCase)(t.tagName)===wt},n}(M);const Nt=pt;var se=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),De=function(){return De=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},De.apply(this,arguments)},Ee="link",ur=function(a){se(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return De(De({},a.prototype.defaults),{type:Ee,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t,e){e===void 0&&(e={});var r;if((0,J.toLowerCase)(t.tagName)==="a"){var i=e.textTags||[];r={type:Ee,editable:!1};var l=t.childNodes,f=l.length;f||delete r.editable,(0,O.forEach)(l,function(d){var h=d.tagName;(d.nodeType==3&&d.textContent.trim()!==""||h&&i.indexOf((0,J.toLowerCase)(h))>=0)&&delete r.editable})}return r},n}(M);const Yr=ur;var Wa=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ro=function(){return Ro=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ro.apply(this,arguments)},yf=function(a){Wa(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){var t=a.prototype.defaults;return Ro(Ro({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:1},{type:"select",label:"Map type",name:"mapType",changeProp:1,options:[{value:"q",name:"Roadmap"},{value:"w",name:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:"1",max:"20",changeProp:1}]})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){this.get("src")?this.parseFromSrc():this.updateSrc(),a.prototype.initialize.call(this,t,e),this.listenTo(this,"change:address change:zoom change:mapType",this.updateSrc)},n.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},n.prototype.getMapUrl=function(){var t=this.get("address"),e=this.get("zoom"),r=this.get("mapType");t=t?"&q="+t:"",e=e?"&z="+e:"",r=r?"&t="+r:"";var i=this.get("mapUrl")+"?"+t+e+r;return i+="&output=embed",i},n.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")),e=t.query;e.q&&this.set("address",e.q),e.z&&this.set("zoom",e.z),e.t&&this.set("mapType",e.t)},n.isComponent=function(t){if((0,J.toLowerCase)(t.tagName)=="iframe"&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},n}(Hn);const _f=yf;var Pu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),za=function(){return za=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},za.apply(this,arguments)},no="script",Au=function(a){Pu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return za(za({},a.prototype.defaults),{type:no,tagName:no,droppable:!1,draggable:!1,layerable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t){if((0,J.toLowerCase)(t.tagName)==no){var e={type:no};return t.src&&(e.src=t.src,e.onload=t.onload),e}},n}(zr);const ku=Au;var Ol=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),No=function(){return No=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},No.apply(this,arguments)},Rs="svg",Ns=function(a){Ol(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return No(No({},a.prototype.defaults),{type:Rs,tagName:Rs,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),n.prototype.getName=function(){var t=this.get("tagName"),e=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},n.isComponent=function(t){return(0,J.toLowerCase)(t.tagName)===Rs},n}(zr);const ti=Ns;var Mu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pa=function(){return pa=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},pa.apply(this,arguments)},Tl=function(a){Mu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return pa(pa({},a.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t,e){return e===void 0&&(e={}),!!e.inSvg},n}(ti);const Lu=Tl;var Du=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),da=function(){return da=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},da.apply(this,arguments)},El="table",wf=function(a){Du(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return da(da({},a.prototype.defaults),{type:El,tagName:El,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var r=this.get("components");!r.length&&r.add({type:"tbody"})},n.isComponent=function(t){return(0,J.toLowerCase)(t.tagName)===El},n}(zr);const bf=wf;var Fo=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pi=function(){return Pi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Pi.apply(this,arguments)},io="tbody",Pl=function(a){Fo(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Pi(Pi({},a.prototype.defaults),{type:io,tagName:io,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var r=this.get("components"),i=this.get("columns"),l=this.get("rows");if(!r.length){for(var f=[];l--;){for(var d=[],h=i;h--;)d.push({type:"cell",classes:["cell"]});f.push({type:"row",classes:["row"],components:d})}r.add(f)}},n.isComponent=function(t){return(0,J.toLowerCase)(t.tagName)===io},n}(zr);const Ka=Pl;var ju=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ha=function(){return ha=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ha.apply(this,arguments)},Vo=function(a){ju(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ha(ha({},a.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return["td","th"].indexOf((0,J.toLowerCase)(t.tagName))>=0},n}(zr);const Ho=Vo;var yn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ui=function(){return ui=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ui.apply(this,arguments)},yi="tfoot",Fs=function(a){yn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ui(ui({},a.prototype.defaults),{type:yi,tagName:yi})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,J.toLowerCase)(t.tagName)===yi},n}(Ka);const Cf=Fs;var Iu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),oo=function(){return oo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},oo.apply(this,arguments)},Vs="thead",Al=function(a){Iu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return oo(oo({},a.prototype.defaults),{type:Vs,tagName:Vs})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,J.toLowerCase)(t.tagName)===Vs},n}(Ka);const Hs=Al;var xf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),va=function(){return va=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},va.apply(this,arguments)},kl="tr",Ml=function(a){xf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return va(va({},a.prototype.defaults),{tagName:kl,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,J.toLowerCase)(t.tagName)===kl},n}(zr);const Ll=Ml;var ga=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bo=function(){return Bo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Bo.apply(this,arguments)},Bs="video",Ai="yt",ma="vi",ya="ytnc",Ru="so",Ga=function(a){return a&&a!=="0"},Dl=function(a){ga(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Bo(Bo({},a.prototype.defaults),{type:Bs,tagName:Bs,videoId:"",void:!1,provider:Ru,ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:0,autoplay:!1,controls:!0,color:"",list:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){this.em=e.em,this.get("src")&&this.parseFromSrc(),this.updatePropsFromAttr(),this.updateTraits(),this.on("change:provider",this.updateTraits),this.on("change:videoId change:provider",this.updateSrc),a.prototype.initialize.call(this,t,e)},n.prototype.updatePropsFromAttr=function(){if(this.get("provider")===Ru){var t=this.get("attributes"),e=t.controls,r=t.autoplay,i=t.loop,l={};(0,J.isDef)(e)&&(l.controls=!!e),(0,J.isDef)(r)&&(l.autoplay=!!r),(0,J.isDef)(i)&&(l.loop=!!i),(0,J.isEmptyObj)(l)||this.set(l)}},n.prototype.updateTraits=function(){var t=this.em,e=this.get("provider"),r="iframe",i;switch(e){case Ai:case ya:i=this.getYoutubeTraits();break;case ma:i=this.getVimeoTraits();break;default:r="video",i=this.getSourceTraits()}this.set({tagName:r},{silent:!0}),this.set({traits:i}),t.get("ready")&&t.trigger("component:toggled")},n.prototype.parseFromSrc=function(){var t=this.get("provider"),e=this.parseUri(this.get("src")),r=e.query;switch(t){case Ai:case ya:case ma:this.set("videoId",e.pathname.split("/").pop()),r.list&&this.set("list",r.list),Ga(r.autoplay)&&this.set("autoplay",!0),Ga(r.loop)&&this.set("loop",!0),parseInt(r.controls)===0&&this.set("controls",!1),Ga(r.color)&&this.set("color",r.color),r.rel==="0"&&this.set("rel",0),r.modestbranding==="1"&&this.set("modestbranding",1);break}},n.prototype.updateSrc=function(){var t=this.get("provider"),e="";switch(t){case Ai:e=this.getYoutubeSrc();break;case ya:e=this.getYoutubeNoCookieSrc();break;case ma:e=this.getVimeoSrc();break}this.set({src:e})},n.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.get("provider");switch(e){case Ai:case ya:case ma:break;default:t.loop=!!this.get("loop"),t.autoplay=!!this.get("autoplay"),t.controls=!!this.get("controls")}return t},n.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:Ai,name:"Youtube"},{value:ya,name:"Youtube (no cookie)"},{value:ma,name:"Vimeo"}]}},n.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},n.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},n.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},n.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},n.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},n.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},n.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),e=this.get("ytUrl"),r=this.get("list");return e+=t+(t.indexOf("?")<0?"?":""),e+=r?"&list=".concat(r):"",e+=this.get("autoplay")?"&autoplay=1&muted=1":"",e+=this.get("controls")?"":"&controls=0&showinfo=0",e+=this.get("loop")?"&loop=1&playlist=".concat(t):"",e+=this.get("rel")?"":"&rel=0",e+=this.get("modestbranding")?"&modestbranding=1":"",e},n.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get("ytUrl"),this.get("ytncUrl")),t},n.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1&muted=1":"",t+=this.get("loop")?"&loop=1":"",t+=this.get("controls")?"":"&title=0&portrait=0&badge=0",t+=this.get("color")?"&color="+this.get("color"):"",t},n.isComponent=function(t){var e=t.tagName,r=t.src,i=/youtube\.com\/embed/.test(r),l=/youtube-nocookie\.com\/embed/.test(r),f=/player\.vimeo\.com\/video/.test(r),d=i||l||f;if((0,J.toLowerCase)(e)==Bs||(0,J.toLowerCase)(e)=="iframe"&&d){var h={type:"video"};return r&&(h.src=r),d&&(i?h.provider=Ai:l?h.provider=ya:f&&(h.provider=ma)),h}},n}(Hn);const _a=Dl;var $a=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Us=function(){return Us=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Us.apply(this,arguments)},Ws=function(a){$a(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Us(Us({},a.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),n.prototype.__postAdd=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return!this.__hasUm&&(e==null||e.add(this)),a.prototype.__postAdd.call(this)},n.prototype.__postRemove=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return e==null||e.remove(this),a.prototype.__postRemove.call(this)},n.isComponent=function(){return!1},n}(zr);const Nu=Ws;var qa=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fu=function(a){qa(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.compView=Cr,t}return n.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,"add",this.addTo),this.listenTo(e,"reset",this.resetChildren),this.listenTo(e,"remove",this.removeChildren)},n.prototype.removeChildren=function(t,e,r){var i=this;r===void 0&&(r={}),t.views.forEach(function(f){if(f){var d=f.childrenView,h=f.scriptContainer;d&&d.stopListening(),(0,Xt.L_)(h),f.remove.apply(f)}});var l=t.components();l.forEach(function(f){return i.removeChildren(f,e,r)})},n.prototype.addTo=function(t,e,r){r===void 0&&(r={});var i=this.em,l=this.collection.indexOf(t);if(this.addToCollection(t,null,l),i&&!r.temporary){var f=function(d){i.trigger("component:add",d),d.components().forEach(function(h){return f(h)})};f(t)}},n.prototype.addToCollection=function(t,e,r){for(var i=this,l=i.config,f=i.opts,d=i.em,h=e||null,g=l.frameView,y=(g==null?void 0:g.model)&&t.getView(g.model),b=f.componentTypes||(d==null?void 0:d.Components.getTypes()),P=t.get("type")||"default",D=this.compView,$=0;$<b.length;$++)if(b[$].id==P){D=b[$].view;break}var X=y||new D({model:t,config:l,componentTypes:b}),lt;try{lt=X.render().el}catch(ue){lt=document.createTextNode(""),d.logError(ue)}if(h)h.appendChild(lt);else{var Tt=this.parentEl,bt=Tt.childNodes;if((0,O.isUndefined)(r))Tt.appendChild(lt);else{var Zt=bt.length==r;Zt&&r--,Zt||!bt.length?Tt.appendChild(lt):Tt.insertBefore(lt,bt[r])}}return t.opt.temporary||d==null||d.trigger("component:mount",t),lt},n.prototype.resetChildren=function(t,e){var r=this,i=e===void 0?{}:e,l=i.previousModels,f=l===void 0?[]:l;this.parentEl.innerHTML="",f.forEach(function(d){return r.removeChildren(d,r.collection)}),t.each(function(d){return r.addToCollection(d)})},n.prototype.render=function(t){var e=this,r=this.el,i=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(l){return e.addToCollection(l,i)}),r.innerHTML="",r.appendChild(i),this},n}(S.G7);const ao=Fu;var Ya=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_n=function(){return _n=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},_n.apply(this,arguments)},Xa=function(a){Ya(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.className=function(){return this.getClasses()},n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,r=t.config||{},i=r.em,l=e.opt||{},f=this,d=f.$el,h=f.el;this.opts=t,this.modelOpt=l,this.config=r,this.em=i,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.attr=e.get("attributes"),this.classe=this.attr.class||[],this.listenTo(e,"change:style",this.updateStyle),this.listenTo(e,"change:attributes",this.renderAttributes),this.listenTo(e,"change:highlightable",this.updateHighlight),this.listenTo(e,"change:status change:locked",this.updateStatus),this.listenTo(e,"change:script rerender",this.reset),this.listenTo(e,"change:content",this.updateContent),this.listenTo(e,"change",this.handleChange),this.listenTo(e,"active",this.onActive),this.listenTo(e,"disable",this.onDisable),d.data("model",e),(0,J.setViewEl)(h,this),e.view=this,this.frameView&&e.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=_n(_n({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!l.temporary&&this.init(this._clbObj())},Object.defineProperty(n.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),n.prototype.__isDraggable=function(){var t=this,e=t.model,r=t.config,i=e.attributes.draggable;return r.draggableComponents&&i},n.prototype._clbObj=function(){var t=this,e=t.em,r=t.model,i=t.el;return{editor:e==null?void 0:e.getEditor(),model:r,el:i}},n.prototype.init=function(t){},n.prototype.removed=function(t){},n.prototype.onRender=function(t){},n.prototype.onActive=function(t){},n.prototype.onDisable=function(){},n.prototype.remove=function(){var t;a.prototype.remove.call(this);var e=this,r=e.model,i=e.$el,l=r.views,f=this.frameView||{};return r.components().forEach(function(d){var h=d.getView(f.model);h==null||h.remove()}),(t=this.childrenView)===null||t===void 0||t.remove(),l.splice(l.indexOf(this),1),this.removed(this._clbObj()),i.data({model:"",collection:"",view:""}),this},n.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault(),this.em.Commands.run("tlb-move",{target:this.model,event:t})},n.prototype.initClasses=function(){var t=this.model,e=t.classes,r="change:classes";e instanceof Jn&&(this.stopListening(t,r,this.initClasses),this.listenTo(t,r,this.initClasses),this.listenTo(e,"add remove change reset",this.updateClasses),e.length&&this.importClasses())},n.prototype.initComponents=function(t){t===void 0&&(t={});var e=this,r=e.model,i=e.$el,l=e.childrenView,f="change:components",d=r.get("components"),h=[r,f,this.initComponents];d instanceof $i&&(i.data("collection",d),l&&l.remove(),this.stopListening.apply(this,h),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,h))},n.prototype.handleChange=function(){var t=this.model,e=(0,O.keys)(t.changed);if(!(e.length===1&&e[0]==="status")){t.emitUpdate();for(var r in t.changed)t.emitUpdate(r)}},n.prototype.importClasses=function(){var t=this,e=t.em,r=t.model,i=e.Selectors;i&&r.classes.forEach(function(l){return i.add(l.get("name"))})},n.prototype.updateStatus=function(t){t===void 0&&(t={});var e=this,r=e.em,i=e.el,l=e.ppfx,f=e.model,d=r==null?void 0:r.Canvas,h=d==null?void 0:d.config.extHl,g=f.get("status"),y="".concat(l,"selected"),b="".concat(y,"-parent"),P="".concat(l,"freezed"),D="".concat(l,"hovered"),$="".concat(l,"no-pointer"),X=[y,b,P,D,$],lt=h&&!t.noExtHl?"":y;this.$el.removeClass(X.join(" "));var Tt=i.getAttribute("class")||"",bt=[Tt],Zt=!(d!=null&&d.hasCustomSpot(tr.q.Select)),ue=!(d!=null&&d.hasCustomSpot(tr.q.Target));switch(g){case"selected":Zt&&bt.push(lt);break;case"selected-parent":ue&&bt.push(b);break;case"freezed":bt.push(P);break;case"freezed-selected":bt.push(P),Zt&&bt.push(lt);break;case"hovered":!t.avoidHover&&bt.push(D);break}f.get("locked")&&bt.push($);var Oe=bt.filter(Boolean).join(" ");Oe&&i.setAttribute("class",Oe)},n.prototype.updateHighlight=function(){var t=this.model,e=t.get("textable"),r=t.get("highlightable")&&(e||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",r?!0:"")},n.prototype.updateStyle=function(t,e,r){r===void 0&&(r={});var i=this,l=i.model,f=i.em;if(Zi(f)&&!r.inline){var d=this.__cmpStyleOpts,h=l.getStyle(d);!(0,O.isEmpty)(h)&&l.setStyle(h,d)}else this.setAttribute("style",l.styleToString(r))},n.prototype.updateClasses=function(){var t=this.model.classes.pluck("name").join(" ");this.setAttribute("class",t),this.updateStatus(),this.onAttrUpdate()},n.prototype.setAttribute=function(t,e){var r=this.$el;e?r.attr(t,e):r.removeAttr(t)},n.prototype.getClasses=function(){return this.model.getClasses().join(" ")},n.prototype.updateAttributes=function(){var t=[],e=this,r=e.model,i=e.$el,l=e.el,f=r.attributes,d=f.textable,h=f.type,g=_n(_n({id:r.getId(),"data-gjs-type":h||"default"},this.__isDraggable()&&{draggable:!0}),d&&{contenteditable:"false"});(0,O.each)(l.attributes,function(b){return t.push(b.nodeName)}),t.forEach(function(b){return i.removeAttr(b)}),this.updateStyle(),this.updateHighlight();var y=_n(_n({},g),r.getAttributes());(0,O.keys)(y).forEach(function(b){return y[b]===!1&&delete y[b]}),i.attr(y)},n.prototype.updateContent=function(){var t=this.model.content,e=this.model.components().length;this.getChildrenContainer().innerHTML=e?"":t},n.prototype.prevDef=function(t){t.preventDefault()},n.prototype.updateScript=function(){var t=this,e=t.model,r=t.em;e.get("script")&&(r==null||r.Canvas.getCanvasView().updateScript(this))},n.prototype.getChildrenContainer=function(){var t=this.el;return typeof this.getChildrenSelector=="function"?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},n.prototype.getOffsetRect=function(){var t={top:0,left:0,bottom:0,right:0},e=this.el,r=0,i=0,l=function(f){var d=f.offsetParent;d?(r+=d.offsetTop,i+=d.offsetLeft,l(d)):(t.top=e.offsetTop+r,t.left=e.offsetLeft+i,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return l(e),t},n.prototype.isInViewport=function(){var t=this,e=t.el,r=t.em,i=t.frameView,l=r.Canvas.getCanvasView(),f=l.getElBoxRect(e,{local:!0}),d=i.el,h=d.clientHeight,g=d.clientWidth,y=f.y,b=f.x,P=y+f.height,D=b+f.width,$=y>=0&&y<h,X=P>0&&P<h,lt=D>=0&&D<g,Tt=b>0&&b<=g,bt=($||X)&&(lt||Tt);return bt},n.prototype.scrollIntoView=function(t){var e;t===void 0&&(t={});var r=this.isInViewport();if(!r||t.force){var i=this.el;if(t.behavior!=="smooth"){var l=this.getOffsetRect();(e=i.ownerDocument.defaultView)===null||e===void 0||e.scrollTo(0,l.top)}else i.scrollIntoView(_n({behavior:"smooth",block:"nearest"},t))}},n.prototype.reset=function(){var t=this.el;this.el="",this._ensureElement(),this._setData(),(0,Xt.dL)(t,this.el),this.render()},n.prototype._setData=function(){var t=this.model,e=t.components(),r=this;this.$el.data({model:t,collection:e,view:r})},n.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new ao({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var r=Array.prototype.slice.call(e.el.childNodes),i=0,l=r.length;i<l;i++)t.appendChild(r.shift())},n.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},n.prototype.onAttrUpdate=function(){},n.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary?this:(this.renderChildren(),this.updateScript(),(0,J.setViewEl)(this.el,this),this.postRender(),this)},n.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},n.getEvents=function(){return(0,O.result)(this.prototype,"events")},n}(S.G7);const Cr=Xa;var Vu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hu=function(a){Vu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._setAttributes=function(){},n.prototype.renderAttributes=function(){},n.prototype.updateStatus=function(){},n.prototype.updateClasses=function(){},n.prototype.setAttribute=function(){},n.prototype.updateAttributes=function(){},n.prototype.initClasses=function(){},n.prototype.initComponents=function(){},n.prototype.delegateEvents=function(){return this},n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var t=this,e=t.model,r=t.el;return e.opt.temporary?this:(r.textContent=e.content,this)},n}(Cr);const jl=Hu;var Sf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Uo=function(a){Sf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createComment(this.model.content)},n}(jl);const Wo=Uo;var Of=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tf=function(a){Of(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},n.prototype.updateSrc=function(){var t=(0,Xt.sE)(this.el,"iframe")[0];t&&(0,Xt.FW)(t,{src:this.__getSrc()})},n.prototype.render=function(){a.prototype.render.call(this);var t=(0,Xt.ut)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},n.prototype.__getSrc=function(){return this.model.getAttributes().src||""},n}(Cr);const Ef=Tf;var Pf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Af=function(a){Pf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"img"},n.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},n.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this,e=t.model,r=t.em,i=e.get("file");if(i&&r){var l=r.Assets.FileUploader();l==null||l.uploadFile({dataTransfer:{files:[i]}},function(f){var d=f&&f.data&&f.data[0],h=d&&((0,O.isString)(d)?d:d.src);h&&e.set({src:h})}),e.set("file","")}}},n.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},n.prototype.updateClasses=function(){a.prototype.updateClasses.call(this);var t=this,e=t.el,r=t.classEmpty,i=t.model,l=i.getSrcResult()&&!i.isDefaultSrc(),f=l?"remove":"add";e.classList[f](r)},n.prototype.onActive=function(t){t==null||t.stopPropagation();var e=this,r=e.em,i=e.model,l=r==null?void 0:r.Assets;l&&i.get("editable")&&l.open({select:function(f,d){i.set({src:f.getSrc()}),d&&l.close()},target:i,types:["image"],accept:"image/*"})},n.prototype.onError=function(){var t=this.model.getSrcResult({fallback:!0});t&&(this.el.src=t)},n.prototype.onLoad=function(){this.em.trigger("change:canvasOffset")},n.prototype.noDrag=function(t){return t.preventDefault(),!1},n.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this,e=t.$el,r=t.model,i=e.attr("class")||"";return!r.get("src")&&e.attr("class","".concat(i," ").concat(this.classEmpty).trim()),this.postRender(),this},n}(Cr);const zs=Af;var Pn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xr=function(){return xr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},xr.apply(this,arguments)},Kr=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?i(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},Mr=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Za=function(a){Pn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),(0,O.bindAll)(this,"disableEditing","onDisable");var e=this.model,r=this.em;this.listenTo(e,"focus",this.onActive),this.listenTo(e,"change:content",this.updateContentText),this.listenTo(e,"sync:content",this.syncContent),this.rte=r==null?void 0:r.RichTextEditor},n.prototype.updateContentText=function(t,e,r){r===void 0&&(r={}),!r.fromDisable&&this.disableEditing()},n.prototype.canActivate=function(){var t=this,e=t.model,r=t.rteEnabled,i=t.em,l=i==null?void 0:i.getEditing(),f=l===e,d=!0,h=!1,g;if((r||!e.get("editable")||f||(h=e.isChildOf("text")))&&(d=!1,h&&!e.get("textable"))){for(var y=e.parent();y&&!y.isInstanceOf("text");)y=y.parent();y&&y.get("editable")?g=y:d=!0}return{result:d,delegate:g}},n.prototype.onActive=function(t){var e,r;return Kr(this,void 0,void 0,function(){var i,l,f,d,h,g,y,b,P;return Mr(this,function(D){switch(D.label){case 0:return i=this,l=i.rte,f=i.em,d=this.canActivate(),h=d.result,g=d.delegate,h?((r=t==null?void 0:t.stopPropagation)===null||r===void 0||r.call(t),y=this,[4,this.getContent()]):(g&&((e=t==null?void 0:t.stopPropagation)===null||e===void 0||e.call(t),f.setSelected(g),g.trigger("active",t)),[2]);case 1:if(y.lastContent=D.sent(),!l)return[3,5];D.label=2;case 2:return D.trys.push([2,4,,5]),b=this,[4,l.enable(this,this.activeRte,{event:t})];case 3:return b.activeRte=D.sent(),[3,5];case 4:return P=D.sent(),f.logError(P),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},n.prototype.onDisable=function(){this.disableEditing()},n.prototype.disableEditing=function(t){return t===void 0&&(t={}),Kr(this,void 0,void 0,function(){var e,r,i,l,f,d,h,g;return Mr(this,function(y){switch(y.label){case 0:if(e=this,r=e.model,i=e.rte,l=e.activeRte,f=e.em,d=r&&r.get("editable"),!i)return[3,8];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,i.disable(this,l)];case 2:return y.sent(),[3,4];case 3:return h=y.sent(),f.logError(h),[3,4];case 4:return g=d,g?[4,this.getContent()]:[3,6];case 5:g=y.sent()!==this.lastContent,y.label=6;case 6:return g?[4,this.syncContent(t)]:[3,8];case 7:y.sent(),this.lastContent="",y.label=8;case 8:return this.toggleEvents(),[2]}})})},n.prototype.getContent=function(){return Kr(this,void 0,void 0,function(){var t,e,r,i;return Mr(this,function(l){switch(l.label){case 0:return t=this,e=t.rte,r=t.activeRte,i="",e?[4,e.getContent(this,r)]:[3,2];case 1:i=l.sent(),l.label=2;case 2:return[2,i]}})})},n.prototype.syncContent=function(t){return t===void 0&&(t={}),Kr(this,void 0,void 0,function(){var e,r,i,l,f,d,h;return Mr(this,function(g){switch(g.label){case 0:return e=this,r=e.model,i=e.rte,l=e.rteEnabled,!l&&!t.force?[2]:[4,this.getContent()];case 1:return f=g.sent(),d=r.components(),h=xr({fromDisable:1},t),r.set("content","",h),i!=null&&i.customRte&&!i.customRte.parseContent?(d.length&&d.reset(void 0,xr(xr({},t),{keepIds:Rn(d)})),r.set("content",f,h)):d.resetFromString(f,t),[2]}})})},n.prototype.insertComponent=function(t,e){var r;e===void 0&&(e={});var i=this,l=i.model,f=i.el,d=f.ownerDocument,h=d.getSelection();if(h!=null&&h.rangeCount){var g=h.getRangeAt(0),y=g.startContainer,b=g.startOffset,P=(0,J.getModel)(y),D=[];if(P&&(!((r=P.is)===null||r===void 0)&&r.call(P,"textnode"))){var $=P.collection;$.forEach(function(Tt){if(Tt===P){var bt="textnode",Zt=Tt.content;D.push({type:bt,content:Zt.slice(0,b)}),D.push(t),D.push({type:bt,content:Zt.slice(b)})}else D.push(Tt)});var X=D.filter(Boolean),lt=X.indexOf(t);return $.reset(X,e),$.at(lt)}}return l.append(t,e)},n.prototype.onInput=function(){var t=this.em,e="component",r=["".concat(e,":update"),"".concat(e,":input")].join(" ");t&&t.trigger(r,this.model)},n.prototype.disablePropagation=function(t){t.stopPropagation()},n.prototype.toggleEvents=function(t){var e=this,r=e.em,i=e.model,l=e.$el,f={on:Xt.on,off:Xt.S1},d=t?"on":"off";r.setEditing(t?this:!1),this.rteEnabled=!!t;var h=[this.el.ownerDocument,document];if(f.off(h,"mousedown",this.onDisable),f[d](h,"mousedown",this.onDisable),r[d]("toolbar:run:before",this.onDisable),i&&(i[d]("removed",this.onDisable),i.trigger("rte:".concat(t?"enable":"disable"))),l==null||l.off("mousedown",this.disablePropagation),l&&l[d]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var g=this.el;g;)g.draggable=!t,g=g.parentNode,g&&g.tagName=="BODY"&&(g=0)},n}(Cr);const Bu=Za;var Ks=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kf=function(a){Ks(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(){return a.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},n}(Bu);const Uu=kf;var Mf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Il=function(a){Mf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Uu);const Wu=Il;var Rl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Lf=function(a){Rl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},n.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},n.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},n.prototype.render=function(){return a.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},n}(zs);const Nl=Lf;var Fl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zu=function(a){Fl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"script"},n.prototype.events=function(){return{}},n.prototype.render=function(){var t=this,e=t.model,r=t.em,i=e.get("src"),l=r&&r.get("scriptCount"),f=l||0,d="";if(i){var h=e.get("onload"),g="script".concat(f),y="script".concat(f+1),b="".concat(g,"Start"),P="".concat(y,"Start");d=`
        var `.concat(g,` = document.createElement('script');
        `).concat(g,`.onload = function() {
          `).concat(h?"".concat(h,`();
`):"",`
          typeof `).concat(P," == 'function' && ").concat(P,`();
        };
        `).concat(g,".src = '").concat(i,`';
        function `).concat(b,"() { document.body.appendChild(").concat(g,`); };
        `).concat(f?"":"".concat(b,"();"),`
      `),r&&r.set("scriptCount",f+1)}else d=e.__innerHTML();return this.el.innerHTML=d,this.postRender(),this},n}(zs);const Ku=zu;var Vl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gu=function(a){Vl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},n}(Cr);const wa=Gu;var Df=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gs=function(a){Df(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Cr);const ki=Gs;var $u=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jf=function(a){$u(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Cr);const qu=jf;var Bn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nr=function(a){Bn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Cr);const ci=nr;var so=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lo=function(a){so(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Cr);const Yu=lo;var Hl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xu=function(a){Hl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Cr);const If=Xu,Bl=Cr.extend({events:{}});var Ja=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zu=function(a){Ja(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(){Cr.prototype.initialize.apply(this,arguments);var t=this.model,e=["loop","autoplay","controls","color","rel","modestbranding","poster"],r=e.map(function(i){return"change:".concat(i)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,r,this.updateVideo)},n.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},n.prototype.updateSrc=function(){var t=this,e=t.model,r=t.videoEl;if(r){var i=e.get("provider"),l=e.get("src");switch(i){case"yt":l=e.getYoutubeSrc();break;case"ytnc":l=e.getYoutubeNoCookieSrc();break;case"vi":l=e.getVimeoSrc();break}r.src=l}},n.prototype.updateVideo=function(){var t=this,e=t.model,r=t.videoEl,i=e.get("provider");switch(i){case"yt":case"ytnc":case"vi":e.trigger("change:videoId");break;default:if(r){var l=r;l.loop=e.get("loop"),l.autoplay=e.get("autoplay"),l.controls=e.get("controls"),l.poster=e.get("poster")}}},n.prototype.renderByProvider=function(t){var e;switch(t){case"yt":e=this.renderYoutube();break;case"ytnc":e=this.renderYoutubeNoCookie();break;case"vi":e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},n.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},n.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},n.prototype.render=function(){Cr.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},n}(zs);const Ul=Zu;var uo=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ju=function(a){uo(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n}(Cr);const Qu=Ju;var Rf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),on=function(){return on=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},on.apply(this,arguments)},Wl=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},ba;(function(a){a[a.InvalidSource=0]="InvalidSource",a[a.SourceReject=1]="SourceReject",a[a.TargetReject=2]="TargetReject"})(ba||(ba={}));var Nf=function(a){Rf(n,a);function n(t){var e=a.call(this,t,"DomComponents",new $i(void 0,{em:t}))||this;e.componentTypes=[{id:"cell",model:Ho,view:qu},{id:"row",model:Ll,view:If},{id:"table",model:bf,view:Bl},{id:"thead",model:Hs,view:Yu},{id:"tbody",model:Ka,view:ki},{id:"tfoot",model:Cf,view:ci},{id:"map",model:_f,view:Nl},{id:"link",model:Yr,view:Uu},{id:"label",model:Nt,view:Wu},{id:"video",model:_a,view:Ul},{id:"image",model:Hn,view:zs},{id:"script",model:ku,view:Ku},{id:"svg-in",model:Lu,view:wa},{id:"svg",model:ti,view:wa},{id:"iframe",model:Is,view:Ef},{id:"comment",model:Qi,view:Wo},{id:"textnode",model:Ha,view:jl},{id:"text",model:M,view:Bu},{id:"wrapper",model:Nu,view:Qu},{id:"default",model:zr,view:Cr}],e.componentsById={},e.Component=zr,e.Components=$i,e.ComponentView=Cr,e.ComponentsView=ao,e.storageKey="components",t&&(e.config.components=t.config.components||e.config.components);for(var r in ko)r in e.config||(e.config[r]=ko[r]);var i=e.config.pStylePrefix;if(i&&(e.config.stylePrefix=i+e.config.stylePrefix),t){t.get("Parser").compTypes=e.componentTypes,t.on("change:componentHovered",e.componentHovered,e);var l=t.get("selected");t.listenTo(l,"add",function(f,d,h){return e.selectAdd(l.getComponent(f),h)}),t.listenTo(l,"remove",function(f,d,h){return e.selectRemove(l.getComponent(f),h)})}return e}return n.prototype.load=function(t){var e=this;return this.loadProjectData(t,{onResult:function(r){var i=e.getWrapper();if(i||(e.em.Pages.add({},{select:!0}),i=e.getWrapper()),(0,O.isArray)(r))r.length&&i.components(r);else{var l=r.components,f=l===void 0?[]:l,d=Wl(r,["components"]);i.set(d),i.components(f)}}})},n.prototype.store=function(){return{}},n.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=t==null?void 0:t.getMainFrame();return e==null?void 0:e.getComponent()},n.prototype.getWrapper=function(){return this.getComponent()},n.prototype.getComponents=function(){var t=this.getWrapper();return t==null?void 0:t.components()},n.prototype.addComponent=function(t,e){return e===void 0&&(e={}),this.getComponents().add(t,e)},n.prototype.render=function(){var t;return(t=this.componentView)===null||t===void 0?void 0:t.render().el},n.prototype.clear=function(t){t===void 0&&(t={});var e=this.getComponents();return e==null||e.filter(Boolean).forEach(function(r){return r.remove(t)}),this},n.prototype.setComponents=function(t,e){e===void 0&&(e={}),this.clear(e).addComponent(t,e)},n.prototype.addType=function(t,e){var r=this.em,i=e.model,l=i===void 0?{}:i,f=e.view,d=f===void 0?{}:f,h=e.isComponent,g=e.extend,y=e.extendView,b=e.extendFn,P=b===void 0?[]:b,D=e.extendFnView,$=D===void 0?[]:D,X=this.getType(t),lt=this.getType(g),Tt=this.getType(y),bt=lt||X||this.getType("default"),Zt=bt.model,ue=Tt?Tt.view:bt.view,Oe=function(je,Ze,ln){return je.reduce(function(ne,hn){var wo=Ze[hn],bo=ln.prototype[hn];return wo&&bo&&(ne[hn]=function(){for(var Co=[],Ni=0;Ni<arguments.length;Ni++)Co[Ni]=arguments[Ni];bo.bind(this).apply(void 0,Co),wo.bind(this).apply(void 0,Co)}),ne},{})};if(typeof l=="object"){var Ie={defaults:l.defaults};delete l.defaults,e.model=Zt.extend(on(on({},l),Oe(P,l,Zt)),{isComponent:X&&!lt&&!h?Zt.isComponent:h||function(){return 0}}),Object.defineProperty(e.model.prototype,"defaults",{get:function(){return on(on({},(0,O.result)(Zt.prototype,"defaults")||{}),(0,O.result)(Ie,"defaults")||{})}})}typeof d=="object"&&(e.view=ue.extend(on(on({},d),Oe($,d,ue)))),X?(X.model=e.model,X.view=e.view):(e.id=t,this.componentTypes.unshift(e));var ee="component:type:".concat(X?"update":"add");return r==null||r.trigger(ee,X||e),this},n.prototype.getType=function(t){for(var e=this.componentTypes,r=0;r<e.length;r++){var i=e[r].id;if(i==t)return e[r]}},n.prototype.removeType=function(t){var e=this.componentTypes,r=this.getType(t);if(r){var i=e.indexOf(r);return e.splice(i,1),r}},n.prototype.getTypes=function(){return this.componentTypes},n.prototype.selectAdd=function(t,e){var r=this;e===void 0&&(e={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(i){return r.em.trigger(i,t,e)}))},n.prototype.selectRemove=function(t,e){var r=this;e===void 0&&(e={}),t&&(this.em,t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(i){return r.em.trigger(i,t,e)}))},n.prototype.componentHovered=function(){var t=this.em,e=t.get("componentHovered"),r=t.previous("componentHovered"),i="hovered";r&&r.get("status")==i&&r.set({status:"",state:""}),e&&(0,O.isEmpty)(e.get("status"))&&e.set("status",i)},n.prototype.getShallowWrapper=function(){var t=this,e=t.shallow,r=t.em;if(!e&&r){var i=r.shallow;if(!i)return;var l=i.Components;if(l.componentTypes=this.componentTypes,e=l.getWrapper(),e){var f=[Oi,Qn].join(" ");e.on(f,(0,O.debounce)(function(){return e==null?void 0:e.components("")},100))}this.shallow=e}return e},n.prototype.isComponent=function(t){return(0,J.isComponent)(t)},n.prototype.canMove=function(t,e,r){var i={result:!1,reason:ba.InvalidSource,target:t,source:null};if(!e||!t)return i;var l=(0,J.isComponent)(e)?e:null;if(!l){var f=this.getShallowWrapper();l=(f==null?void 0:f.append(e)[0])||null}if(i.source=l,!l)return i;var d=l.get("draggable");if((0,O.isFunction)(d))d=!!d(l,t,r);else{var h=t.getEl();d=(0,O.isArray)(d)?d.join(","):d,d=(0,O.isString)(d)?h==null?void 0:h.matches(d):d}if(!d)return on(on({},i),{reason:ba.SourceReject});var g=t.get("droppable");if((0,O.isFunction)(g))g=!!g(l,t,r);else if(g===!1&&t.isInstanceOf("text")&&l.get("textable"))g=!0;else{var h=l.getEl();g=(0,O.isArray)(g)?g.join(","):g,g=(0,O.isString)(g)?h==null?void 0:h.matches(g):g}var y=[t].concat(t.parents()).indexOf(l)>-1;return!g||y?on(on({},i),{reason:ba.TargetReject}):on(on({},i),{result:!0})},n.prototype.allById=function(){return this.componentsById},n.prototype.getById=function(t){return this.componentsById[t]||null},n.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach(function(r){return e[r]&&e[r].remove()}),(t=this.componentView)===null||t===void 0||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(r){return{}})},n}(xt);const tc=Nf;var Ff={stylePrefix:"css-",rules:[]};const Vf=Ff;var $s=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ec=Number.MAX_VALUE,Hf=function(a){var n=/(-?\d*\.?\d+)\w{0,}/.exec(a);return n?n[0]:""},Bf=function(a){$s(n,a);function n(){var t=a.call(this)||this;return(0,O.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return n.prototype.buildFromModel=function(t,e){var r=this;e===void 0&&(e={});var i="",l=this.em,f=l&&l.getConfig().avoidInlineStyle,d=t.styleToString(),h=t.classes;this.ids.push("#".concat(t.getId())),h.forEach(function(y){return r.compCls.push(y.getFullName())}),!f&&d&&(i="#".concat(t.getId(),"{").concat(d,"}"));var g=t.components();return g.forEach(function(y){return i+=r.buildFromModel(y,e)}),i},n.prototype.build=function(t,e){var r=this;e===void 0&&(e={});var i=e.json,l=e.em,f=e.cssc||(l==null?void 0:l.Css);this.em=l,this.compCls=[],this.ids=[],this.model=t;var d=[],h=t?this.buildFromModel(t,e):"",g=(0,O.isUndefined)(e.clearStyles)&&l?l.getConfig().clearStyles:e.clearStyles;if(f){var y=e.rules||f.getAll(),b={},P=[];e.onlyMatched&&t&&(0,J.hasWin)()&&(y=this.matchedRules(t,y)),y.forEach(function(D){var $=D.getAtRule();if($){var X=b[$];X?X.push(D):b[$]=[D];return}var lt=r.buildFromRule(D,P,e);i?d.push(lt):h+=lt}),this.sortMediaObject(b).forEach(function(D){var $="",X=D.key,lt=D.value;lt.forEach(function(Tt){var bt=r.buildFromRule(Tt,P,e);Tt.get("singleAtRule")?h+="".concat(X,"{").concat(bt,"}"):$+=bt,i&&d.push(bt)}),$&&(h+="".concat(X,"{").concat($,"}"))}),l&&g&&y.remove&&y.remove(P)}return i?d.filter(function(D){return D}):h},n.prototype.buildFromRule=function(t,e,r){var i=this,l;r===void 0&&(r={});var f="",d=this.model,h=t.selectorsToString({skipAdd:1}),g=t.get("selectorsAdd"),y=t.get("singleAtRule"),b;if((l=t.get("selectors"))===null||l===void 0||l.forEach(function(D){var $=D.getFullName();(i.compCls.indexOf($)>=0||i.ids.indexOf($)>=0||r.keepUnusedStyles)&&(b=1)}),h&&b||g||y||!d){var P=t.getDeclaration({body:1});P&&(r.json?f=t:f+=P)}else e.push(t);return f},n.prototype.matchedRules=function(t,e){var r=this,i=t.getEl(),l=[];return e.forEach(function(f){try{f.selectorsToString().split(",").some(function(d){return i==null?void 0:i.matches(r.__cleanSelector(d))})&&l.push(f)}catch{}}),t.components().forEach(function(f){l=l.concat(r.matchedRules(f,e))}),l=l.filter(function(f,d){return l.indexOf(f)===d}),l},n.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):ec},n.prototype.sortMediaObject=function(t){var e=this;t===void 0&&(t={});var r=[];return(0,O.each)(t,function(i,l){return r.push({key:l,value:i})}),r.sort(function(i,l){var f=[i.key,l.key].every(function(g){return g.indexOf("min-width")!==-1}),d=f?i.key:l.key,h=f?l.key:i.key;return e.getQueryLength(d)-e.getQueryLength(h)})},n.prototype.sortRules=function(t,e){var r=function(d){return d.get("mediaText")||""},i=[r(t),r(e)].every(function(d){return d.indexOf("min-width")!==-1}),l=r(i?t:e),f=r(i?e:t);return this.getQueryLength(l)-this.getQueryLength(f)},n.prototype.__cleanSelector=function(t){return t.split(" ").map(function(e){return e.split(":")[0]}).join(" ")},n}(S.Hn);const rc=Bf;var Ca=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zo=function(){return zo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},zo.apply(this,arguments)},qs=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Ys=((0,J.hasWin)()?window:{}).CSS,zl=function(a){Ca(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this;return r.config=t||{},r.opt=e,r.em=e.em,r.ensureSelectors(null,null,{}),r.on("change",r.__onChange),r}return n.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},n.prototype.__onChange=function(t,e){var r=this.em,i=this.changedAttributes();i&&!(0,J.isEmptyObj)(i)&&(r==null||r.changesUp(e))},n.prototype.clone=function(){var t=zo({},this.opt),e=zo({},this.attributes);return e.selectors=this.get("selectors").map(function(r){return r.clone()}),new this.constructor(e,t)},n.prototype.ensureSelectors=function(t,e,r){var i=this.em,l=i==null?void 0:i.get("SelectorManager"),f=[this,"change:selectors",this.ensureSelectors],d=this.getSelectors();if(this.stopListening.apply(this,f),d.models&&(d=qs([],d.models,!0)),d=(0,O.isString)(d)?[d]:d,Array.isArray(d)){var h=d.filter(function(g){return g}).map(function(g){return l?l.add(g):g});d=new Jn(h)}this.set("selectors",d,r),this.listenTo.apply(this,f)},n.prototype.getAtRule=function(){var t=this.get("atRuleType"),e=this.get("mediaText"),r=t?"@".concat(t):e?"@media":"";return r+(e&&r?" ".concat(e):"")},n.prototype.selectorsToString=function(t){t===void 0&&(t={});var e=[],r=this.get("state"),i=this.get("selectorsAdd"),l={escape:function(h){return Ys&&Ys.escape?Ys.escape(h):h}},f=this.get("selectors").getFullString(0,l),d=r&&!t.skipState?":".concat(r):"";return f&&e.push("".concat(f).concat(d)),i&&!t.skipAdd&&e.push(i),e.join(", ")},n.prototype.getDeclaration=function(t){t===void 0&&(t={});var e="",r=this.attributes.important,i=this.selectorsToString(t),l=this.styleToString(zo({important:r},t)),f=this.get("singleAtRule");return(i||f)&&(l||t.allowEmpty)&&(e=f?l:"".concat(i,"{").concat(l,"}")),e},n.prototype.getDevice=function(){var t=this.em,e=this.attributes,r=e.atRuleType,i=e.mediaText,l=(t==null?void 0:t.get("DeviceManager").getDevices())||[],f=l.filter(function(d){return d.getWidthMedia()===""})[0];return r!=="media"||!i?f||null:l.filter(function(d){return d.getWidthMedia()===Hf(i)})[0]||null},n.prototype.getState=function(){var t=this.em,e=this.get("state"),r=(t==null?void 0:t.get("SelectorManager").getStates())||[];return r.filter(function(i){return i.getName()===e})[0]||null},n.prototype.getComponent=function(){var t,e=this.getSelectors(),r=e.length==1&&e.at(0),i=r&&r.isId()&&r.get("name");return i&&((t=this.em)===null||t===void 0?void 0:t.Components.getById(i))||null},n.prototype.toCSS=function(t){t===void 0&&(t={});var e="",r=this.getAtRule(),i=this.getDeclaration(t);return(i||t.allowEmpty)&&(e=i),r&&e&&(e="".concat(r,"{").concat(e,"}")),e},n.prototype.toJSON=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=S.Hn.prototype.toJSON.apply(this,e);if(!((t=this.em)===null||t===void 0)&&t.getConfig().avoidDefaults){var l=this.defaults();(0,O.forEach)(l,function(f,d){i[d]===f&&delete i[d]}),delete i.style.__p,(0,O.isEmpty)(i.selectors)&&delete i.selectors,(0,O.isEmpty)(i.style)&&delete i.style}return i},n.prototype.compare=function(t,e,r,i){var l;i===void 0&&(i={});var f=e||"",d=r||"",h=i.selectorsAdd||"",g=i.atRuleType||"",y=!(0,O.isArray)(t)&&!t.models?[t]:t.models||t;d&&!g&&(g="media");var b=y.map(function(X){return X.getFullName()}),P=(l=this.get("selectors"))===null||l===void 0?void 0:l.map(function(X){return X.getFullName()}),D=b.slice().sort(),$=P.slice().sort();return!(b.length!==P.length||!D.every(function(X,lt){return X===$[lt]})||this.get("state")!==f||this.get("mediaText")!==d||this.get("selectorsAdd")!==h||this.get("atRuleType")!==g)},n}(Mo);const Kl=zl;var Uf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gl=function(a){Uf(n,a);function n(t,e){var r=a.call(this,t)||this;return r.editor=e==null?void 0:e.em,setTimeout(function(){r.on("remove",r.onRemove),r.on("add",r.onAdd)}),r}return n.prototype.toJSON=function(t){var e=S.FE.prototype.toJSON.call(this,t);return e.filter(function(r){return r.style&&!r.shallow})},n.prototype.onAdd=function(t,e,r){t.ensureSelectors(t,e,r)},n.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},n.prototype.add=function(t,e){return e===void 0&&(e={}),typeof t=="string"&&(t=this.editor.get("Parser").parseCss(t)),e.em=this.editor,S.FE.prototype.add.apply(this,[t,e])},n}(S.FE);const an=Gl;Gl.prototype.model=Kl;var Xs=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),co=function(){return co=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},co.apply(this,arguments)},nc=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},ic=function(a){Xs(n,a);function n(t){var e=a.call(this,t,"CssComposer",null,{},Vf)||this;e.Selectors=Jn,e.storageKey="styles";var r=e.config,i=r.pStylePrefix;return i&&(r.stylePrefix=i+r.stylePrefix),r.rules=e.em.config.style||r.rules||"",e.rules=new an([],r),e}return n.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},n.prototype.postLoad=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.get("UndoManager");e&&e.add(this.getAll())},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},n.prototype.add=function(t,e,r,i,l){i===void 0&&(i={}),l===void 0&&(l={});var f=e||"",d=r||"",h=co({},i),g=this.get(t,f,d,h);return g&&g.config&&!g.config.singleAtRule||(h.state=f,h.mediaText=d,h.selectors=[],d&&!h.atRuleType&&(h.atRuleType="media"),g=new Kl(h,this.config),g.get("selectors").add(t,l),this.rules.add(g,l)),g},n.prototype.get=function(t,e,r,i){var l=t;if((0,O.isString)(t)){var f=this.em.Selectors,d=t.split(",")[0].trim(),h=this.em.Parser.parserCss.checkNode({selectors:d})[0];l=f.get(h.selectors)}return this.rules.find(function(g){return g.compare(l,e,r,i)})||null},n.prototype.getAll=function(){return this.rules},n.prototype.addCollection=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var i=this.em,l=[];(0,O.isString)(t)&&(t=i.Parser.parseCss(t));for(var f=t instanceof Array?t:[t],d=0,h=f.length;d<h;d++){var g=f[d]||{};if(g.selectors){var y=i==null?void 0:i.Selectors;y||console.warn("Selector Manager not found");for(var b=g.selectors,P=b instanceof Array?b:[b],D=[],$=0,X=P.length;$<X;$++){var lt=y.add(P[$]);D.push(lt)}var Tt=this.get(D,g.state,g.mediaText,g),bt=this.add(D,g.state,g.mediaText,g,e),Zt=!Tt||!e.avoidUpdateStyle,ue=g.style||{};if((0,J.isObject)(r)&&bt.set(r,e),Zt){var Oe=e.extend?co(co({},bt.get("style")),ue):ue;bt.set("style",Oe,e)}l.push(bt)}}return l},n.prototype.addRules=function(t){return this.addCollection(t)},n.prototype.setRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var i=r.atRuleType,l=r.atRuleParams,f=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],d=f.state,h=f.selectorsAdd,g=this.em.Selectors,y=g.add(f.selectors),b=this.add(y,d,l,{selectorsAdd:h,atRule:i});return r.addStyles?b.addStyle(e,r):b.setStyle(e,r),b},n.prototype.getRule=function(t,e){e===void 0&&(e={});var r=this.em,i=r.Selectors,l=r.Parser.parserCss.checkNode({selectors:t})[0],f=i.get(l.selectors),d=l.state,h=l.selectorsAdd,g=e.atRuleType,y=e.atRuleParams;return f?this.get(f,d,y,{selectorsAdd:h,atRuleType:g}):void 0},n.prototype.getRules=function(t){var e=this.getAll();if(!t)return nc([],e.models,!0);var r={sort:!0},i=(0,O.isString)(t)?t.split(",").map(function(f){return f.trim()}):t,l=e.filter(function(f){return i.indexOf(f.getSelectors().getFullString(null,r))>=0});return l},n.prototype.setIdRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var i=r.addOpts,l=i===void 0?{}:i,f=r.mediaText,d=r.state||"",h=(0,O.isUndefined)(f)?this.em.getCurrentMedia():f,g=this.em.Selectors,y=g.add({name:t,type:dr.TYPE_ID},l),b=this.add(y,d,h,{},l);return b.setStyle(e,co(co({},r),l)),b},n.prototype.getIdRule=function(t,e){e===void 0&&(e={});var r=e.mediaText,i=e.state||"",l=(0,O.isUndefined)(r)?this.em.getCurrentMedia():r,f=this.em.Selectors.get(t,dr.TYPE_ID);return f&&this.get(f,i,l)},n.prototype.setClassRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var i=r.state||"",l=r.mediaText||this.em.getCurrentMedia(),f=this.em.Selectors,d=f.add({name:t,type:dr.TYPE_CLASS}),h=this.add(d,i,l);return h.setStyle(e,r),h},n.prototype.getClassRule=function(t,e){e===void 0&&(e={});var r=e.state||"",i=e.mediaText||this.em.getCurrentMedia(),l=this.em.Selectors.get(t,dr.TYPE_CLASS);return l&&this.get(l,r,i)},n.prototype.remove=function(t,e){var r=(0,O.isString)(t)?this.getRules(t):t,i=this.getAll().remove(r,e);return(0,O.isArray)(i)?i:[i]},n.prototype.clear=function(t){return t===void 0&&(t={}),this.getAll().reset([],t),this},n.prototype.getComponentRules=function(t,e){e===void 0&&(e={});var r=e.state,i=e.mediaText,l=e.current;l&&(r=this.em.get("state")||"",i=this.em.getCurrentMedia());var f=t.getId(),d=this.getAll().filter(function(h){return!(0,O.isUndefined)(r)&&h.get("state")!==r||!(0,O.isUndefined)(i)&&h.get("mediaText")!==i?!1:h.getSelectorsString()==="#".concat(f)});return d},n.prototype.render=function(){var t;return(t=this.rulesView)===null||t===void 0||t.remove(),this.rulesView=new br({collection:this.rules,config:this.config}),this.rulesView.render().el},n.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),(t=this.rulesView)===null||t===void 0||t.remove()},n}(xt);const xa=ic;var Zs={appendTo:"",blocks:[],appendOnClick:!1,custom:!1};const oc=Zs;var ac=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sc=function(a){ac(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},n.prototype.getId=function(){return this.id},n.prototype.getLabel=function(){return this.get("label")},n.prototype.getMedia=function(){return this.get("media")},n.prototype.getContent=function(){return this.get("content")},n.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,O.isFunction)(t==null?void 0:t.get)?t.get("label"):t!=null&&t.label?t==null?void 0:t.label:t},n}(S.Hn);const Ko=sc;var lc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qa=function(a){lc(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(S.FE);const ts=Qa;Qa.prototype.model=Ko;var es=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wf=function(a){es(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},n}(S.Hn);const Go=Wf;var uc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$l=function(a){uc(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(S.FE);const ql=$l;$l.prototype.model=Go;var fo;(function(a){a.add="block:add",a.remove="block:remove",a.removeBefore="block:remove:before",a.update="block:update",a.dragStart="block:drag:start",a.drag="block:drag",a.dragEnd="block:drag:stop",a.custom="block:custom",a.all="block"})(fo||(fo={}));var rs=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ns=function(a){rs(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this,i=r.model;return r.em=e.em,r.config=e,r.endDrag=r.endDrag.bind(r),r.ppfx=e.pStylePrefix||"",r.listenTo(i,"destroy remove",r.remove),r.listenTo(i,"change",r.render),r}return n.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.handleClick=function(t){var e=this,r=e.config,i=e.model,l=e.em,f=i.get("onClick")||r.appendOnClick;if(l.trigger("block:click",i,t),f){if((0,O.isFunction)(f))return f(i,l==null?void 0:l.getEditor(),{event:t})}else return;var d=r.getSorter(),h=i.get("content"),g=l.getSelected();d.setDropContent(h);var y,b,P;if(g)if(b=d.validTarget(g.getEl(),h),b.valid)y=g;else{var D=g.parent();D&&(b=d.validTarget(D.getEl(),h),b.valid&&(y=D,P=D.components().indexOf(g)+1))}if(!y){var $=l.getWrapper();b=d.validTarget($.getEl(),h),b.valid&&(y=$)}var X=y&&y.append(h,{at:P})[0];X&&l.setSelected(X,{scroll:1})},n.prototype.startDrag=function(t){var e=this,r=e.config,i=e.em,l=e.model,f=l.get("disable");if(!(t.button!==0||!r.getSorter||this.el.draggable||f)){i.refreshCanvas();var d=r.getSorter();d.__currentBlock=l,d.setDragHelper(this.el,t),d.setDropContent(this.model.get("content")),d.startSort(this.el),(0,Xt.on)(document,"mouseup",this.endDrag)}},n.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},n.prototype.handleDrag=function(t){this.__getModule().__drag(t)},n.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},n.prototype.endDrag=function(){(0,Xt.S1)(document,"mouseup",this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},n.prototype.render=function(){var t,e=this,r=e.em,i=e.el,l=e.$el,f=e.ppfx,d=e.model,h=d.get("disable"),g=d.get("attributes")||{},y=g.class||"",b="".concat(f,"block"),P=r&&r.t("blockManager.labels.".concat(d.id))||d.get("label"),D=d.get("render"),$=d.get("media"),X=h?"".concat(b,"--disable"):"".concat(f,"four-color-h");l.attr(g),i.className="".concat(y," ").concat(b," ").concat(f,"one-bg ").concat(X).trim(),i.innerHTML=`
      `.concat($?'<div class="'.concat(b,'__media">').concat($,"</div>"):"",`
      <div class="`).concat(b,'-label">').concat(P,`</div>
    `),i.title=g.title||((t=i.textContent)===null||t===void 0?void 0:t.trim()),i.setAttribute("draggable","".concat(!!((0,J.hasDnd)(r)&&!h)));var lt=D&&D({el:i,model:d,className:b,prefix:f});return lt&&(i.innerHTML=lt),this},n}(S.G7);const is=ns;var cc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zf=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},fc=function(a){cc(n,a);function n(t,e){var r=a.call(this,t)||this;r.config=e;var i=e.pStylePrefix||"";return r.em=e.em,r.pfx=i,r.caretR="fa fa-caret-right",r.caretD="fa fa-caret-down",r.iconClass="".concat(i,"caret-icon"),r.activeClass="".concat(i,"open"),r.className="".concat(i,"block-category"),r.listenTo(r.model,"change:open",r.updateVisibility),r.model.view=r,r}return n.prototype.events=function(){return{"click [data-title]":"toggle"}},n.prototype.template=function(t){var e=t.pfx,r=t.label;return ut($o||($o=zf([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `])),e,e,r,e)},n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},n.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getBlocksEl().style.display=""},n.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getBlocksEl().style.display="none"},n.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},n.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},n.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.pfx,"blocks-c"))),this.blocksEl},n.prototype.append=function(t){this.getBlocksEl().appendChild(t)},n.prototype.render=function(){var t=this,e=t.em,r=t.el,i=t.$el,l=t.model,f=t.pfx,d=e.t("blockManager.categories.".concat(l.id))||l.get("label");return r.innerHTML=this.template({pfx:f,label:d}),i.addClass(this.className),i.css({order:l.get("order")}),this.updateVisibility(),this},n}(S.G7);const po=fc;var $o,os=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Js=function(){return Js=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Js.apply(this,arguments)},pc=function(a){os(n,a);function n(t,e){var r=a.call(this,t)||this;(0,O.bindAll)(r,"getSorter","onDrag","onDrop","onMove"),r.config=e||{},r.categories=t.categories||"",r.renderedCategories={};var i=r.config.pStylePrefix||"";r.ppfx=i,r.noCatClass="".concat(i,"blocks-no-cat"),r.blockContClass="".concat(i,"blocks-c"),r.catsClass="".concat(i,"block-categories");var l=r.collection;return r.listenTo(l,"add",r.addTo),r.listenTo(l,"reset",r.render),r.em=r.config.em,r.em&&(r.config.getSorter=r.getSorter),r}return n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.updateConfig=function(t){t===void 0&&(t={}),this.config=Js(Js({},this.config),t)},n.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,r=t.Canvas;this.sorter=new e.Sorter({container:r.getBody(),placer:r.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:r.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:t,canvasRelative:1})}return this.sorter}},n.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},n.prototype.onMove=function(t){this.__getModule().__drag(t)},n.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},n.prototype.addTo=function(t){this.add(t)},n.prototype.add=function(t,e){var r=this.config,i=new is({model:t,attributes:t.get("attributes")},r),l=i.render().el,f=t.get("category");if(f&&this.categories&&!r.ignoreCategories){(0,O.isString)(f)?f={id:f,label:f}:(0,O.isObject)(f)&&!f.id&&(f.id=f.label);var d=this.categories.add(f),h=d.get("id"),g=this.getCategoriesEl(),y=this.renderedCategories[h];t.set("category",d,{silent:!0}),!y&&g&&(y=new po({model:d},r).render(),this.renderedCategories[h]=y,g.appendChild(y.el)),y&&y.append(l);return}e?e.appendChild(l):this.append(l)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},n.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},n.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},n.prototype.render=function(){var t=this,e=this.ppfx,r=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories={},this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(l){return t.add(l,r)}),this.append(r);var i="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(i),this.rendered=!0,this},n}(S.G7);const dc=pc;var Kf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ho=function(){return ho=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ho.apply(this,arguments)},wn=function(a){Kf(n,a);function n(t){var e,r=a.call(this,t,"BlockManager",new ts(((e=t.config.blockManager)===null||e===void 0?void 0:e.blocks)||[]),fo,oc)||this;return r.events=fo,r.Block=Ko,r.Blocks=ts,r.Category=Go,r.Categories=ql,r.storageKey="",r.blocks=r.all,r.blocksVisible=new ts(r.blocks.models),r.categories=new ql,r.blocks.on("add",function(i){return r.blocksVisible.add(i)}),r.blocks.on("remove",function(i){return r.blocksVisible.remove(i)}),r.blocks.on("reset",function(i){return r.blocksVisible.reset(i.models)}),r.__onAllEvent=(0,O.debounce)(function(){return r.__trgCustom()},0),r}return n.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(r,i){return t.startDrag(r,i)},drag:function(r){return t.__drag(r)},dragStop:function(r){return t.endDrag(r)}}},n.prototype.__startDrag=function(t,e){var r=this,i=r.em,l=r.events,f=r.blocks,d=t.getContent?t.getContent():t;this._dragBlock=t,i.set({dragResult:null,dragContent:d}),[i,f].map(function(h){return h.trigger(l.dragStart,t,e)})},n.prototype.__drag=function(t){var e=this,r=e.em,i=e.events,l=e.blocks,f=this._dragBlock;[r,l].map(function(d){return d.trigger(i.drag,f,t)})},n.prototype.__endDrag=function(t){t===void 0&&(t={});var e=this,r=e.em,i=e.events,l=e.blocks,f=this._dragBlock,d=t.component||r.get("dragResult");if(delete this._dragBlock,d&&f){var h="activeOnRender",g=d.get&&d.get(h),y=f.get("activate")||g,b=f.get("select"),P=(0,O.isArray)(d)?d[0]:d;(b||y&&b!==!1)&&r.setSelected(P),y&&(P.trigger("active"),g&&P.unset(h)),f.get("resetId")&&P.onAll(function(D){return D.resetId()})}r.set({dragResult:null,dragContent:null}),f&&[r,l].map(function(D){return D.trigger(i.dragEnd,d,f)})},n.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(t){return t.view}).filter(Boolean)},n.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=ho(ho({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(){return this._bhv||{}},n.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach(function(r){var i;return(i=r.droppable)===null||i===void 0?void 0:i.startCustom()})},n.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(e){var r;return(r=e.droppable)===null||r===void 0?void 0:r.endCustom(t)}),this.__endDrag()},n.prototype.postRender=function(){var t=this,e=t.categories,r=t.config,i=t.em,l=this.blocksVisible;this.blocksView=new dc({collection:l,categories:e},ho(ho({},r),{em:i})),this.__appendTo(l.models),this.__trgCustom()},n.prototype.add=function(t,e,r){r===void 0&&(r={});var i=e||{};return i.id=t,this.blocks.add(i,r)},n.prototype.get=function(t){return this.blocks.get(t)},n.prototype.getAll=function(){return this.blocks},n.prototype.getAllVisible=function(){return this.blocksVisible},n.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},n.prototype.getCategories=function(){return this.categories},n.prototype.getContainer=function(){var t;return(t=this.blocksView)===null||t===void 0?void 0:t.el},n.prototype.getDragBlock=function(){return this._dragBlock},n.prototype.render=function(t,e){e===void 0&&(e={});var r=this,i=r.categories,l=r.config,f=r.em,d=t||this.getAll().models;if(e.external){var h=new ts(d);return new dc({collection:h,categories:i},ho(ho({em:f},l),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(d),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},n.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map(function(r){return r.stopListening()}),e.map(function(r){return r.reset()}),(t=this.blocksView)===null||t===void 0||t.remove()},n}(xt);const hc=wn;var Gf={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1};const $f=Gf;var qf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yl=function(a){qf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",label:""}},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(){return this.get("label")||this.getName()},n}(S.Hn);const Qs=Yl;Yl.prototype.idAttribute="name";var vc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yf=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},gc="contentEditable",Xf=function(a){vc(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.config||{};return e.config=r,e.module=t.module,e.coll=t.coll||null,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.em=r.em,e.listenTo(e.model,"change:active",e.updateStatus),e}return n.prototype.template=function(){var t=this,e=t.pfx,r=t.model,i=t.config,l=r.get("label")||"";return ut(Sa||(Sa=Yf([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),e,e,e,l,e,e,i.iconTagRemove)},n.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},n.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},n.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[gc]="true",e.focus(),t==null||t.setEditing(!0)},n.prototype.endEditTag=function(){var t=this,e=t.model,r=t.em,i=this.getInputEl(),l=i.textContent||"",f=r==null?void 0:r.Selectors;i[gc]="false",r==null||r.setEditing(!1),f&&f.rename(e,l)!==e&&(i.innerText=e.get("label"))},n.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.get("active"))},n.prototype.removeTag=function(){this.module.removeSelected(this.model)},n.prototype.updateStatus=function(){var t=this,e=t.model,r=t.$el,i=t.config,l=i.iconTagOn,f=i.iconTagOff,d=r.find("[data-tag-status]");e.get("active")?(d.html(l),r.removeClass("opac50")):(d.html(f),r.addClass("opac50"))},n.prototype.render=function(){var t=this.pfx,e=this.ppfx;return this.$el.html(this.template()),this.$el.attr("class","".concat(t,"tag ").concat(e,"three-bg")),this.updateStatus(),this},n}(S.G7);const vo=Xf;var Sa,tl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mi=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Li=function(a){tl(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.className=e.pfx+"tags",e.stateInputId=e.pfx+"states",e.stateInputC=e.pfx+"input-c",e.states=e.config.states||[];var r=e.config.em,i=e.collection;e.target=r;var l=r.Selectors;e.module=l,e.em=r,e.componentChanged=(0,O.debounce)(e.componentChanged.bind(e),0),e.checkSync=(0,O.debounce)(e.checkSync.bind(e),0);var f="component:toggled component:update:classes",d="component:update:classes change:state";return e.listenTo(r,f,e.componentChanged),e.listenTo(r,"styleManager:update",e.componentChanged),e.listenTo(r,d,e.__handleStateChange),e.listenTo(r,"styleable:change change:device",e.checkSync),e.listenTo(i,"add",e.addNew),e.listenTo(i,"reset",e.renderClasses),e.listenTo(i,"remove",e.tagRemoved),e.listenTo(l.getAll(),l.events.state,(0,O.debounce)(function(){return e.renderStates()},0)),e.delegateEvents(),e}return n.prototype.template=function(t){var e=t.labelInfo,r=t.labelHead,i=t.iconSync,l=t.iconAdd,f=t.pfx,d=t.ppfx;return ut(mc||(mc=Mi([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),f,f,f,f,r,f,f,f,d,d,d,f,d,d,f,d,f,f,f,f,f,l,f,f,i,f,f,e,f)},n.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},n.prototype.syncStyle=function(){var t=this.em,e=this.getTarget(),r=t.Css,i={noDisabled:1},l=this.getCommonSelectors({opts:i}),f=t.get("state"),d=t.getCurrentMedia(),h=[],g=r.get(l,f,d)||r.add(l,f,d),y;this.getTargets().forEach(function(b){var P=r.getIdRule(b.getId(),{state:f,mediaText:d});y=P.getStyle(),P.setStyle({}),h.push(P)}),y&&g.addStyle(y),t.trigger("component:toggled"),t.trigger("component:sync-style",{component:e,selectors:l,mediaText:d,rule:g,ruleComponents:h,state:f})},n.prototype.tagRemoved=function(t){this.updateStateVis()},n.prototype.addNew=function(t){this.addToClasses(t)},n.prototype.startNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:"none"}),(e=this.$input)===null||e===void 0||e.show().focus()},n.prototype.endNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:""}),(e=this.$input)===null||e===void 0||e.hide().val("")},n.prototype.onInputKeyUp=function(t){var e;t.keyCode===13?(t.preventDefault(),this.addNewTag((e=this.$input)===null||e===void 0?void 0:e.val())):t.keyCode===27&&this.endNewTag()},n.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},n.prototype.componentChanged=function(t){var e=t===void 0?{}:t,r=e.targets;this.updateSelection(r)},n.prototype.updateSelection=function(t){var e=t||this.getTargets();e=(0,O.isArray)(e)?e:[e];var r=[];return e&&e.length&&(r=this.getCommonSelectors({targets:e}),this.checkSync({validSelectors:r})),this.collection.reset(r),this.updateStateVis(e),this.module.__trgCustom(),r},n.prototype.getCommonSelectors=function(t){var e=t===void 0?{}:t,r=e.targets,i=e.opts,l=i===void 0?{}:i,f=r||this.getTargets();return this.module.__getCommonSelectors(f,l)},n.prototype._commonSelectors=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this.module).__common.apply(t,e)},n.prototype.checkSync=function(){var t=this,e=t.$btnSyncEl,r=t.config,i=t.collection,l=this.getTarget(),f;if(l&&r.componentFirst&&i.length){var d=l.getStyle();f=!(0,O.isEmpty)(d)}e&&e[f?"show":"hide"]()},n.prototype.getTarget=function(){return this.target.getSelected()},n.prototype.getTargets=function(){return this.target.getSelectedAll()},n.prototype.updateStateVis=function(t){var e=this.em,r=e&&e.getConfig().avoidInlineStyle,i=this.collection.length||r?"":"none";this.getStatesC().css("display",i),this.updateSelector(t)},n.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},n.prototype.updateSelector=function(t){var e=this,r=this.el.querySelector("[data-selected]"),i=[],l=t||this.getTargets();l=(0,O.isArray)(l)?l:[l],l.forEach(function(f){return i.push(e.__getName(f))}),r&&(r.innerHTML=i.join(", ")),this.checkStates()},n.prototype.__getName=function(t){var e=this,r=e.pfx,i=e.config,l=e.em,f=i.selectedName,d=i.componentFirst,h;if((0,O.isString)(t))h=ut(qo||(qo=Mi(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),r,t);else{var g=t==null?void 0:t.getSelectors();if(!g)return"";var y=g.getStyleable(),b=l.get("state"),P=t.getId?ut(Xl||(Xl=Mi(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),r,t.getName(),r,t.getId()):"";h=this.collection.getFullString(y),h=h?ut(Zl||(Zl=Mi(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),r,h):t.get("selectorsAdd")||P,h=d&&P?P:h,h+=b?ut(Jl||(Jl=Mi(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),r,b):"",h=f?f({result:h,state:b,target:t}):h}return h&&'<span class="'.concat(r,'sel">').concat(h,"</span>")},n.prototype.stateChanged=function(t){var e=this.em,r=t.target.value;e.set("state",r)},n.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},n.prototype.addToClasses=function(t,e){var r=e,i=this.getClasses(),l=new vo({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return r?r.appendChild(l):i.append(l),l},n.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),r=this.getClasses();r.empty(),this.collection.each(function(i){return t.addToClasses(i,e)}),r.append(e)},n.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},n.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},n.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},n.prototype.renderStates=function(){var t=this,e=t.module,r=t.em,i=r.t("selectorManager.emptyState"),l=e.getStates().map(function(d){var h=r.t("selectorManager.states.".concat(d.id))||d.getLabel()||d.id;return'<option value="'.concat(d.id,'">').concat(h,"</option>")}).join(""),f=this.getStates();f&&f.html('<option value="">'.concat(i,"</option>").concat(l)),this.checkStates()},n.prototype.render=function(){var t=this,e=t.em,r=t.pfx,i=t.ppfx,l=t.config,f=t.$el,d=t.el,h=l.render,g=l.iconSync,y=l.iconAdd,b={iconSync:g,iconAdd:y,labelHead:e.t("selectorManager.label"),labelInfo:e.t("selectorManager.selected"),ppfx:i,pfx:r,el:d};f.html(this.template(b));var P=h&&h(b);return P&&P!==d&&f.empty().append(P),this.$input=f.find("[data-input]"),this.$addBtn=f.find("[data-add]"),this.$classes=f.find("#"+r+"tags-c"),this.$btnSyncEl=f.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),f.attr("class","".concat(this.className," ").concat(i,"one-bg ").concat(i,"two-color")),this},n}(S.G7);const Zf=Li;var mc,qo,Xl,Zl,Jl,el=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_i=function(){return _i=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},_i.apply(this,arguments)},as=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},rl=function(a){return(0,O.isString)(a)&&a[0]=="#"},nl=function(a){return(0,O.isString)(a)&&a[0]=="."},yc="selector",Di="".concat(yc,":"),_c="".concat(Di,"add"),Jf="".concat(Di,"update"),Ql="".concat(Di,"remove"),il="".concat(Ql,":before"),Qf="".concat(Di,"custom"),wc="".concat(Di,"state"),ss={all:yc,update:Jf,add:_c,remove:Ql,removeBefore:il,state:wc,custom:Qf},bc=function(a){el(n,a);function n(t){var e=a.call(this,t,"SelectorManager",new Jn([]),ss,$f,{skipListen:!0})||this;e.Selector=dr,e.Selectors=Jn,e.storageKey="",(0,O.bindAll)(e,"__updateSelectedByComponents");var r=e.config,i=r.pStylePrefix;i&&(r.stylePrefix=i+r.stylePrefix),e.all=new Jn(r.selectors),e.selected=new Jn([],{em:t,config:r}),e.states=new S.FE(r.states.map(function(f){return new Qs(f)}),{model:Qs}),e.model=new S.Hn({cFirst:r.componentFirst,_undo:!0}),e.__update=(0,O.debounce)(function(){return e.__trgCustom()},0),e.__initListen({collections:[e.states,e.selected],propagate:[{entity:e.states,event:e.events.state}]}),t.on("change:state",function(f,d){return t.trigger(wc,d)}),e.model.on("change:cFirst",function(f,d){return t.trigger("selector:type",d)}),t.on("component:toggled component:update:classes",e.__updateSelectedByComponents);var l="component:toggled component:update:classes change:device styleManager:update selector:state selector:type style:target";return e.model.listenTo(t,l,function(){return e.__update()}),e}return n.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},n.prototype.getAll=function(t){return t===void 0&&(t={}),this.all?t.array?as([],this.all.models,!0):this.all:[]},n.prototype.__customData=function(t){return t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},n.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},n.prototype.select=function(t,e){e===void 0&&(e={});var r=Array.isArray(t)?t:[t],i=this.em.Styles.select(r,e);this.selected.reset(this.__getCommonSelectors(i));var l=this.selectorTags,f=i.filter(function(d){return d}).map(function(d){return(0,J.isComponent)(d)||(0,J.isRule)(d)&&!d.get("selectorsAdd")?d:d.getSelectorsString()});return l&&l.componentChanged({targets:f}),this},n.prototype.addSelector=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var i=_i({},e);(0,O.isObject)(t)?i=t:i.name=t,rl(i.name)?(i.name=i.name.substr(1),i.type=dr.TYPE_ID):nl(i.name)&&(i.name=i.name.substr(1)),i.label&&!i.name&&(i.name=this.escapeName(i.label));var l=i.name,f=this.getConfig(),d=this,h=d.all,g=d.em,y=l?this.get(l,i.type):h.where(i)[0];if(!y){var b=i instanceof dr?i:new dr(i,_i(_i({},r),{config:f,em:g}));return h.add(b,r)}return y},n.prototype.getSelector=function(t,e){return e===void 0&&(e=dr.TYPE_CLASS),rl(t)?(t=t.substr(1),e=dr.TYPE_ID):nl(t)&&(t=t.substr(1)),this.all.where({name:t,type:e})[0]},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={});var i=(0,O.isString)(t)?{}:e;return(0,O.isArray)(t)?t.map(function(l){return r.addSelector(l,e,i)}):this.addSelector(t,e,i)},n.prototype.addClass=function(t){var e=this,r=[];return(0,O.isString)(t)&&(t=t.trim().split(" ")),t.forEach(function(i){return r.push(e.addSelector(i))}),r},n.prototype.get=function(t,e){var r=this;if((0,O.isArray)(t)){var i=[],l=t.map(function(f){return r.getSelector(f)}).filter(Boolean);return l.forEach(function(f){return i.indexOf(f)<0&&i.push(f)}),i}else return this.getSelector(t,e)},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.rename=function(t,e,r){var i=this.escapeName(e),l=this.get(i);return l||t.set({name:i,label:e},r)},n.prototype.setState=function(t){return this.em.setState(t),this},n.prototype.getState=function(){return this.em.getState()},n.prototype.getStates=function(){return as([],this.states.models,!0)},n.prototype.setStates=function(t,e){return this.states.reset(t.map(function(r){return new Qs(r)}),e)},n.prototype.getSelected=function(){return this.__getCommon()},n.prototype.getSelectedAll=function(){return as([],this.selected.models,!0)},n.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach(function(r){r.getSelectors().add(e)})},n.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)})},n.prototype.duplicateSelected=function(t,e){var r=this;e===void 0&&(e={});var i=this.em,l=this.getSelected();if(!(l.indexOf(t)<0)){var f=this.getState(),d=i.getCurrentMedia(),h=i.Css.get(l,f,d),g=h==null?void 0:h.getStyle();if(i.getSelectedAll().forEach(function(b){var P=b.getSelectors();if(P.includes(t)){var D=e.suffix||" copy",$=t.getLabel(),X=r.addSelector("".concat($).concat(D)),lt=P.indexOf(t);P.remove(t),P.add(X,{at:lt})}}),g){var y=i.Css.add(this.getSelected(),f,d);y.setStyle(g)}}},n.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},n.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},n.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},n.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):dr.escapeName(t)},n.prototype.render=function(t){var e=this.selectorTags,r=this.getConfig(),i=e==null?void 0:e.el;return this.selected.reset(t),this.selectorTags=new Zf({el:i,collection:this.selected,module:this,config:r}),this.selectorTags.render().el},n.prototype.destroy=function(){var t=this,e=t.selectorTags,r=t.model;r.stopListening(),this.__update.cancel(),this.__destroy(),e==null||e.remove(),this.selectorTags=void 0},n.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},n.prototype.__getCommonSelectors=function(t,e){e===void 0&&(e={});var r=t.map(function(i){return i.getSelectors&&i.getSelectors().getValid(e)}).filter(Boolean);return this.__common.apply(this,r)},n.prototype.__common=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?e.length===1?e[0]:e.length===2?e[0].filter(function(i){return e[1].indexOf(i)>=0}):e.slice(1).reduce(function(i,l){return t.__common(i,l)},e[0]):[]},n.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},n}(xt);const Cc=bc;var tp={textTags:["br","b","i","u","a","ul","ol"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,keepEmptyTextNodes:!1}};const tu=tp;var ei,Un={STYLE_RULE:1,CHARSET_RULE:2,IMPORT_RULE:3,MEDIA_RULE:4,FONT_FACE_RULE:5,PAGE_RULE:6,KEYFRAMES_RULE:7,KEYFRAME_RULE:8,NAMESPACE_RULE:10,COUNTER_STYLE_RULE:11,SUPPORTS_RULE:12,DOCUMENT_RULE:13,FONT_FEATURE_VALUES_RULE:14,VIEWPORT_RULE:15,REGION_STYLE_RULE:16},Yo=(ei={},ei[Un.MEDIA_RULE]="media",ei[Un.FONT_FACE_RULE]="font-face",ei[Un.PAGE_RULE]="page",ei[Un.KEYFRAMES_RULE]="keyframes",ei[Un.COUNTER_STYLE_RULE]="counter-style",ei[Un.SUPPORTS_RULE]="supports",ei[Un.DOCUMENT_RULE]="document",ei[Un.FONT_FEATURE_VALUES_RULE]="font-feature-values",ei[Un.VIEWPORT_RULE]="viewport",ei),eu=(0,O.keys)(Yo),ru=[Un.FONT_FACE_RULE,Un.PAGE_RULE,Un.COUNTER_STYLE_RULE,Un.VIEWPORT_RULE],nu=eu.filter(function(a){return ru.indexOf(Number(a))<0}).map(function(a){return Yo[a]}).concat(["container","layer"]),ls=ru.map(function(a){return Yo[a]}),Oa=function(a){a===void 0&&(a="");for(var n=[],t=[],e=a.split(","),r=0,i=e.length;r<i;r++){var l=e[r].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(l)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(l)){var f=l.split(".").filter(Boolean);t.push(f)}else n.push(l)}return{result:t,add:n}},ep=function(a){for(var n=a.style,t={},e=0,r=n.length;e<r;e++){var i=n[e],l=n.getPropertyValue(i),f=n.getPropertyPriority(i);t[i]="".concat(l).concat(f?" !".concat(f):"")}return t},iu=function(a){var n=a.conditionText||a.media&&a.media.mediaText||a.name||a.selectorText||"";return n.trim()},ou=function(a,n,t){n===void 0&&(n={}),t===void 0&&(t={});var e={},r=a.length,i=a[r-1],l=i?i.split(/:(.+)/):[],f=l[1],d=t.atRule,h=t.selectorsAdd,g=t.mediaText,y=ls.indexOf(d)>=0;return y&&(e.singleAtRule=!0),d&&(e.atRuleType=d),h&&(e.selectorsAdd=h),g&&(e.mediaText=g),f&&(a[r-1]=l[0],e.state=f,l.splice(l.length-1,1)),e.selectors=a,e.style=n,e},xc=function(a){var n=a.cssText,t=n===void 0?"":n;return nu.find(function(e){return t.indexOf("@".concat(e))===0})},Sc=function(a){for(var n=[],t=a.cssRules||[],e=0,r=t.length;e<r;e++){var i=t[e],l=i.type,f=!1,d="",h="",g=i.selectorText||i.keyText||"",y=ru.indexOf(l)>=0;if(y)f=!0,d=Yo[l],h=iu(i);else if(eu.indexOf("".concat(l))>=0||!l&&xc(i)){var b=Sc(i),P=Yo[l]||xc(i);h=iu(i);for(var D=0,$=b.length;D<$;D++){var X=b[D];h&&(X.mediaText=h),X.atRuleType=P}n=n.concat(b)}if(!(!g&&!y)){for(var lt=ep(i),Tt=Oa(g),bt=Tt.add,Zt=Tt.result,ue=void 0,Oe=0,Ie=Zt.length;Oe<Ie;Oe++){var ee=ou(Zt[Oe],lt,{atRule:Yo[l]});n.push(ee),ue=ee}if(bt.length){var je=bt.join(", ");if(ue)ue.selectorsAdd=je;else{var ee={selectors:[],selectorsAdd:je,style:lt};f&&(ee.singleAtRule=f),d&&(ee.atRuleType=d),h&&(ee.mediaText=h),n.push(ee)}}}}return n};const rp=function(a){var n=document.createElement("style");n.innerHTML=a,document.head.appendChild(n);var t=n.sheet;return document.head.removeChild(n),t?Sc(t):[]};var Oc=function(a,n){return n===void 0&&(n={}),{parse:function(t){var e=this,r=[],i=n.parserCss,l=a==null?void 0:a.Editor,f=i?i(t,l):rp(t);return f.forEach(function(d){return r=r.concat(e.checkNode(d))}),a==null||a.trigger("parse:css",{input:t,output:r,nodes:f}),r},checkNode:function(t){var e=t.selectors,r=t.style,i=[t];if((0,O.isString)(e)){var l=[],f=t,d=Oa(e),h=d.result,g=d.add.join(", "),y={atRule:f.atRule,mediaText:f.params};if(h.length?h.forEach(function(P){l.push(ou(P,r,y))}):l.push(ou([],r,y)),g){var b=l[l.length-1];b.selectorsAdd=g}i=l}return i}}};const np=Oc;var ip=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tc=function(a){ip(n,a);function n(t){var e=a.call(this,t,"Parser",tu)||this,r=e.config;return e.parserCss=np(t,r),e.parserHtml=Ui(t,r),e}return n.prototype.parseHtml=function(t,e){e===void 0&&(e={});var r=this,i=r.em,l=r.parserHtml;return l.compTypes=i.Components.getTypes()||{},l.parse(t,this.parserCss,e)},n.prototype.parseCss=function(t){return this.parserCss.parse(t)},n.prototype.destroy=function(){},n}(Ft);const au=Tc;var Ec={id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(a){return a},onLoad:function(a){return a},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(a){return a},onLoad:function(a){return a}}}};const op=Ec;var su=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?i(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},Xo=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Pc=function(){function a(){}return a.prototype.store=function(n,t){return t===void 0&&(t={}),su(this,void 0,void 0,function(){return Xo(this,function(e){return this.hasLocal(t,!0)&&localStorage.setItem(t.key,JSON.stringify(n)),[2,n]})})},a.prototype.load=function(n){return n===void 0&&(n={}),su(this,void 0,void 0,function(){var t;return Xo(this,function(e){return t={},this.hasLocal(n,!0)&&(t=JSON.parse(localStorage.getItem(n.key)||"{}")),[2,t]})})},a.prototype.hasLocal=function(n,t){if(n===void 0&&(n={}),n.checkLocal&&(!(0,J.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},a}();const ol=Pc;function Zo(a){"@babel/helpers - typeof";return Zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Zo(a)}function ap(a){var n=this.constructor;return this.then(function(t){return n.resolve(a()).then(function(){return t})},function(t){return n.resolve(a()).then(function(){return n.reject(t)})})}const sp=ap;function mr(a){var n=this;return new n(function(t,e){if(!(a&&typeof a.length<"u"))return e(new TypeError(Zo(a)+" "+a+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(a);if(r.length===0)return t([]);var i=r.length;function l(d,h){if(h&&(Zo(h)==="object"||typeof h=="function")){var g=h.then;if(typeof g=="function"){g.call(h,function(y){l(d,y)},function(y){r[d]={status:"rejected",reason:y},--i===0&&t(r)});return}}r[d]={status:"fulfilled",value:h},--i===0&&t(r)}for(var f=0;f<r.length;f++)l(f,r[f])})}const lp=mr;function al(a,n){this.name="AggregateError",this.errors=a,this.message=n||""}al.prototype=Error.prototype;function us(a){var n=this;return new n(function(t,e){if(!(a&&typeof a.length<"u"))return e(new TypeError("Promise.any accepts an array"));var r=Array.prototype.slice.call(a);if(r.length===0)return e();for(var i=[],l=0;l<r.length;l++)try{n.resolve(r[l]).then(t).catch(function(f){i.push(f),i.length===r.length&&e(new al(i,"All promises were rejected"))})}catch(f){e(f)}})}const fi=us;var sl=setTimeout;function ll(a){return!!(a&&typeof a.length<"u")}function Ac(){}function kc(a,n){return function(){a.apply(n,arguments)}}function yr(a){if(!(this instanceof yr))throw new TypeError("Promises must be constructed via new");if(typeof a!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ar(a,this)}function ul(a,n){for(;a._state===3;)a=a._value;if(a._state===0){a._deferreds.push(n);return}a._handled=!0,yr._immediateFn(function(){var t=a._state===1?n.onFulfilled:n.onRejected;if(t===null){(a._state===1?cl:cs)(n.promise,a._value);return}var e;try{e=t(a._value)}catch(r){cs(n.promise,r);return}cl(n.promise,e)})}function cl(a,n){try{if(n===a)throw new TypeError("A promise cannot be resolved with itself.");if(n&&(Zo(n)==="object"||typeof n=="function")){var t=n.then;if(n instanceof yr){a._state=3,a._value=n,fs(a);return}else if(typeof t=="function"){ar(kc(t,n),a);return}}a._state=1,a._value=n,fs(a)}catch(e){cs(a,e)}}function cs(a,n){a._state=2,a._value=n,fs(a)}function fs(a){a._state===2&&a._deferreds.length===0&&yr._immediateFn(function(){a._handled||yr._unhandledRejectionFn(a._value)});for(var n=0,t=a._deferreds.length;n<t;n++)ul(a,a._deferreds[n]);a._deferreds=null}function Mc(a,n,t){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof n=="function"?n:null,this.promise=t}function ar(a,n){var t=!1;try{a(function(e){t||(t=!0,cl(n,e))},function(e){t||(t=!0,cs(n,e))})}catch(e){if(t)return;t=!0,cs(n,e)}}yr.prototype.catch=function(a){return this.then(null,a)},yr.prototype.then=function(a,n){var t=new this.constructor(Ac);return ul(this,new Mc(a,n,t)),t},yr.prototype.finally=sp,yr.all=function(a){return new yr(function(n,t){if(!ll(a))return t(new TypeError("Promise.all accepts an array"));var e=Array.prototype.slice.call(a);if(e.length===0)return n([]);var r=e.length;function i(f,d){try{if(d&&(Zo(d)==="object"||typeof d=="function")){var h=d.then;if(typeof h=="function"){h.call(d,function(g){i(f,g)},t);return}}e[f]=d,--r===0&&n(e)}catch(g){t(g)}}for(var l=0;l<e.length;l++)i(l,e[l])})},yr.any=fi,yr.allSettled=lp,yr.resolve=function(a){return a&&Zo(a)==="object"&&a.constructor===yr?a:new yr(function(n){n(a)})},yr.reject=function(a){return new yr(function(n,t){t(a)})},yr.race=function(a){return new yr(function(n,t){if(!ll(a))return t(new TypeError("Promise.race accepts an array"));for(var e=0,r=a.length;e<r;e++)yr.resolve(a[e]).then(n,t)})},yr._immediateFn=typeof setImmediate=="function"&&function(a){setImmediate(a)}||function(a){sl(a,0)},yr._unhandledRejectionFn=function(n){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};const fl=yr;(0,J.hasWin)()&&(window.Promise=window.Promise||fl);const Lc=typeof fetch=="function"?fetch.bind():function(a,n){return new fl(function(t,e){var r=new XMLHttpRequest;r.open(n.method||"get",a),r.withCredentials=n.credentials=="include";for(var i in n.headers||{})r.setRequestHeader(i,n.headers[i]);r.onload=function(l){return t({status:r.status,statusText:r.statusText,text:function(){return fl.resolve(r.responseText)}})},r.onerror=e,r.upload&&n.onProgress&&(r.upload.onprogress=n.onProgress),n.body?r.send(n.body):r.send()})};var ji=function(){return ji=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ji.apply(this,arguments)},Dc=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?i(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},ps=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},up=function(){function a(){}return a.prototype.store=function(n,t){return t===void 0&&(t={}),Dc(this,void 0,void 0,function(){return ps(this,function(e){switch(e.label){case 0:return[4,this.request(t.urlStore,this.__props(t,n),t)];case 1:return[2,e.sent()]}})})},a.prototype.load=function(n){return n===void 0&&(n={}),Dc(this,void 0,void 0,function(){return ps(this,function(t){switch(t.label){case 0:return[4,this.request(n.urlLoad,this.__props(n),n)];case 1:return[2,t.sent()]}})})},a.prototype.request=function(n,t,e){return t===void 0&&(t={}),e===void 0&&(e={}),Lc(n,t).then(function(r){var i=r.text(),l=(r.status/200|0)===1;return l?i:i.then(Promise.reject)}).then(function(r){var i=r&&(0,O.isString)(r);return e.contentTypeJson&&i?JSON.parse(r):r})},a.prototype.__props=function(n,t){n===void 0&&(n={});var e=n.contentTypeJson,r=n.headers||{},i=n.fetchOptions||{},l="X-Requested-With",f="Content-Type",d;if((0,O.isUndefined)(r[l])&&(r[l]="XMLHttpRequest"),(0,O.isUndefined)(r[f])&&e&&(r[f]="application/json; charset=utf-8"),t)if(e)d=JSON.stringify(t);else{d=new FormData;for(var h in t)d.append(h,t[h])}var g={method:d?"POST":"GET",credentials:n.credentials,headers:r,body:d};return ji(ji({},g),(0,O.isFunction)(i)?i(g):i)},a}();const Lr=up;var cp=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ta=function(){return Ta=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ta.apply(this,arguments)},lu=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?i(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},Ea=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},o="storage:start",s="storage:after",c="storage:end",u="storage:error",p="local",v="remote",m=function(a){cp(n,a);function n(t){var e=a.call(this,t,"StorageManager",op)||this;e.storages={};var r=e.config;return r._disable&&(r.type=void 0),e.storages={},e.add(p,new ol),e.add(v,new Lr),e.setCurrent(r.type),e}return n.prototype.isAutosave=function(){return!!this.config.autosave},n.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},n.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},n.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},n.prototype.add=function(t,e){return this.storages[t]=e,this},n.prototype.get=function(t){return this.storages[t]},n.prototype.getStorages=function(){return this.storages},n.prototype.getCurrent=function(){return this.config.currentStorage},n.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},n.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},n.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},n.prototype.store=function(t,e){return e===void 0&&(e={}),lu(this,void 0,void 0,function(){var r,i,l,f,d,h;return Ea(this,function(g){switch(g.label){case 0:r=this.getCurrentStorage(),i=Ta(Ta({},this.getCurrentOptions()),e),l=this.getRecoveryStorage(),f=this.getCurrentOptions(p),g.label=1;case 1:return g.trys.push([1,5,,9]),[4,this.__exec(r,i,t)];case 2:return g.sent(),d=l,d?[4,this.__exec(l,f,{})]:[3,4];case 3:d=g.sent(),g.label=4;case 4:return[3,9];case 5:return h=g.sent(),l?[4,this.__exec(l,f,t)]:[3,7];case 6:return g.sent(),[3,8];case 7:throw h;case 8:return[3,9];case 9:return[2,t]}})})},n.prototype.load=function(t){return t===void 0&&(t={}),lu(this,void 0,void 0,function(){var e,r,i,l,f;return Ea(this,function(d){switch(d.label){case 0:return e=this.getCurrentStorage(),r=Ta(Ta({},this.getCurrentOptions()),t),i=this.getRecoveryStorage(),i?[4,this.__exec(i,this.getCurrentOptions(p))]:[3,5];case 1:if(f=d.sent(),(0,O.isEmpty)(f))return[3,5];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return d.sent(),l=f,[3,5];case 4:return d.sent(),[3,5];case 5:return l?[3,7]:[4,this.__exec(e,r)];case 6:l=d.sent(),d.label=7;case 7:return[2,l||{}]}})})},n.prototype.__askRecovery=function(){var t=this.em,e=this.getRecovery();return new Promise(function(r,i){(0,O.isFunction)(e)?e(r,i,t==null?void 0:t.getEditor()):confirm(t==null?void 0:t.t("storageManager.recover"))?r(null):i()})},n.prototype.getRecovery=function(){return this.config.recovery},n.prototype.getRecoveryStorage=function(){var t=this.getRecovery();return t&&this.getCurrent()===v&&this.get(p)},n.prototype.__exec=function(t,e,r){var i;return lu(this,void 0,void 0,function(){var l,f,d,h,g,y,b,P,D,$,X,lt,Tt;return Ea(this,function(bt){switch(bt.label){case 0:if(l=r?"store":"load",f=this.getConfig(),d=f.onStore,h=f.onLoad,this.onStart(l,r),!t)return[2,r||{}];bt.label=1;case 1:return bt.trys.push([1,14,,15]),y=(i=this.em)===null||i===void 0?void 0:i.getEditor(),b=void 0,r?(D=d,D?[4,d(r,y)]:[3,3]):[3,7];case 2:D=bt.sent(),bt.label=3;case 3:return P=D||r,$=e.onStore,$?[4,e.onStore(P,y)]:[3,5];case 4:$=bt.sent(),bt.label=5;case 5:return P=$||P,[4,t.store(P,e)];case 6:return b=bt.sent(),g=r,[3,13];case 7:return[4,t.load(e)];case 8:return b=bt.sent(),g=this.__clearKeys(b),X=e.onLoad,X?[4,e.onLoad(g,y)]:[3,10];case 9:X=bt.sent(),bt.label=10;case 10:return g=X||g,lt=h,lt?[4,h(g,y)]:[3,12];case 11:lt=bt.sent(),bt.label=12;case 12:g=lt||g,bt.label=13;case 13:return this.onAfter(l,g,b),this.onEnd(l,g),[3,15];case 14:throw Tt=bt.sent(),this.onError(l,Tt),Tt;case 15:return[2,g]}})})},n.prototype.__clearKeys=function(t){t===void 0&&(t={});var e=this.getConfig(),r=new RegExp("^".concat(e.id)),i={};for(var l in t){var f=l.replace(r,"");i[f]=t[l]}return i},n.prototype.getCurrentOptions=function(t){var e=this.getConfig(),r=t||this.getCurrent();return e.options[r]||{}},n.prototype.onStart=function(t,e){var r=this.em;r&&(r.trigger(o),t&&r.trigger("".concat(o,":").concat(t),e))},n.prototype.onAfter=function(t,e,r){var i=this.em;i&&(i.trigger(s),i.trigger("".concat(s,":").concat(t),e,r),i.trigger("storage:".concat(t),e,r))},n.prototype.onEnd=function(t,e){var r=this.em;r&&(r.trigger(c),t&&r.trigger("".concat(c,":").concat(t),e))},n.prototype.onError=function(t,e){var r=this.em;r&&(r.trigger(u,e),t&&r.trigger("".concat(u,":").concat(t),e),this.onEnd(t,e))},n.prototype.canAutoload=function(){var t=this.getCurrentStorage();return!!t&&!!this.config.autoload},n.prototype.destroy=function(){this.storages={}},n}(Ft);const _=m;var w={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1};const E=w;var K=vr(330),rt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vt=function(){return vt=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},vt.apply(this,arguments)},ct=function(a){rt(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.events={},e.appendInput=!0;var r=t.config,i=r===void 0?{}:r,l=e,f=l.model,d=l.eventCapture,h=f.target,g=f.attributes.type;e.config=i,e.em=i.em,e.ppfx=i.pStylePrefix||"",e.pfx=e.ppfx+i.stylePrefix||"",e.target=h;var y=e.ppfx;e.clsField="".concat(y,"field ").concat(y,"field-").concat(g);var b=[["change:value",e.onValueChange],["remove",e.removeView]];return b.forEach(function(P){var D=P[0],$=P[1];f.off(D,$),e.listenTo(f,D,$)}),f.view=e,e.listenTo(f,"change:label",e.render),e.listenTo(f,"change:placeholder",e.rerender),e.events={},d.forEach(function(P){return e.events[P]="onChange"}),e.delegateEvents(),e.init(),e}return n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.templateLabel=function(t){var e=this.ppfx,r=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(r,'">').concat(r,"</div>")},n.prototype.templateInput=function(t){var e=this.clsField;return'<div class="'.concat(e,'" data-input></div>')},n.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},n.prototype.removeView=function(){this.remove(),this.removed()},n.prototype.init=function(){},n.prototype.removed=function(){},n.prototype.onRender=function(t){},n.prototype.onUpdate=function(t){},n.prototype.onEvent=function(t){},n.prototype.onChange=function(t){var e=this.getInputElem();e&&!(0,O.isUndefined)(e.value)&&this.model.set("value",e.value),this.onEvent(vt(vt({},this.getClbOpts()),{event:t}))},n.prototype.getValueForTarget=function(){return this.model.get("value")},n.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.value=t)},n.prototype.onValueChange=function(t,e,r){if(r===void 0&&(r={}),r.fromTarget)this.setInputValue(t.get("value")),this.postUpdate();else{var i=this.getValueForTarget();t.setTargetValue(i,r)}},n.prototype.renderLabel=function(){var t=this,e=t.$el,r=t.target,i=this.getLabel(),l=this.templateLabel(r);this.createLabel&&(l=this.createLabel({label:i,component:r,trait:this})||""),e.find("[data-label]").append(l)},n.prototype.getLabel=function(){var t=this.em,e=this.model.attributes,r=e.label,i=e.name;return t.t("traitManager.traits.labels.".concat(i))||(0,J.capitalize)(r||i).replace(/-/g," ")},n.prototype.getComponent=function(){return this.target},n.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.em,r=t.model,i=r,l=r.attributes.name,f=i.get("placeholder")||i.get("default")||"",d=i.get("type")||"text",h=i.get("min"),g=i.get("max"),y=this.getModelValue(),b=(0,k.default)('<input type="'.concat(d,'">')),P=e.t("traitManager.traits.attributes.".concat(l))||{};b.attr(vt({placeholder:f},P)),(0,O.isUndefined)(y)||(i.set({value:y},{silent:!0}),b.prop("value",y)),h&&b.prop("min",h),g&&b.prop("max",g),this.$input=b}return this.$input.get(0)},n.prototype.getInputElem=function(){var t=this,e=t.input,r=t.$input;return e||r&&r.get&&r.get(0)||this.getElInput()},n.prototype.getModelValue=function(){var t,e=this.model,r=this.target,i=e.getName();if(e.get("changeProp"))t=r.get(i);else{var l=r.get("attributes");t=e.get("value")||l[i]}return(0,O.isUndefined)(t)?"":t},n.prototype.getElInput=function(){return this.elInput},n.prototype.renderField=function(){var t=this,e=t.$el,r=t.appendInput,i=t.model,l=e.find("[data-input]"),f=l[l.length-1],d=i.el;d||(d=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,O.isString)(d)?(f.innerHTML=d,this.elInput=f.firstChild):(r?f.appendChild(d):f.insertBefore(d,f.firstChild),this.elInput=d),i.el=this.elInput},n.prototype.hasLabel=function(){var t=this.model.attributes.label;return!this.noLabel&&t!==!1},n.prototype.rerender=function(){delete this.model.el,this.render()},n.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},n.prototype.render=function(){var t=this,e=t.$el,r=t.pfx,i=t.ppfx,l=t.model,f=l.attributes,d=f.type,h=f.id,g=this.hasLabel&&this.hasLabel(),y="".concat(r,"trait");delete this.$input;var b='<div class="'.concat(y," ").concat(y,"--").concat(d,`">
      `).concat(g?'<div class="'.concat(i,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(i,"field-wrp ").concat(i,"field-wrp--").concat(d,`" data-input>
        `).concat(this.templateInput?(0,O.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return e.empty().append(b),g&&this.renderLabel(),this.renderField(),this.el.className="".concat(y,"__wrp ").concat(y,"__wrp-").concat(h),this.postUpdate(),this.onRender(this.getClbOpts()),this},n}(S.G7);const kt=ct;ct.prototype.eventCapture=["change"];var Vt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yt=function(a){Vt(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t)||this;r.reuseView=!0,r.itemsView=e;var i=t.config||{},l=t.editor;return r.config=i,r.em=l,r.ppfx=i.pStylePrefix||"",r.pfx=r.ppfx+i.stylePrefix||"",r.className="".concat(r.pfx,"traits"),r.listenTo(l,"component:toggled",r.updatedCollection),r.updatedCollection(),r}return n.prototype.updatedCollection=function(){var t=this,e=t.ppfx,r=t.className,i=t.em,l=i.getSelected();this.el.className="".concat(r," ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=l?l.traits:[],this.render()},n}(K.Z);const re=Yt;Yt.prototype.itemView=kt;var de=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ie=function(a){de(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.rerender),e}return n.prototype.templateInput=function(){var t=this,e=t.ppfx,r=t.clsField;return'<div class="'.concat(r,`">
      <div data-input></div>
      <div class="`).concat(e,`sel-arrow">
        <div class="`).concat(e,`d-s-arrow"></div>
      </div>
    </div>`)},n.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.model,r=t.em,i=e.get("name"),l=e.get("options")||[],f=[],d="<select>";l.forEach(function(y){var b="",P,D,$;(0,O.isString)(y)?(P=y,D=y):(P=y.name||y.label||y.value,D="".concat((0,O.isUndefined)(y.value)?y.id:y.value).replace(/"/g,"&quot;"),$=y.style?y.style.replace(/"/g,"&quot;"):"",b+=$?' style="'.concat($,'"'):"");var X=r.t("traitManager.traits.options.".concat(i,".").concat(D))||P;d+='<option value="'.concat(D,'"').concat(b,">").concat(X,"</option>"),f.push(D)}),d+="</select>",this.$input=(0,k.default)(d);var h=e.getTargetValue(),g=f.indexOf(h)>=0?h:e.get("default");!(0,O.isUndefined)(g)&&this.$input.val(g)}return this.$input.get(0)},n}(kt);const he=ie;var Te=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Se=function(a){Te(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.appendInput=!1,t}return n.prototype.templateInput=function(){var t=this,e=t.ppfx,r=t.clsField;return'<label class="'.concat(r,`" data-input>
    <i class="`).concat(e,`chk-icon"></i>
  </label>`)},n.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},n.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.checked=!!t)},n.prototype.getInputEl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=!this.$input,i=kt.prototype.getInputEl.apply(this,t);if(r){var l=void 0,f=void 0,d=this,h=d.model,g=d.target,y=h.attributes.valueFalse,b=h.getName();h.get("changeProp")?(l=g.get(b),f=l):(f=g.get("attributes")[b],l=!!(f||f==="")),!(0,O.isUndefined)(y)&&f===y&&(l=!1),i.checked=l}return i},n}(kt);const Be=Se;var cr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hr=function(a){cr(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.ppfx||"";return e.opts=t,e.ppfx=r,e.em=t.target||{},!t.onChange&&e.listenTo(e.model,"change:value",e.handleModelChange),e}return n.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},n.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.setValue=function(t,e){var r=this.model,i=t||r.get("defaults"),l=this.getInputEl();l&&(l.value=i)},n.prototype.handleModelChange=function(t,e,r){this.setValue(e,r)},n.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},n.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},n.prototype.getInputEl=function(){if(!this.inputEl){var t=this,e=t.model,r=t.opts,i=r.type||"text",l=e.get("placeholder")||e.get("defaults")||e.get("default")||"";this.inputEl=(0,k.default)('<input type="'.concat(i,'" placeholder="').concat(l,'">'))}return this.inputEl.get(0)},n.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},n}(S.G7);const hr=Hr;Hr.prototype.events={change:"handleChange"};var An=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pn=function(a){An(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;return(0,O.bindAll)(e,"moveIncrement","upIncrement"),e.doc=document,e.listenTo(e.model,"change:unit",e.handleModelChange),e}return n.prototype.template=function(){var t=this.ppfx;return`
      <span class="`.concat(t,`input-holder"></span>
      <span class="`).concat(t,`field-units"></span>
      <div class="`).concat(t,`field-arrows" data-arrows>
        <div class="`).concat(t,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(t,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},n.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},n.prototype.setValue=function(t,e){var r=e||{},i=this.validateInputValue(t,{deepCheck:1}),l={value:i.value,unit:""};(i.unit||i.force)&&(l.unit=i.unit),this.model.set(l,r),r.silent&&this.handleModelChange()},n.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},n.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set("unit",e),this.elementUpdated()},n.prototype.handleKeyDown=function(t){t.key==="ArrowUp"&&(t.preventDefault(),this.upArrowClick()),t.key==="ArrowDown"&&(t.preventDefault(),this.downArrowClick())},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var e=this.getUnitEl();e&&(e.value=t.get("unit")||"")},n.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get("units")||[];if(e.length){var r=['<option value="" disabled hidden>-</option>'];e.forEach(function(l){var f=l==t.get("unit")?"selected":"";r.push("<option ".concat(f,">").concat(l,"</option>"))});var i=document.createElement("div");i.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(r.join(""),"</select>"),this.unitEl=i.firstChild}}return this.unitEl},n.prototype.upArrowClick=function(){var t=this.model,e=t.get("step"),r=parseFloat(t.get("value"));this.setValue(this.normalizeValue(r+e)),this.elementUpdated()},n.prototype.downArrowClick=function(){var t=this.model,e=t.get("step"),r=parseFloat(t.get("value"));this.setValue(this.normalizeValue(r-e)),this.elementUpdated()},n.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get("value")||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,Xt.on)(this.doc,"mousemove",this.moveIncrement),(0,Xt.on)(this.doc,"mouseup",this.upIncrement)},n.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,r=e.get("step"),i=this.current,l=this.normalizeValue(i.val+(i.y-t.pageY)*r),f=this.validateInputValue(l),d=f.value,h=f.unit;return this.prValue=d,e.set({value:d,unit:h},{avoidStore:1}),!1},n.prototype.upIncrement=function(){var t=this.model,e=t.get("step");if((0,Xt.S1)(this.doc,"mouseup",this.upIncrement),(0,Xt.S1)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var r=this.prValue-e;t.set("value",r,{avoidStore:1}).set("value",r+e),this.elementUpdated()}},n.prototype.normalizeValue=function(t,e){e===void 0&&(e=0);var r=this.model,i=r.get("step"),l=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var f=i.toString().split(".")[1];l=f?f.length:0}return l?parseFloat(t.toFixed(l)):t},n.prototype.validateInputValue=function(t,e){e===void 0&&(e={});var r=0,i=e||{},l=this.model,f="",d=(0,O.isUndefined)(t)?f:t,h=e.units||l.get("units")||[],g=l.get("unit")||h.length&&h[0]||"",y=(0,O.isUndefined)(e.max)?l.get("max"):e.max,b=(0,O.isUndefined)(e.min)?l.get("min"):e.min,P=!!l.get("limitlessMax"),D=!!l.get("limitlessMin");if(i.deepCheck){var $=l.get("fixedValues")||[];if(d===""&&(g=""),d){var X=new RegExp("^"+$.join("|"),"g");if($.length&&X.test(d))d=d.match(X)[0],g="",r=1;else{var lt=d+"";d+="",d=parseFloat(d.replace(",",".")),d=isNaN(d)?f:d;var Tt=lt.replace(d,"");(0,O.indexOf)(h,Tt)>=0&&(g=Tt)}}}return!P&&!(0,O.isUndefined)(y)&&y!==""&&(d=d>y?y:d),!D&&!(0,O.isUndefined)(b)&&b!==""&&(d=d<b?b:d),{force:r,value:d,unit:g}},n.prototype.render=function(){hr.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},n}(hr);const Dr=pn;pn.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var bn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xr=function(a){bn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getValueForTarget=function(){var t=this.model,e=t.attributes,r=e.value,i=e.unit;return!(0,O.isUndefined)(r)&&r!==""?r+i:t.get("default")},n.prototype.getInputEl=function(){if(!this.input){var t=this,e=t.ppfx,r=t.model,i=this.getModelValue(),l=new Dr({contClass:"".concat(e,"field-int"),type:"number",model:r,ppfx:e});l.render(),this.$input=l.inputEl,this.$unit=l.unitEl,r.set("value",i,{fromTarget:!0}),this.$input.val(i),this.input=l.el}return this.input},n}(kt);const Br=Xr;function Ir(a,n){if(!(0,J.hasWin)())return;var t={beforeShow:P,move:P,change:P,show:P,hide:P,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},e=[],r=!!/msie/i.exec(window.navigator.userAgent),i=function(){function G(Gt,Qt){return!!~(""+Gt).indexOf(Qt)}var yt=document.createElement("div"),W=yt.style;return W.cssText="background-color:rgba(0,0,0,.5)",G(W.backgroundColor,"rgba")||G(W.backgroundColor,"hsla")}(),l=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),f=function(){var G="";if(r)for(var yt=1;yt<=6;yt++)G+="<div class='sp-"+yt+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",G,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function d(G,yt,W,Gt){for(var Qt=[],ve=0;ve<G.length;ve++){var Fe=G[ve];if(Fe){var Ue=ne(Fe),We=Ue.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";We+=ne.equals(yt,Fe)?" sp-thumb-active":"";var Tr=Ue.toString(Gt.preferredFormat||"rgb"),Ur=i?"background-color:"+Ue.toRgbString():"filter:"+Ue.toFilter();Qt.push('<span title="'+Tr+'" data-color="'+Ue.toRgbString()+'" class="'+We+'"><span class="sp-thumb-inner" style="'+Ur+';"></span></span>')}else{var Rr="sp-clear-display";Qt.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="'+Rr+'"></span>').attr("title",Gt.noColorSelectedText)).html())}}return"<div class='sp-cf "+W+"'>"+Qt.join("")+"</div>"}function h(){for(var G=0;G<e.length;G++)e[G]&&e[G].hide()}function g(G,yt){var W=a.extend({},t,G);return W.callbacks={move:$(W.move,yt),change:$(W.change,yt),show:$(W.show,yt),hide:$(W.hide,yt),beforeShow:$(W.beforeShow,yt)},W}function y(G,yt){var W=g(yt,G),Gt=W.flat,Qt=W.showSelectionPalette,ve=W.localStorageKey,Fe=W.theme,Ue=W.callbacks,We=lt(Ss,10),Tr=!1,Ur=!1,Rr=!0,di=0,ni=0,Jr=0,Er=0,So=0,sf=0,lf=0,_s=0,ws=0,wu=0,Oo=1,uf=[],bu=[],cf={},To=W.selectionPalette.slice(0),Y0=W.maxSelectionSize,ah="sp-dragging",Ma=null,Cu=G.ownerDocument;Cu.body;var Qr=a(G),Up=!1,qe=a(f,Cu).addClass(Fe),X0=qe.find(".sp-picker-container"),ff=qe.find(".sp-color"),pf=qe.find(".sp-dragger"),Wp=qe.find(".sp-hue"),df=qe.find(".sp-slider"),xu=qe.find(".sp-alpha-inner"),sh=qe.find(".sp-alpha"),hf=qe.find(".sp-alpha-handle"),Eo=qe.find(".sp-input"),lh=qe.find(".sp-palette"),uh=qe.find(".sp-initial"),ch=qe.find(".sp-cancel"),zp=qe.find(".sp-clear"),fh=qe.find(".sp-choose"),Kp=qe.find(".sp-palette-toggle"),vf=Qr.is("input"),Z0=vf&&Qr.attr("type")==="color"&&Tt(),Gp=vf&&!Gt,_l=Gp?a(l).addClass(Fe).addClass(W.className).addClass(W.replacerClassName):a([]),Su=Gp?_l:Qr,wl=_l.find(".sp-preview-inner"),Ou=W.color||vf&&Qr.val(),bl=!1,Cl=W.preferredFormat,J0=!W.showButtons||W.clickoutFiresChange,La=!Ou,bs=W.allowEmpty&&!Z0;function $p(){if(W.showPaletteOnly&&(W.showPalette=!0),Kp.text(W.showPaletteOnly?W.togglePaletteMoreText:W.togglePaletteLessText),W.palette){uf=W.palette.slice(0),bu=a.isArray(uf[0])?uf:[uf],cf={};for(var ke=0;ke<bu.length;ke++)for(var Le=0;Le<bu[ke].length;Le++){var lr=ne(bu[ke][Le]).toRgbString();cf[lr]=!0}}qe.toggleClass("sp-flat",Gt),qe.toggleClass("sp-input-disabled",!W.showInput),qe.toggleClass("sp-alpha-enabled",W.showAlpha),qe.toggleClass("sp-clear-enabled",bs),qe.toggleClass("sp-buttons-disabled",!W.showButtons),qe.toggleClass("sp-palette-buttons-disabled",!W.togglePaletteOnly),qe.toggleClass("sp-palette-disabled",!W.showPalette),qe.toggleClass("sp-palette-only",W.showPaletteOnly),qe.toggleClass("sp-initial-disabled",!W.showInitial),qe.addClass(W.className).addClass(W.containerClassName),Ss()}function Q0(){if(r&&qe.find("*:not(input)").attr("unselectable","on"),$p(),Gp&&Qr.after(_l).hide(),bs||zp.hide(),Gt)Qr.after(qe).hide();else{var ke=W.appendTo==="parent"?Qr.parent():a(W.appendTo);ke.length!==1&&(ke=a("body")),ke.append(qe)}ph(),Su.bind("click.spectrum touchstart.spectrum",function(Ve){Up||vh(),Ve.stopPropagation(),a(Ve.target).is("input")||Ve.preventDefault()}),(Qr.is(":disabled")||W.disabled===!0)&&wh(),qe.click(D),Eo.change(Zp),Eo.bind("paste",function(){setTimeout(Zp,1)}),Eo.keydown(function(Ve){Ve.keyCode==13&&Zp()}),ch.text(W.cancelText),ch.bind("click.spectrum",function(Ve){Ve.stopPropagation(),Ve.preventDefault(),yh(),Da()}),zp.attr("title",W.clearText),zp.bind("click.spectrum",function(Ve){Ve.stopPropagation(),Ve.preventDefault(),La=!0,xl(),Gt&&xs(!0)}),fh.text(W.chooseText),fh.bind("click.spectrum",function(Ve){Ve.stopPropagation(),Ve.preventDefault(),r&&Eo.is(":focus")&&Eo.trigger("change"),e_()&&(xs(!0),Da())}),Kp.text(W.showPaletteOnly?W.togglePaletteMoreText:W.togglePaletteLessText),Kp.bind("click.spectrum",function(Ve){Ve.stopPropagation(),Ve.preventDefault(),W.showPaletteOnly=!W.showPaletteOnly,!W.showPaletteOnly&&!Gt&&qe.css("left","-="+(X0.outerWidth(!0)+5)),$p()}),X(sh,function(Ve,Fi,Os){Oo=Ve/So,La=!1,Os.shiftKey&&(Oo=Math.round(Oo*10)/10),xl()},Yp,Xp),X(Wp,function(Ve,Fi){_s=parseFloat(Fi/Er),La=!1,W.showAlpha||(Oo=1),xl()},Yp,Xp),X(ff,function(Ve,Fi,Os){if(!Os.shiftKey)Ma=null;else if(!Ma){var mf=ws*di,Tu=ni-wu*ni,Eu=Math.abs(Ve-mf)>Math.abs(Fi-Tu);Ma=Eu?"x":"y"}var a_=!Ma||Ma==="x",s_=!Ma||Ma==="y";a_&&(ws=parseFloat(Ve/di)),s_&&(wu=parseFloat((ni-Fi)/ni)),La=!1,W.showAlpha||(Oo=1),xl()},Yp,Xp),Ou?(Cs(Ou),Sl(),Cl=W.preferredFormat||ne(Ou).getFormat(),qp(Ou)):Sl(),Gt&&Jp();function Le(Ve){return Ve.data&&Ve.data.ignore?(Cs(a(Ve.target).closest(".sp-thumb-el").data("color")),xl()):(Cs(a(Ve.target).closest(".sp-thumb-el").data("color")),xl(),W.hideAfterPaletteSelect&&(xs(!0),Da())),!1}var lr=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";lh.delegate(".sp-thumb-el",lr,Le),uh.delegate(".sp-thumb-el:nth-child(1)",lr,{ignore:!0},Le)}function ph(){if(ve&&window.localStorage){try{var ke=window.localStorage[ve].split(",#");ke.length>1&&(delete window.localStorage[ve],a.each(ke,function(Le,lr){qp(lr)}))}catch{}try{To=window.localStorage[ve].split(";")}catch{}}}function qp(ke){if(Qt){var Le=ne(ke).toRgbString();if(!cf[Le]&&a.inArray(Le,To)===-1)for(To.push(Le);To.length>Y0;)To.shift();if(ve&&window.localStorage)try{window.localStorage[ve]=To.join(";")}catch{}}}function t_(){var ke=[];if(W.showPalette)for(var Le=0;Le<To.length;Le++){var lr=ne(To[Le]).toRgbString();cf[lr]||ke.push(To[Le])}return ke.reverse().slice(0,W.maxSelectionSize)}function dh(){var ke=Gn(),Le=a.map(bu,function(lr,Ve){return d(lr,ke,"sp-palette-row sp-palette-row-"+Ve,W)});ph(),To&&Le.push(d(t_(),ke,"sp-palette-row sp-palette-row-selection",W)),lh.html(Le.join(""))}function hh(){if(W.showInitial){var ke=bl,Le=Gn();uh.html(d([ke,Le],Le,"sp-palette-row-initial",W))}}function Yp(){(ni<=0||di<=0||Er<=0)&&Ss(),Ur=!0,qe.addClass(ah),Ma=null,Qr.trigger("dragstart.spectrum",[Gn()])}function Xp(){Ur=!1,qe.removeClass(ah),Qr.trigger("dragstop.spectrum",[Gn()])}function Zp(){var ke=Eo.val();if((ke===null||ke==="")&&bs)Cs(null),xs(!0);else{var Le=ne(ke);Le.isValid()?(Cs(Le),xs(!0)):Eo.addClass("sp-validation-error")}}function vh(){Tr?Da():Jp()}function Jp(){var ke=a.Event("beforeShow.spectrum");if(Tr){Ss();return}if(Qr.trigger("beforeShow.spectrum",[Gn()]),!(Ue.beforeShow(Gn())===!1||ke.isDefaultPrevented())){h(),Tr=!0;var Le=a(Cu);Le.bind("keydown.spectrum",gh),Le.bind("click.spectrum",mh),a(window).bind("resize.spectrum",We),_l.addClass("sp-active"),qe.removeClass("sp-hidden"),Ss(),Sl(),bl=Gn(),hh(),Ue.show(bl),Qr.trigger("show.spectrum",[bl])}}function gh(ke){ke.keyCode===27&&Da()}function mh(ke){ke.button!=2&&(Ur||(J0?xs(!0):yh(),Da()))}function Da(){!Tr||Gt||(Tr=!1,a(Cu).unbind("keydown.spectrum",gh),a(Cu).unbind("click.spectrum",mh),a(window).unbind("resize.spectrum",We),_l.removeClass("sp-active"),qe.addClass("sp-hidden"),Ue.hide(Gn()),Qr.trigger("hide.spectrum",[Gn()]))}function yh(){Cs(bl,!0)}function Cs(ke,Le){if(ne.equals(ke,Gn())){Sl();return}var lr,Ve;!ke&&bs?La=!0:(La=!1,Rr=!ke,lr=ne(ke),Ve=lr.toHsv(),_s=Ve.h%360/360,ws=Ve.s,wu=Ve.v,Oo=Ve.a),Sl(),lr&&lr.isValid()&&!Le&&(Cl=W.preferredFormat||lr.getFormat())}function Gn(ke){return ke=ke||{},bs&&La?null:ne.fromRatio({h:_s,s:ws,v:wu,a:Math.round(Oo*100)/100},{format:ke.format||Cl})}function e_(){return!Eo.hasClass("sp-validation-error")}function xl(){Sl(),Ue.move(Gn()),Qr.trigger("move.spectrum",[Gn()])}function Sl(){Eo.removeClass("sp-validation-error"),_h();var ke=ne.fromRatio({h:_s,s:1,v:1});ff.css("background-color",ke.toHexString());var Le=Cl;Oo<1&&!(Oo===0&&Le==="name")&&(Le==="hex"||Le==="hex3"||Le==="hex6"||Le==="name")&&(Le="rgb");var lr=Gn({format:Le}),Ve="";if(wl.removeClass("sp-clear-display"),wl.css("background-color","transparent"),!lr&&bs)wl.addClass("sp-clear-display");else{var Fi=lr.toHexString(),Os=lr.toRgbString();if(i||lr.alpha===1?wl.css("background-color",Os):(wl.css("background-color","transparent"),wl.css("filter",lr.toFilter())),W.showAlpha){var mf=lr.toRgb();mf.a=0;var Tu=ne(mf).toRgbString(),Eu="linear-gradient(left, "+Tu+", "+Fi+")";r?xu.css("filter",ne(Tu).toFilter({gradientType:1},Fi)):(xu.css("background","-webkit-"+Eu),xu.css("background","-moz-"+Eu),xu.css("background","-ms-"+Eu),xu.css("background","linear-gradient(to right, "+Tu+", "+Fi+")"))}Ve=lr.toString(Le)}W.showInput&&Eo.val(Ve),W.showPalette&&dh(),hh()}function _h(){var ke=ws,Le=wu;if(bs&&La)hf.hide(),df.hide(),pf.hide();else{hf.show(),df.show(),pf.show();var lr=ke*di,Ve=ni-Le*ni;lr=Math.max(-Jr,Math.min(di-Jr,lr-Jr)),Ve=Math.max(-Jr,Math.min(ni-Jr,Ve-Jr)),pf.css({top:Ve+"px",left:lr+"px"});var Fi=Oo*So;hf.css({left:Fi-sf/2+"px"});var Os=_s*Er;df.css({top:Os-lf+"px"})}}function xs(ke){var Le=Gn(),lr="",Ve=Rr?!0:!ne.equals(Le,bl);Le&&(lr=Le.toString(Cl),!Tr&&qp(Le)),vf&&Qr.val(lr),ke&&Ve&&(Ue.change(Le),Qr.trigger("change",[Le]))}function Ss(){Tr&&(di=ff.width(),ni=ff.height(),Jr=pf.height(),Wp.width(),Er=Wp.height(),lf=df.height(),So=sh.width(),sf=hf.width(),Gt||(qe.css("position","absolute"),W.offset?qe.offset(W.offset):qe.offset(b(qe,Su))),_h(),W.showPalette&&dh(),Qr.trigger("reflow.spectrum"))}function r_(){Qr.show(),Su.unbind("click.spectrum touchstart.spectrum"),qe.remove(),_l.remove(),e[gf.id]=null}function n_(ke,Le){if(ke===n)return a.extend({},W);if(Le===n)return W[ke];W[ke]=Le,ke==="preferredFormat"&&(Cl=W.preferredFormat),$p()}function i_(){Up=!1,Qr.attr("disabled",!1),Su.removeClass("sp-disabled")}function wh(){Da(),Up=!0,Qr.attr("disabled",!0),Su.addClass("sp-disabled")}function o_(ke){W.offset=ke,Ss()}Q0();var gf={show:Jp,hide:Da,toggle:vh,reflow:Ss,option:n_,enable:i_,disable:wh,offset:o_,set:function(ke){Cs(ke),xs()},get:Gn,destroy:r_,container:qe};return gf.id=e.push(gf)-1,gf}function b(G,yt){var W=0,Gt=G.outerWidth(),Qt=G.outerHeight(),ve=yt.outerHeight(),Fe=G[0].ownerDocument,Ue=Fe.documentElement,We=Ue.clientWidth,Tr=Ue.clientHeight,Ur=a(Fe).scrollLeft(),Rr=a(Fe).scrollTop(),di=We+Ur,ni=Tr+Rr,Jr=yt.offset();return Jr.top+=ve,Jr.left-=Math.min(Jr.left,Jr.left+Gt>di&&di>Gt?Math.abs(Jr.left+Gt-di):0),Jr.top-=Math.min(Jr.top,Jr.top+Qt>ni&&ni>Qt?Math.abs(Qt+ve-W):W),Jr}function P(){}function D(G){G.stopPropagation()}function $(G,yt){var W=Array.prototype.slice,Gt=W.call(arguments,2);return function(){return G.apply(yt,Gt.concat(W.call(arguments)))}}function X(G,yt,W,Gt){yt=yt||function(){},W=W||function(){},Gt=Gt||function(){};var Qt=document,ve=!1,Fe={},Ue=0,We=0,Tr="ontouchstart"in window,Ur={};Ur.selectstart=Rr,Ur.dragstart=Rr,Ur["touchmove mousemove"]=di,Ur["touchend mouseup"]=Jr;function Rr(Er){Er.stopPropagation&&Er.stopPropagation(),Er.preventDefault&&Er.preventDefault(),Er.returnValue=!1}function di(Er){if(ve){if(r&&Qt.documentMode<9&&!Er.button)return Jr();var So=Er&&Er.touches&&Er.touches[0],sf=So&&So.pageX||Er.pageX,lf=So&&So.pageY||Er.pageY,_s=Math.max(0,Math.min(sf-Fe.left,We)),ws=Math.max(0,Math.min(lf-Fe.top,Ue));Tr&&Rr(Er),yt.apply(G,[_s,ws,Er])}}function ni(Er){var So=Er.which?Er.which==3:Er.button==2;!So&&!ve&&W.apply(G,arguments)!==!1&&(ve=!0,Ue=a(G).height(),We=a(G).width(),Fe=a(G).offset(),a(Qt).bind(Ur),a(Qt.body).addClass("sp-dragging"),di(Er),Rr(Er))}function Jr(){ve&&(a(Qt).unbind(Ur),a(Qt.body).removeClass("sp-dragging"),setTimeout(function(){Gt.apply(G,arguments)},0)),ve=!1}a(G).bind("touchstart mousedown",ni)}function lt(G,yt,W){var Gt;return function(){var Qt=this,ve=arguments,Fe=function(){Gt=null,G.apply(Qt,ve)};W&&clearTimeout(Gt),(W||!Gt)&&(Gt=setTimeout(Fe,yt))}}function Tt(){return a.fn.spectrum.inputTypeColorSupport()}var bt="spectrum.id";a.fn.spectrum=function(G,yt){if(typeof G=="string"){var W=this,Gt=Array.prototype.slice.call(arguments,1);return this.each(function(){var Qt=e[a(this).data(bt)];if(Qt){var ve=Qt[G];if(!ve)throw new Error("Spectrum: no such method: '"+G+"'");G=="get"?W=Qt.get():G=="container"?W=Qt.container:G=="option"?W=Qt.option.apply(Qt,Gt):G=="destroy"?(Qt.destroy(),a(this).removeData(bt)):ve.apply(Qt,Gt)}}),W}return this.spectrum("destroy").each(function(){var Qt=a.extend({},G,a(this).data()),ve=y(this,Qt);a(this).data(bt,ve.id)})},a.fn.spectrum.load=!0,a.fn.spectrum.loadOpts={},a.fn.spectrum.draggable=X,a.fn.spectrum.defaults=t,a.fn.spectrum.inputTypeColorSupport=function G(){if(typeof G._cachedResult>"u"){var yt=a("<input type='color'/>")[0];G._cachedResult=yt.type==="color"&&yt.value!==""}return G._cachedResult},a.spectrum={},a.spectrum.localization={},a.spectrum.palettes={},a.fn.spectrum.processNativeColorInputs=function(){var G=a("input[type=color]");G.length&&!Tt()&&G.spectrum({preferredFormat:"hex6"})};var Zt=/^[\s,#]+/,ue=/\s+$/,Oe=0,Ie=Math,ee=Ie.round,je=Ie.min,Ze=Ie.max,ln=Ie.random,ne=function(G,yt){if(G=G||"",yt=yt||{},G instanceof ne)return G;if(!(this instanceof ne))return new ne(G,yt);var W=hn(G);this._originalInput=G,this._r=W.r,this._g=W.g,this._b=W.b,this._a=W.a,this._roundA=ee(100*this._a)/100,this._format=yt.format||W.format,this._gradientType=yt.gradientType,this._r<1&&(this._r=ee(this._r)),this._g<1&&(this._g=ee(this._g)),this._b<1&&(this._b=ee(this._b)),this._ok=W.ok,this._tc_id=Oe++};ne.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var G=this.toRgb();return(G.r*299+G.g*587+G.b*114)/1e3},setAlpha:function(G){return this._a=oh(G),this._roundA=ee(100*this._a)/100,this},toHsv:function(){var G=Ni(this._r,this._g,this._b);return{h:G.h*360,s:G.s,v:G.v,a:this._a}},toHsvString:function(){var G=Ni(this._r,this._g,this._b),yt=ee(G.h*360),W=ee(G.s*100),Gt=ee(G.v*100);return this._a==1?"hsv("+yt+", "+W+"%, "+Gt+"%)":"hsva("+yt+", "+W+"%, "+Gt+"%, "+this._roundA+")"},toHsl:function(){var G=bo(this._r,this._g,this._b);return{h:G.h*360,s:G.s,l:G.l,a:this._a}},toHslString:function(){var G=bo(this._r,this._g,this._b),yt=ee(G.h*360),W=ee(G.s*100),Gt=ee(G.l*100);return this._a==1?"hsl("+yt+", "+W+"%, "+Gt+"%)":"hsla("+yt+", "+W+"%, "+Gt+"%, "+this._roundA+")"},toHex:function(G){return nf(this._r,this._g,this._b,G)},toHexString:function(G){return"#"+this.toHex(G)},toHex8:function(){return of(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:ee(this._r),g:ee(this._g),b:ee(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+ee(this._r)+", "+ee(this._g)+", "+ee(this._b)+")":"rgba("+ee(this._r)+", "+ee(this._g)+", "+ee(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:ee(jr(this._r,255)*100)+"%",g:ee(jr(this._g,255)*100)+"%",b:ee(jr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+ee(jr(this._r,255)*100)+"%, "+ee(jr(this._g,255)*100)+"%, "+ee(jr(this._b,255)*100)+"%)":"rgba("+ee(jr(this._r,255)*100)+"%, "+ee(jr(this._g,255)*100)+"%, "+ee(jr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:U0[nf(this._r,this._g,this._b,!0)]||!1},toFilter:function(G){var yt="#"+of(this._r,this._g,this._b,this._a),W=yt,Gt=this._gradientType?"GradientType = 1, ":"";if(G){var Qt=ne(G);W=Qt.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+Gt+"startColorstr="+yt+",endColorstr="+W+")"},toString:function(G){var yt=!!G;G=G||this._format;var W=!1,Gt=this._a<1&&this._a>=0,Qt=!yt&&Gt&&(G==="hex"||G==="hex6"||G==="hex3"||G==="name");return Qt?G==="name"&&this._a===0?this.toName():this.toRgbString():(G==="rgb"&&(W=this.toRgbString()),G==="prgb"&&(W=this.toPercentageRgbString()),(G==="hex"||G==="hex6")&&(W=this.toHexString()),G==="hex3"&&(W=this.toHexString(!0)),G==="hex8"&&(W=this.toHex8String()),G==="name"&&(W=this.toName()),G==="hsl"&&(W=this.toHslString()),G==="hsv"&&(W=this.toHsvString()),W||this.toHexString())},_applyModification:function(G,yt){var W=G.apply(null,[this].concat([].slice.call(yt)));return this._r=W._r,this._g=W._g,this._b=W._b,this.setAlpha(W._a),this},lighten:function(){return this._applyModification(L0,arguments)},brighten:function(){return this._applyModification(D0,arguments)},darken:function(){return this._applyModification(j0,arguments)},desaturate:function(){return this._applyModification(Hp,arguments)},saturate:function(){return this._applyModification(k0,arguments)},greyscale:function(){return this._applyModification(M0,arguments)},spin:function(){return this._applyModification(I0,arguments)},_applyCombination:function(G,yt){return G.apply(null,[this].concat([].slice.call(yt)))},analogous:function(){return this._applyCombination(H0,arguments)},complement:function(){return this._applyCombination(R0,arguments)},monochromatic:function(){return this._applyCombination(B0,arguments)},splitcomplement:function(){return this._applyCombination(V0,arguments)},triad:function(){return this._applyCombination(N0,arguments)},tetrad:function(){return this._applyCombination(F0,arguments)}},ne.fromRatio=function(G,yt){if(typeof G=="object"){var W={};for(var Gt in G)G.hasOwnProperty(Gt)&&(Gt==="a"?W[Gt]=G[Gt]:W[Gt]=_u(G[Gt]));G=W}return ne(G,yt)};function hn(G){var yt={r:0,g:0,b:0},W=1,Gt=!1,Qt=!1;return typeof G=="string"&&(G=q0(G)),typeof G=="object"&&(G.hasOwnProperty("r")&&G.hasOwnProperty("g")&&G.hasOwnProperty("b")?(yt=wo(G.r,G.g,G.b),Gt=!0,Qt=String(G.r).substr(-1)==="%"?"prgb":"rgb"):G.hasOwnProperty("h")&&G.hasOwnProperty("s")&&G.hasOwnProperty("v")?(G.s=_u(G.s),G.v=_u(G.v),yt=rf(G.h,G.s,G.v),Gt=!0,Qt="hsv"):G.hasOwnProperty("h")&&G.hasOwnProperty("s")&&G.hasOwnProperty("l")&&(G.s=_u(G.s),G.l=_u(G.l),yt=Co(G.h,G.s,G.l),Gt=!0,Qt="hsl"),G.hasOwnProperty("a")&&(W=G.a)),W=oh(W),{ok:Gt,format:G.format||Qt,r:je(255,Ze(yt.r,0)),g:je(255,Ze(yt.g,0)),b:je(255,Ze(yt.b,0)),a:W}}function wo(G,yt,W){return{r:jr(G,255)*255,g:jr(yt,255)*255,b:jr(W,255)*255}}function bo(G,yt,W){G=jr(G,255),yt=jr(yt,255),W=jr(W,255);var Gt=Ze(G,yt,W),Qt=je(G,yt,W),ve,Fe,Ue=(Gt+Qt)/2;if(Gt==Qt)ve=Fe=0;else{var We=Gt-Qt;switch(Fe=Ue>.5?We/(2-Gt-Qt):We/(Gt+Qt),Gt){case G:ve=(yt-W)/We+(yt<W?6:0);break;case yt:ve=(W-G)/We+2;break;case W:ve=(G-yt)/We+4;break}ve/=6}return{h:ve,s:Fe,l:Ue}}function Co(G,yt,W){var Gt,Qt,ve;G=jr(G,360),yt=jr(yt,100),W=jr(W,100);function Fe(Tr,Ur,Rr){return Rr<0&&(Rr+=1),Rr>1&&(Rr-=1),Rr<1/6?Tr+(Ur-Tr)*6*Rr:Rr<1/2?Ur:Rr<2/3?Tr+(Ur-Tr)*(2/3-Rr)*6:Tr}if(yt===0)Gt=Qt=ve=W;else{var Ue=W<.5?W*(1+yt):W+yt-W*yt,We=2*W-Ue;Gt=Fe(We,Ue,G+1/3),Qt=Fe(We,Ue,G),ve=Fe(We,Ue,G-1/3)}return{r:Gt*255,g:Qt*255,b:ve*255}}function Ni(G,yt,W){G=jr(G,255),yt=jr(yt,255),W=jr(W,255);var Gt=Ze(G,yt,W),Qt=je(G,yt,W),ve,Fe,Ue=Gt,We=Gt-Qt;if(Fe=Gt===0?0:We/Gt,Gt==Qt)ve=0;else{switch(Gt){case G:ve=(yt-W)/We+(yt<W?6:0);break;case yt:ve=(W-G)/We+2;break;case W:ve=(G-yt)/We+4;break}ve/=6}return{h:ve,s:Fe,v:Ue}}function rf(G,yt,W){G=jr(G,360)*6,yt=jr(yt,100),W=jr(W,100);var Gt=Ie.floor(G),Qt=G-Gt,ve=W*(1-yt),Fe=W*(1-Qt*yt),Ue=W*(1-(1-Qt)*yt),We=Gt%6,Tr=[W,Fe,ve,ve,Ue,W][We],Ur=[Ue,W,W,Fe,ve,ve][We],Rr=[ve,ve,Ue,W,W,Fe][We];return{r:Tr*255,g:Ur*255,b:Rr*255}}function nf(G,yt,W,Gt){var Qt=[ys(ee(G).toString(16)),ys(ee(yt).toString(16)),ys(ee(W).toString(16))];return Gt&&Qt[0].charAt(0)==Qt[0].charAt(1)&&Qt[1].charAt(0)==Qt[1].charAt(1)&&Qt[2].charAt(0)==Qt[2].charAt(1)?Qt[0].charAt(0)+Qt[1].charAt(0)+Qt[2].charAt(0):Qt.join("")}function of(G,yt,W,Gt){var Qt=[ys(G0(Gt)),ys(ee(G).toString(16)),ys(ee(yt).toString(16)),ys(ee(W).toString(16))];return Qt.join("")}ne.equals=function(G,yt){return!G||!yt?!1:ne(G).toRgbString()==ne(yt).toRgbString()},ne.random=function(){return ne.fromRatio({r:ln(),g:ln(),b:ln()})};function Hp(G,yt){yt=yt===0?0:yt||10;var W=ne(G).toHsl();return W.s-=yt/100,W.s=af(W.s),ne(W)}function k0(G,yt){yt=yt===0?0:yt||10;var W=ne(G).toHsl();return W.s+=yt/100,W.s=af(W.s),ne(W)}function M0(G){return ne(G).desaturate(100)}function L0(G,yt){yt=yt===0?0:yt||10;var W=ne(G).toHsl();return W.l+=yt/100,W.l=af(W.l),ne(W)}function D0(G,yt){yt=yt===0?0:yt||10;var W=ne(G).toRgb();return W.r=Ze(0,je(255,W.r-ee(255*-(yt/100)))),W.g=Ze(0,je(255,W.g-ee(255*-(yt/100)))),W.b=Ze(0,je(255,W.b-ee(255*-(yt/100)))),ne(W)}function j0(G,yt){yt=yt===0?0:yt||10;var W=ne(G).toHsl();return W.l-=yt/100,W.l=af(W.l),ne(W)}function I0(G,yt){var W=ne(G).toHsl(),Gt=(ee(W.h)+yt)%360;return W.h=Gt<0?360+Gt:Gt,ne(W)}function R0(G){var yt=ne(G).toHsl();return yt.h=(yt.h+180)%360,ne(yt)}function N0(G){var yt=ne(G).toHsl(),W=yt.h;return[ne(G),ne({h:(W+120)%360,s:yt.s,l:yt.l}),ne({h:(W+240)%360,s:yt.s,l:yt.l})]}function F0(G){var yt=ne(G).toHsl(),W=yt.h;return[ne(G),ne({h:(W+90)%360,s:yt.s,l:yt.l}),ne({h:(W+180)%360,s:yt.s,l:yt.l}),ne({h:(W+270)%360,s:yt.s,l:yt.l})]}function V0(G){var yt=ne(G).toHsl(),W=yt.h;return[ne(G),ne({h:(W+72)%360,s:yt.s,l:yt.l}),ne({h:(W+216)%360,s:yt.s,l:yt.l})]}function H0(G,yt,W){yt=yt||6,W=W||30;var Gt=ne(G).toHsl(),Qt=360/W,ve=[ne(G)];for(Gt.h=(Gt.h-(Qt*yt>>1)+720)%360;--yt;)Gt.h=(Gt.h+Qt)%360,ve.push(ne(Gt));return ve}function B0(G,yt){yt=yt||6;for(var W=ne(G).toHsv(),Gt=W.h,Qt=W.s,ve=W.v,Fe=[],Ue=1/yt;yt--;)Fe.push(ne({h:Gt,s:Qt,v:ve})),ve=(ve+Ue)%1;return Fe}ne.mix=function(G,yt,W){W=W===0?0:W||50;var Gt=ne(G).toRgb(),Qt=ne(yt).toRgb(),ve=W/100,Fe=ve*2-1,Ue=Qt.a-Gt.a,We;Fe*Ue==-1?We=Fe:We=(Fe+Ue)/(1+Fe*Ue),We=(We+1)/2;var Tr=1-We,Ur={r:Qt.r*We+Gt.r*Tr,g:Qt.g*We+Gt.g*Tr,b:Qt.b*We+Gt.b*Tr,a:Qt.a*ve+Gt.a*(1-ve)};return ne(Ur)},ne.readability=function(G,yt){var W=ne(G),Gt=ne(yt),Qt=W.toRgb(),ve=Gt.toRgb(),Fe=W.getBrightness(),Ue=Gt.getBrightness(),We=Math.max(Qt.r,ve.r)-Math.min(Qt.r,ve.r)+Math.max(Qt.g,ve.g)-Math.min(Qt.g,ve.g)+Math.max(Qt.b,ve.b)-Math.min(Qt.b,ve.b);return{brightness:Math.abs(Fe-Ue),color:We}},ne.isReadable=function(G,yt){var W=ne.readability(G,yt);return W.brightness>125&&W.color>500},ne.mostReadable=function(G,yt){for(var W=null,Gt=0,Qt=!1,ve=0;ve<yt.length;ve++){var Fe=ne.readability(G,yt[ve]),Ue=Fe.brightness>125&&Fe.color>500,We=3*(Fe.brightness/125)+Fe.color/500;(Ue&&!Qt||Ue&&Qt&&We>Gt||!Ue&&!Qt&&We>Gt)&&(Qt=Ue,Gt=We,W=ne(yt[ve]))}return W};var Bp=ne.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U0=ne.hexNames=W0(Bp);function W0(G){var yt={};for(var W in G)G.hasOwnProperty(W)&&(yt[G[W]]=W);return yt}function oh(G){return G=parseFloat(G),(isNaN(G)||G<0||G>1)&&(G=1),G}function jr(G,yt){z0(G)&&(G="100%");var W=K0(G);return G=je(yt,Ze(0,parseFloat(G))),W&&(G=parseInt(G*yt,10)/100),Ie.abs(G-yt)<1e-6?1:G%yt/parseFloat(yt)}function af(G){return je(1,Ze(0,G))}function xo(G){return parseInt(G,16)}function z0(G){return typeof G=="string"&&G.indexOf(".")!=-1&&parseFloat(G)===1}function K0(G){return typeof G=="string"&&G.indexOf("%")!=-1}function ys(G){return G.length==1?"0"+G:""+G}function _u(G){return G<=1&&(G=G*100+"%"),G}function G0(G){return Math.round(parseFloat(G)*255).toString(16)}function $0(G){return xo(G)/255}var na=function(){var G="[-\\+]?\\d+%?",yt="[-\\+]?\\d*\\.\\d+%?",W="(?:"+yt+")|(?:"+G+")",Gt="[\\s|\\(]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",Qt="[\\s|\\(]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?";return{rgb:new RegExp("rgb"+Gt),rgba:new RegExp("rgba"+Qt),hsl:new RegExp("hsl"+Gt),hsla:new RegExp("hsla"+Qt),hsv:new RegExp("hsv"+Gt),hsva:new RegExp("hsva"+Qt),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function q0(G){G=G.replace(Zt,"").replace(ue,"").toLowerCase();var yt=!1;if(Bp[G])G=Bp[G],yt=!0;else if(G=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var W;return(W=na.rgb.exec(G))?{r:W[1],g:W[2],b:W[3]}:(W=na.rgba.exec(G))?{r:W[1],g:W[2],b:W[3],a:W[4]}:(W=na.hsl.exec(G))?{h:W[1],s:W[2],l:W[3]}:(W=na.hsla.exec(G))?{h:W[1],s:W[2],l:W[3],a:W[4]}:(W=na.hsv.exec(G))?{h:W[1],s:W[2],v:W[3]}:(W=na.hsva.exec(G))?{h:W[1],s:W[2],v:W[3],a:W[4]}:(W=na.hex8.exec(G))?{a:$0(W[1]),r:xo(W[2]),g:xo(W[3]),b:xo(W[4]),format:yt?"name":"hex8"}:(W=na.hex6.exec(G))?{r:xo(W[1]),g:xo(W[2]),b:xo(W[3]),format:yt?"name":"hex"}:(W=na.hex3.exec(G))?{r:xo(W[1]+""+W[1]),g:xo(W[2]+""+W[2]),b:xo(W[3]+""+W[3]),format:yt?"name":"hex"}:!1}window.tinycolor=ne,a(function(){a.fn.spectrum.load&&a.fn.spectrum.processNativeColorInputs()})}var Sr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gr=function(){return Gr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Gr.apply(this,arguments)};k.default&&Ir(k.default);var Ii=function(a){var n=a.getFormat()==="name"&&a.toName(),t=a.getAlpha()==1?a.toHexString():a.toRgbString();return n||t.replace(/ /g,"")},go=function(a){Sr(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.template=function(){var t=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(t,`field-colorp">
        <div class="`).concat(t,`field-colorp-c" data-colorp-c>
          <div class="`).concat(t,`checker-bg"></div>
        </div>
      </div>
    `)},n.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.remove=function(){return a.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},n.prototype.handleChange=function(t){t.stopPropagation();var e=t.target.value;(0,O.isUndefined)(e)||this.__onInputChange(e)},n.prototype.__onInputChange=function(t){var e=this,r=e.model,i=e.opts,l=i.onChange,f=t,d=this.getColorEl();if(d){d.spectrum("set",f);var h=d.spectrum("get"),g=f&&Ii(h);g&&(f=g)}l?l(f):r.set({value:f},{fromInput:1})},n.prototype.setValue=function(t,e){e===void 0&&(e={});var r=this.model,i=(0,O.isUndefined)(e.def)?r.get("defaults"):e.def,l=(0,O.isUndefined)(t)?(0,O.isUndefined)(i)?"":i:t,f=this.getInputEl(),d=this.getColorEl(),h=l!="none"?l:"";f.value=l,d.get(0).style.backgroundColor=h,(e.fromTarget||e.fromInput&&!e.avoidStore)&&(d.spectrum("set",h),this.noneColor=l=="none",this.movedColor=h)},n.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,r=e.em,i=e.model,l=e.opts,f=this.ppfx,d=l.onChange,h=(0,k.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),g=h.get(0).style,y=r&&r.config?r.config.el:"",b=r&&r.getConfig&&r.getConfig().colorPicker||{};this.movedColor="";var P=!1,D;this.$el.find("[data-colorp-c]").append(h);var $=function(X,lt){lt===void 0&&(lt=!0),d?d(X,!lt):(lt&&i.setValueFromInput(0,!1),i.setValueFromInput(X,lt))};h.spectrum(Gr(Gr(Gr({color:i.getValue()||!1,containerClassName:"".concat(f,"one-bg ").concat(f,"two-color"),appendTo:y||"body",maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"⨯",palette:[]},b),i.get("colorPicker")||{}),{move:function(X){var lt=Ii(X);t.movedColor=lt,g.backgroundColor=lt,$(lt,!1)},change:function(X){P=!0;var lt=Ii(X);g.backgroundColor=lt,$(lt),t.noneColor=!1},show:function(X){P=!1,t.movedColor="",D=d?i.getValue({noDefault:!0}):Ii(X)},hide:function(){!P&&(D||d)&&(t.noneColor&&(D=""),g.backgroundColor=D,h.spectrum("set",D),$(D,!1))}})),r&&r.on&&this.listenTo(r,"component:selected",function(){t.movedColor&&$(t.movedColor),P=!0,t.movedColor="",h.spectrum("hide")}),this.colorEl=h}return this.colorEl},n.prototype.render=function(){return hr.prototype.render.call(this),this.getColorEl(),this},n}(hr);const Zr=go;var wi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$r=function(a){wi(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.getInputEl=function(){if(!this.input){var t=this.model,e=this.getModelValue(),r=new Zr({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}),i=r.render();i.setValue(e,{fromTarget:1}),this.input=i.el}return this.input},n}(kt);const uu=$r;var Ri=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mo=function(a){Ri(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.onChange=function(){this.handleClick()},n.prototype.handleClick=function(){var t=this,e=t.model,r=t.em,i=e.get("command");i&&((0,O.isString)(i)?r.Commands.run(i):i(r.Editor,e))},n.prototype.renderLabel=function(){this.model.get("label")&&kt.prototype.renderLabel.apply(this)},n.prototype.getInputEl=function(){var t=this,e=t.model,r=t.ppfx,i=e.props(),l=i.labelButton,f=i.text,d=i.full,h=l||f,g="".concat(r,"btn"),y='<button type="button" class="'.concat(g,"-prim").concat(d?" ".concat(g,"--full"):"",'">').concat(h,"</button>");return y},n}(kt);const Jo=mo;mo.prototype.eventCapture=["click button"];var dn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qo="trait",cu="".concat(Qo,":"),xh="".concat(cu,"custom"),Sh={text:kt,number:Br,select:he,checkbox:Be,color:uu,button:Jo},Oh=function(a){dn(n,a);function n(t){var e=a.call(this,t,"TraitManager",E)||this;e.TraitsView=re,e.events={all:Qo,custom:xh};var r=new S.Hn;e.model=r,e.types=Sh;var i=(0,O.debounce)(function(){return e.__upSel()},0);r.listenTo(t,"component:toggled",i);var l=(0,O.debounce)(function(){return e.__onUp()},0);return r.listenTo(t,"trait:update",l),e}return n.prototype.__upSel=function(){this.select(this.em.getSelected())},n.prototype.__onUp=function(){this.select(this.getSelected())},n.prototype.select=function(t){var e=t?t.getTraits():[];this.model.set({component:t,traits:e}),this.__trgCustom()},n.prototype.getSelected=function(){return this.model.get("component")},n.prototype.getCurrent=function(){return this.model.get("traits")||[]},n.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},n.prototype.postRender=function(){this.__appendTo()},n.prototype.getTraitsViewer=function(){return this.view},n.prototype.addType=function(t,e){var r=this.getType("text");this.types[t]=r.extend(e)},n.prototype.getType=function(t){return this.getTypes()[t]},n.prototype.getTypes=function(){return this.types},n.prototype.render=function(){var t=this,e=t.view,r=t.em,i=this.getConfig(),l=e&&e.el;return e=new re({el:l,collection:[],editor:r,config:i},this.getTypes()),this.view=e,e.el},n.prototype.destroy=function(){this.model.stopListening(),this.model.clear()},n}(Ft);const Th=Oh;var Eh={stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}};const Ph=Eh;var Ah=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kh=function(a){Ah(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.items=[],e.opt=t;var r=t.config||{};e.config=r,e.parentView=t.parentView;var i=r.stylePrefix||"",l=r.pStylePrefix||"",f=e.collection;e.listenTo(f,"add",e.addTo),e.listenTo(f,"reset resetNavigator",e.render),e.listenTo(f,"remove",e.removeChildren),e.className="".concat(i,"layers");var d=r.em;if(r.sortable&&!e.opt.sorter){var h=d.Utils;e.opt.sorter=new h.Sorter({container:r.sortContainer||e.el,containerSel:".".concat(e.className),itemSel:".".concat(i,"layer"),ignoreViewChildren:1,onEndMove:function(g,y,b){var P=y.getSourceModel();d.setSelected(P,{forceChange:1}),d.trigger("".concat(Si,":end"),b)},avoidSelectOnEnd:1,nested:1,ppfx:l,pfx:i,em:d})}return e.$el.data("collection",f),t.parent&&e.$el.data("model",t.parent),e}return n.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},n.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},n.prototype.addToCollection=function(t,e,r){var i=this,l=i.parentView,f=i.opt,d=i.config,h=f.ItemView,g=f.opened,y=f.module,b=f.level,P=f.sorter,D=e||null,$=new h({ItemView:h,level:b,model:t,parentView:l,config:d,sorter:P,opened:g,module:y}),X=$.render().el;if(D)D.appendChild(X);else if(typeof r<"u"){var lt="before";this.$el.children().length==r&&(r--,lt="after"),r<0?this.$el.append(X):this.$el.children().eq(r)[lt](X)}else this.$el.append(X);return this.items.push($),X},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S.G7.prototype.remove.apply(this,t),this.items.map(function(r){return r.remove()}),this},n.prototype.render=function(){var t=this,e=document.createDocumentFragment(),r=this.el;return r.innerHTML="",this.collection.each(function(i){return t.addToCollection(i,e)}),r.appendChild(e),r.className=this.className,this},n}(S.G7);const Mh=kh;var Lh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qp="contentEditable",Dh=function(a){Lh(n,a);function n(t){var e=a.call(this,t)||this;(0,O.bindAll)(e,"__render"),e.opt=t,e.module=t.module,e.config=t.config||{},e.sorter=t.sorter||"",e.parentView=t.parentView;var r=e,i=r.model,l=r.pfx,f=r.ppfx,d=i.get("type")||"default";return e.className="".concat(l,"layer ").concat(l,"layer__t-").concat(d," no-select ").concat(f,"two-color"),e.inputNameCls="".concat(f,"layer-name"),e.clsTitleC="".concat(l,"layer-title-c"),e.clsTitle="".concat(l,"layer-title"),e.clsCaret="".concat(l,"layer-caret"),e.clsCount="".concat(l,"layer-count"),e.clsMove="".concat(l,"layer-move"),e.clsChildren="".concat(l,"layer-children"),e.clsNoChild="".concat(l,"layer-no-chld"),e.clsEdit="".concat(e.inputNameCls,"--edit"),e.clsNoEdit="".concat(e.inputNameCls,"--no-edit"),e.initComponent(),e}return n.prototype.events=function(){return{"mousedown [data-toggle-move]":"startSort","touchstart [data-toggle-move]":"startSort","click [data-toggle-visible]":"toggleVisibility","click [data-toggle-open]":"toggleOpening","click [data-toggle-select]":"handleSelect","mouseover [data-toggle-select]":"handleHover","mouseout [data-toggle-select]":"handleHoverOut","dblclick [data-name]":"handleEdit","keydown [data-name]":"handleEditKey","focusout [data-name]":"handleEditEnd"}},n.prototype.template=function(t){var e=this,r=e.pfx,i=e.ppfx,l=e.config,f=e.clsNoEdit,d=e.module,h=e.opt,g=e.em,y=l.hidable,b=d.getComponents(t).length,P=b?"":this.clsNoChild,D="".concat(this.clsTitle," ").concat(P),$="".concat(this.clsTitleC," ").concat(i,"one-bg"),X="".concat(this.inputNameCls," ").concat(f," ").concat(i,"no-app"),lt=h.level+1,Tt="".concat(30+lt*10,"px"),bt=t.getName(),Zt=t.getIcon(),ue="".concat(r,"layer"),Oe=(g==null?void 0:g.getConfig()).icons,Ie=Oe,ee=Ie.move,je=Ie.eye,Ze=Ie.eyeOff,ln=Ie.chevron;return`
      `.concat(y?'<i class="'.concat(r,`layer-vis" data-toggle-visible>
            <i class="`).concat(r,'layer-vis-on">').concat(je,`</i>
            <i class="`).concat(r,'layer-vis-off">').concat(Ze,`</i>
          </i>`):"",`
      <div class="`).concat($,`">
        <div class="`).concat(D,'" style="padding-left: ').concat(Tt,`" data-toggle-select>
          <div class="`).concat(r,'layer-title-inn" title="').concat(bt,`">
            <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(ln,`</i>
            `).concat(Zt?'<span class="'.concat(ue,'__icon">').concat(Zt,"</span>"):"",`
            <span class="`).concat(X,'" data-name>').concat(bt,`</span>
          </div>
        </div>
      </div>
      <div class="`).concat(this.clsCount,'" data-count>').concat(b||"",`</div>
      <div class="`).concat(this.clsMove,'" data-toggle-move>').concat(ee||"",`</div>
      <div class="`).concat(this.clsChildren,'"></div>')},Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),n.prototype.initComponent=function(){var t=this,e=this,r=e.model,i=e.config,l=i.onInit,f=r.components();this.listenTo(f,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(d){return t.listenTo(r,d[0],d[1])}),this.$el.data("model",r),this.$el.data("collection",f),r.viewLayer=this,l.bind(this)({component:r,render:this.__render,listenTo:this.listenTo})},n.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},n.prototype.getVisibilityEl=function(){return this.eyeEl||(this.eyeEl=this.$el.children(".".concat(this.pfx,"layer-vis"))),this.eyeEl},n.prototype.updateVisibility=function(){var t=this,e=t.pfx,r=t.model,i=t.module,l="".concat(e,"layer-hidden"),f=!i.isVisible(r),d=f?"addClass":"removeClass";this.$el[d](l),this.getVisibilityEl()[d]("".concat(e,"layer-off"))},n.prototype.toggleVisibility=function(t){t==null||t.stopPropagation();var e=this,r=e.module,i=e.model;r.setVisible(i,!r.isVisible(i))},n.prototype.handleEdit=function(t){t==null||t.stopPropagation();var e=this,r=e.em,i=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=this.getInputName();d[Qp]="true",d.focus(),document.execCommand("selectAll",!1),r.setEditing(!0),i.find(".".concat(this.inputNameCls)).removeClass(l).addClass(f)},n.prototype.handleEditKey=function(t){t.stopPropagation(),((0,Xt.kl)(t)||(0,Xt.r$)(t))&&this.handleEditEnd(t)},n.prototype.handleEditEnd=function(t){t==null||t.stopPropagation();var e=this,r=e.em,i=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=this.getInputName(),h=d.textContent;d.scrollLeft=0,d[Qp]="false",this.setName(h,{component:this.model,propName:"custom-name"}),r.setEditing(!1),i.find(".".concat(this.inputNameCls)).addClass(l).removeClass(f),this.updateName()},n.prototype.setName=function(t,e){var r=e.propName;this.model.set(r,t)},n.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},n.prototype.updateOpening=function(){var t=this,e=t.$el,r=t.model,i=t.pfx,l="open",f="".concat(i,"layer-open"),d=this.getCaret();this.module.isOpen(r)?(e.addClass(l),d.addClass(f)):(e.removeClass(l),d.removeClass(f))},n.prototype.toggleOpening=function(t){var e=this,r=e.model,i=e.module;t==null||t.stopImmediatePropagation(),r.get("components").length&&i.setOpen(r,!i.isOpen(r))},n.prototype.handleSelect=function(t){t==null||t.stopPropagation();var e=this,r=e.module,i=e.model;r.setLayerData(i,{selected:!0},{event:t})},n.prototype.handleHover=function(t){t==null||t.stopPropagation();var e=this,r=e.module,i=e.model;r.setLayerData(i,{hovered:!0})},n.prototype.handleHoverOut=function(t){t==null||t.stopPropagation();var e=this,r=e.module,i=e.model;r.setLayerData(i,{hovered:!1})},n.prototype.startSort=function(t){t.stopPropagation();var e=this,r=e.em,i=e.sorter;t.button&&t.button!==0||i&&(i.onStart=function(l){return r.trigger("".concat(Si,":start"),l)},i.onMoveClb=function(l){return r.trigger(Si,l)},i.startSort(t.target))},n.prototype.updateStatus=function(){Cr.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},n.prototype.checkChildren=function(){var t=this,e=t.model,r=t.clsNoChild,i=t.$el,l=t.module,f=l.getComponents(e).length,d=i.children(".".concat(this.clsTitleC)).children(".".concat(this.clsTitle)),h=this.cnt;h||(h=i.children("[data-count]").get(0),this.cnt=h),d[f?"removeClass":"addClass"](r),h&&(h.innerHTML=f||""),!f&&l.setOpen(e,!1)},n.prototype.getCaret=function(){return(!this.caret||!this.caret.length)&&(this.caret=this.$el.children(".".concat(this.clsTitleC)).find(".".concat(this.clsCaret))),this.caret},n.prototype.setRoot=function(t){var e;t=(0,O.isString)(t)?(e=this.em.getWrapper())===null||e===void 0?void 0:e.find(t)[0]:t;var r=(0,J.getModel)(t,0);r&&(this.stopListening(),this.model=r,this.initComponent(),this._rendered&&this.render())},n.prototype.updateLayerable=function(){var t=this.parentView,e=t||this;e.render()},n.prototype.__clearItems=function(){var t;(t=this.items)===null||t===void 0||t.remove()},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S.G7.prototype.remove.apply(this,t),this.__clearItems(),this},n.prototype.render=function(){var t=this,e=t.model,r=t.config,i=t.pfx,l=t.ppfx,f=t.opt,d=t.sorter;this.__clearItems();var h=f.opened,g=f.module,y=f.ItemView,b=!g.__isLayerable(e),P=this.$el.empty(),D=f.level+1;delete this.inputName,this.items=new Mh({ItemView:y,collection:e.get("components"),config:r,sorter:d,opened:h,parentView:this,parent:e,level:D,module:g});var $=this.items.render().$el;return!r.showWrapper&&D===1?P.append($):(P.html(this.template(e)),P.find(".".concat(this.clsChildren)).append($)),(!e.get("draggable")||!r.sortable)&&P.children(".".concat(this.clsMove)).remove(),!g.isVisible(e)&&(this.className+=" ".concat(i,"hide")),b&&(this.className+=" ".concat(l,"hidden")),P.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.__render(),this._rendered=!0,this},n.prototype.__render=function(){var t=this,e=t.model,r=t.config,i=t.el,l=r.onRender,f={component:e,el:i};l.bind(this)(f),this.em.trigger("layer:render",f)},n}(S.G7);const jh=Dh;var Ih=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fp=function(){return fp=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},fp.apply(this,arguments)},td="layer",pp="".concat(td,":"),ed="".concat(pp,"root"),rd="".concat(pp,"component"),Rh="".concat(pp,"custom"),Nh={all:td,root:ed,component:rd,custom:Rh},dp={mediaText:""},Fh=["open","status","locked","custom-name","components","classes"].map(function(a){return"component:update:".concat(a)}).join(" "),Vh=function(a){return a===void 0&&(a={}),(a.display||"").trim().indexOf("none")===0},Hh=function(a){Ih(n,a);function n(t){var e=a.call(this,t,"LayerManager",Ph)||this;return e.events=Nh,(0,O.bindAll)(e,"componentChanged","__onRootChange","__onComponent"),e.model=new le.Z(e,{opened:{}}),e.config.stylePrefix=e.config.pStylePrefix,e}return n.prototype.onLoad=function(){var t=this,e=this,r=e.em,i=e.config,l=e.model;l.listenTo(r,"component:selected",this.componentChanged),l.on("change:root",this.__onRootChange),l.listenTo(r,Fh,this.__onComponent),this.componentChanged(),l.listenToOnce(r,"load",function(){t.setRoot(i.root),t.__appendTo()})},n.prototype.setRoot=function(t){var e=this.em.getWrapper(),r=(0,J.isComponent)(t)?t:e;return t&&(0,O.isString)(t)&&(0,J.hasWin)()&&(r=e.find(t)[0]||e),this.model.set("root",r),r},n.prototype.getRoot=function(){return this.model.get("root")},n.prototype.getComponents=function(t){var e=this;return t.components().filter(function(r){return e.__isLayerable(r)})},n.prototype.setOpen=function(t,e){t.set("open",e)},n.prototype.isOpen=function(t){return!!t.get("open")},n.prototype.setVisible=function(t,e){var r="__prev-display",i=t.getStyle(dp),l=i.display;if(e){var f=t.get(r);delete i.display,f&&(i.display=f,t.unset(r))}else l&&t.set(r,l),i.display="none";t.setStyle(i,dp),this.updateLayer(t),this.em.trigger("component:toggled")},n.prototype.isVisible=function(t){return!Vh(t.getStyle(dp))},n.prototype.setLocked=function(t,e){t.set("locked",e)},n.prototype.isLocked=function(t){return!!t.get("locked")},n.prototype.setName=function(t,e){t.set("custom-name",e)},n.prototype.getName=function(t){return t.getName()},n.prototype.getLayerData=function(t){var e=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:e==="selected",hovered:e==="hovered",visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},n.prototype.setLayerData=function(t,e,r){var i;r===void 0&&(r={});var l=this,f=l.em,d=l.config,h=e.open,g=e.selected,y=e.hovered,b=e.visible,P=e.locked,D=e.name,$=fp({fromLayers:!0},r);if((0,J.isDef)(h)&&this.setOpen(t,h),(0,J.isDef)(g))if(g){f.setSelected(t,$);var X=d.scrollCanvas;X&&((i=t.views)===null||i===void 0||i.forEach(function(lt){return lt.scrollIntoView(X)}))}else f.removeSelected(t,$);(0,J.isDef)(y)&&d.showHover&&(y?f.setHovered(t,$):f.setHovered(null,$)),(0,J.isDef)(b)&&b!==this.isVisible(t)&&this.setVisible(t,b),(0,J.isDef)(P)&&this.setLocked(t,P),(0,J.isDef)(D)&&this.setName(t,D)},n.prototype.componentChanged=function(t,e){var r;if(e===void 0&&(e={}),!e.fromLayers){var i=this,l=i.em,f=i.config,d=f.scrollLayers,h=this.model.get("opened"),g=l.getSelected(),y=g==null?void 0:g.parent();for(var b in h)h[b].set("open",!1),delete h[b];for(;y;)y.set("open",!0),h[y.cid]=y,y=y.parent();if(g&&d){var P=(r=g.viewLayer)===null||r===void 0?void 0:r.el;P==null||P.scrollIntoView(d)}}},n.prototype.getAll=function(){return this.view},n.prototype.render=function(){var t,e,r=this,i=r.config,l=r.model,f=jh.extend(i.extend);return this.view=new f({el:(t=this.view)===null||t===void 0?void 0:t.el,ItemView:f,level:0,config:i,opened:l.get("opened"),model:this.getRoot(),module:this}),(e=this.view)===null||e===void 0?void 0:e.render().el},n.prototype.destroy=function(){var t;(t=this.view)===null||t===void 0||t.remove()},n.prototype.__onRootChange=function(){var t,e=this.getRoot();(t=this.view)===null||t===void 0||t.setRoot(e),this.em.trigger(ed,e),this.__trgCustom()},n.prototype.__onComponent=function(t){this.updateLayer(t)},n.prototype.__isLayerable=function(t){var e=t.get("tagName"),r=this.config.hideTextnode,i=!r||!t.is("textnode")&&e!=="br";return i&&t.get("layerable")},n.prototype.__trgCustom=function(t){var e=this,r=e.__ctn,i=e.em,l=e.events;this.__ctn=r||(t==null?void 0:t.container),i.trigger(l.custom,{container:this.__ctn,root:this.getRoot()})},n.prototype.updateLayer=function(t,e){this.em.trigger(rd,t,e)},n}(Ft);const Bh=Hh;var Uh={assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""};const Wh=Uh;var zh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nd=function(a){zh(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.getDefaults=function(){return(0,O.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{type:"",src:""}},n.prototype.getType=function(){return this.get("type")},n.prototype.getSrc=function(){return this.get("src")},n.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},n.prototype.getExtension=function(){return this.getFilename().split(".").pop()},n}(S.Hn);const hp=nd;nd.prototype.idAttribute="src";var Kh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jc=function(){return jc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},jc.apply(this,arguments)},Gh=function(a){Kh(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return jc(jc({},hp.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},n}(hp);const $h=Gh;var qh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yh=function(a){qh(n,a);function n(t){var e=a.call(this,t)||this;e.options=t,e.collection=t.collection;var r=t.config||{};e.config=r,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.em=r.em,e.className=e.pfx+"asset",e.listenTo(e.model,"destroy remove",e.remove),e.model.view=e;var i=e.init&&e.init.bind(e);return i&&i(t),e}return n.prototype.__getBhv=function(){var t=this.em,e=t==null?void 0:t.Assets;return(e==null?void 0:e.__getBehaviour())||{}},n.prototype.template=function(t,e){var r=this.pfx;return`
      <div class="`.concat(r,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(r,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(r,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},n.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,O.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},n.prototype.getPreview=function(){return""},n.prototype.getInfo=function(){return""},n.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},n}(S.G7);const Xh=Yh;var Zh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),id=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},od=function(a){Zh(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getPreview=function(){var t=this,e=t.pfx,r=t.ppfx,i=t.model,l=i.get("src");return ut(ad||(ad=id([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),e,l,e,r)},n.prototype.getInfo=function(){var t=this,e=t.pfx,r=t.model,i=r.get("name"),l=r.get("width"),f=r.get("height"),d=r.get("unitDim"),h=l&&f?"".concat(l,"x").concat(f).concat(d):"";return i=i||r.getFilename(),ut(sd||(sd=id([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),e,i,e,h)},n.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},n.prototype.onClick=function(){var t=this,e=t.model,r=t.pfx,i=this.__getBhv().select,l=this.config.onClick,f=this.collection;f.trigger("deselectAll"),this.$el.addClass(r+"highlight"),(0,O.isFunction)(i)?i(e,!1):(0,O.isFunction)(l)?l(e):this.updateTarget(f.target)},n.prototype.onDblClick=function(){var t=this,e=t.em,r=t.model,i=this.__getBhv().select,l=this.config.onDblClick,f=this.collection,d=f.target,h=f.onSelect;(0,O.isFunction)(i)?i(r,!0):(0,O.isFunction)(l)?l(r):(this.updateTarget(d),e==null||e.Modal.close()),(0,O.isFunction)(h)&&h(r)},n.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},n}(Xh);const Jh=od;od.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var ad,sd,Ic=function(){return Ic=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ic.apply(this,arguments)},Qh={types:[],initialize:function(a,n){var t=this;n===void 0&&(n={});var e=n.em;this.em=e,this.opts=n,this.model=function(i,l){i===void 0&&(i={}),l===void 0&&(l={});var f,d,h;if(i&&i.type){var g=t.getBaseType();h=t.getType(i.type),f=h?h.model:g.model,d=h?h.view:g.view}else{var y=t.recognizeType(i);h=y.type,f=h.model,d=h.view,i=y.attributes}var b=new f(i,Ic(Ic({},l),{em:e}));return b.typeView=d,b};var r=this.init&&this.init.bind(this);r&&r()},recognizeType:function(a){for(var n=this.getTypes(),t=0;t<n.length;t++){var e=n[t],r=e.isType(a);if(r=typeof r=="boolean"&&r?{type:e.id}:r,r)return{type:e,attributes:r}}return{type:this.getBaseType(),attributes:a}},getBaseType:function(){var a=this.getTypes();return a[a.length-1]},getTypes:function(){return this.types},getType:function(a){for(var n=this.getTypes(),t=0;t<n.length;t++){var e=n[t];if(e.id===a)return e}},addType:function(a,n){var t=this.getType(a),e=this.getBaseType(),r=t?t.model:e.model,i=t?t.view:e.view,l=n.model,f=n.view,d=n.isType;l=l instanceof S.Hn||(0,O.isFunction)(l)?l:r.extend(l||{}),f=f instanceof S.G7||(0,O.isFunction)(f)?f:i.extend(f||{}),this.extendViewApi&&!n.model&&!n.view&&(f=f.extend(n)),t?(t.model=l,t.view=f,t.isType=d||t.isType):(n.id=a,n.model=l,n.view=f,n.isType=d||function(h){if(h&&h.type==a)return!0},this.getTypes().unshift(n))}};const ld=Qh;var tv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ev=S.FE.extend(ld),ud=function(a){tv(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(ev);const vp=ud;ud.prototype.types=[{id:"image",model:$h,view:Jh,isType:function(a){return typeof a=="string"?{type:"image",src:a}:a}}];var rv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cd=function(a){rv(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t,e.config=t.config,e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.em=e.config.em;var r=e.collection;return e.listenTo(r,"reset",e.renderAssets),e.listenTo(r,"add",e.addToAsset),e.listenTo(r,"remove",e.removedAsset),e.listenTo(r,"deselectAll",e.deselectAll),e}return n.prototype.template=function(t){var e=t.pfx,r=t.ppfx,i=t.em,l="";return this.config.showUrlInput&&(l=`
          <form class="`.concat(e,`add-asset">
            <div class="`).concat(r,"field ").concat(e,`add-field">
              <input placeholder="`).concat(i==null?void 0:i.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(r,'btn-prim">').concat(i==null?void 0:i.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(e,`assets-cont">
      <div class="`).concat(e,`assets-header">
        `).concat(l,`
      </div>
      <div class="`).concat(e,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},n.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),r=e&&e.value.trim(),i=this.config.handleAdd;if(r){e.value="";var l=this.getAssetsEl();l&&(l.scrollTop=0),i?i.bind(this)(r):this.options.globalCollection.add(r,{at:0})}},n.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},n.prototype.getAddInput=function(){return(!this.inputUrl||!this.inputUrl.value)&&(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},n.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},n.prototype.addToAsset=function(t){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(t)},n.prototype.addAsset=function(t,e){e===void 0&&(e=null);var r=e,i=this.collection,l=this.config,f=new t.typeView({model:t,collection:i,config:l}).render().el;if(r)r.appendChild(f);else{var d=this.getAssetsEl();d&&d.insertBefore(f,d.firstChild)}return f},n.prototype.toggleNoAssets=function(t){t===void 0&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var r=this.config.noAssets;r&&e.append(r)}},n.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},n.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),r=this.$el.find(".".concat(this.pfx,"assets"));r.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(i){return t.addAsset(i,e)}),r.append(e)},n.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},n}(S.G7);const nv=cd;cd.prototype.events={submit:"handleSubmit"};var iv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ov=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},av=function(a){iv(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t;var r=t.config||{};e.module=t.module,e.config=r,e.em=e.config.em,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.target=e.options.globalCollection||{},e.uploadId=e.pfx+"uploadFile",e.disabled=r.disableUpload!==void 0?r.disableUpload:!r.upload&&!r.embedAsBase64,e.multiUpload=r.multiUpload!==void 0?r.multiUpload:!0;var i=r.uploadFile;return i?e.uploadFile=i.bind(e):!r.upload&&r.embedAsBase64&&(e.uploadFile=n.embedAsBase64),e.delegateEvents(),e}return n.prototype.template=function(t){var e=t.pfx,r=t.title,i=t.uploadId,l=t.disabled,f=t.multiUpload;return ut(fd||(fd=ov([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),e,r,i,l?"disabled":"",f?"multiple":"")},n.prototype.events=function(){return{"change [data-input]":"uploadFile"}},n.prototype.onUploadStart=function(){var t=this.module;t&&t.__propEv("asset:upload:start")},n.prototype.onUploadEnd=function(t){var e=this,r=e.$el,i=e.module;i&&i.__propEv("asset:upload:end",t);var l=r.find("input");l&&l.val("")},n.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e&&e.__propEv("asset:upload:error",t)},n.prototype.onUploadResponse=function(t,e){var r=this,i=r.module,l=r.config,f=r.target,d;try{d=typeof t=="string"?JSON.parse(t):t}catch{d=t}i&&i.__propEv("asset:upload:response",d),l.autoAdd&&f&&f.add(d.data,{at:0}),this.onUploadEnd(t),e==null||e(d)},n.prototype.uploadFile=function(t,e){var r=this,i=t.dataTransfer?t.dataTransfer.files:t.target.files,l=this.config,f=l.beforeUpload,d=f&&f(i);if(d!==!1){var h=new FormData,g=l.params,y=l.customFetch,b=l.fetchOptions;for(var P in g)h.append(P,g[P]);if(this.multiUpload)for(var D=0;D<i.length;D++)h.append("".concat(l.uploadName,"[]"),i[D]);else i.length&&h.append(l.uploadName,i[0]);var $=l.upload,X=l.headers,lt="X-Requested-With";if(typeof X[lt]>"u"&&(X[lt]="XMLHttpRequest"),$){this.onUploadStart();var Tt={method:"post",credentials:l.credentials||"include",headers:X,body:h},bt=(b==null?void 0:b(Tt))||Tt,Zt=y?y($,bt):Lc($,bt).then(function(ue){return(ue.status/200|0)==1?ue.text():ue.text().then(function(Oe){return Promise.reject(Oe)})});return Zt.then(function(ue){return r.onUploadResponse(ue,e)}).catch(function(ue){return r.onUploadError(ue)})}}},n.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var e=this.uploadForm;"draggable"in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return e.className="",!1},this.uploadForm.ondrop=function(r){e.className="",r.preventDefault(),t.uploadFile(r)})}},n.prototype.initDropzone=function(t){var e=this,r=0,i=this.config,l=t.model,f=t.el,d=l.Editor,h=l.Canvas.getBody(),g=this.ppfx,y="".concat(g,"dropzone-active"),b="".concat(g,"dropzone"),P=function(){f.className=f.className.replace(y,"").trim(),r=0},D=function(){return r||(f.className+=" ".concat(y),r=1),!1},$=function(){return P(),!1},X=function(lt){if(P(),lt.preventDefault(),lt.stopPropagation(),e.uploadFile(lt),i.openAssetsOnDrop&&d){var Tt=d.getSelected();d.runCommand("open-assets",{target:Tt,onSelect:function(){d.Modal.close(),d.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(b,'">').concat(i.dropzoneContent,"</div>")),P(),"draggable"in f&&[f,h].forEach(function(lt){lt.ondragover=D,lt.ondragleave=$,lt.ondrop=X})},n.prototype.render=function(){var t=this,e=t.$el,r=t.pfx,i=t.em;return e.html(this.template({title:i&&i.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:r})),this.initDrop(),e.attr("class",r+"file-uploader"),this},n.embedAsBase64=function(t,e){var r=this,i=t.dataTransfer?t.dataTransfer.files:t.target.files,l={data:[]};if(!FileReader){this.onUploadError(new Error("Unsupported platform, FileReader is not defined"));return}for(var f=[],d=/^(.+)\/(.+)$/,h=function(P){var D=new Promise(function($,X){var lt=new FileReader;lt.addEventListener("load",function(Tt){var bt,Zt=P.name,ue=d.exec(P.type);if(ue?bt=ue[1]:bt=P.type,bt==="image"){var Oe={src:lt.result,name:Zt,type:bt,height:0,width:0},Ie=new Image;Ie.addEventListener("error",function(ee){X(ee)}),Ie.addEventListener("load",function(){Oe.height=Ie.height,Oe.width=Ie.width,$(Oe)}),Ie.src=Oe.src}else $(bt?{src:lt.result,name:Zt,type:bt}:lt.result)}),lt.addEventListener("error",function(Tt){X(Tt)}),lt.addEventListener("abort",function(Tt){X("Aborted")}),lt.readAsDataURL(P)});f.push(D)},g=0,y=i;g<y.length;g++){var b=y[g];h(b)}return Promise.all(f).then(function(P){l.data=P,r.onUploadResponse(l,e)},function(P){r.onUploadError(P)})},n}(S.G7);const sv=av;var fd,lv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pl=function(){return pl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},pl.apply(this,arguments)},pd=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},dd="asset",Pa="".concat(dd,":"),uv="".concat(Pa,"select"),cv="".concat(Pa,"update"),fv="".concat(Pa,"add"),hd="".concat(Pa,"remove"),pv="".concat(hd,":before"),dv="".concat(Pa,"custom"),hv="".concat(Pa,"open"),vv="".concat(Pa,"close"),Rc="".concat(Pa,"upload"),gv="".concat(Rc,":start"),mv="".concat(Rc,":end"),yv="".concat(Rc,":error"),_v="".concat(Rc,":response"),fu="open-assets",wv={all:dd,select:uv,update:cv,add:fv,remove:hd,removeBefore:pv,custom:dv,open:hv,close:vv,uploadStart:gv,uploadEnd:mv,uploadError:yv,uploadResponse:_v},bv=function(a){lv(n,a);function n(t){var e=a.call(this,t,"AssetManager",new vp([],t),wv,Wh)||this;e.storageKey="assets",e.Asset=hp,e.Assets=vp;var r=e,i=r.all,l=r.config;e.assetsVis=new vp([]);var f=l.pStylePrefix;return f&&(l.stylePrefix="".concat(f).concat(l.stylePrefix)),i.on("add",function(d){return e.getAllVisible().add(d)}),i.on("remove",function(d){return e.getAllVisible().remove(d)}),e.__onAllEvent=(0,O.debounce)(function(){return e.__trgCustom()},0),e}return n.prototype.__propEv=function(t){for(var e,r,i=[],l=1;l<arguments.length;l++)i[l-1]=arguments[l];(e=this.em).trigger.apply(e,pd([t],i,!1)),(r=this.getAll()).trigger.apply(r,pd([t],i,!1))},n.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;!t.container&&!e.open||this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:e.types||[],container:e.container,close:function(){return t.close()},remove:function(r,i){return t.remove(r,i)},select:function(r,i){var l=t.add(r);(0,O.isFunction)(e.select)&&e.select(l,i)},options:e.options||{}}},n.prototype.open=function(t){t===void 0&&(t={});var e=this.em.Commands;e.run(fu,pl({types:["image"],select:function(){}},t))},n.prototype.close=function(){var t=this.em.Commands;t.stop(fu)},n.prototype.isOpen=function(){var t=this.em.Commands;return!!(t!=null&&t.isActive(fu))},n.prototype.add=function(t,e){return e===void 0&&(e={}),typeof e.at>"u"&&(e.at=0),this.all.add(t,e)},n.prototype.get=function(t){return this.all.where({src:t})[0]||null},n.prototype.getAll=function(){return this.all},n.prototype.getAllVisible=function(){return this.assetsVis},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t)},n.prototype.getContainer=function(){var t,e=this.__getBehaviour();return e.container||((t=this.am)===null||t===void 0?void 0:t.el)},n.prototype.getAssetsEl=function(){var t;return(t=this.am)===null||t===void 0?void 0:t.el.querySelector("[data-el=assets]")},n.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var r=this.__viewParams();r.fu=this.FileUploader(),this.am=new nv(pl({},r)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},n.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},n.prototype.addType=function(t,e){this.getAll().addType(t,e)},n.prototype.getType=function(t){return this.getAll().getType(t)},n.prototype.getTypes=function(){return this.getAll().getTypes()},n.prototype.AssetsView=function(){return this.am},n.prototype.FileUploader=function(){return this.fu||(this.fu=new sv(this.__viewParams())),this.fu},n.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this,r=e.em,i=e.events;r.on("run:".concat(fu),function(){return t.__propEv(i.open)}),r.on("stop:".concat(fu),function(){return t.__propEv(i.close)})},n.prototype.postRender=function(t){var e;this.config.dropzone&&((e=this.fu)===null||e===void 0||e.initDropzone(t))},n.prototype.setTarget=function(t){this.assetsVis.target=t},n.prototype.onSelect=function(t){this.assetsVis.onSelect=t},n.prototype.onClick=function(t){this.config.onClick=t},n.prototype.onDblClick=function(t){this.config.onDblClick=t},n.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=pl(pl({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(t){return this._bhv||{}},n.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(t=this.fu)===null||t===void 0||t.remove(),(e=this.am)===null||e===void 0||e.remove(),this._bhv={}},n}(xt);const Cv=bv;var gp={placeholder:"eg. Text here"},xv={locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:{assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",traits:{labels:{},attributes:{id:gp,alt:gp,title:gp,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}}},messagesAdd:void 0};const Sv=xv;var Ov=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tv=function(a){Ov(n,a);function n(t){var e=a.call(this,t,"I18n",Sv)||this,r=e.config.messagesAdd;return r&&e.addMessages(r),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return n.prototype.setLocale=function(t){var e=this,r=e.em,i=e.config,l={value:t,valuePrev:i.locale};return r&&r.trigger("i18n:locale",l),i.locale=t,this},n.prototype.getLocale=function(){return this.config.locale},n.prototype.getMessages=function(t,e){e===void 0&&(e={});var r=this.config.messages;return t&&!r[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?r[t]:r},n.prototype.setMessages=function(t){var e=this,r=e.em,i=e.config;return i.messages=t,r&&r.trigger("i18n:update",t),this},n.prototype.addMessages=function(t){var e=this.em,r=this.config.messages;return e&&e.trigger("i18n:add",t),this.setMessages((0,J.deepMerge)(r,t)),this},n.prototype.t=function(t,e){e===void 0&&(e={});var r=this.config,i=e.params||{},l=e.l||this.getLocale(),f=e.lFlb||r.localeFallback,d=this._getMsg(t,l,e);return d||(d=this._getMsg(t,f,e)),!d&&this._debug("'".concat(t,"' i18n key not found in '").concat(l,"' lang"),e),d=d&&(0,O.isString)(d)?this._addParams(d,i):d,d},n.prototype._localLang=function(){var t=(0,J.hasWin)()&&window.navigator||{},e=t.language||t.userLanguage;return e?e.split("-")[0]:"en"},n.prototype._addParams=function(t,e){var r=new RegExp("{([\\w\\d-]*)}","g");return t.replace(r,function(i,l){return e[l]||""}).trim()},n.prototype._getMsg=function(t,e,r){r===void 0&&(r={});var i=this.getMessages(e,r);if(i){var l=i[t];return!l&&t.indexOf(".")>0&&(l=t.split(".").reduce(function(f,d){if(!(0,O.isUndefined)(f))return f[d]},i)),l}},n.prototype._debug=function(t,e){e===void 0&&(e={});var r=this,i=r.em,l=r.config;(e.debug||l.debug)&&i&&i.logWarning(t)},n.prototype.destroy=function(){},n}(Ft);const Ev=Tv;var Pv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yo=function(){return yo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},yo.apply(this,arguments)},Av=function(){},kv=tr.q.Target,vd={id:"sorter-target",type:kv},Mv=function(a){Pv(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t){t===void 0&&(t={}),this.opt=t||{},(0,O.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var e=t||{};this.elT=0,this.elL=0,this.borderOffset=e.borderOffset||10;var r=e.container;this.el=typeof r=="string"?document.querySelector(r):r,this.$el=(0,k.default)(this.el),this.containerSel=e.containerSel||"div",this.itemSel=e.itemSel||"div",this.draggable=e.draggable||!0,this.nested=!!e.nested,this.pfx=e.pfx||"",this.ppfx=e.ppfx||"",this.freezeClass=e.freezeClass||this.pfx+"freezed",this.onStart=e.onStart||Av,this.onEndMove=e.onEndMove,this.customTarget=e.customTarget,this.onEnd=e.onEnd,this.direction=e.direction||"v",this.onMoveClb=e.onMove,this.relative=e.relative||!1,this.ignoreViewChildren=!!e.ignoreViewChildren,this.plh=e.placer,this.wmargin=e.wmargin||0,this.offTop=e.offsetTop||0,this.offLeft=e.offsetLeft||0,this.document=e.document||document,this.em=e.em,this.canvasRelative=!!e.canvasRelative,this.selectOnEnd=!e.avoidSelectOnEnd,this.scale=e.scale,this.em&&this.em.on&&(this.em.on("change:canvasOffset",this.updateOffset),this.updateOffset())},n.prototype.getScale=function(){return(0,O.result)(this,"scale")||1},n.prototype.getContainerEl=function(t){if(t&&(this.el=t),!this.el){var e=this.opt.container;this.el=typeof e=="string"?document.querySelector(e):e,this.$el=(0,k.default)(this.el)}return this.el},n.prototype.getDocuments=function(t){var e=this.em,r=t?t.ownerDocument:e==null?void 0:e.Canvas.getBody().ownerDocument,i=[document];return r&&i.push(r),i},n.prototype.updateOffset=function(){var t,e=((t=this.em)===null||t===void 0?void 0:t.get("canvasOffset"))||{};this.offTop=e.top,this.offLeft=e.left},n.prototype.setDropContent=function(t){delete this.dropModel,this.dropContent=t},n.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var r=e.Canvas,i=r.getDocument(),l=null;if(i.caretRangeFromPoint){var f=(0,Xt.VB)(t);l=i.caretRangeFromPoint(f.clientX,f.clientY)}else t.rangeParent&&(l=i.createRange(),l.setStart(t.rangeParent,t.rangeOffset));var d=r.getWindow().getSelection();r.getFrameEl().focus(),d==null||d.removeAllRanges(),l&&(d==null||d.addRange(l)),this.setContentEditable(this.activeTextModel,!0)}},n.prototype.setContentEditable=function(t,e){if(t){var r=t.getEl();r.contentEditable!=e&&(r.contentEditable=e)}},n.prototype.toggleSortCursor=function(t){var e=this.em,r=e==null?void 0:e.Canvas;r&&(t?r.startAutoscroll():r.stopAutoscroll())},n.prototype.setDragHelper=function(t,e){for(var r=e||"",i=t.cloneNode(!0),l=t.getBoundingClientRect(),f=getComputedStyle(t),d="",h=0;h<f.length;h++){var g=f[h];d+="".concat(g,":").concat(f.getPropertyValue(g),";")}if(document.body.appendChild(i),i.className+=" ".concat(this.pfx,"bdrag"),i.setAttribute("style",d),this.dragHelper=i,i.style.width="".concat(l.width,"px"),i.style.height="".concat(l.height,"px"),r&&this.moveDragHelper(r),this.em){var y=(0,k.default)(this.em.Canvas.getBody().ownerDocument);y.off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)}(0,k.default)(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},n.prototype.moveDragHelper=function(t){var e=t.target.ownerDocument;if(!(!this.dragHelper||!e)){var r=t.pageY,i=t.pageX,l=0,f=0,d=e.defaultView||e.parentWindow,h=d.frameElement,g=this.dragHelper.style;if(h){var y=h.getBoundingClientRect();l=y.top+document.documentElement.scrollTop,f=y.left+document.documentElement.scrollLeft,r=t.clientY,i=t.clientX}g.top=r+l+"px",g.left=i+f+"px"}},n.prototype.matches=function(t,e){return J.matches.call(t,e)},n.prototype.closest=function(t,e){if(t)for(var r=t.parentNode;r&&r.nodeType===1;){if(this.matches(r,e))return r;r=r.parentNode}},n.prototype.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},n.prototype.createPlaceholder=function(){var t=this.pfx,e=document.createElement("div"),r=document.createElement("div");return e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",r.className=t+"placeholder-int",e.appendChild(r),e},n.prototype.startSort=function(t,e){var r,i;e===void 0&&(e={});var l=this,f=l.em,d=l.itemSel,h=l.containerSel,g=l.plh,y=this.getContainerEl(e.container),b=this.getDocuments(t),P;delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,t&&!this.matches(t,"".concat(d,", ").concat(h))&&(t=this.closest(t,d)),this.sourceEl=t,g||(this.plh=this.createPlaceholder(),y.appendChild(this.plh)),t&&(P=this.getSourceModel(t),P!=null&&P.set&&P.set("status","freezed"),this.srcModel=P),(0,Xt.on)(y,"mousemove dragover",this.onMove),(0,Xt.on)(b,"mouseup dragend touchend",this.endMove),(0,Xt.on)(b,"keydown",this.rollback),this.onStart({sorter:this,target:P,parent:P&&((r=P.parent)===null||r===void 0?void 0:r.call(P)),index:P&&((i=P.index)===null||i===void 0?void 0:i.call(P))}),f==null||f.clearSelection(),this.toggleSortCursor(!0),f==null||f.trigger("sorter:drag:start",t,P)},n.prototype.getTargetModel=function(t){var e=t||this.target;return(0,k.default)(e).data("model")},n.prototype.getSourceModel=function(t,e){var r=this,i=e===void 0?{}:e,l=i.target,f=i.avoidChildren,d=f===void 0?1:f,h=this,g=h.em,y=h.sourceEl,b=t||y,P=this,D=P.dropModel,$=P.dropContent,X=function(Zt){return Zt&&l&&Zt.opt&&Zt.opt.avoidChildren&&r.isTextableActive(Zt,l)};if($&&g){if(X(D)&&(D=void 0),!D){var lt=g.Components.getComponents(),Tt={avoidChildren:d,avoidStore:1,avoidUpdateStyle:1},bt=lt.add($,yo(yo({},Tt),{temporary:!0}));if(D=lt.remove(bt,Tt),D=D instanceof Array?D[0]:D,this.dropModel=D,X(D))return this.getSourceModel(b,{target:l,avoidChildren:0})}return D}return b&&(0,k.default)(b).data("model")},n.prototype.selectTargetModel=function(t,e){if(!(t instanceof S.FE)&&!(e&&e===t)){var r=this.targetModel;if(r&&r!==this.srcModel&&r.set("status",""),t!=null&&t.set){var i=this.em.Canvas,l=tr.q.Select,f=tr.q.Hover,d=tr.q.Spacing;[l,f,d].forEach(function(h){return i.removeSpots({type:h})}),i.addSpot(yo(yo({},vd),{component:t})),t.set("status","selected-parent"),this.targetModel=t}}},n.prototype.onMove=function(t){var e=t,r=this,i=r.em,l=r.onMoveClb,f=r.plh,d=r.customTarget;this.moved=!0;var h=f.style.display;(!h||h==="none")&&(f.style.display="block");var g=this.offset(this.el);this.elT=this.wmargin?Math.abs(g.top):g.top,this.elL=this.wmargin?Math.abs(g.left):g.left;var y=t.pageY-this.elT+this.el.scrollTop,b=t.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&i){var P=i.Canvas.getMouseRelativeCanvas(t,{noScroll:1});b=P.x,y=P.y}this.rX=b,this.rY=y,this.eventMove=t;var D=this.getSourceModel(),$=d?d({sorter:this,event:t}):t.target,X=this.dimsFromTarget($,b,y),lt=this.target,Tt=lt&&this.getTargetModel(lt);if(this.selectTargetModel(Tt,D),Tt||(f.style.display="none"),!!lt){this.lastDims=X;var bt=this.findPosition(X,b,y);this.isTextableActive(D,Tt)?(this.activeTextModel=Tt,f.style.display="none",this.lastPos=bt,this.updateTextViewCursorPosition(e)):(this.disableTextable(),delete this.activeTextModel,(!this.lastPos||this.lastPos.index!=bt.index||this.lastPos.method!=bt.method)&&(this.movePlaceholder(this.plh,X,bt,this.prevTargetDim),this.$plh||(this.$plh=(0,k.default)(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=bt)),(0,O.isFunction)(l)&&l({event:t,target:D,parent:Tt,index:bt.index+(bt.method=="after"?1:0)}),i&&i.trigger("sorter:drag",{target:lt,targetModel:Tt,sourceModel:D,dims:X,pos:bt,x:b,y})}},n.prototype.isTextableActive=function(t,e){var r;return((r=t==null?void 0:t.get)===null||r===void 0?void 0:r.call(t,"textable"))&&(e==null?void 0:e.isInstanceOf("text"))},n.prototype.disableTextable=function(){var t=this.activeTextModel;t==null||t.getView().disableEditing(),this.setContentEditable(t,!1)},n.prototype.isInFlow=function(t,e){if(!t)return!1;e=e||document.body;var r=t;return r.offsetHeight,!!this.styleInFlow(r,e)},n.prototype.styleInFlow=function(t,e){if(!(0,Xt.BM)(t)){var r=t.style||{},i=(0,k.default)(t),l=e&&(0,k.default)(e);if(!(r.overflow&&r.overflow!=="visible")){var f=i.css("float");if(!(f&&f!=="none")&&!(l&&l.css("display")=="flex"&&l.css("flex-direction")!=="column")){switch(r.position){case"static":case"relative":case"":break;default:return}switch(t.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(i.css("display")){case"block":case"list-item":case"table":case"flex":case"grid":return!0}}}}},n.prototype.validTarget=function(t,e){var r=this.getTargetModel(t),i=this.getSourceModel(e,{target:r});e=i&&i.view&&i.view.el,t=r&&r.view&&r.view.el;var l={valid:!0,src:e,srcModel:i,trg:t,trgModel:r,draggable:!1,droppable:!1,dragInfo:"",dropInfo:""};if(!e||!t)return l.valid=!1,l;var f=i.get("draggable");if((0,O.isFunction)(f)){var d=f(i,r);l.dragInfo=d,l.draggable=d,f=d}else f=f instanceof Array?f.join(", "):f,l.dragInfo=f,f=(0,O.isString)(f)?this.matches(t,f):f,l.draggable=f;var h=r.get("droppable");if((0,O.isFunction)(h)){var d=h(i,r);l.droppable=d,l.dropInfo=d,h=d}else h=h instanceof S.FE?1:h,h=h instanceof Array?h.join(", "):h,l.dropInfo=h,h=(0,O.isString)(h)?this.matches(e,h):h,h=f&&this.isTextableActive(i,r)?1:h,l.droppable=h;return(!h||!f)&&(l.valid=!1),l},n.prototype.dimsFromTarget=function(t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var i=this.em,l=[];if(!t||(this.matches(t,"".concat(this.itemSel,", ").concat(this.containerSel))||(t=this.closest(t,this.itemSel)),this.draggable instanceof Array&&(t=this.closest(t,this.draggable.join(","))),!t))return l;if(this.prevTarget&&this.prevTarget!=t&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(t,this.containerSel);var f=this.validTarget(t);if(i&&i.trigger("sorter:drag:validation",f),!f.valid&&this.targetP)return this.dimsFromTarget(this.targetP,e,r);this.prevTarget=t,this.prevTargetDim=this.getDim(t),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(t)}if(this.prevTarget==t&&(l=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,e,r)||!this.nested&&!this.cacheDims.length){var d=this.targetP;d&&this.validTarget(d).valid&&(l=this.cacheDimsP,this.target=d)}return delete this.lastPos,l},n.prototype.getTargetFromEl=function(t){var e=t,r,i=this.targetPrev,l=this.em,f=this.containerSel,d=this.itemSel;if(this.matches(e,"".concat(d,", ").concat(f))||(e=this.closest(e,d)),this.draggable instanceof Array&&(e=this.closest(e,this.draggable.join(","))),i&&i!=e&&delete this.targetPrev,!this.targetPrev){r=this.closest(e,f);var h=this.validTarget(e);if(l&&l.trigger("sorter:drag:validation",h),!h.valid&&r)return this.getTargetFromEl(r);this.targetPrev=e}return this.nearElBorders(e)&&(r=this.closest(e,f),r&&this.validTarget(r).valid&&(e=r)),e},n.prototype.nearElBorders=function(t){var e=10,r=t.getBoundingClientRect(),i=t.ownerDocument.body,l=this.getCurrentPos(),f=l.x,d=l.y,h=r.top+i.scrollTop,g=r.left+i.scrollLeft,y=r.width,b=r.height;if(d<h+e||d>h+b-e||f<g+e||f>g+y-e)return 1},n.prototype.getCurrentPos=function(){var t=this.eventMove,e=(t==null?void 0:t.pageX)||0,r=(t==null?void 0:t.pageY)||0;return{x:e,y:r}},n.prototype.getDim=function(t){var e=this,r=e.em,i=e.canvasRelative,l=r==null?void 0:r.Canvas,f=l?l.getElementOffsets(t):{},d,h,g,y;if(i&&r){var b=l.getElementPos(t,{noScroll:1});d=b.top,h=b.left,g=b.height,y=b.width}else{var P=this.offset(t);d=this.relative?t.offsetTop:P.top-(this.wmargin?-1:1)*this.elT,h=this.relative?t.offsetLeft:P.left-(this.wmargin?-1:1)*this.elL,g=t.offsetHeight,y=t.offsetWidth}return{top:d,left:h,height:g,width:y,offsets:f}},n.prototype.getChildrenDim=function(t){var e=this,r=[];if(!t)return r;var i=this.getTargetModel(t);if(i&&i.view&&!this.ignoreViewChildren){var l=i.getCurrentView?i.getCurrentView():i.view;t=l.getChildrenContainer()}return(0,O.each)(t.children,function(f,d){var h=f,g=(0,J.getModel)(h,k.default),y=g&&g.index?g.index():d;if(!(!(0,Xt.BM)(h)&&!e.matches(h,e.itemSel))){var b=e.getDim(h),P=e.direction,D;P=="v"?D=!0:P=="h"?D=!1:D=e.isInFlow(h,t),b.dir=D,b.el=h,b.indexEl=y,r.push(b)}}),r},n.prototype.nearBorders=function(t,e,r){var i=!1,l=this.borderOffset,f=e||0,d=r||0,h=t.top,g=t.left,y=t.height,b=t.width;return(h+l>d||d>h+y-l||g+l>f||f>g+b-l)&&(i=!0),i},n.prototype.findPosition=function(t,e,r){for(var i={index:0,indexEl:0,method:"before"},l=0,f=0,d=0,h=0,g=0,y=0,b=0,P,D=0,$=t.length;D<$;D++){P=t[D];var X=P.top,lt=P.left,Tt=P.height,bt=P.width;if(d=lt+bt,b=X+Tt,g=lt+bt/2,y=X+Tt/2,!(f&&lt>f||h&&y>=h||l&&d<l))if(i.index=D,i.indexEl=P.indexEl,!P.dir)r<b&&(h=b),e<g?(f=g,i.method="before"):(l=g,i.method="after");else if(r<y){i.method="before";break}else i.method="after"}return i},n.prototype.movePlaceholder=function(t,e,r,i){var l=0,f=0,d=0,h="",g="",y="px",b=5,P=r.method,D=e[r.index];if(t.classList.remove("vertical"),t.classList.add("horizontal"),D){var $=D.top,X=D.left,lt=D.height,Tt=D.width;D.dir?(h=Tt+y,g="auto",f=P=="before"?$-l:$+lt-l,d=X):(h="auto",g=lt-l*2+y,f=$+l,d=P=="before"?X-l:X+Tt-l,t.classList.remove("horizontal"),t.classList.add("vertical"))}else{if(!this.nested){t.style.display="none";return}if(i){var bt=i.offsets||{},Zt=bt.paddingTop||b,ue=bt.paddingLeft||b;f=i.top+Zt,d=i.left+ue,h=parseInt("".concat(i.width))-ue*2+y,g="auto"}}t.style.top=f+y,t.style.left=d+y,h&&(t.style.width=h),g&&(t.style.height=g)},n.prototype.parents=function(t){return t?[t].concat(this.parents(t.parent())):[]},n.prototype.sort=function(t,e){var r=t.parents.filter(function(d){return e.parents.includes(d)}),i=r[0];if(!i)return e.model.index()-t.model.index();var l=t.parents[t.parents.indexOf(i)-1],f=e.parents[e.parents.indexOf(i)-1];return f.index()-l.index()},n.prototype.endMove=function(){var t=this,e,r=this.sourceEl,i=[],l=this.getDocuments(),f=this.getContainerEl(),d=this.onEndMove,h=this.onEnd,g=this,y=g.target,b=g.lastPos,P;if((0,Xt.S1)(f,"mousemove dragover",this.onMove),(0,Xt.S1)(l,"mouseup dragend touchend",this.endMove),(0,Xt.S1)(l,"keydown",this.rollback),this.plh.style.display="none",r&&(P=this.getSourceModel(),this.selectOnEnd&&P&&P.set&&(P.set("status",""),P.set("status","selected"))),this.moved&&y){var D=this.toMove,$=(0,O.isArray)(D)?D:D?[D]:[r],X=0;$.length===1?i.push(this.move(y,$[0],b)):$.map(function(bt){return{model:bt,parents:t.parents(bt)}}).sort(this.sort).forEach(function(bt){var Zt=bt.model,ue=Zt.index(),Oe=Zt.parent().getEl();i.push(t.move(y,Zt,yo(yo({},b),{indexEl:b.indexEl-X,index:b.index-X}))),Oe===y&&ue<=b.index&&X++})}this.plh&&(this.plh.style.display="none");var lt=this.dragHelper;if(lt&&(lt.parentNode.removeChild(lt),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),(e=this.em)===null||e===void 0||e.Canvas.removeSpots(vd),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,O.isFunction)(d)){var Tt={target:P,parent:P&&P.parent(),index:P&&P.index()};i.length?i.forEach(function(bt){return d(bt,t,Tt)}):d(null,this,yo(yo({},Tt),{cancelled:1}))}(0,O.isFunction)(h)&&h({sorter:this})},n.prototype.move=function(t,e,r){var i=this,l=i.em,f=i.dropContent,d=(0,J.getElement)(e),h=[],g=r.method==="after"?r.indexEl+1:r.indexEl,y=this.validTarget(t,d),b=(0,k.default)(t).data("collection"),P=y.trgModel,D=y.srcModel,$=y.draggable,X=P instanceof S.FE?1:y.droppable,lt,Tt;if(b&&X&&$){var bt={at:g,action:"move-component"},Zt=this.isTextableActive(D,P);if(f)lt=(0,O.isFunction)(f)?f():f,bt.avoidUpdateStyle=!0,bt.action="add-component";else{var ue=D.collection.indexOf(D),Oe=b===D.collection,Ie=ue===g||ue===g-1,ee=!Oe||!Ie||Zt;ee&&(lt=D.collection.remove(D,{temporary:!0}),Oe&&g>ue&&(bt.at=g-1))}lt&&(Zt?(delete bt.at,Tt=P.getView().insertComponent(lt,bt)):Tt=b.add(lt,bt)),delete this.dropContent,delete this.prevTarget}else if(l){var je=y.dropInfo||(P==null?void 0:P.get("droppable")),Ze=y.dragInfo||(D==null?void 0:D.get("draggable"));!b&&h.push("Target collection not found"),!X&&je&&h.push("Target is not droppable, accepts [".concat(je,"]")),!$&&Ze&&h.push("Component not draggable, acceptable by [".concat(Ze,"]")),l.logWarning("Invalid target position",{errors:h,model:D,context:"sorter",target:P})}return l==null||l.trigger("sorter:drag:end",{targetCollection:b,modelToDrop:lt,warns:h,validResult:y,dst:t,srcEl:d}),Tt},n.prototype.rollback=function(t){(0,Xt.S1)(this.getDocuments(),"keydown",this.rollback);var e=t.which||t.keyCode;e==27&&(this.moved=!1,this.endMove())},n}(S.G7);const Lv=Mv;var ds=function(){return ds=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ds.apply(this,arguments)},Dv=function(a,n){n===void 0&&(n={});var t=n.prefix||"",e=document.createElement("i");return e.className=t+"resizer-h "+t+"resizer-h-"+a,e.setAttribute("data-"+t+"handler",a),e},jv=function(a,n){var t=n||window,e=a.getBoundingClientRect();return{left:e.left+t.pageXOffset,top:e.top+t.pageYOffset,width:e.width,height:e.height}},Iv=function(){function a(n){n===void 0&&(n={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=ds({},this.defOpts),this.setOptions(n),(0,O.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return a.prototype.getConfig=function(){return this.opts},a.prototype.setOptions=function(n,t){n===void 0&&(n={}),this.opts=ds(ds({},t?this.defOpts:this.opts),n),this.setup()},a.prototype.setup=function(){var n=this.opts,t=n.prefix||"",e=n.appendTo||document.body,r=this.container;for(r||(r=document.createElement("div"),r.className="".concat(t,"resizer-c"),e.appendChild(r),this.container=r);r.firstChild;)r.removeChild(r.firstChild);var i={};["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(d){return i[d]=n[d]?Dv(d,n):null});for(var l in i){var f=i[l];f&&r.appendChild(f)}this.handlers=i,this.mousePosFetcher=n.mousePosFetcher,this.updateTarget=n.updateTarget,this.posFetcher=n.posFetcher,this.onStart=n.onStart,this.onMove=n.onMove,this.onEnd=n.onEnd,this.onUpdateContainer=n.onUpdateContainer},a.prototype.toggleFrames=function(n){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,O.each)(t,function(e){return e.style.pointerEvents=n?"none":""})}},a.prototype.isHandler=function(n){var t=this.handlers;for(var e in t)if(t[e]===n)return!0;return!1},a.prototype.getFocusedEl=function(){return this.el},a.prototype.getParentEl=function(){var n;return(n=this.el)===null||n===void 0?void 0:n.parentElement},a.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},a.prototype.getElementPos=function(n,t){t===void 0&&(t={});var e=this.posFetcher;return e?e(n,t):jv(n)},a.prototype.focus=function(n){n&&n===this.el||(this.el=n,this.updateContainer({forceShow:!0}),(0,Xt.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},a.prototype.blur=function(){this.container.style.display="none",this.el&&((0,Xt.S1)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},a.prototype.start=function(n){var t=n;if(t.button===0){t.preventDefault(),t.stopPropagation();var e=this.el,r=this.getParentEl(),i=this,l=this.opts||{},f=this.mousePosFetcher,d="data-"+l.prefix+"handler",h=this.getElementPos(e,{avoidFrameZoom:!0,avoidFrameOffset:!0}),g=this.getElementPos(r),y=t.target;this.handlerAttr=y.getAttribute(d),this.clickedHandler=y,this.startDim={t:h.top,l:h.left,w:h.width,h:h.height},this.rectDim={t:h.top,l:h.left,w:h.width,h:h.height},this.startPos=f?f(t):{x:t.clientX,y:t.clientY},this.parentDim={t:g.top,l:g.left,w:g.width,h:g.height};var b=this.getDocumentEl();this.docs=b,(0,Xt.on)(b,"pointermove",this.move),(0,Xt.on)(b,"keydown",this.handleKeyDown),(0,Xt.on)(b,"pointerup",this.stop),(0,O.isFunction)(this.onStart)&&this.onStart(t,{docs:b,config:l,el:e,resizer:i}),this.toggleFrames(!0),this.move(t)}},a.prototype.move=function(n){var t=n,e=this.onMove,r=this.mousePosFetcher,i=r?r(t):{x:t.clientX,y:t.clientY};this.currentPos=i,this.delta={x:i.x-this.startPos.x,y:i.y-this.startPos.y},this.keys={shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey},this.rectDim=this.calc(this),this.updateRect(!1),e&&e(t)},a.prototype.stop=function(n){var t=this.el,e=this.opts,r=this.docs||this.getDocumentEl();(0,Xt.S1)(r,"pointermove",this.move),(0,Xt.S1)(r,"keydown",this.handleKeyDown),(0,Xt.S1)(r,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,O.isFunction)(this.onEnd)&&this.onEnd(n,{docs:r,config:e,el:t,resizer:this}),delete this.docs},a.prototype.updateRect=function(n){var t=this.el,e=this,r=this.opts,i=this.rectDim,l=this.updateTarget,f=this.getSelectedHandler(),d=r.unitHeight,h=r.unitWidth,g=r.keyWidth,y=r.keyHeight;if((0,O.isFunction)(l))l(t,i,{store:n,selectedHandler:f,resizer:e,config:r});else{var b=t.style;b[g]=i.w+h,b[y]=i.h+d,b.top=i.t+d,b.left=i.l+h}this.updateContainer()},a.prototype.updateContainer=function(n){var t;n===void 0&&(n={});var e=this,r=e.opts,i=e.container,l=e.el,f=i.style;!r.avoidContainerUpdate&&l&&n.forceShow&&(f.display="block"),(t=this.onUpdateContainer)===null||t===void 0||t.call(this,{el:i,resizer:this,opts:ds(ds({},r),n)})},a.prototype.getSelectedHandler=function(){var n=this.handlers;if(this.selectedHandler){for(var t in n)if(n[t]===this.selectedHandler)return t}},a.prototype.handleKeyDown=function(n){n.keyCode===27&&(this.rectDim=this.startDim,this.stop(n))},a.prototype.handleMouseDown=function(n){var t=n.target;this.isHandler(t)?(this.selectedHandler=t,this.start(n)):t!==this.el&&(delete this.selectedHandler,this.blur())},a.prototype.calc=function(n){var t,e=this.opts||{},r=e.step,i=this.startDim,l=e.minDim,f=e.maxDim,d=n.delta.x,h=n.delta.y,g=this.parentDim.w,y=this.parentDim.h,b=this.opts.unitWidth,P=this.opts.unitHeight,D=b==="%"?i.w/100*g:i.w,$=P==="%"?i.h/100*y:i.h,X={t:i.t,l:i.l,w:D,h:$};if(n){var lt=n.handlerAttr;~lt.indexOf("r")&&(t=b==="%"?(0,J.normalizeFloat)((D+d*r)/g*100,.01):(0,J.normalizeFloat)(D+d*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),X.w=t),~lt.indexOf("b")&&(t=P==="%"?(0,J.normalizeFloat)(($+h*r)/y*100,.01):(0,J.normalizeFloat)($+h*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),X.h=t),~lt.indexOf("l")&&(t=b==="%"?(0,J.normalizeFloat)((D-d*r)/g*100,.01):(0,J.normalizeFloat)(D-d*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),X.w=t),~lt.indexOf("t")&&(t=P==="%"?(0,J.normalizeFloat)(($-h*r)/y*100,.01):(0,J.normalizeFloat)($-h*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),X.h=t);var Tt=e.ratioDefault?!n.keys.shift:n.keys.shift;if(lt.indexOf("c")<0&&Tt){var bt=i.w/i.h;X.w/X.h>bt?X.h=Math.round(X.w/bt):X.w=Math.round(X.h*bt)}~lt.indexOf("l")&&(X.l+=i.w-X.w),~lt.indexOf("t")&&(X.t+=i.h-X.h);for(var Zt in X){var ue=Zt;X[ue]=parseInt("".concat(X[ue]),10)}return X}},a}();const Rv=Iv;var Nv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mp=function(){return mp=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},mp.apply(this,arguments)},Fv=function(a){Nv(n,a);function n(t){var e=a.call(this,t,"Utils")||this;return e.Sorter=Lv,e.Resizer=Rv,e.Dragger=$t.Z,e.helpers=mp({},J),e}return n.prototype.destroy=function(){},n}(Ft);const Vv=Fv;var ri,pi={},Wn={16:!1,18:!1,17:!1,91:!1},gd="all",hs={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},md={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},yp=function(a){return md[a]||a.toUpperCase().charCodeAt(0)},dl=[];for(ri=1;ri<20;ri++)md["f"+ri]=111+ri;function pu(a,n){for(var t=a.length;t--;)if(a[t]===n)return t;return-1}function Hv(a,n){if(a.length!=n.length)return!1;for(var t=0;t<a.length;t++)if(a[t]!==n[t])return!1;return!0}var Bv={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function Uv(a){for(ri in Wn)Wn[ri]=a[Bv[ri]]}function Wv(a){var n,t,e,r,i,l;if(n=a.keyCode,pu(dl,n)==-1&&dl.push(n),(n==93||n==224)&&(n=91),n in Wn){Wn[n]=!0;for(e in hs)hs[e]==n&&(zn[e]=!0);return}if(Uv(a),!!zn.filter.call(this,a)&&n in pi){for(l=_p(),r=0;r<pi[n].length;r++)if(t=pi[n][r],t.scope==l||t.scope=="all"){i=t.mods.length>0;for(e in Wn)(!Wn[e]&&pu(t.mods,+e)>-1||Wn[e]&&pu(t.mods,+e)==-1)&&(i=!1);(t.mods.length==0&&!Wn[16]&&!Wn[18]&&!Wn[17]&&!Wn[91]||i)&&t.method(a,t)===!1&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0))}}}function zv(a){var n=a.keyCode,t,e=pu(dl,n);if(e>=0&&dl.splice(e,1),(n==93||n==224)&&(n=91),n in Wn){Wn[n]=!1;for(t in hs)hs[t]==n&&(zn[t]=!1)}}function Kv(){for(ri in Wn)Wn[ri]=!1;for(ri in hs)zn[ri]=!1}function zn(a,n,t){var e,r;e=yd(a),t===void 0&&(t=n,n="all");for(var i=0;i<e.length;i++)r=[],a=e[i].split("+"),a.length>1&&(r=_d(a),a=[a[a.length-1]]),a=a[0],a=yp(a),a in pi||(pi[a]=[]),pi[a].push({shortcut:e[i],scope:n,method:t,key:e[i],mods:r})}function Gv(a,n){var t,e,r=[],i,l,f;for(t=yd(a),l=0;l<t.length;l++){if(e=t[l].split("+"),e.length>1&&(r=_d(e)),a=e[e.length-1],a=yp(a),n===void 0&&(n=_p()),!pi[a])return;for(i=0;i<pi[a].length;i++)f=pi[a][i],f.scope===n&&Hv(f.mods,r)&&(pi[a][i]={})}}function $v(a){return typeof a=="string"&&(a=yp(a)),pu(dl,a)!=-1}function qv(){return dl.slice(0)}function Yv(a){var n=(a.target||a.srcElement).tagName;return!(n=="INPUT"||n=="SELECT"||n=="TEXTAREA")}for(ri in hs)zn[ri]=!1;function Xv(a){gd=a||"all"}function _p(){return gd||"all"}function Zv(a){var n,t,e;for(n in pi)for(t=pi[n],e=0;e<t.length;)t[e].scope===a?t.splice(e,1):e++}function yd(a){var n;return a=a.replace(/\s/g,""),n=a.split(","),n[n.length-1]==""&&(n[n.length-2]+=","),n}function _d(a){for(var n=a.slice(0,a.length-1),t=0;t<n.length;t++)n[t]=hs[n[t]];return n}function wp(a,n,t){a.addEventListener?a.addEventListener(n,t,!1):a.attachEvent&&a.attachEvent("on"+n,function(){t(window.event)})}zn.setScope=Xv,zn.getScope=_p,zn.deleteScope=Zv,zn.filter=Yv,zn.isPressed=$v,zn.getPressedKeyCodes=qv,zn.unbind=Gv,zn.handlers=pi,zn.init=function(a){wp(a.document,"keydown",function(n){Wv(n)}),wp(a.document,"keyup",zv),wp(a,"focus",Kv)};const du=zn;var Jv={defaults:{"core:undo":{keys:"⌘+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"⌘+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"⌘+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"⌘+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}};const Qv=Jv;var tg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wd=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))};(0,J.hasWin)()&&du.init(window);var eg=function(a){tg(n,a);function n(t){var e=a.call(this,t,"Keymaps",Qv)||this;return e.keymaster=du,e.keymaps={},e}return n.prototype.onLoad=function(){var t=this.config.defaults;for(var e in t){var r=t[e];this.add(e,r.keys,r.handler,r.opts||{})}},n.prototype.add=function(t,e,r,i){i===void 0&&(i={});var l=this.em,f=l.Commands,d=l.getEditor(),h=l.Canvas,g={id:t,keys:e,handler:r},y=this.keymaps[t];return y&&this.remove(t),this.keymaps[t]=g,du(e,function(b,P){var D={event:b,h:P},$=(0,O.isString)(r)?f.get(r):r,X=!l.isEditing()&&!d.Canvas.isInputFocused();if(X||i.force){i.prevent&&h.getCanvasView().preventDefault(b),(0,O.isFunction)($)?$(d,0,D):f.runCommand($,D);var lt=[t,P.shortcut,b];l.trigger.apply(l,wd(["keymap:emit"],lt,!1)),l.trigger.apply(l,wd(["keymap:emit:".concat(t)],lt,!1))}},void 0),l.trigger("keymap:add",g),g},n.prototype.get=function(t){return this.keymaps[t]},n.prototype.getAll=function(){return this.keymaps},n.prototype.remove=function(t){var e=this.em,r=this.get(t);if(r)return delete this.keymaps[t],r.keys.split(", ").forEach(function(i){du.unbind(i.trim())}),e==null||e.trigger("keymap:remove",r),r},n.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(e){return t.remove(e)}),du.handlers={},this},n.prototype.destroy=function(){this.removeAll(),this.keymaps={}},n}(Ft);const rg=eg;var ng={stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}};const ig=ng;var og=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ag=function(a){og(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},n.prototype.open=function(){this.set("open",!0)},n.prototype.close=function(){this.set("open",!1)},n}(le.Z);const sg=ag;var lg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nc=function(){return Nc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Nc.apply(this,arguments)},ug=function(a){lg(n,a);function n(t){var e=a.call(this,t)||this,r=e.model;return e.listenTo(r,"change:open",e.updateOpen),e.listenTo(r,"change:title",e.updateTitle),e.listenTo(r,"change:content",e.updateContent),e}return n.prototype.template=function(t){var e=t.pfx,r=t.ppfx,i=t.content,l=t.title;return'<div class="'.concat(e,"dialog ").concat(r,"one-bg ").concat(r,`two-color">
      <div class="`).concat(e,`header">
        <div class="`).concat(e,'title">').concat(l,`</div>
        <div class="`).concat(e,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(e,`content">
        <div id="`).concat(e,'c">').concat(i,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(e,'collector" style="display: none"></div>')},n.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},n.prototype.onClick=function(t){var e=this.config.backdrop;e&&t.target===this.el&&this.hide()},n.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},n.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},n.prototype.getTitle=function(t){return t===void 0&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},n.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),r=this.getCollector(),i=this.model.get("content");e.length&&r.append(e),t.empty().append(i)},n.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},n.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},n.prototype.hide=function(){this.model.close()},n.prototype.show=function(){this.model.open()},n.prototype.updateAttr=function(t){var e=this,r=e.pfx,i=e.$el,l=e.el,f=[].slice.call(l.attributes).map(function(d){return d.name});i.removeAttr(f.join(" ")),i.attr(Nc(Nc({},t||{}),{class:"".concat(r,"container ").concat(t&&t.class||"").trim()}))},n.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},n}(or);const cg=ug;var fg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pg=function(a){fg(n,a);function n(t){var e=a.call(this,t,"Modal",ig)||this;return e.model=new sg(e),e.model.on("change:open",function(r,i){t.trigger("modal:".concat(i?"open":"close"))}),e.model.on("change",(0,O.debounce)(function(){var r=e._evData(),i=e.config.custom;(0,O.isFunction)(i)&&i(r),t.trigger("modal",r)},0)),e}return n.prototype._evData=function(){var t=this,e=this.getTitle(),r=this.getContent(),i=this.model.attributes,l=i.open,f=i.attributes;return{open:l,attributes:f,title:(0,O.isString)(e)?(0,Xt.rw)(e):e,content:(0,O.isString)(r)?(0,Xt.rw)(r):r.get?r.get(0):r,close:function(){t.close()}}},n.prototype.postRender=function(t){var e=t.model.config.el||t.el,r=this.render();r&&(e==null||e.appendChild(r))},n.prototype.open=function(t){t===void 0&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},n.prototype.close=function(){return this.model.close(),this},n.prototype.onceClose=function(t){return this.em.once("modal:close",t),this},n.prototype.onceOpen=function(t){return this.em.once("modal:open",t),this},n.prototype.isOpen=function(){return!!this.model.get("open")},n.prototype.setTitle=function(t){return this.model.set("title",t),this},n.prototype.getTitle=function(){return this.model.get("title")},n.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},n.prototype.getContent=function(){return this.model.get("content")},n.prototype.getContentEl=function(){var t;return(t=this.modal)===null||t===void 0?void 0:t.getContent().get(0)},n.prototype.getModel=function(){return this.model},n.prototype.render=function(){var t;if(!this.config.custom){var e=cg.extend(this.config.extend),r=this.modal&&this.modal.el;return this.modal=new e({el:r,model:this.model,config:this.config}),(t=this.modal)===null||t===void 0?void 0:t.render().el}},n.prototype.destroy=function(){var t;(t=this.modal)===null||t===void 0||t.remove()},n}(Ft);const dg=pg;var bd="sw-visibility",Cd="export-template",xd="open-sm",Sd="open-tm",Od="open-layers",Td="open-blocks",bp="fullscreen",Cp="preview",hg={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:bd,className:"fa fa-square-o",command:"core:component-outline",context:bd,attributes:{title:"View components"}},{id:Cp,className:"fa fa-eye",command:Cp,context:Cp,attributes:{title:"Preview"}},{id:bp,className:"fa fa-arrows-alt",command:bp,context:bp,attributes:{title:"Fullscreen"}},{id:Cd,className:"fa fa-code",command:Cd,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:xd,className:"fa fa-paint-brush",command:xd,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Sd,className:"fa fa-cog",command:Sd,togglable:!1,attributes:{title:"Settings"}},{id:Od,className:"fa fa-bars",command:Od,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:Td,className:"fa fa-th-large",command:Td,togglable:!1,attributes:{title:"Open Blocks"}}]}]};const xp=hg;var vg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gg=function(a){vg(n,a);function n(t,e){var r=a.call(this,t,e)||this;return r.get("buttons").length&&r.set("buttons",new Ad(r.module,r.get("buttons"))),r}return n.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(n.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),n}(le.Z);const Ed=gg;var mg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pd=function(a){mg(n,a);function n(t,e){return a.call(this,t,e,Ed)||this}return n.prototype.deactivateAllExceptOne=function(t,e){this.forEach(function(r,i){r!==t&&(r.set("active",!1),e&&r.get("buttons").length&&r.get("buttons").deactivateAllExceptOne(t,e))})},n.prototype.deactivateAll=function(t,e){var r=t||"";this.forEach(function(i){i.get("context")==r&&i!==e&&i.set("active",!1,{fromCollection:!0})})},n.prototype.disableAllButtons=function(t){var e=t||"";this.forEach(function(r,i){r.get("context")==e&&r.set("disable",!0)})},n.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach(function(r,i){r!==t&&(r.set("disable",!0),e&&r.get("buttons").length&&r.get("buttons").disableAllButtonsExceptOne(t,e))})},n}(fr);const Ad=Pd;Pd.prototype.model=Ed;var yg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_g=function(a){yg(n,a);function n(t,e){var r=a.call(this,t,e)||this,i=r.get("buttons")||[];return r.buttons=new Ad(t,i),r}return n.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(n.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),n}(le.Z);const kd=_g;var wg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Md=function(a){wg(n,a);function n(t,e){return a.call(this,t,e,kd)||this}return n}(fr);const bg=Md;Md.prototype.model=kd;var Cg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hl=function(){return hl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},hl.apply(this,arguments)},xg=function(a){Cg(n,a);function n(t){var e=a.call(this,t)||this,r=e,i=r.model,l=r.em,f=r.pfx,d=r.ppfx,h=i.className,g=i.attributes,y=g.command,b=g.listen;if(e.id=f+i.get("id"),e.activeCls="".concat(f,"active ").concat(d,"four-color"),e.disableCls="".concat(d,"disabled"),e.btnsVisCls="".concat(f,"visible"),e.className=f+"btn"+(h?" "+h:""),e.listenTo(i,"change",e.render),e.listenTo(i,"change:active updateActive",e.updateActive),e.listenTo(i,"checkActive",e.checkActive),e.listenTo(i,"change:bntsVis",e.updateBtnsVis),e.listenTo(i,"change:attributes",e.updateAttributes),e.listenTo(i,"change:className",e.updateClassName),e.listenTo(i,"change:disable",e.updateDisable),l&&(0,O.isString)(y)&&b){var P={fromListen:!0};e.listenTo(l,"run:".concat(y),function(){return i.set("active",!0,P)}),e.listenTo(l,"stop:".concat(y),function(){return i.set("active",!1,P)})}return l&&l.get&&(e.commands=l.get("Commands")),e}return n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.events=function(){return{click:"clicked"}},n.prototype.updateClassName=function(){var t=this,e=t.model,r=t.pfx,i=e.className,l=e.get("attributes").class,f="".concat(l||""," ").concat(r,"btn ").concat(i||"");this.$el.attr("class",f.trim())},n.prototype.updateAttributes=function(){var t=this,e=t.em,r=t.model,i=t.$el,l=r.get("attributes")||{},f=e&&e.t&&e.t("panels.buttons.titles.".concat(r.id));i.attr(l),f&&i.attr({title:f}),this.updateClassName()},n.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},n.prototype.updateActive=function(t,e,r){var i;r===void 0&&(r={});var l=this,f=l.model,d=l.commands,h=l.$el,g=l.activeCls,y=r.fromCollection,b=r.fromListen,P=f.get("context"),D=f.get("options"),$=f.command,X={};$&&(d&&(0,O.isString)($)?X=d.get($)||{}:(0,O.isFunction)($)?X=d.create({run:$}):$!==null&&(0,O.isObject)($)&&(X=d.create($)),f.active?(!y&&((i=f.collection)===null||i===void 0||i.deactivateAll(P,f)),f.set("active",!0,{silent:!0}).trigger("checkActive"),!b&&d.runCommand(X,hl(hl({},D),{sender:f})),X.noStop&&f.set("active",!1)):(h.removeClass(g),!b&&d.stopCommand(X,hl(hl({},D),{sender:f,force:1}))))},n.prototype.updateDisable=function(){var t=this,e=t.disableCls,r=t.model,i=r.disable;this.$el[i?"addClass":"removeClass"](e)},n.prototype.checkActive=function(){var t=this,e=t.model,r=t.$el,i=t.activeCls;e.active?r.addClass(i):r.removeClass(i)},n.prototype.clicked=function(){var t=this.model;t.get("bntsVis")||t.disable||!t.command||this.toggleActive()},n.prototype.toggleActive=function(){var t=this,e=t.model,r=t.em,i=e.active,l=e.togglable;i&&!l||(e.active=!i,i?e.runDefaultCommand&&r.runDefault():e.stopDefaultCommand&&r.stopDefault())},n.prototype.render=function(){var t=this.model,e=t.get("label"),r=this.$el;return!t.get("el")&&r.empty(),this.updateAttributes(),e&&r.append(e),this.checkActive(),this.updateDisable(),this},n}(or);const Sg=xg;var Og=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tg=function(a){Og(n,a);function n(t){var e=a.call(this,{collection:t})||this;return e.listenTo(e.collection,"add",e.addTo),e.listenTo(e.collection,"reset remove",e.render),e.className=e.pfx+"buttons",e}return n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var r=e||null,i=t.get("el"),l=new Sg({el:i,model:t}),f=l.render().el;return r?r.appendChild(f):this.$el.append(f),f},n.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(r){return t.addToCollection(r,e)}),this.$el.append(e),this.$el.attr("class",(0,O.result)(this,"className")),this},n}(or);const Eg=Tg;var Pg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sp=function(){return Sp=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Sp.apply(this,arguments)},Ag=function(a){Pg(n,a);function n(t){var e=a.call(this,{model:t,el:t.get("el")})||this;return e.className=e.pfx+"panel",e.id=e.pfx+t.get("id"),e.listenTo(t,"change:appendContent",e.appendContent),e.listenTo(t,"change:content",e.updateContent),e.listenTo(t,"change:visible",e.toggleVisible),t.view=e,e}return n.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},n.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},n.prototype.toggleVisible=function(){if(!this.model.get("visible")){this.$el.addClass("".concat(this.ppfx,"hidden"));return}this.$el.removeClass("".concat(this.ppfx,"hidden"))},n.prototype.attributes=function(){return this.model.get("attributes")},n.prototype.initResize=function(){var t=this.em,e=t==null?void 0:t.Editor,r=this.model.get("resizable");if(e&&r){var i=r===!0?[!0,!0,!0,!0]:r,l=i.length,f=void 0,d=void 0,h=void 0,g=!1;if(l==2){var y=i;f=y[0],h=y[0],d=y[1],g=y[1]}else if(l==4){var y=i;f=y[0],d=y[1],h=y[2],g=y[3]}var b=new e.Utils.Resizer(Sp({tc:f,cr:d,bc:h,cl:g,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:e.getConfig().stylePrefix,onEnd:function(){t&&t.trigger("change:canvasOffset")},posFetcher:function(P,D){var $=D.target,X=P.style,lt=b.getConfig(),Tt=lt.keyWidth,bt=lt.keyHeight,Zt=P.getBoundingClientRect(),ue=$=="container",Oe=X[Tt],Ie=X[bt],ee=Oe&&!ue?parseFloat(Oe):Zt.width,je=Ie&&!ue?parseFloat(Ie):Zt.height;return{left:0,top:0,width:ee,height:je}}},r&&typeof r!="boolean"?r:{}));b.blur=function(){},b.focus(this.el)}},n.prototype.render=function(){var t=this.model.buttons,e=this.$el,r=this.ppfx,i="".concat(this.className," ").concat(this.id," ").concat(r,"one-bg ").concat(r,"two-color");if(e.addClass(i),this.toggleVisible(),t.length){var l=new Eg(t);e.append(l.render().el)}return e.append(this.model.get("content")),this},n}(or);const kg=Ag;var Mg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Lg=function(a){Mg(n,a);function n(t){var e=a.call(this,{collection:t})||this;return e.listenTo(t,"add",e.addTo),e.listenTo(t,"reset",e.render),e.listenTo(t,"remove",e.onRemove),e.className=e.pfx+"panels",e}return n.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var r=e||null,i=t.get("el"),l=new kg(t),f=l.render().el,d=t.get("appendTo");if(!i)if(d){var h=document.querySelector(d);h==null||h.appendChild(f)}else r?r.appendChild(f):this.$el.append(f);return l.initResize(),f},n.prototype.render=function(){var t=this,e=this.$el,r=document.createDocumentFragment();return e.empty(),this.collection.each(function(i){return t.addToCollection(i,r)}),e.append(r),e.attr("class",this.className),this},n}(or);const Dg=Lg;var jg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ig=function(a){jg(n,a);function n(t){var e=a.call(this,t,"Panels",xp)||this;e.panels=new bg(e,e.config.defaults);for(var r in xp)r in e.config||(e.config[r]=xp[r]);return e}return n.prototype.getPanels=function(){return this.panels},n.prototype.getPanelsEl=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0?void 0:t.el},n.prototype.addPanel=function(t){return this.panels.add(t)},n.prototype.removePanel=function(t){return this.panels.remove(t)},n.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},n.prototype.addButton=function(t,e){var r=this.getPanel(t);return r?r.buttons.add(e):null},n.prototype.removeButton=function(t,e){var r=this.getPanel(t);return r&&r.buttons.remove(e)},n.prototype.getButton=function(t,e){var r=this.getPanel(t);if(r){var i=r.buttons.where({id:e});return i.length?i[0]:null}return null},n.prototype.render=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0||t.remove(),this.PanelsViewObj=new Dg(this.panels),this.PanelsViewObj.render().el},n.prototype.active=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("active")&&e.trigger("updateActive")})})},n.prototype.disableButtons=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("disable")&&e.trigger("change:disable")})})},n.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},n}(Ft);const Rg=Ig;var Ng={stylePrefix:"cm-",optsCodeViewer:{}};const Fg=Ng;var Vg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hg=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Bg=function(a){Vg(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.build=function(t,e){e===void 0&&(e={});var r=e.em,i=Hg(e,["em"]),l=i;if(e.cleanId&&r){var f=r.Css.getAll(),d=f.toJSON().map(function(h){var g=h.selectors,y=g&&g.length===1&&g.models[0];return y&&y.isId()&&y.get("name")}).filter(Boolean);l.attributes||(l.attributes=function(h,g){var y=g.id;return y&&y[0]==="i"&&!h.get("script")&&!h.get("attributes").id&&d.indexOf(y)<0&&delete g.id,g})}return t.toHTML(l)},n}(S.Hn);const Ug=Bg;var Wg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zg=function(a){Wg(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.build=function(t){var e=this,r=t.toJSON();return this.beforeEach(r),(0,O.each)(r,function(i,l){var f=r[l];if(f instanceof S.Hn)r[l]=e.build(f);else if(f instanceof S.FE){var d=f;r[l]=[],d.length&&d.forEach(function(h,g){r[l][g]=e.build(h)})}}),r},n.prototype.beforeEach=function(t){delete t.status},n}(S.Hn);const Kg=zg;var Gg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();function $g(a){var n,t=((n=a.toString().match(/\{([\s\S]*)\}/m))===null||n===void 0?void 0:n[1])||"";return t.replace(/^\s*\/\/.*$/gm,"").trim().length===0}var qg=function(a){Gg(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.mapModel=function(t){var e,r=this,i="",l=t.get("script-export")||t.get("script"),f=t.get("type"),d=t.get("components"),h=t.getId();if(l){var g=t.get("attributes");g=(0,O.extend)({},g,{id:h}),t.set("attributes",g,{silent:!0});var y=t.getScriptString(l),b=t.get("script-props");if(t.get("scriptUpdated")&&!b)this.mapJs[f+"-"+h]={ids:[h],code:y};else{var P=void 0,D=this.mapJs[f];if(b&&(P=t.__getScriptProps()),D)D.ids.push(h),P&&(D.props[h]=P);else{var $={ids:[h],code:y};P&&($.props=(e={},e[h]=P,e)),this.mapJs[f]=$}}}return d.forEach(function(X){i+=r.mapModel(X)}),i},n.prototype.build=function(t){this.mapJs={},this.mapModel(t);var e="";for(var r in this.mapJs){var i=this.mapJs[r];if(i.code)if(i.props){if($g(i.code))continue;e+=`
          var props = `.concat(JSON.stringify(i.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(i.code,`.bind(el))(props[el.id]);
          }`)}else{var l="#"+i.ids.join(", #");e+=`
          var items = document.querySelectorAll('`.concat(l,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(i.code,`
}.bind(items[i]))();
          }`)}}return e},n}(S.Hn);const Yg=qg;var Xg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Op=function(){return Op=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Op.apply(this,arguments)},hu;(0,J.hasWin)()&&(hu=vr(631),vr(531),vr(629),vr(210));var Ld=function(a){Xg(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},n.prototype.init=function(t){return(0,O.bindAll)(this,"onChange"),this.editor=hu.fromTextArea(t,Op({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},n.prototype.onChange=function(){this.trigger("update",this)},n.prototype.getEditor=function(){return this.editor},n.prototype.getElement=function(){return this.element},n.prototype.setElement=function(t){return this.element=t,this},n.prototype.refresh=function(){return this.getEditor().refresh(),this},n.prototype.focus=function(){return this.getEditor().focus(),this},n.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},n.prototype.setContent=function(t,e){var r=this;e===void 0&&(e={});var i=this.editor;if(i){i.setValue(t);var l=this.get("autoFormat"),f=i.autoFormatRange&&(l===!0||Array.isArray(l)&&l.includes(this.get("codeName")));f&&(hu.commands.selectAll(i),i.autoFormatRange(i.getCursor(!0),i.getCursor(!1)),hu.commands.goDocStart(i)),!e.noRefresh&&setTimeout(function(){return r.refresh()})}},n}(S.Hn);const Zg=Ld;Ld.prototype.CodeMirror=hu;var Jg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qg=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},tm=function(a){Jg(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.template=function(t){var e=t.pfx,r=t.codeName,i=t.label;return ut(Dd||(Dd=Qg([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),e,e,r,e,i,e)},n.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},n.prototype.render=function(){var t,e,r=this,i=r.model,l=r.pfx,f=r.$el,d=i.toJSON(),h=i.get("input")||((e=(t=i).getElement)===null||e===void 0?void 0:e.call(t));return d.pfx=l,f.html(this.template(d)),f.attr("class","".concat(l,"editor-c")),f.find("#".concat(l,"code")).append(h),this},n}(S.G7);const em=tm;var Dd,rm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fc=function(){return Fc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Fc.apply(this,arguments)},nm="CodeMirror",im=function(a){rm(n,a);function n(t){var e=a.call(this,t,"CodeManager",Fg)||this;e.EditorView=em;var r=e.config,i=r.pStylePrefix;return i&&(r.stylePrefix=i+r.stylePrefix),e.generators={},e.viewers={},e.defGenerators={html:new Ug,css:new rc,json:new Kg,js:new Yg},e.defViewers={CodeMirror:new Zg},e.loadDefaultGenerators().loadDefaultViewers(),e}return n.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},n.prototype.getGenerator=function(t){return this.generators[t]},n.prototype.getGenerators=function(){return this.generators},n.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},n.prototype.getViewer=function(t){return this.viewers[t]},n.prototype.getViewers=function(){return this.viewers},n.prototype.createViewer=function(t){t===void 0&&(t={});var e=(0,O.isUndefined)(t.type)?nm:t.type,r=this.getViewer(e)&&this.getViewer(e).clone(),i=document.createElement("div"),l=document.createElement("textarea");return i.appendChild(l),r.set(Fc(Fc({},this.config.optsCodeViewer),t)),r.init(l),r.setElement(i),r},n.prototype.updateViewer=function(t,e){t.setContent(e)},n.prototype.getCode=function(t,e,r){r===void 0&&(r={}),r.em=this.em;var i=this.getGenerator(e);return i?i.build(t,r):""},n.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},n.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},n.prototype.destroy=function(){},n}(Ft);const om=im;var am=vr(410),sm=vr.n(am),lm={maximumStackLength:500,trackSelection:!0};const um=lm;var cm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ta=function(){return ta=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ta.apply(this,arguments)},fm=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Vc=function(a){return a.avoidStore||a.noUndo},jd=function(a){return Object.keys(a.changedAttributes())},pm=function(a){cm(n,a);function n(t){var e=a.call(this,t,"UndoManager",um)||this;e.config._disable&&(e.config.maximumStackLength=0);var r=!0;return e.um=new(sm())(ta({track:!0,register:[]},e.config)),e.um.changeUndoType("change",{condition:function(i){var l=i.get("_undo");if(l){var f=i.get("_undoexc");if((0,O.isArray)(f)&&jd(i).some(function(d){return f.indexOf(d)>=0}))return!1;if((0,O.isBoolean)(l)||(0,O.isArray)(l)&&jd(i).some(function(d){return l.indexOf(d)>=0}))return!0}return!1},on:function(i,l,f){var d=this;!this.beforeCache&&(this.beforeCache=i.previousAttributes());var h=f||l||{};if(h.noUndo&&setTimeout(function(){d.beforeCache=null}),!Vc(h)){var g=i.toJSON({fromUndo:r}),y={object:i,before:this.beforeCache,after:g};return this.beforeCache=null,(0,O.isEmpty)(g)?void 0:y}}}),e.um.changeUndoType("add",{on:function(i,l,f){if(f===void 0&&(f={}),!(Vc(f)||!e.isRegistered(l)))return{object:l,before:void 0,after:i,options:ta(ta({},f),{fromUndo:r})}}}),e.um.changeUndoType("remove",{on:function(i,l,f){if(f===void 0&&(f={}),!(Vc(f)||!e.isRegistered(l)))return{object:l,before:i,after:void 0,options:ta(ta({},f),{fromUndo:r})}}}),e.um.changeUndoType("reset",{undo:function(i,l){i.reset(l,{fromUndo:r})},redo:function(i,l,f){i.reset(f,{fromUndo:r})},on:function(i,l){if(l===void 0&&(l={}),!(Vc(l)||!e.isRegistered(i)))return{object:i,before:l.previousModels,after:fm([],i.models,!0),options:ta(ta({},l),{fromUndo:r})}}}),e.um.on("undo redo",function(){t.trigger("change:canvasOffset"),t.getSelectedAll().map(function(i){return i.trigger("rerender:layer")})}),["undo","redo"].forEach(function(i){return e.um.on(i,function(){return t.trigger(i)})}),e}return n.prototype.postLoad=function(){var t=this,e=t.config,r=t.em;e.trackSelection&&r&&this.add(r.get("selected"))},n.prototype.add=function(t){return this.um.register(t),this},n.prototype.remove=function(t){return this.um.unregister(t),this},n.prototype.removeAll=function(){return this.um.unregisterAll(),this},n.prototype.start=function(){return this.um.startTracking(),this},n.prototype.stop=function(){return this.um.stopTracking(),this},n.prototype.undo=function(t){t===void 0&&(t=!0);var e=this,r=e.em,i=e.um;return!r.isEditing()&&i.undo(t),this},n.prototype.undoAll=function(){return this.um.undoAll(),this},n.prototype.redo=function(t){t===void 0&&(t=!0);var e=this,r=e.em,i=e.um;return!r.isEditing()&&i.redo(t),this},n.prototype.redoAll=function(){return this.um.redoAll(),this},n.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},n.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},n.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},n.prototype.getStack=function(){return this.um.stack},n.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach(function(r){var i=r.get("magicFusionIndex");e.indexOf(i)<0&&(e.push(i),t.push(r))}),t},n.prototype.skip=function(t){this.stop(),t(),this.start()},n.prototype.getGroupedStack=function(){var t={},e=this.getStack(),r=function(i,l){var f=i.attributes,d=f.type,h=f.after,g=f.before,y=f.object,b=f.options,P=b===void 0?{}:b;return{index:l,type:d,after:h,before:g,object:y,options:P}};return e.forEach(function(i,l){var f=i.get("magicFusionIndex"),d=r(i,l);t[f]?t[f].push(d):t[f]=[d]}),Object.keys(t).map(function(i){var l=t[i];return{index:l[l.length-1].index,actions:l,labels:(0,O.unique)(l.reduce(function(f,d){var h,g=(h=d.options)===null||h===void 0?void 0:h.action;return g&&f.push(g),f},[]))}})},n.prototype.goToGroup=function(t){var e=this;if(t){var r=this.getPointer(),i=t.index-r;(0,O.times)(Math.abs(i),function(){e[i<0?"undo":"redo"](!1)})}},n.prototype.getPointer=function(){return this.getStack().pointer},n.prototype.clear=function(){return this.um.clear(),this},n.prototype.getInstance=function(){return this.um},n.prototype.destroy=function(){this.clear().removeAll()},n}(Ft);const dm=pm;var hm={stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1};const vm=hm;var vl=function(){return vl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},vl.apply(this,arguments)},Hc;(function(a){a[a.ACTIVE=1]="ACTIVE",a[a.INACTIVE=0]="INACTIVE",a[a.DISABLED=-1]="DISABLED"})(Hc||(Hc={}));var Tp="_rte",vs={ACTIVE:1,INACTIVE:0,DISABLED:-1},Bc=function(a,n){n===void 0&&(n="A");var t=a.selection()||{},e=t.anchorNode,r=t.focusNode,i=e==null?void 0:e.parentNode,l=r==null?void 0:r.parentNode;return(i==null?void 0:i.nodeName)==n||(l==null?void 0:l.nodeName)==n},Uc="data-selectme",vu={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(a){return a.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(a){return a.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(a){return a.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(a){return a.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(a){return a&&a.selection()&&Bc(a)?vs.ACTIVE:vs.INACTIVE},result:function(a){Bc(a)?a.exec("unlink"):a.insertHTML('<a href="" '.concat(Uc,">").concat(a.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(a){return a!=null&&a.selection()&&Bc(a,"SPAN")?vs.DISABLED:vs.INACTIVE},result:function(a){!Bc(a,"SPAN")&&a.insertHTML("<span ".concat(Uc,">").concat(a.selection(),"</span>"),{select:!0})}}},gm=function(){function a(n,t,e){var r=this;if(e===void 0&&(e={}),this.em=n,this.settings=e,t[Tp])return t[Tp];t[Tp]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var i=(e.actions||[]).map(function(g){var y=g;return(0,O.isString)(g)?y=vl({},vu[g]):vu[g.name]&&(y=vl(vl({},vu[g.name]),g)),y}),l=i.length?i:Object.keys(vu).map(function(g){return vu[g]});e.classes=vl({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},e.classes);var f=e.classes,d=e.actionbar;if(this.actionbar=d,this.classes=f,this.actions=l,!d){if(!this.isCustom(e.module)){var h=e.actionbarContainer;d=document.createElement("div"),d.className=f.actionbar,h==null||h.appendChild(d),this.actionbar=d}l.forEach(function(g){return r.addAction(g)})}return e.styleWithCSS&&this.exec("styleWithCSS"),this}return a.prototype.isCustom=function(n){var t=n||this.em.RichTextEditor;return!!(t!=null&&t.config.custom||t!=null&&t.customRte)},a.prototype.destroy=function(){},a.prototype.setEl=function(n){this.el=n,this.doc=n.ownerDocument},a.prototype.updateActiveActions=function(){var n=this,t=this.getActions();t.forEach(function(e){var r=e.update,i=e.btn,l=n.classes,f=l.active,d=l.inactive,h=l.disabled,g=e.state,y=e.name,b=n.doc,P=Hc.INACTIVE;if(i&&(i.className=i.className.replace(f,"").trim(),i.className=i.className.replace(d,"").trim(),i.className=i.className.replace(h,"").trim()),g){var D=g(n,b);if(P=D,i)switch(D){case vs.ACTIVE:i.className+=" ".concat(f);break;case vs.INACTIVE:i.className+=" ".concat(d);break;case vs.DISABLED:i.className+=" ".concat(h);break}}else b.queryCommandSupported(y)&&b.queryCommandState(y)&&(i&&(i.className+=" ".concat(f)),P=Hc.ACTIVE);e.currentState=P,r==null||r(n,e)}),t.length&&this.em.RichTextEditor.__dbdTrgCustom()},a.prototype.enable=function(n){return this.enabled?this:this.__toggleEffects(!0,n)},a.prototype.disable=function(){return this.__toggleEffects(!1)},a.prototype.__toggleEffects=function(n,t){n===void 0&&(n=!1),t===void 0&&(t={});var e=n?Xt.on:Xt.S1,r=this,i=r.el,l=r.doc,f=this.actionbarEl();if(f&&(f.style.display=n?"":"none"),i.contentEditable="".concat(!!n),e(i,"mouseup keyup",this.updateActiveActions),e(l,"keydown",this.__onKeydown),e(l,"paste",this.__onPaste),this.enabled=n,n){var d=t.event;if(this.syncActions(),this.updateActiveActions(),d){var h=null;if(l.caretRangeFromPoint){var g=(0,Xt.VB)(d);h=l.caretRangeFromPoint(g.clientX,g.clientY)}else d.rangeParent&&(h=l.createRange(),h.setStart(d.rangeParent,d.rangeOffset));var y=l.getSelection();y==null||y.removeAllRanges(),h&&(y==null||y.addRange(h))}i.focus()}return this},a.prototype.__onKeydown=function(n){var t=n,e=this.doc,r=["insertOrderedList","insertUnorderedList"];t.key==="Enter"&&!r.some(function(i){return e.queryCommandState(i)})&&(e.execCommand("insertLineBreak"),t.preventDefault())},a.prototype.__onPaste=function(n){var t=n.clipboardData||window.clipboardData,e=t.getData("text"),r=t.getData("text/html");if(e&&!r){n.preventDefault();var i=e.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,i)}},a.prototype.syncActions=function(){var n=this;this.getActions().forEach(function(t){if(n.actionbar&&(!t.state||t.state&&t.state(n,n.doc)>=0)){var e=t.event||"click",r=t.btn;r&&(r["on".concat(e)]=function(){t.result(n,t),n.updateActiveActions()})}})},a.prototype.addAction=function(n,t){t===void 0&&(t={});var e=t.sync,r=this.actionbarEl();if(r){var i=n.icon,l=n.attributes,f=l===void 0?{}:l,d=document.createElement("span");d.className=this.classes.button,n.btn=d;for(var h in f)d.setAttribute(h,f[h]);typeof i=="string"?d.innerHTML=i:d.appendChild(i),r.appendChild(d)}e&&(this.actions.push(n),this.syncActions())},a.prototype.getActions=function(){return this.actions},a.prototype.selection=function(){return this.doc.getSelection()},a.prototype.exec=function(n,t){this.doc.execCommand(n,!1,t)},a.prototype.actionbarEl=function(){return this.actionbar},a.prototype.insertHTML=function(n,t){var e=t===void 0?{}:t,r=e.select,i=this,l=i.em,f=i.doc,d=i.el,h=f.getSelection();if(h&&h.rangeCount){var g=(0,J.getModel)(d),y=f.createElement("div"),b=h.getRangeAt(0);b.deleteContents(),(0,O.isString)(n)?y.innerHTML=n:n&&y.appendChild(n),Array.prototype.slice.call(y.childNodes).forEach(function(P){b.insertNode(P)}),h.removeAllRanges(),h.addRange(b),d.focus(),r&&g&&(g.once("rte:disable",function(){var P=g.find("[".concat(Uc,"]"))[0];P&&(l.setSelected(P),P.removeAttributes(Uc))}),g.trigger("disable"))}},a}();const mm=gm;var ym=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Id=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?i(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},Rd=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},_m=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Ep="change:canvasOffset frame:scroll component:update",wm="rte:enable",bm="rte:disable",Cm="rte:custom",xm={enable:wm,disable:bm,custom:Cm},Sm=function(a){ym(n,a);function n(t){var e=a.call(this,t,"RichTextEditor",vm)||this;e.events=xm;var r=e.config,i=r.pStylePrefix;i&&(r.stylePrefix=i+r.stylePrefix),e.pfx=r.stylePrefix,e.actions=r.actions||[];var l=new S.Hn;return e.model=l,l.on("change:currentView",e.__trgCustom,e),e.__dbdTrgCustom=(0,O.debounce)(function(){return e.__trgCustom()},0),e}return n.prototype.onLoad=function(){if((0,J.hasWin)()){var t=this.config,e=t.pStylePrefix,r=t.custom,i=(0,Xt.ut)("div",{class:(0,Xt.cx)("".concat(e,"rte-toolbar"),!r&&"".concat(e,"one-bg ").concat(e,"rte-toolbar-ui"))});this.toolbar=i,this.initRte((0,Xt.ut)("div")),(0,Xt.on)(i,"mousedown",function(l){return l.stopPropagation()})}},n.prototype.__trgCustom=function(){var t=this,e=t.model,r=t.em,i=t.events;r.trigger(i.custom,{enabled:!!e.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},n.prototype.destroy=function(){var t,e,r;(t=this.globalRte)===null||t===void 0||t.destroy(),(r=(e=this.customRte)===null||e===void 0?void 0:e.destroy)===null||r===void 0||r.call(e),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,Xt.L_)(this.toolbar)},n.prototype.postRender=function(t){var e=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},n.prototype.initRte=function(t){var e=this.globalRte,r=this,i=r.em,l=r.pfx,f=r.actionbar,d=r.config,h=this.actions||_m([],d.actions,!0),g={actionbar:"".concat(l,"actionbar"),button:"".concat(l,"action"),active:"".concat(l,"active"),inactive:"".concat(l,"inactive"),disabled:"".concat(l,"disabled")};return e?(e.em=i,e.setEl(t)):(e=new mm(i,t,{classes:g,actions:h,actionbar:f,actionbarContainer:this.toolbar,module:this}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},n.prototype.add=function(t,e){var r;e===void 0&&(e={}),e.name=t,(r=this.globalRte)===null||r===void 0||r.addAction(e,{sync:!0})},n.prototype.get=function(t){var e,r;return(e=this.globalRte)===null||e===void 0||e.getActions().forEach(function(i){i.name==t&&(r=i)}),r},n.prototype.getAll=function(){var t;return((t=this.globalRte)===null||t===void 0?void 0:t.getActions())||[]},n.prototype.remove=function(t){var e,r=this.getAll(),i=this.get(t);if(i){var l=i.btn,f=r.indexOf(i);(e=l==null?void 0:l.parentNode)===null||e===void 0||e.removeChild(l),r.splice(f,1)}return i},n.prototype.run=function(t){var e=this.globalRte,r=(0,O.isString)(t)?this.get(t):t;e&&r&&(r.result(e,r),e.updateActiveActions())},n.prototype.getToolbarEl=function(){return this.toolbar},n.prototype.updatePosition=function(){var t=this,e=t.em,r=t.toolbar,i="px",l=e.Canvas,f=r.style,d=l.getTargetToElementFixed(this.lastEl,r,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(h){var g=d[h];(0,J.isDef)(g)&&(f[h]=(0,O.isString)(g)?g:(g||0)+i)})},n.prototype.enable=function(t,e,r){return r===void 0&&(r={}),Id(this,void 0,void 0,function(){var i,l,f,d,h;return Rd(this,function(g){switch(g.label){case 0:return this.lastEl=t.el,i=this,l=i.customRte,f=i.em,d=t.getChildrenContainer(),this.toolbar.style.display="",[4,l?l.enable(d,e):this.initRte(d).enable(r)];case 1:return h=g.sent(),f&&(setTimeout(this.updatePosition.bind(this),0),f.off(Ep,this.updatePosition,this),f.on(Ep,this.updatePosition,this),f.trigger("rte:enable",t,h)),this.model.set({currentView:t}),[2,h]}})})},n.prototype.getContent=function(t,e){return Id(this,void 0,void 0,function(){var r;return Rd(this,function(i){switch(i.label){case 0:return r=this.customRte,r&&e&&(0,O.isFunction)(r.getContent)?[4,r.getContent(t.el,e)]:[3,2];case 1:return[2,i.sent()];case 2:return[2,t.getChildrenContainer().innerHTML]}})})},n.prototype.hideToolbar=function(){var t=this.toolbar.style,e="-1000px";t.top=e,t.left=e,t.display="none"},n.prototype.disable=function(t,e){var r=this.em,i=this.customRte,l=t.getChildrenContainer();i?i.disable(l,e):e&&e.disable(),this.hideToolbar(),r&&(r.off(Ep,this.updatePosition,this),r.trigger("rte:disable",t,e)),this.model.unset("currentView")},n}(Ft);const Om=Sm;var Pp=vr(790),Tm={stylePrefix:"com-",defaults:{},strict:!0};const Em=Tm;var Pm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wc=function(){return Wc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Wc.apply(this,arguments)},Nd=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Fd=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],Am=function(a){Pm(n,a);function n(t){var e=a.call(this,t,"Commands",Em)||this;e.CommandAbstract=Pp.default,e.defaultCommands={},e.commands={},e.active={};var r=e.config,i=r.pStylePrefix,l=e.defaultCommands;i&&(r.stylePrefix=i+r.stylePrefix),Object.keys(r.defaults).forEach(function(d){var h=r.defaults[d];h.id&&e.add(h.id,h)}),l["tlb-delete"]={run:function(d){return d.runCommand("core:component-delete")}},l["tlb-clone"]={run:function(d){d.runCommand("core:copy"),d.runCommand("core:paste",{action:"clone-component"})}},l["tlb-move"]={run:function(d,h,g){g===void 0&&(g={});var y=d.getModel(),b=g&&g.event,P=g.target,D=P||d.getSelected(),$=P?[P]:Nd([],d.getSelectedAll(),!0),X=b&&b.type=="dragstart",lt={preserveSelected:1},Tt=["absolute","translate"];if(!D||!D.get("draggable"))return y.logWarning("The element is not draggable");var bt=D.get("dmode")||y.get("dmode"),Zt=function(){return y.stopDefault(lt)},ue=(0,O.includes)(Tt,bt);$.forEach(function(Ze){return Ze.trigger("disable")}),X?setTimeout(Zt,0):Zt();var Oe=function(Ze){y.trigger("".concat(Si,":start"),Ze)},Ie=function(Ze){y.trigger(Si,Ze)},ee=function(Ze,ln,ne){$.forEach(function(hn){return hn.set("status","selected")}),d.select($),D.emitUpdate(),y.trigger("".concat(Si,":end"),ne),setTimeout(function(){return y.runDefault(lt)}),(ue||ne.cancelled)&&y.set("_cmpDrag",1)};if(ue)d.runCommand("core:component-drag",{guidesInfo:1,mode:bt,target:D,onStart:Oe,onDrag:Ie,onEnd:ee,event:b});else{X&&b.dataTransfer.setDragImage(D.view.el,0,0);var je=d.Commands.get("move-comp");je.onStart=Oe,je.onDrag=Ie,je.onEndMoveFromModel=ee,je.initSorterFromModels($)}$.forEach(function(Ze){return Ze.set("status","freezed-selected")})}},l["core:undo"]=function(d){return d.UndoManager.undo()},l["core:redo"]=function(d){return d.UndoManager.redo()},Fd.forEach(function(d){var h=d[2],g=vr(828)("./".concat(d[1])).default,y="core:".concat(d[0]);l[y]=g,h&&(l[h]=g,["run","stop"].forEach(function(b){t.on("".concat(b,":").concat(h),function(){for(var P=[],D=0;D<arguments.length;D++)P[D]=arguments[D];return t.trigger.apply(t,Nd(["".concat(b,":").concat(y)],P,!1))})}))}),r.model=t.Canvas;for(var f in l)e.add(f,l[f]);return e}return n.prototype.add=function(t,e){var r=(0,O.isFunction)(e)?{run:e}:e;return r.stop||(r.noStop=!0),delete r.initialize,r.id=t,this.commands[t]=Pp.default.extend(r),this},n.prototype.get=function(t){var e=this.commands[t];return(0,O.isFunction)(e)?(e=new e(this.config),this.commands[t]=e):e||this.em.logWarning("'".concat(t,"' command not found")),e},n.prototype.extend=function(t,e){e===void 0&&(e={});var r=this.get(t);if(r){var i=Wc(Wc({},r.constructor.prototype),e);this.add(t,i);var l=Fd.filter(function(f){return"core:".concat(f[0])===t&&f[2]})[0];l&&this.add(l[2],i)}return this},n.prototype.has=function(t){return!!this.commands[t]},n.prototype.getAll=function(){return this.commands},n.prototype.run=function(t,e){return e===void 0&&(e={}),this.runCommand(this.get(t),e)},n.prototype.stop=function(t,e){return e===void 0&&(e={}),this.stopCommand(this.get(t),e)},n.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},n.prototype.getActive=function(){return this.active},n.prototype.runCommand=function(t,e){e===void 0&&(e={});var r;if(t&&t.run){var i=this,l=i.em,f=i.config,d=t.id,h=l.Editor;(!this.isActive(d)||e.force||!f.strict)&&(r=h&&t.callRun(h,e),d&&t.stop&&!t.noStop&&!e.abort&&(this.active[d]=r))}return r},n.prototype.stopCommand=function(t,e){e===void 0&&(e={});var r;if(t&&t.run){var i=this,l=i.em,f=i.config,d=t.id,h=l.Editor;(this.isActive(d)||e.force||!f.strict)&&(d&&delete this.active[d],r=t.callStop(h,e))}return r},n.prototype.create=function(t){t.stop||(t.noStop=!0);var e=Pp.default.extend(t);return new e(this.config)},n.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},n}(Ft);const km=Am,Mm={sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]};var Lm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kn=function(){return Kn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Kn.apply(this,arguments)},Dm=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Vd=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Ap=function(a){Lm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.getDefaults=function(){return(0,O.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.em=e.em;var r=this.getId()||"",i=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(i||r).replace(/ /g,"-"));var l=this.get("property");!this.get("id")&&this.set("id",l),!i&&this.set("name",(0,J.capitalize)(l).replace(/-/g," ")),this.on("change",this.__upTargets),n.callInit(this,t,e)},n.prototype.__getParentProp=function(){var t,e;return(e=(t=this.collection)===null||t===void 0?void 0:t.opts)===null||e===void 0?void 0:e.parentProp},n.prototype.__upTargets=function(t,e){var r,i=this;e===void 0&&(e={});var l=this.em,f=l.Styles,d=this.getName(),h=e.__clear,g=h?"":this.__getFullValue(e),y=this.__getParentProp(),b=this.changedAttributes(),P=(0,O.keys)(b).reduce(function(bt,Zt){return bt[Zt]=i.previous(Zt),bt},{}),D=Vd(Vd([],(0,O.keys)(this.__getClearProps()),!0),["__p"],!1),$=(0,O.keys)(b),X=!e.__up&&!y&&(h||D.some(function(bt){return $.indexOf(bt)>=0})),lt=this.get("onChange"),Tt={property:this,from:P,to:b,value:g,opts:e};f.__trgEv(f.events.propertyUpdate,Tt),lt&&lt(Tt),X&&this.__upTargetsStyle((r={},r[d]=g,r),e)},n.prototype.__upTargetsStyle=function(t,e){var r,i=(r=this.em)===null||r===void 0?void 0:r.get("StyleManager");i==null||i.addStyleTargets(Kn(Kn({},t),{__p:!!e.avoidStore}),e)},n.prototype._up=function(t,e){e===void 0&&(e={}),e.noTarget&&(e.__up=!0);var r=e.partial,i=Dm(e,["partial"]);return t.__p=!!(i.avoidStore||r),this.set(t,Kn(Kn({},i),{avoidStore:t.__p}))},n.prototype.up=function(t,e){e===void 0&&(e={}),this.set(t,Kn(Kn({},e),{__up:!0}))},n.prototype.init=function(){},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("property")},n.prototype.getLabel=function(t){var e;t===void 0&&(t={});var r=t.locale,i=r===void 0?!0:r,l=this.getId(),f=this.get("name")||this.get("label");return i&&((e=this.em)===null||e===void 0?void 0:e.t("styleManager.properties.".concat(l)))||f},n.prototype.getValue=function(t){t===void 0&&(t={});var e=t.noDefault,r=this.get("value");return!this.hasValue()&&!e?this.getDefaultValue():r},n.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,r=e&&this.getParentTarget(),i=this.get("value");return!(0,O.isUndefined)(i)&&i!==""&&!r},n.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},n.prototype.getStyle=function(t){var e;t===void 0&&(t={});var r=this.getName(),i=t.camelCase?(0,J.camelCase)(r):r;return e={},e[i]=this.__getFullValue(t),e},n.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,O.isUndefined)(t)?this.get("defaults"):t)},n.prototype.upValue=function(t,e){e===void 0&&(e={});var r=t===null||t===""?this.__getClearProps():this.__parseValue(t,e);return this._up(r,e)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.clear=function(t){return t===void 0&&(t={}),this._up(this.__getClearProps(),Kn(Kn({},t),{__clear:!0})),this},n.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},n.prototype.getParent=function(){return this.__getParentProp()},n.prototype.isFull=function(){return!!this.get("full")},n.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},n.prototype.__getClearProps=function(){return{value:""}},n.prototype.setValue=function(t,e,r){e===void 0&&(e=!0),r===void 0&&(r={});var i=this.parseValue(t),l=!e;!l&&this.set({value:void 0},{avoidStore:l,silent:!0}),this.set(i,Kn({avoidStore:l},r))},n.prototype.setValueFromInput=function(t,e,r){r===void 0&&(r={}),this.setValue(t,e,Kn(Kn({},r),{fromInput:1}))},n.prototype.parseValue=function(t,e){e===void 0&&(e={});var r={value:t},i="!important";if((0,O.isString)(t)&&t.indexOf(i)!==-1&&(r.value=t.replace(i,"").trim(),r.important=!0),!this.get("functionName")&&!e.complete)return r;var l=[],f="".concat(r.value),d=f.indexOf("(")+1,h=f.lastIndexOf(")"),g=f.substring(0,d-1);if(g&&(r.functionName=g),l.push(d),h>=0&&l.push(h),r.value=String.prototype.substring.apply(f,l),e.numeric){var y=parseFloat(r.value);r.unit=r.value.replace(y,""),r.value=y}return r},n.prototype.__getFullValue=function(t){var e=t===void 0?{}:t,r=e.withDefault;return!this.hasValue()&&r?this.getDefaultValue():this.getFullValue()},n.prototype.getFullValue=function(t,e){e===void 0&&(e={});var r=this.get("functionName"),i=this.getDefaultValue(),l=(0,O.isUndefined)(t)?this.get("value"):t,f=!(0,O.isUndefined)(l)&&l!=="";if(l&&i&&l===i)return i;if(r&&f){var d=r==="url"?"'".concat(l.replace(/'|"/g,""),"'"):l;l="".concat(r,"(").concat(d,")")}return f&&this.get("important")&&!e.skipImportant&&(l="".concat(l," !important")),l||""},n.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},n.prototype.getParentTarget=function(){return this.get("parentTarget")||null},n.prototype.__parseFn=function(t){t===void 0&&(t="");var e=t.indexOf("(")+1,r=t.lastIndexOf(")");return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,r>=0?r:void 0]).trim()}},n.prototype.__checkVisibility=function(t){var e=t.target,r=t.component,i=t.sectors,l=r||e;if(!l)return!1;var f=this.getId(),d=this.getName(),h=this.get("toRequire"),g=this.get("requires"),y=this.get("requiresParent"),b=l.get("unstylable"),P=l.get("stylable-require"),D=l.get("stylable");if((0,O.isArray)(D)&&(D=D.indexOf(d)>=0),(0,O.isArray)(b)&&(D=b.indexOf(d)<0),h&&(D=!e||P&&(P.indexOf(f)>=0||P.indexOf(d)>=0)),i&&g){var $=(0,O.keys)(g);i.forEach(function(bt){bt.getProperties().forEach(function(Zt){if((0,O.includes)($,Zt.id)){var ue=g[Zt.id];D=D&&(0,O.includes)(ue,Zt.get("value"))}})})}if(y){var X=r&&r.parent(),lt=X&&X.getEl();if(lt){var Tt=(0,J.hasWin)()?window.getComputedStyle(lt):{};(0,O.each)(y,function(bt,Zt){D=D&&Tt[Zt]&&(0,O.includes)(bt,Tt[Zt])})}else D=!1}return!!D},n}(S.Hn);const Or=Ap;Ap.callParentInit=function(a,n,t,e){e===void 0&&(e={}),a.prototype.initialize.apply(n,[t,Kn(Kn({},e),{skipInit:1})])},Ap.callInit=function(a,n,t){t===void 0&&(t={}),!t.skipInit&&a.init(n,t)};var jm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zc=function(){return zc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},zc.apply(this,arguments)},Im=function(a){jm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{values:{}}},n.prototype.initialize=function(){var t=this.collection;this.prop=t==null?void 0:t.prop},n.prototype.getId=function(){return this.cid},n.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},n.prototype.getValues=function(t){t===void 0&&(t={});var e=this.get("values");return t.camelCase?Object.keys(e).reduce(function(r,i){return r[(0,J.camelCase)(i)]=e[i],r},{}):e},n.prototype.getLabel=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.getLayerLabel(this)},n.prototype.isSelected=function(){var t;return((t=this.prop)===null||t===void 0?void 0:t.getSelectedLayer())===this},n.prototype.select=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.selectLayer(this)},n.prototype.remove=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.removeLayer(this)},n.prototype.move=function(t){var e;return(e=this.prop)===null||e===void 0?void 0:e.moveLayer(this,t)},n.prototype.getStylePreview=function(t){var e;return t===void 0&&(t={}),(e=this.prop)===null||e===void 0?void 0:e.getStylePreview(this,t)},n.prototype.hasPreview=function(){var t;return!!(!((t=this.prop)===null||t===void 0)&&t.get("preview"))},n.prototype.upValues=function(t){return t===void 0&&(t={}),this.set("values",zc(zc({},this.getValues()),t))},n}(S.Hn);const Rm=Im;var Nm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hd=function(a){Nm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={}),this.prop=e.prop},n}(S.FE);const Fm=Hd;Hd.prototype.model=Rm;var Vm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gl=function(){return gl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},gl.apply(this,arguments)},Bd=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},Ud=function(a){return a==="integer"||a==="number"},Hm=function(a){Vm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return gl(gl({},Or.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Or.callParentInit(Or,this,t,e);var r=this.em,i=new Dp(this.get("properties")||[],{em:r,parentProp:this});this.set("properties",i,{silent:!0}),this.listenTo(i,"change",this.__upProperties),Or.callInit(this,t,e)},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),n.prototype.getProperties=function(){return Bd([],this.get("properties").models,!0)},n.prototype.getProperty=function(t){return this.properties.filter(function(e){return e.getId()===t||e.getName()===t})[0]},n.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},n.prototype.isDetached=function(){return!!this.get("detached")},n.prototype.getValues=function(t){var e=t===void 0?{}:t,r=e.byName;return this.getProperties().reduce(function(i,l){var f=r?l.getName():l.getId();return i[f]="".concat(l.__getFullValue()),i},{})},n.prototype.getSeparator=function(){return this.getSplitSeparator()},n.prototype.getJoin=function(){return this.__getJoin()},n.prototype.getStyleFromProps=function(t){var e;t===void 0&&(t={});var r=this.getName(),i=this.__getJoin(),l=this.get("toStyle"),f=this.getValues(),d={};if(l)d=l(f,{join:i,name:r,property:this});else if(f=this.getValues({byName:!0}),this.isDetached())d=f;else{var h=this.getProperties().map(function(g){return g.__getFullValue({withDefault:1})}).filter(Boolean).join(i);d=(e={},e[r]=h,e)}return this.isDetached()?d[r]="":(d[r]=d[r]||"",d=gl(gl({},d),this.getProperties().reduce(function(g,y){return g[y.getName()]="",g},{}))),t.camelCase?Object.keys(d).reduce(function(g,y){return g[(0,J.camelCase)(y)]=d[y],g},{}):d},n.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},n.prototype.__upProperties=function(t,e){if(e===void 0&&(e={}),!(e.__up||e.__clearIn)){var r=this.__getParentProp();if(r)return r.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},n.prototype.__upTargetsStyleProps=function(t,e){var r;t===void 0&&(t={});var i=this.getStyleFromProps();if(this.isDetached()&&e){var l=e.getName();i=(r={},r[l]=i[l],r)}this.__upTargetsStyle(i,t)},n.prototype._up=function(t,e){return e===void 0&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),Or.prototype._up.call(this,t,e),this},n.prototype.getStyle=function(t){return this.getStyleFromProps(t)},n.prototype.__getFullValue=function(t){if(t===void 0&&(t={}),this.isDetached()||t.__clear)return"";var e=this.getStyleFromProps()[this.getName()]||"";return ua(e)},n.prototype.__getJoin=function(){var t=this.get("join");return(0,O.isString)(t)?t:this.get("separator")},n.prototype.__styleHasProps=function(t){t===void 0&&(t={});var e=this.getName(),r=this.getProperties(),i=r.map(function(f){return f.getName()}),l=Bd([e],i,!0);return l.some(function(f){return!(0,O.isUndefined)(t[f])&&t[f]!==""})},n.prototype.__splitValue=function(t,e){return ua(t).split(e).map(function(r){return r.trim()}).filter(Boolean)},n.prototype.__splitStyleName=function(t,e,r){return this.__splitValue(t[e]||"",r)},n.prototype.__getSplitValue=function(t,e){t===void 0&&(t="");var r=e===void 0?{}:e,i=r.byName,l=this.getProperties(),f=l.length===4&&l.every(function(g){return Ud(g.getType())}),d=this.__splitValue(t,this.getSplitSeparator()),h={};return l.forEach(function(g,y){var b=d[y],P=(0,O.isUndefined)(b)?"":b;if(f){var D=d.length;P=d[y]||d[y%D+(D!=1&&D%2?1:0)]||P}var $=i?g.getName():g.getId();h[$]=P||""}),h},n.prototype.__getPropsFromStyle=function(t,e){if(t===void 0&&(t={}),e===void 0&&(e={}),!this.__styleHasProps(t))return null;var r=e.byName,i=this.getName(),l=this.getProperties(),f=this.getSplitSeparator(),d=this.get("fromStyle"),h=d?d(t,{property:this,name:i,separator:f}):{};return d||(h=this.__getSplitValue(t[i]||"",{byName:r}),l.forEach(function(g){var y=t[g.getName()],b=r?g.getName():g.getId();!(0,O.isUndefined)(y)&&y!==""&&(h[b]=y)})),h},n.prototype.__setProperties=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.getProperties().forEach(function(i){var l=t[i.getId()];i.__getFullValue()!==l&&i.upValue(l,e)});var r=(0,O.keys)(t).map(function(i){return t[i]}).join(" ");this.set("value",r,{silent:!0})},n.prototype.clear=function(){var t=this;return this.getProperties().map(function(e){return e.clear({__clearIn:!t.isDetached()})}),Or.prototype.clear.call(this),this},n.prototype.hasValue=function(t){return this.getProperties().some(function(e){return e.hasValue(t)})},n.prototype.getFullValue=function(){return this.__getFullValue()},n.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},n}(Or);const ml=Hm;var Bm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_o=function(){return _o=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},_o.apply(this,arguments)},Um=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Wm=/,(?![^\(]*\))/,zm=/\s(?![^(]*\))/,Km=function(a){Bm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return _o(_o({},ml.getDefaults()),{layers:[],layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),ml.callParentInit(ml,this,t,e);var r=this.get("layers"),i=new Fm(r,{prop:this});i.property=this,i.properties=this.get("properties"),this.set("layers",i,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(i,"add remove",this.__upLayers),ml.callInit(this,t,e)},n.prototype.getLayers=function(){return this.__getLayers().models},n.prototype.__getLayers=function(){return this.get("layers")},n.prototype.getLayer=function(t){return t===void 0&&(t=0),this.__getLayers().at(t)||void 0},n.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},n.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},n.prototype.selectLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},n.prototype.moveLayer=function(t,e){e===void 0&&(e=0);var r=t?t.getIndex():-1;r>=0&&(0,O.isNumber)(e)&&e>=0&&e<this.getLayers().length&&r!==e&&(this.removeLayer(t),this.__getLayers().add(t,{at:e}))},n.prototype.addLayer=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r={};this.getProperties().forEach(function(l){var f=l.getId(),d=t[f];r[f]=(0,O.isUndefined)(d)?l.getDefaultValue():d});var i=this.__getLayers().push({values:r},e);return i},n.prototype.removeLayer=function(t){return this.__getLayers().remove(t)},n.prototype.removeLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},n.prototype.getLayerLabel=function(t){var e="";if(t){var r=this.get("layerLabel"),i=t.getValues(),l=t.getIndex();if(r)e=r(t,{index:l,values:i,property:this});else{var f=[];this.getProperties().map(function(d){f.push(i[d.getId()])}),e=f.filter(Boolean).join(" ")}}return e},n.prototype.getStyleFromLayer=function(t,e){var r;e===void 0&&(e={});var i=this.__getJoin(),l=this.__getJoinLayers(),f=this.get("toStyle"),d=this.getName(),h=t.getValues(),g;if(f)g=f(h,{join:i,joinLayers:l,name:d,layer:t,property:this});else{var y=this.getProperties().map(function(b){var P=b.getName(),D=h[b.getId()],$=(0,O.isUndefined)(D)?b.getDefaultValue():D;if(e.number&&Ud(b.getType())){var X=b.parseValue(D,e.number);$="".concat(X.value).concat(X.unit)}return{name:P,value:$}});g=this.isDetached()?y.reduce(function(b,P){return b[P.name]=P.value,b},{}):(r={},r[this.getName()]=y.map(function(b){return b.value}).join(i),r)}return e.camelCase?Object.keys(g).reduce(function(b,P){return b[(0,J.camelCase)(P)]=g[P],b},{}):g},n.prototype.getStylePreview=function(t,e){e===void 0&&(e={});var r={},i=this.get("preview");return i&&(r=this.getStyleFromLayer(t,e)),r},n.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,O.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},n.prototype.__upProperties=function(t,e){var r;e===void 0&&(e={});var i=this.getSelectedLayer();i&&(i.upValues((r={},r[t.getId()]=t.__getFullValue(),r)),!e.__up&&this.__upTargetsStyleProps(e))},n.prototype.__upLayers=function(t,e,r){this.__upTargetsStyleProps(r||e)},n.prototype.__upTargets=function(t,e){if(e===void 0&&(e={}),!e.__select)return Or.prototype.__upTargets.call(this,t,e)},n.prototype.__upTargetsStyleProps=function(t){t===void 0&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(),t)},n.prototype.__upTargetsStyle=function(t,e){return Or.prototype.__upTargetsStyle.call(this,t,e)},n.prototype.__upSelected=function(t,e){var r=t===void 0?{}:t,i=r.noEvent;e===void 0&&(e={});var l=this.em.Styles,f=this.getSelectedLayer(),d=f==null?void 0:f.getValues();d&&this.getProperties().forEach(function(h){var g,y=(g=d[h.getId()])!==null&&g!==void 0?g:"";h.__getFullValue()!==y&&h.upValue(y,_o(_o({},e),{__up:!0}))}),!i&&l.__trgEv(l.events.layerSelect,{property:this})},n.prototype._up=function(t,e){e===void 0&&(e={});var r=t.__layers,i=r===void 0?[]:r,l=Um(t,["__layers"]);return!this.isDetached()&&this.__setLayers(i),this.__upSelected({noEvent:!0},e),Or.prototype._up.call(this,l,e),this},n.prototype.__setLayers=function(t){t===void 0&&(t=[]);var e=this.__getLayers(),r=t.map(function(i){return{values:i}});e.length===r.length?r.map(function(i,l){var f;return(f=e.at(l))===null||f===void 0?void 0:f.upValues(i.values)}):this.__getLayers().reset(r),this.__upSelected({noEvent:!0})},n.prototype.__parseValue=function(t){var e=this,r=this.parseValue(t);return r.__layers=t.split(Wm).map(function(i){return i.trim()}).map(function(i){return e.__parseLayer(i)}).filter(Boolean),r},n.prototype.__parseLayer=function(t){var e=this.get("parseLayer"),r=t.split(zm),i=this.getProperties();return e?e({value:t,values:r}):i.reduce(function(l,f,d){var h=r[d];return l[f.getId()]=(0,O.isUndefined)(h)?f.getDefaultValue():h,l},{})},n.prototype.__getLayersFromStyle=function(t){var e=this;if(t===void 0&&(t={}),!this.__styleHasProps(t))return null;var r=this.getName(),i=this.getProperties(),l=this.getLayerSeparator(),f=this.get("fromStyle"),d=f?f(t,{property:this,name:r,separatorLayers:l}):[];if(!f){var h=this.__splitStyleName(t,r,l).map(function(g){return g.split(e.getSplitSeparator())}).map(function(g){var y={};return i.forEach(function(b,P){var D=g[P];y[b.getId()]=(0,O.isUndefined)(D)?b.getDefaultValue():D}),y});i.forEach(function(g){var y=g.getId();e.__splitStyleName(t,g.getName(),l).map(function(b){var P;return P={},P[y]=b||g.getDefaultValue(),P}).forEach(function(b,P){h[P]=h[P]?_o(_o({},h[P]),b):b})}),d=h}return(0,O.isArray)(d)?d:[d]},n.prototype.getStyle=function(t){return t===void 0&&(t={}),this.getStyleFromLayers(t)},n.prototype.getStyleFromLayers=function(t){var e=this;t===void 0&&(t={});var r={},i=this.getName(),l=this.getLayers(),f=this.getProperties(),d=l.map(function(g){return e.getStyleFromLayer(g,t)});if(d.forEach(function(g){(0,O.keys)(g).map(function(y){r[y]||(r[y]=[]),r[y].push(g[y])})}),(0,O.keys)(r).map(function(g){r[g]=r[g].join(e.__getJoinLayers())}),this.isDetached())r[i]="",!l.length&&f.map(function(g){r[g.getName()]=""});else{var h=f.reduce(function(g,y){return g[y.getName()]="",g},{});r[i]=r[i]||"",r=_o(_o({},r),h)}return r},n.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),e=this.get("layerSeparator");return t||((0,O.isString)(e)?e:t)},n.prototype.__getFullValue=function(){if(this.get("detached"))return"";var t=this.getStyleFromLayers();return ua(t[this.getName()])},n.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,r=e&&this.getParentTarget();return this.getLayers().length>0&&!r},n.prototype.clear=function(t){return t===void 0&&(t={}),this.__getLayers().reset(),this.__upTargetsStyleProps(t),Or.prototype.clear.call(this),this},n.prototype.__canClearProp=function(){return!1},n}(ml);const Gm=Km;var $m=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kc=function(){return Kc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Kc.apply(this,arguments)},qm=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Ym=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},kp="data-clear-style",Xm=function(a){$m(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;(0,O.bindAll)(e,"__change","__updateStyle");var r=t.config||{},i=r.em;e.config=r,e.em=i,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.__destroyFn=e.destroy?e.destroy.bind(e):function(){};var l=e.model;l.view=e,e.onValueChange=(0,O.debounce)(e.onValueChange.bind(e),10),e.updateStatus=(0,O.debounce)(e.updateStatus.bind(e),0),e.listenTo(l,"destroy remove",e.remove),e.listenTo(l,"change:visible",e.updateVisibility),e.listenTo(l,"change:name change:className change:full",e.render),e.listenTo(l,"change:value",e.onValueChange),e.listenTo(l,"change:parentTarget",e.updateStatus),e.listenTo(i,"change:device",e.onValueChange);var f=e.init&&e.init.bind(e);return f&&f(),e}return n.prototype.events=function(){var t;return t={change:"inputValueChanged"},t["click [".concat(kp,"]")]="clear",t},n.prototype.template=function(t){var e=this,r=e.pfx,i=e.ppfx;return`
      <div class="`.concat(r,`label" data-sm-label></div>
      <div class="`).concat(i,`fields" data-sm-fields></div>
    `)},n.prototype.templateLabel=function(t){var e=this,r=e.pfx,i=e.em,l=t.parent,f=t.attributes,d=f.icon,h=d===void 0?"":d,g=f.info,y=g===void 0?"":g,b=i==null?void 0:i.getConfig().icons,P=(b==null?void 0:b.close)||"";return`
      <span class="`.concat(r,"icon ").concat(h,'" title="').concat(y,`">
        `).concat(t.getLabel(),`
      </span>
      `).concat(l?"":'<div class="'.concat(r,'clear" style="display: none" ').concat(kp,">").concat(P,"</div>"),`
    `)},n.prototype.templateInput=function(t){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(t.getDefaultValue(),`"/>
      </div>
    `)},n.prototype.remove=function(){var t=this;return S.G7.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(e){return t[e]=null}),this.__destroyFn(this._getClbOpts()),this},n.prototype.updateStatus=function(){var t,e=this,r=e.model,i=e.pfx,l=e.ppfx,f=e.config,d="".concat(l,"four-color"),h="".concat(l,"color-warn"),g=this.$el.children(".".concat(i,"label")),y=this.getClearEl(),b=y?y.style:{};g.removeClass("".concat(d," ").concat(h)),b.display="none",r.hasValue({noParent:!0})&&f.highlightChanged?(g.addClass(d),f.clearProperties&&(b.display="")):r.hasValue()&&f.highlightComputed&&g.addClass(h),(t=this.parent)===null||t===void 0||t.updateStatus()},n.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},n.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(kp,"]"))),this.clearEl},n.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),!this.emit&&this.model.upValue(t.target.value)},n.prototype.onValueChange=function(t,e,r){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},n.prototype.setValue=function(t){var e=this.model,r=(0,O.isUndefined)(t)||t===""?e.getDefaultValue():t;if(this.update)return this.__update(r);this.__setValueInput(r)},n.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},n.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},n.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},n.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(Kc(Kc({},this._getClbOpts()),{value:t}))},n.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.emit&&this.emit.bind(this);r&&r.apply(void 0,Ym([this._getClbOpts()],t,!1))},n.prototype.__updateStyle=function(t,e){e===void 0&&(e={});var r=e.complete,i=e.partial;qm(e,["complete","partial"]);var l=this.model,f=r!==!1&&i!==!0;(0,J.isObject)(t)?l.__upTargetsStyle(t,{avoidStore:!f}):l.upValue(t,{partial:!f})},n.prototype._getClbOpts=function(){var t=this,e=t.model,r=t.el,i=t.createdEl;return{el:r,createdEl:i,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},n.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,r=t.model,i=t.el,l=t.$el,f=r.getName(),d=r.getType(),h=r.get("className")||"",g="".concat(e,"property"),y=d==="number"?"".concat(e).concat(d," ").concat(e,"integer"):"".concat(e).concat(d);this.createdEl&&this.__destroyFn(this._getClbOpts()),l.empty().append(this.template(r)),l.find("[data-sm-label]").append(this.templateLabel(r));var b=this.create&&this.create.bind(this);this.createdEl=b&&b(this._getClbOpts()),l.find("[data-sm-fields]").append(this.createdEl||this.templateInput(r)),i.className="".concat(g," ").concat(y," ").concat(g,"__").concat(f," ").concat(h).trim(),i.className+=r.isFull()?" ".concat(g,"--full"):"";var P=this.onRender&&this.onRender.bind(this);return P&&P(),this.setValue(r.getValue()),this},n.prototype.onRender=function(){},n}(S.G7);const ea=Xm;var Zm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jm=function(a){Zm(n,a);function n(t){var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.properties=[],e.parent=t.parent;var r=e.collection;return e.listenTo(r,"add",e.addTo),e.listenTo(r,"reset",e.render),e}return n.prototype.addTo=function(t,e,r){this.add(t,null,r)},n.prototype.add=function(t,e,r){r===void 0&&(r={});var i=this,l=i.parent,f=i.config,d=e||this.el,h=new t.typeView({model:t,config:f});l&&(h.parent=l),h.render();var g=h.el;this.properties.push(h),(0,Xt.$Q)(d,g,r.at)},n.prototype.remove=function(){return S.G7.prototype.remove.apply(this,arguments),this.clearItems(),this},n.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},n.prototype.render=function(){var t=this,e=this,r=e.$el,i=e.pfx;this.clearItems();var l=document.createDocumentFragment();return this.collection.forEach(function(f){return t.add(f,l)}),r.empty(),r.append(l),r.attr("class","".concat(i,"properties")),this},n}(S.G7);const Mp=Jm;var Qm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gc=function(){return Gc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Gc.apply(this,arguments)},ty=function(a){Qm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){var t=this.pfx;return`
      <div class="`.concat(t,"field ").concat(t,`composite">
        <span id="`).concat(t,`input-holder"></span>
      </div>
    `)},n.prototype.remove=function(){var t;return(t=this.props)===null||t===void 0||t.remove(),ea.prototype.remove.apply(this,arguments),this},n.prototype.onValueChange=function(){},n.prototype.onRender=function(){var t=this.pfx,e=this.model,r=e.get("properties");if(r.length&&!this.props){var i=e.isDetached(),l=new Mp({config:Gc(Gc({},this.config),{highlightComputed:i,highlightChanged:i}),collection:r,parent:this});l.render(),this.$el.find("#".concat(t,"input-holder")).append(l.el),this.props=l}},n.prototype.clearCached=function(){ea.prototype.clearCached.apply(this,arguments),delete this.props},n}(ea);const gu=ty;var ey=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ry=function(a){ey(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},n.prototype.template=function(){var t=this,e=t.pfx,r=t.ppfx,i=t.em,l=i==null?void 0:i.getConfig().icons,f=(l==null?void 0:l.close)||"",d=(l==null?void 0:l.move)||"";return`
      <div class="`.concat(e,`label-wrp">
        <div id="`).concat(e,'move" class="').concat(r,`no-touch-actions" data-move-layer>
          `).concat(d,`
        </div>
        <div id="`).concat(e,`label" data-label></div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(e,'preview" class="').concat(e,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(e,'close-layer" class="').concat(e,`btn-close" data-close-layer>
          `).concat(f,`
        </div>
      </div>
      <div id="`).concat(e,`inputs" data-properties></div>
    `)},n.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,r=t.config||{};this.em=r.em,this.config=r,this.sorter=t.sorter,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.propertyView=t.propertyView;var i=this.propertyView.model;this.listenTo(e,"destroy remove",this.remove),this.listenTo(e,"change:values",this.updateLabel),this.listenTo(i,"change:selectedLayer",this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data("model",e)},n.prototype.initSorter=function(){var t;(t=this.sorter)===null||t===void 0||t.startSort(this.el)},n.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},n.prototype.select=function(){this.model.select()},n.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},n.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},n.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},n.prototype.updateLabel=function(){var t=this.model,e=t.getLabel();if(this.getLabelEl().innerHTML=e,t.hasPreview()){var r=this.getPreviewEl(),i=t.getStylePreview({number:{min:-3,max:3}}),l=(0,O.keys)(i).map(function(f){return"".concat(f,":").concat(i[f])}).join(";");r.setAttribute("style",l)}},n.prototype.updateVisibility=function(){var t,e=this,r=e.pfx,i=e.model,l=e.propertyView,f=this.getPropertiesWrapper(),d=i.isSelected();f.style.display=d?"":"none",this.$el[d?"addClass":"removeClass"]("".concat(r,"active")),d&&f.appendChild((t=l.props)===null||t===void 0?void 0:t.el)},n.prototype.render=function(){var t=this,e=t.el,r=t.pfx,i=t.model;return e.innerHTML=this.template(),e.className="".concat(r,"layer"),i.hasPreview()&&(e.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},n}(S.G7);const ny=ry;var iy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),oy=function(a){iy(n,a);function n(t){var e=a.call(this,t)||this,r=e.collection,i=t.config||{},l=i.em,f=i.stylePrefix||"",d=i.pStylePrefix||"";e.config=i,e.pfx=f,e.ppfx=d,e.propertyView=t.propertyView,e.className="".concat(f,"layers ").concat(d,"field"),e.listenTo(r,"add",e.addTo),e.listenTo(r,"reset",e.reset),e.items=[];var h=l==null?void 0:l.Utils;return e.sorter=h?new h.Sorter({container:e.el,ignoreViewChildren:1,containerSel:".".concat(f,"layers"),itemSel:".".concat(f,"layer"),pfx:i.pStylePrefix,em:l}):"",r.view=e,e.$el.data("model",r),e.$el.data("collection",r),e}return n.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},n.prototype.addToCollection=function(t,e,r){var i=e||null,l=this,f=l.propertyView,d=l.config,h=l.sorter,g=l.$el,y=new ny({model:t,config:d,sorter:h,propertyView:f}),b=y.render().el;if(this.items.push(y),i)i.appendChild(b);else if(typeof r<"u"){var P="before";g.children().length===r&&(r--,P="after"),r<0?g.append(b):g.children().eq(r)[P](b)}else g.append(b);return b},n.prototype.reset=function(t,e){this.clearItems(),this.render()},n.prototype.remove=function(){return this.clearItems(),S.G7.prototype.remove.apply(this,arguments),this},n.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},n.prototype.render=function(){var t=this,e=this,r=e.$el,i=e.sorter,l=document.createDocumentFragment();return r.empty(),this.collection.forEach(function(f){return t.addToCollection(f,l)}),r.append(l),r.attr("class",this.className),i&&(i.plh=null),this},n}(S.G7);const ay=oy;var sy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yl=function(){return yl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},yl.apply(this,arguments)},ly=function(a){sy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return yl(yl({},gu.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},n.prototype.templateInput=function(){var t=this,e=t.pfx,r=t.em,i=r==null?void 0:r.getConfig().icons,l=(i==null?void 0:i.plus)||"+";return`
      <div class="`.concat(e,"field ").concat(e,`stack">
        <button type="button" id="`).concat(e,`add" data-add-layer>
          `).concat(l,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},n.prototype.init=function(){var t=this.model;this.listenTo(t.__getLayers(),"change reset",this.updateStatus)},n.prototype.addLayer=function(){this.model.addLayer({},{at:0})},n.prototype.setValue=function(){},n.prototype.remove=function(){var t;return(t=this.layersView)===null||t===void 0||t.remove(),gu.prototype.remove.apply(this,arguments),this},n.prototype.clearCached=function(){gu.prototype.clearCached.apply(this,arguments),delete this.layersView},n.prototype.onRender=function(){var t=this,e=t.model,r=t.el,i=t.config,l=e.get("properties");if(l.length&&!this.props){var f=new Mp({config:yl(yl({},i),{highlightComputed:!1,highlightChanged:!1}),collection:l,parent:this});f.render();var d=new ay({collection:e.__getLayers(),config:i,propertyView:this});d.render();var h=r.querySelector("[data-layers-wrapper]");h.appendChild(d.el),this.props=f,this.layersView=d}},n}(gu);const uy=ly;var cy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$c=function(){return $c=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},$c.apply(this,arguments)},fy=function(a){cy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return $c($c({},ea.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},n.prototype.templateInput=function(){var t,e=this,r=e.pfx,i=e.em,l=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,f=l==null?void 0:l.close;return`
      <div class="`.concat(r,"field ").concat(r,`file">
        <div id='`).concat(r,`input-holder'>
          <div class="`).concat(r,`btn-c">
            <button class="`).concat(r,'btn" id="').concat(r,`images" type="button" data-open-assets>
              `).concat(i.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(r,'preview-box" class="').concat(r,`preview-file" data-preview-box>
          <div id="`).concat(r,'preview-file" class="').concat(r,`preview-file-cnt" data-preview></div>
          <div id="`).concat(r,'close" class="').concat(r,'preview-file-close" data-clear-asset>').concat(f,`</div>
        </div>
      </div>
    `)},n.prototype.__setValueInput=function(t){var e=this,r=e.model,i=e.el,l=r.getDefaultValue(),f=i.querySelector("[data-preview-box]"),d=i.querySelector("[data-preview]");f.style.display=!t||t===l?"none":"",d.style.backgroundImage=t||r.getDefaultValue()},n.prototype.openAssetManager=function(){var t=this,e,r=(e=this.em)===null||e===void 0?void 0:e.Assets;r==null||r.open({select:function(i,l){var f=(0,O.isString)(i)?i:i.get("src");t.model.upValue(f,{partial:!l}),l&&r.close()},types:["image"],accept:"image/*"})},n}(ea);const py=fy;var dy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hy=function(a){dy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(t){return""},n.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},n.prototype.setValue=function(t){},n.prototype.onRender=function(){var t=this,e=t.ppfx,r=t.model,i=t.el;if(!this.inputInst){var l=r.input;l.ppfx=e,l.render();var f=i.querySelector(".".concat(e,"fields"));f.appendChild(l.el),this.input=l.inputEl.get(0),this.inputInst=l}},n.prototype.clearCached=function(){ea.prototype.clearCached.apply(this,arguments),this.inputInst=null},n}(ea);const ra=hy;var vy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gy=function(a){vy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.setValue=function(t){var e;(e=this.inputInst)===null||e===void 0||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},n.prototype.remove=function(){var t=this;ra.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),["inputInst","$color"].forEach(function(r){return t[r]=null}),this},n.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},n.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,r=e.ppfx,i=e.model,l=e.em,f=e.el,d=new Zr({target:l,model:i,ppfx:r,onChange:this.__handleChange}),h=d.render();f.querySelector(".".concat(r,"fields")).appendChild(h.el),this.input=(t=h.inputEl)===null||t===void 0?void 0:t.get(0),this.inputInst=h}},n}(ra);const my=gy;var yy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qc=function(){return qc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},qc.apply(this,arguments)},Wd=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},_y=function(a){yy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return qc(qc({},Or.getDefaults()),{options:[],full:0})},n.prototype.getOptions=function(){var t=this.attributes,e=t.options,r=t.list;return(e&&e.length?e:r)||[]},n.prototype.getOption=function(t){var e=this,r=(0,J.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(i){return e.getOptionId(i)===r})[0]||null},n.prototype.setOptions=function(t){return t===void 0&&(t=[]),this.set("options",t),this},n.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(Wd(Wd([],e,!0),[t],!1))}return this},n.prototype.getOptionId=function(t){return(0,J.isDef)(t.id)?t.id:t.value},n.prototype.getOptionLabel=function(t,e){var r;e===void 0&&(e={});var i=e.locale,l=i===void 0?!0:i,f=((0,O.isString)(t)?this.getOption(t):t)||{},d=this.getOptionId(f),h=f.label||f.name||d,g=e.property||this.getId();return l&&((r=this.em)===null||r===void 0?void 0:r.t("styleManager.options.".concat(g,".").concat(d)))||h},n.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Or.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},n.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},n}(Or);const Lp=_y;var wy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),by=function(a){wy(n,a);function n(t){var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.updateOptions),e}return n.prototype.templateInput=function(){var t=this,e=t.pfx,r=t.ppfx;return`
      <div class="`.concat(r,"field ").concat(r,`select">
        <span id="`).concat(e,`input-holder"></span>
        <div class="`).concat(r,`sel-arrow">
          <div class="`).concat(r,`d-s-arrow"></div>
        </div>
      </div>
    `)},n.prototype.updateOptions=function(){delete this.input,this.onRender()},n.prototype.onRender=function(){var t=this.pfx,e=this.model,r=e.getOptions();if(!this.input){var i=[];r.forEach(function(f){var d=e.getOptionId(f),h=e.getOptionLabel(d),g=f.style?f.style.replace(/"/g,"&quot;"):"",y=g?'style="'.concat(g,'"'):"",b=d.replace(/"/g,"&quot;");i.push('<option value="'.concat(b,'" ').concat(y,">").concat(h,"</option>"))});var l=this.el.querySelector("#".concat(t,"input-holder"));l.innerHTML="<select>".concat(i.join(""),"</select>"),this.input=l.firstChild}},n.prototype.__setValueInput=function(t){var e=this.model,r=this.getInputEl(),i=e.getOptions()[0],l=i?e.getOptionId(i):"";r&&(r.value=t||l)},n}(ea);const zd=by;var Cy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yc=function(){return Yc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Yc.apply(this,arguments)},xy=function(a){Cy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return Yc(Yc({},Lp.getDefaults()),{full:1})},n}(Lp);const Sy=xy;var Oy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ty=function(a){Oy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},n.prototype.onRender=function(){var t=this,e=t.pfx,r=t.ppfx,i=this.model,l="".concat(r,"radio-item-label"),f=i.getName(),d=i.getOptions(),h="".concat(e,"radio ").concat(e,"radio-").concat(f),g=i.cid;if(!this.input){var y=[];d.forEach(function(P){var D=P.className?"".concat(P.className," ").concat(e,"icon ").concat(l):"",$=i.getOptionId(P),X="".concat(f,"-").concat($,"-").concat(g),lt=D?"":i.getOptionLabel($),Tt=P.title?'title="'.concat(P.title,'"'):"",bt=i.getValue()===$?"checked":"";y.push(`
          <div class="`.concat(r,`radio-item">
            <input type="radio" class="`).concat(h,'" id="').concat(X,'" name="').concat(f,"-").concat(g,'" value="').concat($,'" ').concat(bt,`/>
            <label class="`).concat(D||l,'" ').concat(Tt,' for="').concat(X,'">').concat(lt,`</label>
          </div>
        `))});var b=this.el.querySelector(".".concat(r,"field"));b.innerHTML='<div class="'.concat(r,'radio-items">').concat(y.join(""),"</div>"),this.input=b.firstChild}},n.prototype.__setValueInput=function(t){var e,r=this.model,i=t||r.getDefaultValue(),l=(e=this.getInputEl())===null||e===void 0?void 0:e.querySelector('[value="'.concat(i,'"]'));l&&(l.checked=!0)},n}(zd);const Ey=Ty;var Py=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gs=function(){return gs=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},gs.apply(this,arguments)},Ay=function(a){Py(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return gs(gs({},Or.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},n.prototype.getUnits=function(){return this.get("units")||[]},n.prototype.getUnit=function(){return this.get("unit")},n.prototype.getMin=function(){return this.get("min")},n.prototype.getMax=function(){return this.get("max")},n.prototype.getStep=function(){return this.get("step")},n.prototype.upUnit=function(t,e){return e===void 0&&(e={}),this._up({unit:t},e)},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Or.callParentInit(Or,this,t,e);var r=this.get("unit"),i=this.getUnits();this.input=(0,J.hasWin)()?new Dr({model:this}):void 0,i.length&&!r&&this.set("unit",i[0],{silent:!0}),Or.callInit(this,t,e)},n.prototype.__getClearProps=function(){return gs(gs({},Or.prototype.__getClearProps()),{unit:""})},n.prototype.parseValue=function(t,e){e===void 0&&(e={});var r=Or.prototype.parseValue.apply(this,arguments),i=this.input.validateInputValue(r.value,gs({deepCheck:1},e)),l=i.value,f=i.unit;return r.value=l,r.unit=f,r},n.prototype.getFullValue=function(){var t=this.get("value"),e=this.get("unit"),r=(0,O.isUndefined)(t)?"":"".concat(t),i=!(0,O.isUndefined)(e)&&r?e:"",l="".concat(r).concat(i);return Or.prototype.getFullValue.apply(this,[l])},n}(Or);const Xc=Ay;var ky=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zc=function(){return Zc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Zc.apply(this,arguments)},My=function(a){ky(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return Zc(Zc({},Xc.getDefaults()),{showInput:1})},n}(Xc);const Ly=My;var Dy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jc=function(){return Jc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Jc.apply(this,arguments)},jy=function(a){Dy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return Jc(Jc({},ra.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},n.prototype.templateInput=function(t){var e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`field-range">
        <input type="range" min="`).concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),`"/>
      </div>
    `)},n.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},n.prototype.inputValueChanged=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value)},n.prototype.inputValueChangedSoft=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},n.prototype.setValue=function(t){var e=this.model,r=e.parseValue(t);this.getSliderEl().value=t===""?e.getDefaultValue():parseFloat(r.value),ra.prototype.setValue.apply(this,arguments)},n.prototype.onRender=function(){ra.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},n.prototype.clearCached=function(){ra.prototype.clearCached.apply(this,arguments),delete this.slider},n}(ra);const Iy=jy;var Ry=S.FE.extend(ld),Ny=Ry.extend({extendViewApi:1,init:function(){var a=this,n=a.opts,t=a.em,e=n.module||(t==null?void 0:t.get("StyleManager"));e&&(e.__listenAdd(this,e.events.propertyAdd),e.__listenRemove(this,e.events.propertyRemove))},types:[{id:"stack",model:Gm,view:uy,isType:function(a){if(a&&a.type=="stack")return a}},{id:"composite",model:ml,view:gu,isType:function(a){if(a&&a.type=="composite")return a}},{id:"file",model:Or,view:py,isType:function(a){if(a&&a.type=="file")return a}},{id:"color",model:Or,view:my,isType:function(a){if(a&&a.type=="color")return a}},{id:"select",model:Lp,view:zd,isType:function(a){if(a&&a.type=="select")return a}},{id:"radio",model:Sy,view:Ey,isType:function(a){if(a&&a.type=="radio")return a}},{id:"slider",model:Ly,view:Iy,isType:function(a){if(a&&a.type=="slider")return a}},{id:"integer",model:Xc,view:ra,isType:function(a){if(a&&a.type=="integer")return a}},{id:"number",model:Xc,view:ra,isType:function(a){if(a&&a.type=="number")return a}},{id:"base",model:Or,view:ea,isType:function(a){return a.type="base",a}}]});const Dp=Ny;var Fy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qc=function(){return Qc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Qc.apply(this,arguments)},Vy=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Hy=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},By=function(a){Fy(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this,i=e.em;r.em=i;var l=t||{},f=r.buildProperties(l.buildProps),d=r.get("name")||"",h=[];!r.get("id")&&r.set("id",d.replace(/ /g,"_").toLowerCase()),f?h=r.extendProperties(f):h=r.get("properties").map(function(y){return(0,O.isString)(y)?r.buildProperties(y)[0]:y}).filter(Boolean),h=h.map(function(y){return r.checkExtend(y)});var g=new Dp(h,{em:i});return g.sector=r,r.set("properties",g),r}return n.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.get("id")},n.prototype.getName=function(){var t,e=this.getId();return((t=this.em)===null||t===void 0?void 0:t.t("styleManager.sectors.".concat(e)))||this.get("name")},n.prototype.setName=function(t){return this.set("name",t)},n.prototype.isOpen=function(){return!!this.get("open")},n.prototype.setOpen=function(t){return this.set("open",t)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.getProperties=function(t){t===void 0&&(t={});var e=this.get("properties"),r=e.models?Hy([],e.models,!0):e;return r.filter(function(i){var l=!0;if(t.withValue&&(l=i.hasValue({noParent:!0})),t.withParentValue){var f=i.hasValue({noParent:!0});l=!f&&i.hasValue()}return l})},n.prototype.getProperty=function(t){return this.getProperties().filter(function(e){return e.get("id")===t})[0]||void 0},n.prototype.addProperty=function(t,e){return this.get("properties").add(this.checkExtend(t),e)},n.prototype.extendProperties=function(t,e,r){r===void 0&&(r=!1);for(var i=t.length,l=e||this.get("properties"),f=this.get("extendBuilded"),d=[],h=0,g=l.length;h<g;h++){for(var y=l[h],b=0,P=0;P<i;P++){var D=t[P];if(y.property==D.property||y.id==D.property){var $=y.properties;$&&$.length&&(y.properties=this.extendProperties(D.properties||[],$,1)),t[P]=f?(0,O.extend)(D,y):y,d[P]=t[P],b=1;continue}}b||(t.push(y),d.push(y))}return r?d.filter(function(X){return X}):t},n.prototype.checkExtend=function(t){var e=((0,O.isString)(t)?{extend:t}:t)||{},r=e.extend,i=Vy(e,["extend"]);return r?Qc(Qc({},this.buildProperties([r])[0]||{}),i):t},n.prototype.buildProperties=function(t){var e,r=t||[];if(!r.length)return[];var i=(e=this.em)===null||e===void 0?void 0:e.get("StyleManager").builtIn;return i==null?void 0:i.build(r)},n}(S.Hn);const Kd=By;var Uy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tf=function(){return tf=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},tf.apply(this,arguments)},Wy=function(a){Uy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={});var r=e.module,i=e.em;this.em=i,this.module=r,this.listenTo(this,"reset",this.onReset)},n.prototype.model=function(t,e){e===void 0&&(e={});var r=e.collection.em;return new Kd(t,tf(tf({},e),{em:r}))},n.prototype.onReset=function(t,e){e===void 0&&(e={});var r=e.previousModels||[];r.forEach(function(i){return i.get("properties").reset()})},n}(S.FE);const zy=Wy;var Aa=function(){return Aa=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Aa.apply(this,arguments)},Ky=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},ms=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},sn=function(a){return a.map(function(n){return{id:n}})},Gy=function(){function a(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var n=", sans-serif",t=["flex-start","flex-end","center"],e=ms(ms([],t,!0),["baseline","stretch"],!1);this.optsBgSize=sn(["auto","cover","contain"]),this.optsBgAttach=sn(["scroll","fixed","local"]),this.optsBgRepeat=sn(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=sn(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=sn(["visible","hidden","scroll","auto"]),this.optsDir=sn(["row","row-reverse","column","column-reverse"]),this.opstDisplay=sn(["block","inline","inline-block","flex","none"]),this.optsTransitFn=sn(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=sn(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=sn(["none","left","right"]),this.optsPos=sn(["static","relative","absolute","fixed"]),this.optsTextAlign=sn(["left","center","right","justify"]),this.optsFlexAlign=sn(e),this.optsJustCont=sn(ms(ms([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=sn(ms(ms([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=sn(ms(["auto"],e,!0)),this.optsTransitProp=sn(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=sn(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=sn(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+n,"Arial Black, Gadget"+n,"Brush Script MT"+n,"Comic Sans MS, cursive"+n,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+n,"Impact, Charcoal"+n,"Lucida Sans Unicode, Lucida Grande"+n,"Tahoma, Geneva"+n,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+n,"Verdana, Geneva"+n].map(function(r){return{id:r,label:r.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return a.prototype.__sub=function(n){var t=this;return function(){return n.map(function(e){if((0,O.isString)(e))return t.get(e);var r=e.extend,i=Ky(e,["extend"]);return Aa(Aa({},t.get(r)),i)})}},a.prototype.init=function(){var n=this,t=this,e=t.fixedValues,r=t.requireFlex,i=t.typeNumber;this.props={};var l=[["text-shadow-h",{type:i,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:e},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:r},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:i,default:"0",requiresParent:r}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:r},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:r},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(f,d){var h=d.values,g=h["box-shadow-h"],y=h["box-shadow-v"],b=h["box-shadow-blur"],P=h["box-shadow-spread"];return"".concat(g," ").concat(y," ").concat(b," ").concat(P)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(f,d){var h=d.values,g=h["text-shadow-h"],y=h["text-shadow-v"],b=h["text-shadow-blur"];return"".concat(g," ").concat(y," ").concat(b)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(f,d){var h=d.values,g=h["background-repeat-sub"]||"",y=h["background-position-sub"]||"",b=h["background-attachment-sub"]||"",P=h["background-size-sub"]||"";return[g,y,b,P].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(f,d){var h=d.property,g=d.name,y=f[g]||"",b=h.getLayerSeparator();return y?y.split(b).map(function(P){var D=h.__parseFn(P),$=D.name,X=D.value;return{"transform-type":$,"transform-value":X}}):[]},toStyle:function(f,d){var h,g=d.name;return h={},h[g]="".concat(f["transform-type"],"(").concat(f["transform-value"],")"),h},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(f){var d=f.property,h=f.to;if(h.value){var g=d.getOption(),y=Aa({},g.propValue||{}),b=d.getParent().getProperty("transform-value"),P=b.getUnit();(!P||(y==null?void 0:y.units.indexOf(P))<0)&&(y.unit=(y==null?void 0:y.units[0])||""),b.up(y)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return l.forEach(function(f){var d=f[0],h=f[1],g=f[2];n.add(d,h||{},{from:g})}),this},a.prototype.add=function(n,t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=e.from||"",i=this.props[r||n]||{},l=Aa(Aa(Aa({},i),{property:n}),t);return l.properties&&(0,O.isFunction)(l.properties)&&(l.properties=l.properties()),this.props[n]=l,l},a.prototype.get=function(n){return this.props[n]},a.prototype.build=function(n){var t=this,e=[],r=(0,O.isString)(n)?[n]:n;return r.forEach(function(i){e.push(t.get(i)||{property:i})}),e},a}();const $y=Gy;var qy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yy=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Xy=function(a){qy(n,a);function n(t){var e=a.call(this,t)||this,r=t.config||{},i=e.model,l=r.em;return e.config=r,e.em=l,e.pfx=r.stylePrefix||"",e.listenTo(i,"destroy remove",e.remove),e.listenTo(i,"change:open",e.updateOpen),e.listenTo(i,"change:visible",e.updateVisibility),e}return n.prototype.template=function(t){var e,r=t.pfx,i=t.label,l=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,f=(l==null?void 0:l.caret)||"",d="".concat(r,"sector-");return ut(Gd||(Gd=Yy([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),d,d,f,d,i)},n.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},n.prototype.updateOpen=function(){var t=this,e=t.$el,r=t.model,i=t.pfx,l=r.isOpen();e[l?"addClass":"removeClass"]("".concat(i,"open")),this.getPropertiesEl().style.display=l?"":"none"},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.getPropertiesEl=function(){var t=this,e=t.$el,r=t.pfx;return e.find(".".concat(r,"properties")).get(0)},n.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},n.prototype.renderProperties=function(){var t=this,e=t.model,r=t.config,i=e.get("properties");if(i){var l=new Mp({collection:i,config:r});this.$el.append(l.render().el)}},n.prototype.render=function(){var t=this,e=t.pfx,r=t.model,i=t.$el,l=r.getId(),f=r.getName();return i.html(this.template({pfx:e,label:f})),this.renderProperties(),i.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(l," no-select")),this.updateOpen(),this},n}(S.G7);const Zy=Xy;var Gd,Jy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qy=function(a){Jy(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.module,i=t.config,l=e.collection;return e.pfx=(i==null?void 0:i.stylePrefix)||"",e.ppfx=(i==null?void 0:i.pStylePrefix)||"",e.config=i,e.module=r,e.listenTo(l,"add",e.addTo),e.listenTo(l,"reset",e.render),e}return n.prototype.remove=function(){var t=this;return S.G7.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(e){return t[e]={}}),this},n.prototype.addTo=function(t,e,r){r===void 0&&(r={}),this.addToCollection(t,null,r)},n.prototype.addToCollection=function(t,e,r){r===void 0&&(r={});var i=this,l=i.config,f=i.el,d=e||f,h=new Zy({model:t,config:l}).render().el;return(0,Xt.$Q)(d,h,r.at),h},n.prototype.render=function(){var t=this,e=this,r=e.$el,i=e.pfx,l=e.ppfx;r.empty();var f=document.createDocumentFragment();return this.collection.each(function(d){return t.addToCollection(d,f)}),r.append(f),r.addClass("".concat(i,"sectors ").concat(l,"one-bg ").concat(l,"two-color")),this},n}(S.G7);const t0=Qy;var e0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ka=function(){return ka=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ka.apply(this,arguments)},$d=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},qd="style",mu="".concat(qd,":"),jp="".concat(mu,"sector"),r0="".concat(jp,":add"),n0="".concat(jp,":remove"),i0="".concat(jp,":update"),Ip="".concat(mu,"property"),o0="".concat(Ip,":add"),a0="".concat(Ip,":remove"),s0="".concat(Ip,":update"),Yd="".concat(mu,"layer:select"),Rp="".concat(mu,"target"),l0="".concat(mu,"custom"),Xd=function(a){return a||a===0},u0={all:qd,sectorAdd:r0,sectorRemove:n0,sectorUpdate:i0,propertyAdd:o0,propertyRemove:a0,propertyUpdate:s0,layerSelect:Yd,target:Rp,custom:l0},c0=function(a){e0(n,a);function n(t){var e=a.call(this,t,"StyleManager",new zy([],{em:t}),u0,Mm)||this;e.Sector=Kd,e.storageKey="",(0,O.bindAll)(e,"__clearStateTarget");var r=e.config,i=r.pStylePrefix;i&&(r.stylePrefix=i+r.stylePrefix),e.builtIn=new $y,e.properties=new Dp([],{em:t,module:e}),e.sectors=e.all;var l=new S.Hn({targets:[]});e.model=l;var f="component:toggled component:update:classes change:state change:device frame:resized selector:type";e.upAll=(0,O.debounce)(function(){return e.__upSel()},0),l.listenTo(t,f,e.upAll),l.listenTo(t,"component:toggled",e.__clearStateTarget);var d=(0,O.debounce)(function(){e.__upProps(),e.__trgCustom()},0);l.listenTo(t,"styleable:change undo redo",d);var h=(0,O.debounce)(function(){return e.__trgCustom()},0);return l.listenTo(t,"".concat(Yd," ").concat(Rp),h),l.on("change:lastTarget",function(){return t.trigger(Rp,e.getSelected())}),e}return n.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},n.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},n.prototype.__trgEv=function(t){for(var e,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];(e=this.em).trigger.apply(e,$d([t],r,!1))},n.prototype.__clearStateTarget=function(){var t=this,e=this.em,r=this.__getStateTarget();r&&(e==null||e.skip(function(){e.Css.remove(r),t.model.set({stateTarget:null})}))},n.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},n.prototype.postRender=function(){this.__appendTo()},n.prototype.addSector=function(t,e,r){r===void 0&&(r={});var i=this.getSector(t);return i||(e.id=t,i=this.sectors.add(e,r)),i},n.prototype.getSector=function(t,e){e===void 0&&(e={});var r=this.sectors.where({id:t})[0];return!r&&e.warn&&this._logNoSector(t),r||null},n.prototype.getSectors=function(t){t===void 0&&(t={});var e=this.sectors,r=e&&e.models?t.array?$d([],e.models,!0):e:[];return t.visible?r.filter(function(i){return i.isVisible()}):r},n.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},n.prototype.addProperty=function(t,e,r){r===void 0&&(r={});var i=this.getSector(t,{warn:!0}),l=null;return i&&(l=i.addProperty(e,r)),l},n.prototype.getProperty=function(t,e){var r=this.getSector(t,{warn:!0}),i;return r&&(i=r.properties.filter(function(l){return l.get("property")===e||l.get("id")===e})[0]),i},n.prototype.getProperties=function(t){var e,r=this.getSector(t,{warn:!0});return r&&(e=r.properties),e},n.prototype.removeProperty=function(t,e){var r=this.getProperties(t);return r?r.remove(this.getProperty(t,e)):null},n.prototype.select=function(t,e){var r=this;e===void 0&&(e={});var i=this.em,l=(0,O.isArray)(t)?t:[t],f=e.stylable,d=i.Css,h=[];l.filter(Boolean).forEach(function($){var X=$;if((0,O.isString)($)){var lt=d.getRule($)||d.setRule($);!(0,O.isUndefined)(f)&&lt.set({stylable:f}),X=lt}h.push(X)});var g=e.component||h.filter(function($){return(0,J.isComponent)($)}).reverse()[0];h=h.map(function($){return r.getModelToStyle($)});var y=i.getState(),b=h.slice().reverse()[0],P=this.getParentRules(b,{state:y,component:g}),D=this.__getStateTarget();return i.skip(function(){var $;if(y&&(!(($=b==null?void 0:b.getState)===null||$===void 0)&&$.call(b))){var X=b.getStyle();D?D.setStyle(X):D=d.getAll().add({selectors:"gjs-selected",style:X,shallow:!0,important:!0})}else D&&(d.remove(D),D=void 0)}),this.model.set({targets:h,lastTarget:b,lastTargetParents:P,stateTarget:D,component:g}),this.__upProps(e),h},n.prototype.getSelected=function(){return this.model.get("lastTarget")},n.prototype.getSelectedAll=function(){return this.model.get("targets")},n.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},n.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},n.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map(function(l){return l.addStyle(t,e)});var r=this.getSelected();r&&this.__emitCmpStyleUpdate(t);var i=this.__getStateTarget();r&&(i==null||i.setStyle(r.getStyle(),e))},n.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},n.prototype.getBuiltInAll=function(){return this.builtIn.props},n.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},n.prototype.getModelToStyle=function(t,e){e===void 0&&(e={});var r=this.em,i=e.skipAdd;if(r&&(t!=null&&t.toHTML)){var l=r.getConfig(),f=r.UndoManager,d=r.Css,h=r.Selectors,g=h?h.getConfig():{},y=l.devicePreviewMode?"":r.get("state"),b=t.get("classes"),P=b.getStyleable(),D=P.length,$=!g.componentFirst||e.useClasses,X={noCount:1},lt={state:y,addOpts:X},Tt=void 0;if(f.stop(),D&&$){var bt=r.getCurrentMedia();Tt=d.get(P,y,bt),!Tt&&!i&&(Tt=d.add(P,y,bt,{},X))}else if(l.avoidInlineStyle){var Zt=t.getId();Tt=d.getIdRule(Zt,lt),!Tt&&!i&&(Tt=d.setIdRule(Zt,{},lt)),t.is("wrapper")&&Tt.set("wrapper",1,X)}Tt&&(t=Tt),f.start()}return t},n.prototype.getParentRules=function(t,e){var r=e===void 0?{}:e,i=r.state,l=r.component,f=this.em,d=[];if(f&&t){var h=l,g=f.Css,y=f.CodeManager.getGenerator("css"),b=t.toHTML?t:t.getComponent(),P={combination:!0,array:!0},D=[],$=[],X=[];b?(D=g.getRules("#".concat(b.getId())),$=h?g.getRules(h.getSelectors().getFullName(P)):[],X=$.concat(D)):(D=h?g.getRules("#".concat(h.getId())):[],$=g.getRules(t.getSelectors().getFullName(P)),X=D.concat($));var lt=X.filter(function(Tt){return(0,O.isUndefined)(i)?1:Tt.get("state")===i}).sort(y.sortRules).reverse();d=lt.slice(lt.indexOf(t)+1)}return d},n.prototype.addType=function(t,e){this.properties.addType(t,e)},n.prototype.getType=function(t){return this.properties.getType(t)},n.prototype.getTypes=function(){return this.properties.getTypes()},n.prototype.createType=function(t,e){var r=e===void 0?{}:e,i=r.model,l=i===void 0?{}:i,f=r.view,d=f===void 0?{}:f,h=this.config,g=this.getType(t);if(g)return new g.view(ka({model:new g.model(l),config:h},d))},n.prototype.render=function(){var t=this,e=t.config,r=t.em,i=t.SectView,l=i&&i.el;return this.SectView=new t0({el:l,em:r,config:e,module:this,collection:this.sectors}),this.SectView.render().el},n.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},n.prototype.__emitCmpStyleUpdate=function(t,e){e===void 0&&(e={});var r=this.em,i="component:styleUpdate";if(!t.__p){var l=e.components||r.getSelectedAll(),f=Array.isArray(l)?l:[l],d=ka({},t);delete d.__p;var h=Object.keys(d),g={style:d};f.forEach(function(y){r.trigger(i,y,g),h.forEach(function(b){return r.trigger("".concat(i,":").concat(b),y,g)})})}},n.prototype.__upProps=function(t){var e=this;t===void 0&&(t={});var r=this.getSelected();if(r){var i=this.sectors,l=this.model.get("component"),f=this.getSelectedParents(),d=r.getStyle(),h=f.map(function(g){return{target:g,style:g.getStyle()}});i.map(function(g){g.getProperties().map(function(y){e.__upProp(y,d,h,t)})}),i.forEach(function(g){var y=g.getProperties();y.forEach(function(P){var D=P.__checkVisibility({target:r,component:l,sectors:i});P.set("visible",D)});var b=y.some(function(P){return P.isVisible()});g.set("visible",b)})}},n.prototype.__upProp=function(t,e,r,i){var l=this,f=t.getName(),d=e[f],h=Xd(d),g=t.getType()==="stack",y=t.getType()==="composite",b=ka(ka({},i),{__up:!0}),P=!y&&!g,D=g?t.__getLayersFromStyle(e):[],$=y?t.__getPropsFromStyle(e):{},X=h?d:null,lt=null;if(g&&D===null||y&&$===null){var Tt=g?"__getLayersFromStyle":"__getPropsFromStyle",bt=r.filter(function(ee){return t[Tt](ee.style)!==null})[0];if(bt){X=bt.style[f],lt=bt.target;var Zt=t[Tt](bt.style);g?D=Zt:$=Zt}}else if(!h){X=null;var bt=r.filter(function(je){return Xd(je.style[f])})[0];bt&&(X=bt.style[f],lt=bt.target)}if(t.__setParentTarget(lt),P&&t.__getFullValue()!==X&&t.upValue(X,b),g&&t.__setLayers(D||[]),y){var ue=t.getProperties();if(t.isDetached()){var Oe=t.__getPropsFromStyle(e,{byName:!0})||{},Ie=r.map(function(ee){return ka(ka({},ee),{style:t.__getPropsFromStyle(ee.style,{byName:!0})||{}})});ue.map(function(ee){return l.__upProp(ee,Oe,Ie,i)})}else t.__setProperties($||{},b),t.getProperties().map(function(ee){return ee.__setParentTarget(lt)})}},n.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(e){e.reset(),e.stopListening()}),(t=this.SectView)===null||t===void 0||t.remove(),this.model.stopListening(),this.upAll.cancel()},n}(xt);const f0=c0;var p0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kn=function(){return kn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},kn.apply(this,arguments)},Np=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?i(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},Fp=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},d0=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},h0=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))};q().$=k.default;var v0=[Vv,Ev,rg,dm,_,ge,au,f0,Cc,dg,om,Rg,Om,Th,Bh,Bi,km,hc],g0=[Cv,xa,Ae,tc];N({$:k.default});var Zd={debug:console.log,info:console.info,warning:console.warn,error:console.error},m0=function(a){p0(n,a);function n(t){t===void 0&&(t={});var e=a.call(this)||this;e.__skip=!1,e.defaultRunning=!1,e.destroyed=!1,e._config=t;var r=e.config;e.set("Config",t),e.set("modules",[]),e.set("toLoad",[]),e.set("storables",[]),e.set("selected",new z),e.set("dmode",r.dragMode);var i=r.el,l=r.log,f=l===!0?(0,O.keys)(Zd):(0,O.isArray)(l)?l:[];return(0,O.bindAll)(e,"initBaseColorPicker"),i&&r.fromElement&&(r.components=i.innerHTML),e.attrsOrig=i?(0,O.toArray)(i.attributes).reduce(function(d,h){return d[h.nodeName]=h.nodeValue,d},{}):"",r.components&&!r.pageManager&&(r.pageManager={pages:[{component:r.components}]}),v0.forEach(function(d){return e.loadModule(d)}),g0.forEach(function(d){return e.loadStorableModule(d)}),e.on("change:componentHovered",e.componentHovered,e),e.on("change:changesCount",e.updateChanges,e),e.on("change:readyLoad change:readyCanvas",e._checkReady,e),f.forEach(function(d){return e.listenLog(d)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(d){var h=d.from,g=d.to;e.listenTo(e,h,function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];e.trigger.apply(e,h0([g],y,!1)),e.logWarning("The event '".concat(h,"' is deprecated, replace it with '").concat(g,"'"))})}),e}return n.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(n.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),n.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},n.prototype.getContainer=function(){return this.config.el},n.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),Zd[t])},Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),n.prototype.getConfig=function(t){var e=this.config;return(0,O.isUndefined)(t)?e:e[t]},n.prototype.loadOnStart=function(){var t=this,e=this.config,r=e.projectData,i=e.headless,l=this.get("StorageManager");this.toLoad.reverse().forEach(function(h){return h.onLoad()});var f=function(){t.modules.forEach(function(h){return h.postLoad&&h.postLoad(t)}),t.set("readyLoad",1)};i?(r&&this.loadData(r),f()):this._storageTimeout=setTimeout(function(){return Np(t,void 0,void 0,function(){var h;return Fp(this,function(g){switch(g.label){case 0:return r?(this.loadData(r),[3,5]):[3,1];case 1:if(!(l!=null&&l.canAutoload()))return[3,5];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this.load()];case 3:return g.sent(),[3,5];case 4:return h=g.sent(),this.logError(h),[3,5];case 5:return f(),[2]}})})});var d=new n({noticeOnUnload:!1,storageManager:!1,undoManager:!1});d.Pages.onLoad(),d.Canvas.postLoad(),this.set("shallow",d)},n.prototype.updateChanges=function(){var t=this,e=this.get("StorageManager"),r=this.getDirtyCount();this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return t.trigger("update")}),this.config.noticeOnUnload&&(window.onbeforeunload=r?function(){return!0}:null),e.isAutosave()&&r>=e.getStepsBeforeSave()&&this.store().catch(function(i){return t.logError(i)})},n.prototype.loadModule=function(t){var e=new t(this);return this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),e},n.prototype.loadStorableModule=function(t){var e=this.loadModule(t);return this.storables.push(e),e},n.prototype.init=function(t,e){e===void 0&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set("Editor",t)},n.prototype.getEditor=function(){return this.get("Editor")},n.prototype.handleUpdates=function(t,e,r){var i=this;r===void 0&&(r={}),!(this.__skip||r.temporary||r.noCount||r.avoidStore||!this.get("ready"))&&(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var l=i.getDirtyCount()||0;r.unset;var f=d0(r,["unset"]);i.set("changesCount",l+1,f)},0))},n.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},n.prototype.componentHovered=function(t,e,r){var i=this.previous("componentHovered");i&&this.trigger("component:unhovered",i,r),e&&this.trigger("component:hovered",e,r)},n.prototype.getSelected=function(){return this.selected.lastComponent()},n.prototype.getSelectedAll=function(){return this.selected.allComponents()},n.prototype.setSelected=function(t,e){var r=this;e===void 0&&(e={});var i=e.event,l=i&&(i.ctrlKey||i.metaKey),f=(i||{}).shiftKey,d=((0,O.isArray)(t)?t:[t]).map(function(b){return(0,J.getModel)(b,k.default)}),h=this.getSelectedAll(),g=this.getConfig().multipleSelection,y=(0,O.isArray)(t);y&&this.removeSelected(h.filter(function(b){return!(0,O.contains)(d,b)})),d.forEach(function(b){var P=(0,J.getModel)(b,void 0);if(P&&(r.trigger("component:select:before",P,e),!P.get("selectable")||e.abort))if(e.useValid){for(var D=P.parent();D&&!D.get("selectable");)D=D.parent();P=D}else return;if(l&&g)return r.toggleSelected(P);if(f&&g){r.clearSelection(r.get("Canvas").getWindow());var $=P.collection,X=P.index(),lt,Tt;if(r.getSelectedAll().forEach(function(bt){var Zt=bt.collection,ue=bt.index();Zt===$&&(ue<X?lt=(0,O.isUndefined)(lt)?ue:Math.max(lt,ue):ue>X&&(Tt=(0,O.isUndefined)(Tt)?ue:Math.min(Tt,ue)))}),!(0,O.isUndefined)(lt))for(;lt!==X;)r.addSelected($.at(lt)),lt++;if(!(0,O.isUndefined)(Tt))for(;Tt!==X;)r.addSelected($.at(Tt)),Tt--;return r.addSelected(P)}!y&&r.removeSelected(h.filter(function(bt){return bt!==P})),r.addSelected(P,e)})},n.prototype.addSelected=function(t,e){var r=this;e===void 0&&(e={});var i=(0,J.getModel)(t,k.default),l=(0,O.isArray)(i)?i:[i];l.forEach(function(f){var d=r.selected;if(!(!f||!f.get("selectable")||f.parents().some(function(g){return d.hasComponent(g)}))){e.forceChange&&r.removeSelected(f,e);var h=d.allComponents().filter(function(g){return(0,O.contains)(g.parents(),f)});h.forEach(function(g){return r.removeSelected(g,e)}),d.addComponent(f,e),r.trigger("component:select",f,e),r.Canvas.addSpot({type:tr.q.Select,component:f})}})},n.prototype.removeSelected=function(t,e){var r=this;e===void 0&&(e={});var i=(0,J.getModel)(t,k.default);this.selected.removeComponent(i,e);var l=(0,O.isArray)(i)?i:[i];l.forEach(function(f){return r.Canvas.removeSpots({type:tr.q.Select,component:f})})},n.prototype.toggleSelected=function(t,e){var r=this;e===void 0&&(e={});var i=(0,J.getModel)(t,k.default),l=(0,O.isArray)(i)?i:[i];l.forEach(function(f){r.selected.hasComponent(f)?r.removeSelected(f,e):r.addSelected(f,e)})},n.prototype.setHovered=function(t,e){var r=this;e===void 0&&(e={});var i=function(h,g){var y=r,b=y.config,P=y.Canvas,D=r.getHovered(),$=r.getSelectedAll(),X=tr.q.Hover,lt=tr.q.Spacing;r.set("componentHovered",h||null,g),D&&(P.removeSpots({type:X,component:D}),P.removeSpots({type:lt,component:D})),h&&(P.addSpot({type:X,component:h}),(!$.includes(h)||b.showOffsetsSelected)&&P.addSpot({type:lt,component:h}))};if(!t)return i();var l="component:hover",f=(0,J.getModel)(t,void 0);if(f){if(e.forceChange&&i(),this.trigger("".concat(l,":before"),f,e),!f.get("hoverable"))if(e.useValid&&!e.abort){for(var d=f.parent();d&&!d.get("hoverable");)d=d.parent();f=d}else return;e.abort||(i(f,e),this.trigger(l,f,e))}},n.prototype.getHovered=function(){return this.get("componentHovered")},n.prototype.setComponents=function(t,e){return e===void 0&&(e={}),this.Components.setComponents(t,e)},n.prototype.getComponents=function(){var t=this.Components,e=this.CodeManager;if(!(!t||!e)){var r=t.getComponents();return e.getCode(r,"json")}},n.prototype.setStyle=function(t,e){e===void 0&&(e={});var r=this.Css;return r.clear(e),r.getAll().add(t,e),this},n.prototype.addStyle=function(t,e){e===void 0&&(e={});var r=this.getStyle().add(t,e);return(0,O.isArray)(r)?r:[r]},n.prototype.getStyle=function(){return this.Css.getAll()},n.prototype.setState=function(t){return this.set("state",t),this},n.prototype.getState=function(){return this.get("state")||""},n.prototype.getHtml=function(t){t===void 0&&(t={});var e=this.config,r=e.optsHtml,i=e.jsInHtml?this.getJs(t):"",l=t.component||this.Components.getComponent(),f=l?this.CodeManager.getCode(l,"html",kn(kn({},r),t)):"";return f+=i?"<script>".concat(i,"<\/script>"):"",f},n.prototype.getCss=function(t){t===void 0&&(t={});var e=this.config,r=e.optsCss,i=t.avoidProtected,l=(0,O.isUndefined)(t.keepUnusedStyles)?e.keepUnusedStyles:t.keepUnusedStyles,f=this.Css,d=t.component||this.Components.getComponent(),h=i?"":e.protectedCss,g=d&&this.CodeManager.getCode(d,"css",kn(kn({cssc:f,keepUnusedStyles:l},r),t));return d?t.json?g:h+g:""},n.prototype.getJs=function(t){t===void 0&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,"js").trim():""},n.prototype.store=function(t){return Np(this,void 0,void 0,function(){var e;return Fp(this,function(r){switch(r.label){case 0:return e=this.storeData(),[4,this.Storage.store(e,t)];case 1:return r.sent(),this.clearDirtyCount(),[2,e]}})})},n.prototype.load=function(t,e){return e===void 0&&(e={}),Np(this,void 0,void 0,function(){var r;return Fp(this,function(i){switch(i.label){case 0:return[4,this.Storage.load(t)];case 1:return r=i.sent(),this.loadData(r),[4,(0,J.wait)()];case 2:return i.sent(),e.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,r]}})})},n.prototype.storeData=function(){var t={},e=this.getEditing();return e&&e.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(r){t=kn(kn({},t),r.store(1))}),JSON.parse(JSON.stringify(t))},n.prototype.loadData=function(t){return t===void 0&&(t={}),(0,J.isEmptyObj)(t)||(this.storables.forEach(function(e){return e.clear()}),this.storables.forEach(function(e){return e.load(t)})),t},n.prototype.getDeviceModel=function(){var t=this.get("device");return this.Devices.get(t)},n.prototype.runDefault=function(t){t===void 0&&(t={});var e=this.get("Commands").get(this.config.defaultCommand);!e||this.defaultRunning||(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},n.prototype.stopDefault=function(t){t===void 0&&(t={});var e=this.get("Commands"),r=e.get(this.config.defaultCommand);!r||!this.defaultRunning||(r.stop(this,this,t),this.defaultRunning=!1)},n.prototype.refreshCanvas=function(t){t===void 0&&(t={}),this.set("canvasOffset",null),this.set("canvasOffset",this.Canvas.getOffset()),t.tools&&this.trigger("canvas:updateTools")},n.prototype.clearSelection=function(t){var e,r=t||window;(e=r.getSelection())===null||e===void 0||e.removeAllRanges()},n.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),r=t.mediaCondition,i=t.devicePreviewMode,l=e&&e.get("widthMedia");return e&&l&&!i?"(".concat(r,": ").concat(l,")"):""},n.prototype.getWrapper=function(){return this.Components.getWrapper()},n.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},n.prototype.getCurrentFrame=function(){return this.get("currentFrame")},n.prototype.getCurrentFrameModel=function(){var t;return(t=this.getCurrentFrame()||{})===null||t===void 0?void 0:t.model},n.prototype.getIcon=function(t){var e=this.config.icons||{};return e[t]||""},n.prototype.getDirtyCount=function(){return this.get("changesCount")},n.prototype.clearDirtyCount=function(){return this.set("changesCount",0)},n.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},n.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},n.prototype.setDragMode=function(t){return this.set("dmode",t)},n.prototype.getDragMode=function(t){var e=(t==null?void 0:t.getDragMode())||this.get("dmode");return e||""},n.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.get("I18n");return r==null?void 0:r.t.apply(r,t)},n.prototype.inAbsoluteMode=function(t){return this.getDragMode(t)==="absolute"},n.prototype.destroyAll=function(){var t=this,e=this,r=e.config,i=e.view,l=this.getEditor(),f=(r.grapesjs||{}).editors,d=f===void 0?[]:f,h=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),h==null||h.destroyAll(),this.stopListening(),this.stopDefault(),this.modules.slice().reverse().forEach(function(g){return g.destroy()}),i&&i.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(g){return t[g]={}}),d.splice(d.indexOf(l),1),(0,J.hasWin)()&&(0,k.default)(r.el).empty().attr(this.attrsOrig)},n.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},n.prototype.setEditing=function(t){return this.set("editing",t),this},n.prototype.isEditing=function(){return!!this.get("editing")},n.prototype.log=function(t,e){e===void 0&&(e={});var r=e.ns,i=e.level,l=i===void 0?"debug":i;if(this.trigger("log",t,e),l&&this.trigger("log:".concat(l),t,e),r){var f="log-".concat(r);this.trigger(f,t,e),l&&this.trigger("".concat(f,":").concat(l),t,e)}},n.prototype.logInfo=function(t,e){this.log(t,kn(kn({},e),{level:"info"}))},n.prototype.logWarning=function(t,e){this.log(t,kn(kn({},e),{level:"warning"}))},n.prototype.logError=function(t,e){this.log(t,kn(kn({},e),{level:"error"}))},n.prototype.initBaseColorPicker=function(t,e){e===void 0&&(e={});var r=this.config,i=r.colorPicker,l=i===void 0?{}:i,f=r.el,d=r.stylePrefix;return(0,k.default)(t).spectrum(kn(kn({containerClassName:"".concat(d,"one-bg ").concat(d,"two-color"),appendTo:f||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"⨯"},e),l))},n.prototype.skip=function(t){this.__skip=!0;var e=this.UndoManager;e?e.skip(t):t(),this.__skip=!1},n.prototype.data=function(t,e,r){var i="_gjs-data";if(t[i]||(t[i]={}),(0,O.isUndefined)(r))return t[i][e];t[i][e]=r},n}(S.Hn);const y0=m0;var _0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),w0=function(a){_0(n,a);function n(t){var e=a.call(this,{model:t})||this,r=t.attributes,i=r.Panels,l=r.UndoManager;return t.view=e,t.once("change:ready",function(){i.active(),i.disableButtons(),l.clear(),setTimeout(function(){t.trigger("load",t.get("Editor")),t.clearDirtyCount()})}),e}return n.prototype.render=function(){var t=this,e=this,r=e.$el,i=e.model,l=i.attributes,f=l.Panels,d=l.Canvas,h=i.config,g=i.modules,y=h.stylePrefix,b=["".concat(y,"editor")];!h.customUI&&b.push("".concat(y,"one-bg ").concat(y,"two-color"));var P=(0,k.default)(h.el||"body ".concat(h.container));h.cssIcons&&(0,J.appendStyles)(h.cssIcons,{unique:!0,prepand:!0}),r.empty(),h.width&&P.css("width",h.width),h.height&&P.css("height",h.height),r.append(d.render()),r.append(f.render());var D=i.get("shallow"),$=D.get("Canvas").render();return $.style.display="none",r.append($),r.attr("class",b.join(" ")),P.addClass("".concat(y,"editor-cont")).empty().append(r),g.forEach(function(X){return X.postRender&&X.postRender(t)}),this},n}(S.G7);const b0=w0;var yu=function(){return yu=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},yu.apply(this,arguments)},Jd=function(a,n,t,e){function r(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?i(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},Qd=function(a,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,r,i,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(i=h[0]&2?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},C0=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,i;e<r;e++)(i||!(e in n))&&(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return a.concat(i||Array.prototype.slice.call(n))},x0=function(){function a(n,t){n===void 0&&(n={}),t===void 0&&(t={});var e;this.html=ut,this.config=yu(yu(yu({},Lt),n),{pStylePrefix:(e=n.stylePrefix)!==null&&e!==void 0?e:Lt.stylePrefix}),this.em=new y0(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(a.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(n){return this.em.getConfig(n)},a.prototype.getHtml=function(n){return this.em.getHtml(n)},a.prototype.getCss=function(n){return this.em.getCss(n)},a.prototype.getJs=function(n){return this.em.getJs(n)},a.prototype.getComponents=function(){return this.Components.getComponents()},a.prototype.getWrapper=function(){return this.Components.getWrapper()},a.prototype.setComponents=function(n,t){return t===void 0&&(t={}),this.em.setComponents(n,t),this},a.prototype.addComponents=function(n,t){return this.getWrapper().append(n,t)},a.prototype.getStyle=function(){return this.em.Css.getAll()},a.prototype.setStyle=function(n,t){return t===void 0&&(t={}),this.em.setStyle(n,t),this},a.prototype.addStyle=function(n,t){return t===void 0&&(t={}),this.em.addStyle(n,t)},a.prototype.getSelected=function(){return this.em.getSelected()},a.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},a.prototype.getSelectedToStyle=function(){var n=this.em.getSelected();if(n)return this.StyleManager.getModelToStyle(n)},a.prototype.select=function(n,t){return this.em.setSelected(n,t),this},a.prototype.selectAdd=function(n){return this.em.addSelected(n),this},a.prototype.selectRemove=function(n){return this.em.removeSelected(n),this},a.prototype.selectToggle=function(n){return this.em.toggleSelected(n),this},a.prototype.getEditing=function(){return this.em.getEditing()},a.prototype.setDevice=function(n){return this.em.set("device",n),this},a.prototype.getDevice=function(){return this.em.get("device")},a.prototype.runCommand=function(n,t){return t===void 0&&(t={}),this.Commands.run(n,t)},a.prototype.stopCommand=function(n,t){return t===void 0&&(t={}),this.Commands.stop(n,t)},a.prototype.store=function(n){return Jd(this,void 0,void 0,function(){return Qd(this,function(t){switch(t.label){case 0:return[4,this.em.store(n)];case 1:return[2,t.sent()]}})})},a.prototype.load=function(n,t){return t===void 0&&(t={}),Jd(this,void 0,void 0,function(){return Qd(this,function(e){switch(e.label){case 0:return[4,this.em.load(n,t)];case 1:return[2,e.sent()]}})})},a.prototype.getProjectData=function(){return this.em.storeData()},a.prototype.loadProjectData=function(n){return this.em.loadData(n)},a.prototype.storeData=function(){return this.em.storeData()},a.prototype.loadData=function(n){return this.em.loadData(n)},a.prototype.getContainer=function(){return this.config.el},a.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},a.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},a.prototype.refresh=function(n){this.em.refreshCanvas(n)},a.prototype.setCustomRte=function(n){this.RichTextEditor.customRte=n},a.prototype.setCustomParserCss=function(n){return this.Parser.getConfig().parserCss=n,this},a.prototype.setDragMode=function(n){return this.em.setDragMode(n),this},a.prototype.log=function(n,t){return t===void 0&&(t={}),this.em.log(n,t),this},a.prototype.t=function(){for(var n,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(n=this.em).t.apply(n,t)},a.prototype.on=function(n,t){return this.em.on(n,t),this},a.prototype.once=function(n,t){return this.em.once(n,t),this},a.prototype.off=function(n,t){return this.em.off(n,t),this},a.prototype.trigger=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.em.trigger.apply(this.em,C0([n],t,!0)),this},a.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},a.prototype.getEl=function(){var n;return(n=this.editorView)===null||n===void 0?void 0:n.el},a.prototype.getModel=function(){return this.em},a.prototype.render=function(){var n;return(n=this.editorView)===null||n===void 0||n.remove(),this.editorView=new b0(this.em),this.editorView.render().el},a.prototype.onReady=function(n){this.em.get("ready")?n(this):this.em.on("load",n)},a}();const S0=x0;var O0=function(a,n){var t=n.get(a);if(!t){var e=(0,J.getGlobal)()[a];t=(e==null?void 0:e.default)||e}return t},th=function(a,n){return(0,O.isString)(a)?O0(a,n):(a==null?void 0:a.default)||a},eh=function(a,n){a.getModel().logWarning("Plugin ".concat(n," not found"),{context:"plugins",plugin:n})},T0=function(){function a(){this.plugins={}}return a.prototype.add=function(n,t){var e=this.get(n);return e||(this.plugins[n]=t,t)},a.prototype.get=function(n){return this.plugins[n]},a.prototype.getAll=function(){return this.plugins},a}();const E0=T0,P0=function(){var a=function(){for(var t,e=window.navigator.userAgent,r=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],i=0;i<r.length;i++){var l=r[i];if(t=l[1].exec(e),t)break}return!!t};if((0,J.hasWin)()&&a()){var n=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(t){return t||(t=""),n.apply(document.implementation,[t])}}};var ef=function(){return ef=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ef.apply(this,arguments)};P0();var Vp=new E0,rh=[],nh=function(a,n){var t=th(a,Vp);return function(e){t?t(e,n||{}):eh(e,a)}},ih={$:k.default,editors:rh,plugins:Vp,usePlugin:nh,version:"0.21.7",init:function(a){a===void 0&&(a={});var n=a.headless,t=a.container;if(!t&&!n)throw new Error("'container' is required");var e=ef(ef({autorender:!0,plugins:[],pluginsOpts:{}},a),{grapesjs:this,el:n?void 0:(0,O.isElement)(t)?t:document.querySelector(t)}),r=new S0(e,{$:k.default}),i=r.getModel();return e.plugins.forEach(function(l){var f=th(l,Vp),d=e.pluginsOpts[l]||{};f?f(r,d):eh(r,l)}),i.loadOnStart(),e.autorender&&!n&&r.render(),rh.push(r),r}};const A0=ih})();var p_=Ch.ZP;const d_={name:"Auth",data(){return{}},mounted(){p_.init({container:"#gjs",showOffsets:!0,fromElement:!0,noticeOnUnload:!1,pageManager:!0,styleManager:{sectors:[{name:"General",open:!1,buildProps:["float","display","position","top","right","left","bottom"]},{name:"Dimension",open:!1,buildProps:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,buildProps:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,buildProps:["border-radius-c","background-color","border-radius","border","box-shadow","background"]},{name:"Background",open:!1,buildProps:["background-color","background"]},{name:"Extra",open:!1,buildProps:["opacity","transition","perspective","transform"],properties:[{type:"slider",property:"opacity",defaults:1,step:.01,max:1,min:0}]},{name:"Flex",open:!1,properties:[{name:"Flex Container",property:"display",type:"select",defaults:"block",list:[{value:"block",name:"Disable"},{value:"flex",name:"Enable"}]},{name:"Flex Parent",property:"label-parent-flex",type:"integer"},{name:"Direction",property:"flex-direction",type:"radio",defaults:"row",list:[{value:"row",name:"Row",className:"icons-flex icon-dir-row",title:"Row"},{value:"row-reverse",name:"Row reverse",className:"icons-flex icon-dir-row-rev",title:"Row reverse"},{value:"column",name:"Column",title:"Column",className:"icons-flex icon-dir-col"},{value:"column-reverse",name:"Column reverse",title:"Column reverse",className:"icons-flex icon-dir-col-rev"}]},{name:"Justify",property:"justify-content",type:"radio",defaults:"flex-start",list:[{value:"flex-start",className:"icons-flex icon-just-start",title:"Start"},{value:"flex-end",title:"End",className:"icons-flex icon-just-end"},{value:"space-between",title:"Space between",className:"icons-flex icon-just-sp-bet"},{value:"space-around",title:"Space around",className:"icons-flex icon-just-sp-ar"},{value:"center",title:"Center",className:"icons-flex icon-just-sp-cent"}]},{name:"Align",property:"align-items",type:"radio",defaults:"center",list:[{value:"flex-start",title:"Start",className:"icons-flex icon-al-start"},{value:"flex-end",title:"End",className:"icons-flex icon-al-end"},{value:"stretch",title:"Stretch",className:"icons-flex icon-al-str"},{value:"center",title:"Center",className:"icons-flex icon-al-center"}]},{name:"Flex Children",property:"label-parent-flex",type:"integer"},{name:"Order",property:"order",type:"integer",defaults:0,min:0},{name:"Flex",property:"flex",type:"composite",properties:[{name:"Grow",property:"flex-grow",type:"integer",defaults:0,min:0},{name:"Shrink",property:"flex-shrink",type:"integer",defaults:0,min:0},{name:"Basis",property:"flex-basis",type:"integer",units:["px","%",""],unit:"",defaults:"auto"}]},{name:"Align",property:"align-self",type:"radio",defaults:"auto",list:[{value:"auto",name:"Auto"},{value:"flex-start",title:"Start",className:"icons-flex icon-al-start"},{value:"flex-end",title:"End",className:"icons-flex icon-al-end"},{value:"stretch",title:"Stretch",className:"icons-flex icon-al-str"},{value:"center",title:"Center",className:"icons-flex icon-al-center"}]}]}]},plugins:["peppu-sidebar","peppu-panel","gjs-blocks-basic","grapesjs-plugin-forms"],pluginsOpts:{"peppu-sidebar":{},"gjs-blocks-basic":{flexGrid:!0}}})}},h_={id:"gjs"};function v_(O,J,ut,st,Lt,et){return u_(),c_("div",h_)}const __=l_(d_,[["render",v_]]);export{__ as default};
